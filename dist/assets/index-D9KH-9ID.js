const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Home-DugxuuqZ.js","assets/SectionHeader-Y8FDDsnX.js","assets/DecryptedText-DmLC_geR.js","assets/SectionHeader-pgqG2CE6.css","assets/Science-COGoO2t9.js","assets/Engineering-CFGj9FJQ.js","assets/Philosophy-sCshC8SS.js","assets/About-DfvNFU4t.js","assets/About-DfvWgrD5.css","assets/Personal-VNFLNNKG.js"])))=>i.map(i=>d[i]);
var Pv=Object.defineProperty;var Mv=(s,e,n)=>e in s?Pv(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var A=(s,e,n)=>Mv(s,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function Cv(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var fx={exports:{}},Hl={},xx={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jr=Symbol.for("react.element"),Lv=Symbol.for("react.portal"),Av=Symbol.for("react.fragment"),zv=Symbol.for("react.strict_mode"),Dv=Symbol.for("react.profiler"),Iv=Symbol.for("react.provider"),Ov=Symbol.for("react.context"),Fv=Symbol.for("react.forward_ref"),Vv=Symbol.for("react.suspense"),Bv=Symbol.for("react.memo"),Wv=Symbol.for("react.lazy"),qd=Symbol.iterator;function Uv(s){return s===null||typeof s!="object"?null:(s=qd&&s[qd]||s["@@iterator"],typeof s=="function"?s:null)}var gx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jx=Object.assign,yx={};function Ti(s,e,n){this.props=s,this.context=e,this.refs=yx,this.updater=n||gx}Ti.prototype.isReactComponent={};Ti.prototype.setState=function(s,e){if(typeof s!="object"&&typeof s!="function"&&s!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,s,e,"setState")};Ti.prototype.forceUpdate=function(s){this.updater.enqueueForceUpdate(this,s,"forceUpdate")};function vx(){}vx.prototype=Ti.prototype;function qh(s,e,n){this.props=s,this.context=e,this.refs=yx,this.updater=n||gx}var Xh=qh.prototype=new vx;Xh.constructor=qh;jx(Xh,Ti.prototype);Xh.isPureReactComponent=!0;var Xd=Array.isArray,Nx=Object.prototype.hasOwnProperty,Kh={current:null},wx={key:!0,ref:!0,__self:!0,__source:!0};function _x(s,e,n){var i,r={},a=null,l=null;if(e!=null)for(i in e.ref!==void 0&&(l=e.ref),e.key!==void 0&&(a=""+e.key),e)Nx.call(e,i)&&!wx.hasOwnProperty(i)&&(r[i]=e[i]);var o=arguments.length-2;if(o===1)r.children=n;else if(1<o){for(var c=Array(o),h=0;h<o;h++)c[h]=arguments[h+2];r.children=c}if(s&&s.defaultProps)for(i in o=s.defaultProps,o)r[i]===void 0&&(r[i]=o[i]);return{$$typeof:Jr,type:s,key:a,ref:l,props:r,_owner:Kh.current}}function Hv(s,e){return{$$typeof:Jr,type:s.type,key:e,ref:s.ref,props:s.props,_owner:s._owner}}function Yh(s){return typeof s=="object"&&s!==null&&s.$$typeof===Jr}function $v(s){var e={"=":"=0",":":"=2"};return"$"+s.replace(/[=:]/g,function(n){return e[n]})}var Kd=/\/+/g;function vo(s,e){return typeof s=="object"&&s!==null&&s.key!=null?$v(""+s.key):e.toString(36)}function Ia(s,e,n,i,r){var a=typeof s;(a==="undefined"||a==="boolean")&&(s=null);var l=!1;if(s===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(s.$$typeof){case Jr:case Lv:l=!0}}if(l)return l=s,r=r(l),s=i===""?"."+vo(l,0):i,Xd(r)?(n="",s!=null&&(n=s.replace(Kd,"$&/")+"/"),Ia(r,e,n,"",function(h){return h})):r!=null&&(Yh(r)&&(r=Hv(r,n+(!r.key||l&&l.key===r.key?"":(""+r.key).replace(Kd,"$&/")+"/")+s)),e.push(r)),1;if(l=0,i=i===""?".":i+":",Xd(s))for(var o=0;o<s.length;o++){a=s[o];var c=i+vo(a,o);l+=Ia(a,e,n,c,r)}else if(c=Uv(s),typeof c=="function")for(s=c.call(s),o=0;!(a=s.next()).done;)a=a.value,c=i+vo(a,o++),l+=Ia(a,e,n,c,r);else if(a==="object")throw e=String(s),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return l}function ua(s,e,n){if(s==null)return s;var i=[],r=0;return Ia(s,i,"","",function(a){return e.call(n,a,r++)}),i}function qv(s){if(s._status===-1){var e=s._result;e=e(),e.then(function(n){(s._status===0||s._status===-1)&&(s._status=1,s._result=n)},function(n){(s._status===0||s._status===-1)&&(s._status=2,s._result=n)}),s._status===-1&&(s._status=0,s._result=e)}if(s._status===1)return s._result.default;throw s._result}var Ke={current:null},Oa={transition:null},Xv={ReactCurrentDispatcher:Ke,ReactCurrentBatchConfig:Oa,ReactCurrentOwner:Kh};function bx(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:ua,forEach:function(s,e,n){ua(s,function(){e.apply(this,arguments)},n)},count:function(s){var e=0;return ua(s,function(){e++}),e},toArray:function(s){return ua(s,function(e){return e})||[]},only:function(s){if(!Yh(s))throw Error("React.Children.only expected to receive a single React element child.");return s}};V.Component=Ti;V.Fragment=Av;V.Profiler=Dv;V.PureComponent=qh;V.StrictMode=zv;V.Suspense=Vv;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Xv;V.act=bx;V.cloneElement=function(s,e,n){if(s==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+s+".");var i=jx({},s.props),r=s.key,a=s.ref,l=s._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,l=Kh.current),e.key!==void 0&&(r=""+e.key),s.type&&s.type.defaultProps)var o=s.type.defaultProps;for(c in e)Nx.call(e,c)&&!wx.hasOwnProperty(c)&&(i[c]=e[c]===void 0&&o!==void 0?o[c]:e[c])}var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){o=Array(c);for(var h=0;h<c;h++)o[h]=arguments[h+2];i.children=o}return{$$typeof:Jr,type:s.type,key:r,ref:a,props:i,_owner:l}};V.createContext=function(s){return s={$$typeof:Ov,_currentValue:s,_currentValue2:s,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},s.Provider={$$typeof:Iv,_context:s},s.Consumer=s};V.createElement=_x;V.createFactory=function(s){var e=_x.bind(null,s);return e.type=s,e};V.createRef=function(){return{current:null}};V.forwardRef=function(s){return{$$typeof:Fv,render:s}};V.isValidElement=Yh;V.lazy=function(s){return{$$typeof:Wv,_payload:{_status:-1,_result:s},_init:qv}};V.memo=function(s,e){return{$$typeof:Bv,type:s,compare:e===void 0?null:e}};V.startTransition=function(s){var e=Oa.transition;Oa.transition={};try{s()}finally{Oa.transition=e}};V.unstable_act=bx;V.useCallback=function(s,e){return Ke.current.useCallback(s,e)};V.useContext=function(s){return Ke.current.useContext(s)};V.useDebugValue=function(){};V.useDeferredValue=function(s){return Ke.current.useDeferredValue(s)};V.useEffect=function(s,e){return Ke.current.useEffect(s,e)};V.useId=function(){return Ke.current.useId()};V.useImperativeHandle=function(s,e,n){return Ke.current.useImperativeHandle(s,e,n)};V.useInsertionEffect=function(s,e){return Ke.current.useInsertionEffect(s,e)};V.useLayoutEffect=function(s,e){return Ke.current.useLayoutEffect(s,e)};V.useMemo=function(s,e){return Ke.current.useMemo(s,e)};V.useReducer=function(s,e,n){return Ke.current.useReducer(s,e,n)};V.useRef=function(s){return Ke.current.useRef(s)};V.useState=function(s){return Ke.current.useState(s)};V.useSyncExternalStore=function(s,e,n){return Ke.current.useSyncExternalStore(s,e,n)};V.useTransition=function(){return Ke.current.useTransition()};V.version="18.3.1";xx.exports=V;var _=xx.exports;const _r=Cv(_);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Kv=_,Yv=Symbol.for("react.element"),Gv=Symbol.for("react.fragment"),Qv=Object.prototype.hasOwnProperty,Zv=Kv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Jv={key:!0,ref:!0,__self:!0,__source:!0};function kx(s,e,n){var i,r={},a=null,l=null;n!==void 0&&(a=""+n),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(l=e.ref);for(i in e)Qv.call(e,i)&&!Jv.hasOwnProperty(i)&&(r[i]=e[i]);if(s&&s.defaultProps)for(i in e=s.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Yv,type:s,key:a,ref:l,props:r,_owner:Zv.current}}Hl.Fragment=Gv;Hl.jsx=kx;Hl.jsxs=kx;fx.exports=Hl;var t=fx.exports,gc={},Sx={exports:{}},gt={},Tx={exports:{}},Rx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(s){function e(E,C){var L=E.length;E.push(C);e:for(;0<L;){var H=L-1>>>1,K=E[H];if(0<r(K,C))E[H]=C,E[L]=K,L=H;else break e}}function n(E){return E.length===0?null:E[0]}function i(E){if(E.length===0)return null;var C=E[0],L=E.pop();if(L!==C){E[0]=L;e:for(var H=0,K=E.length,Ct=K>>>1;H<Ct;){var de=2*(H+1)-1,Pe=E[de],Ue=de+1,we=E[Ue];if(0>r(Pe,L))Ue<K&&0>r(we,Pe)?(E[H]=we,E[Ue]=L,H=Ue):(E[H]=Pe,E[de]=L,H=de);else if(Ue<K&&0>r(we,L))E[H]=we,E[Ue]=L,H=Ue;else break e}}return C}function r(E,C){var L=E.sortIndex-C.sortIndex;return L!==0?L:E.id-C.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;s.unstable_now=function(){return a.now()}}else{var l=Date,o=l.now();s.unstable_now=function(){return l.now()-o}}var c=[],h=[],m=1,d=null,u=3,p=!1,y=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(E){for(var C=n(h);C!==null;){if(C.callback===null)i(h);else if(C.startTime<=E)i(h),C.sortIndex=C.expirationTime,e(c,C);else break;C=n(h)}}function w(E){if(g=!1,j(E),!y)if(n(c)!==null)y=!0,U(N);else{var C=n(h);C!==null&&O(w,C.startTime-E)}}function N(E,C){y=!1,g&&(g=!1,f(k),k=-1),p=!0;var L=u;try{for(j(C),d=n(c);d!==null&&(!(d.expirationTime>C)||E&&!I());){var H=d.callback;if(typeof H=="function"){d.callback=null,u=d.priorityLevel;var K=H(d.expirationTime<=C);C=s.unstable_now(),typeof K=="function"?d.callback=K:d===n(c)&&i(c),j(C)}else i(c);d=n(c)}if(d!==null)var Ct=!0;else{var de=n(h);de!==null&&O(w,de.startTime-C),Ct=!1}return Ct}finally{d=null,u=L,p=!1}}var b=!1,S=null,k=-1,T=5,P=-1;function I(){return!(s.unstable_now()-P<T)}function F(){if(S!==null){var E=s.unstable_now();P=E;var C=!0;try{C=S(!0,E)}finally{C?z():(b=!1,S=null)}}else b=!1}var z;if(typeof x=="function")z=function(){x(F)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,X=Y.port2;Y.port1.onmessage=F,z=function(){X.postMessage(null)}}else z=function(){v(F,0)};function U(E){S=E,b||(b=!0,z())}function O(E,C){k=v(function(){E(s.unstable_now())},C)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(E){E.callback=null},s.unstable_continueExecution=function(){y||p||(y=!0,U(N))},s.unstable_forceFrameRate=function(E){0>E||125<E?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<E?Math.floor(1e3/E):5},s.unstable_getCurrentPriorityLevel=function(){return u},s.unstable_getFirstCallbackNode=function(){return n(c)},s.unstable_next=function(E){switch(u){case 1:case 2:case 3:var C=3;break;default:C=u}var L=u;u=C;try{return E()}finally{u=L}},s.unstable_pauseExecution=function(){},s.unstable_requestPaint=function(){},s.unstable_runWithPriority=function(E,C){switch(E){case 1:case 2:case 3:case 4:case 5:break;default:E=3}var L=u;u=E;try{return C()}finally{u=L}},s.unstable_scheduleCallback=function(E,C,L){var H=s.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?H+L:H):L=H,E){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=L+K,E={id:m++,callback:C,priorityLevel:E,startTime:L,expirationTime:K,sortIndex:-1},L>H?(E.sortIndex=L,e(h,E),n(c)===null&&E===n(h)&&(g?(f(k),k=-1):g=!0,O(w,L-H))):(E.sortIndex=K,e(c,E),y||p||(y=!0,U(N))),E},s.unstable_shouldYield=I,s.unstable_wrapCallback=function(E){var C=u;return function(){var L=u;u=C;try{return E.apply(this,arguments)}finally{u=L}}}})(Rx);Tx.exports=Rx;var eN=Tx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tN=_,ut=eN;function R(s){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+s,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+s+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ex=new Set,br={};function Cn(s,e){di(s,e),di(s+"Capture",e)}function di(s,e){for(br[s]=e,s=0;s<e.length;s++)Ex.add(e[s])}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),jc=Object.prototype.hasOwnProperty,sN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yd={},Gd={};function nN(s){return jc.call(Gd,s)?!0:jc.call(Yd,s)?!1:sN.test(s)?Gd[s]=!0:(Yd[s]=!0,!1)}function iN(s,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function rN(s,e,n,i){if(e===null||typeof e>"u"||iN(s,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ye(s,e,n,i,r,a,l){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=s,this.type=e,this.sanitizeURL=a,this.removeEmptyString=l}var Ae={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){Ae[s]=new Ye(s,0,!1,s,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var e=s[0];Ae[e]=new Ye(e,1,!1,s[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(s){Ae[s]=new Ye(s,2,!1,s.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){Ae[s]=new Ye(s,2,!1,s,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){Ae[s]=new Ye(s,3,!1,s.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(s){Ae[s]=new Ye(s,3,!0,s,null,!1,!1)});["capture","download"].forEach(function(s){Ae[s]=new Ye(s,4,!1,s,null,!1,!1)});["cols","rows","size","span"].forEach(function(s){Ae[s]=new Ye(s,6,!1,s,null,!1,!1)});["rowSpan","start"].forEach(function(s){Ae[s]=new Ye(s,5,!1,s.toLowerCase(),null,!1,!1)});var Gh=/[\-:]([a-z])/g;function Qh(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var e=s.replace(Gh,Qh);Ae[e]=new Ye(e,1,!1,s,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var e=s.replace(Gh,Qh);Ae[e]=new Ye(e,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(s){var e=s.replace(Gh,Qh);Ae[e]=new Ye(e,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(s){Ae[s]=new Ye(s,1,!1,s.toLowerCase(),null,!1,!1)});Ae.xlinkHref=new Ye("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(s){Ae[s]=new Ye(s,1,!1,s.toLowerCase(),null,!0,!0)});function Zh(s,e,n,i){var r=Ae.hasOwnProperty(e)?Ae[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(rN(e,n,r,i)&&(n=null),i||r===null?nN(e)&&(n===null?s.removeAttribute(e):s.setAttribute(e,""+n)):r.mustUseProperty?s[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?s.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?s.setAttributeNS(i,e,n):s.setAttribute(e,n))))}var ws=tN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pa=Symbol.for("react.element"),On=Symbol.for("react.portal"),Fn=Symbol.for("react.fragment"),Jh=Symbol.for("react.strict_mode"),yc=Symbol.for("react.profiler"),Px=Symbol.for("react.provider"),Mx=Symbol.for("react.context"),em=Symbol.for("react.forward_ref"),vc=Symbol.for("react.suspense"),Nc=Symbol.for("react.suspense_list"),tm=Symbol.for("react.memo"),Ts=Symbol.for("react.lazy"),Cx=Symbol.for("react.offscreen"),Qd=Symbol.iterator;function Ii(s){return s===null||typeof s!="object"?null:(s=Qd&&s[Qd]||s["@@iterator"],typeof s=="function"?s:null)}var me=Object.assign,No;function Yi(s){if(No===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);No=e&&e[1]||""}return`
`+No+s}var wo=!1;function _o(s,e){if(!s||wo)return"";wo=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var i=h}Reflect.construct(s,[],e)}else{try{e.call()}catch(h){i=h}s.call(e.prototype)}else{try{throw Error()}catch(h){i=h}s()}}catch(h){if(h&&i&&typeof h.stack=="string"){for(var r=h.stack.split(`
`),a=i.stack.split(`
`),l=r.length-1,o=a.length-1;1<=l&&0<=o&&r[l]!==a[o];)o--;for(;1<=l&&0<=o;l--,o--)if(r[l]!==a[o]){if(l!==1||o!==1)do if(l--,o--,0>o||r[l]!==a[o]){var c=`
`+r[l].replace(" at new "," at ");return s.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",s.displayName)),c}while(1<=l&&0<=o);break}}}finally{wo=!1,Error.prepareStackTrace=n}return(s=s?s.displayName||s.name:"")?Yi(s):""}function aN(s){switch(s.tag){case 5:return Yi(s.type);case 16:return Yi("Lazy");case 13:return Yi("Suspense");case 19:return Yi("SuspenseList");case 0:case 2:case 15:return s=_o(s.type,!1),s;case 11:return s=_o(s.type.render,!1),s;case 1:return s=_o(s.type,!0),s;default:return""}}function wc(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case Fn:return"Fragment";case On:return"Portal";case yc:return"Profiler";case Jh:return"StrictMode";case vc:return"Suspense";case Nc:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case Mx:return(s.displayName||"Context")+".Consumer";case Px:return(s._context.displayName||"Context")+".Provider";case em:var e=s.render;return s=s.displayName,s||(s=e.displayName||e.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case tm:return e=s.displayName||null,e!==null?e:wc(s.type)||"Memo";case Ts:e=s._payload,s=s._init;try{return wc(s(e))}catch{}}return null}function lN(s){var e=s.type;switch(s.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=e.render,s=s.displayName||s.name||"",e.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wc(e);case 8:return e===Jh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Xs(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Lx(s){var e=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function oN(s){var e=Lx(s)?"checked":"value",n=Object.getOwnPropertyDescriptor(s.constructor.prototype,e),i=""+s[e];if(!s.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,a=n.set;return Object.defineProperty(s,e,{configurable:!0,get:function(){return r.call(this)},set:function(l){i=""+l,a.call(this,l)}}),Object.defineProperty(s,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(l){i=""+l},stopTracking:function(){s._valueTracker=null,delete s[e]}}}}function fa(s){s._valueTracker||(s._valueTracker=oN(s))}function Ax(s){if(!s)return!1;var e=s._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return s&&(i=Lx(s)?s.checked?"true":"false":s.value),s=i,s!==n?(e.setValue(s),!0):!1}function rl(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function _c(s,e){var n=e.checked;return me({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??s._wrapperState.initialChecked})}function Zd(s,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Xs(e.value!=null?e.value:n),s._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function zx(s,e){e=e.checked,e!=null&&Zh(s,"checked",e,!1)}function bc(s,e){zx(s,e);var n=Xs(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&s.value===""||s.value!=n)&&(s.value=""+n):s.value!==""+n&&(s.value=""+n);else if(i==="submit"||i==="reset"){s.removeAttribute("value");return}e.hasOwnProperty("value")?kc(s,e.type,n):e.hasOwnProperty("defaultValue")&&kc(s,e.type,Xs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(s.defaultChecked=!!e.defaultChecked)}function Jd(s,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+s._wrapperState.initialValue,n||e===s.value||(s.value=e),s.defaultValue=e}n=s.name,n!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,n!==""&&(s.name=n)}function kc(s,e,n){(e!=="number"||rl(s.ownerDocument)!==s)&&(n==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+n&&(s.defaultValue=""+n))}var Gi=Array.isArray;function ni(s,e,n,i){if(s=s.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<s.length;n++)r=e.hasOwnProperty("$"+s[n].value),s[n].selected!==r&&(s[n].selected=r),r&&i&&(s[n].defaultSelected=!0)}else{for(n=""+Xs(n),e=null,r=0;r<s.length;r++){if(s[r].value===n){s[r].selected=!0,i&&(s[r].defaultSelected=!0);return}e!==null||s[r].disabled||(e=s[r])}e!==null&&(e.selected=!0)}}function Sc(s,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return me({},e,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function eu(s,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(R(92));if(Gi(n)){if(1<n.length)throw Error(R(93));n=n[0]}e=n}e==null&&(e=""),n=e}s._wrapperState={initialValue:Xs(n)}}function Dx(s,e){var n=Xs(e.value),i=Xs(e.defaultValue);n!=null&&(n=""+n,n!==s.value&&(s.value=n),e.defaultValue==null&&s.defaultValue!==n&&(s.defaultValue=n)),i!=null&&(s.defaultValue=""+i)}function tu(s){var e=s.textContent;e===s._wrapperState.initialValue&&e!==""&&e!==null&&(s.value=e)}function Ix(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tc(s,e){return s==null||s==="http://www.w3.org/1999/xhtml"?Ix(e):s==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var xa,Ox=function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return s(e,n,i,r)})}:s}(function(s,e){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=e;else{for(xa=xa||document.createElement("div"),xa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xa.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;e.firstChild;)s.appendChild(e.firstChild)}});function kr(s,e){if(e){var n=s.firstChild;if(n&&n===s.lastChild&&n.nodeType===3){n.nodeValue=e;return}}s.textContent=e}var rr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},cN=["Webkit","ms","Moz","O"];Object.keys(rr).forEach(function(s){cN.forEach(function(e){e=e+s.charAt(0).toUpperCase()+s.substring(1),rr[e]=rr[s]})});function Fx(s,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||rr.hasOwnProperty(s)&&rr[s]?(""+e).trim():e+"px"}function Vx(s,e){s=s.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=Fx(n,e[n],i);n==="float"&&(n="cssFloat"),i?s.setProperty(n,r):s[n]=r}}var hN=me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Rc(s,e){if(e){if(hN[s]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,s));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function Ec(s,e){if(s.indexOf("-")===-1)return typeof e.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pc=null;function sm(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Mc=null,ii=null,ri=null;function su(s){if(s=sa(s)){if(typeof Mc!="function")throw Error(R(280));var e=s.stateNode;e&&(e=Yl(e),Mc(s.stateNode,s.type,e))}}function Bx(s){ii?ri?ri.push(s):ri=[s]:ii=s}function Wx(){if(ii){var s=ii,e=ri;if(ri=ii=null,su(s),e)for(s=0;s<e.length;s++)su(e[s])}}function Ux(s,e){return s(e)}function Hx(){}var bo=!1;function $x(s,e,n){if(bo)return s(e,n);bo=!0;try{return Ux(s,e,n)}finally{bo=!1,(ii!==null||ri!==null)&&(Hx(),Wx())}}function Sr(s,e){var n=s.stateNode;if(n===null)return null;var i=Yl(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(s=s.type,i=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!i;break e;default:s=!1}if(s)return null;if(n&&typeof n!="function")throw Error(R(231,e,typeof n));return n}var Cc=!1;if(fs)try{var Oi={};Object.defineProperty(Oi,"passive",{get:function(){Cc=!0}}),window.addEventListener("test",Oi,Oi),window.removeEventListener("test",Oi,Oi)}catch{Cc=!1}function mN(s,e,n,i,r,a,l,o,c){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(m){this.onError(m)}}var ar=!1,al=null,ll=!1,Lc=null,dN={onError:function(s){ar=!0,al=s}};function uN(s,e,n,i,r,a,l,o,c){ar=!1,al=null,mN.apply(dN,arguments)}function pN(s,e,n,i,r,a,l,o,c){if(uN.apply(this,arguments),ar){if(ar){var h=al;ar=!1,al=null}else throw Error(R(198));ll||(ll=!0,Lc=h)}}function Ln(s){var e=s,n=s;if(s.alternate)for(;e.return;)e=e.return;else{s=e;do e=s,e.flags&4098&&(n=e.return),s=e.return;while(s)}return e.tag===3?n:null}function qx(s){if(s.tag===13){var e=s.memoizedState;if(e===null&&(s=s.alternate,s!==null&&(e=s.memoizedState)),e!==null)return e.dehydrated}return null}function nu(s){if(Ln(s)!==s)throw Error(R(188))}function fN(s){var e=s.alternate;if(!e){if(e=Ln(s),e===null)throw Error(R(188));return e!==s?null:s}for(var n=s,i=e;;){var r=n.return;if(r===null)break;var a=r.alternate;if(a===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return nu(r),s;if(a===i)return nu(r),e;a=a.sibling}throw Error(R(188))}if(n.return!==i.return)n=r,i=a;else{for(var l=!1,o=r.child;o;){if(o===n){l=!0,n=r,i=a;break}if(o===i){l=!0,i=r,n=a;break}o=o.sibling}if(!l){for(o=a.child;o;){if(o===n){l=!0,n=a,i=r;break}if(o===i){l=!0,i=a,n=r;break}o=o.sibling}if(!l)throw Error(R(189))}}if(n.alternate!==i)throw Error(R(190))}if(n.tag!==3)throw Error(R(188));return n.stateNode.current===n?s:e}function Xx(s){return s=fN(s),s!==null?Kx(s):null}function Kx(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var e=Kx(s);if(e!==null)return e;s=s.sibling}return null}var Yx=ut.unstable_scheduleCallback,iu=ut.unstable_cancelCallback,xN=ut.unstable_shouldYield,gN=ut.unstable_requestPaint,je=ut.unstable_now,jN=ut.unstable_getCurrentPriorityLevel,nm=ut.unstable_ImmediatePriority,Gx=ut.unstable_UserBlockingPriority,ol=ut.unstable_NormalPriority,yN=ut.unstable_LowPriority,Qx=ut.unstable_IdlePriority,$l=null,Gt=null;function vN(s){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot($l,s,void 0,(s.current.flags&128)===128)}catch{}}var Ot=Math.clz32?Math.clz32:_N,NN=Math.log,wN=Math.LN2;function _N(s){return s>>>=0,s===0?32:31-(NN(s)/wN|0)|0}var ga=64,ja=4194304;function Qi(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function cl(s,e){var n=s.pendingLanes;if(n===0)return 0;var i=0,r=s.suspendedLanes,a=s.pingedLanes,l=n&268435455;if(l!==0){var o=l&~r;o!==0?i=Qi(o):(a&=l,a!==0&&(i=Qi(a)))}else l=n&~r,l!==0?i=Qi(l):a!==0&&(i=Qi(a));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,a=e&-e,r>=a||r===16&&(a&4194240)!==0))return e;if(i&4&&(i|=n&16),e=s.entangledLanes,e!==0)for(s=s.entanglements,e&=i;0<e;)n=31-Ot(e),r=1<<n,i|=s[n],e&=~r;return i}function bN(s,e){switch(s){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kN(s,e){for(var n=s.suspendedLanes,i=s.pingedLanes,r=s.expirationTimes,a=s.pendingLanes;0<a;){var l=31-Ot(a),o=1<<l,c=r[l];c===-1?(!(o&n)||o&i)&&(r[l]=bN(o,e)):c<=e&&(s.expiredLanes|=o),a&=~o}}function Ac(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Zx(){var s=ga;return ga<<=1,!(ga&4194240)&&(ga=64),s}function ko(s){for(var e=[],n=0;31>n;n++)e.push(s);return e}function ea(s,e,n){s.pendingLanes|=e,e!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,e=31-Ot(e),s[e]=n}function SN(s,e){var n=s.pendingLanes&~e;s.pendingLanes=e,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=e,s.mutableReadLanes&=e,s.entangledLanes&=e,e=s.entanglements;var i=s.eventTimes;for(s=s.expirationTimes;0<n;){var r=31-Ot(n),a=1<<r;e[r]=0,i[r]=-1,s[r]=-1,n&=~a}}function im(s,e){var n=s.entangledLanes|=e;for(s=s.entanglements;n;){var i=31-Ot(n),r=1<<i;r&e|s[i]&e&&(s[i]|=e),n&=~r}}var G=0;function Jx(s){return s&=-s,1<s?4<s?s&268435455?16:536870912:4:1}var eg,rm,tg,sg,ng,zc=!1,ya=[],Is=null,Os=null,Fs=null,Tr=new Map,Rr=new Map,Es=[],TN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ru(s,e){switch(s){case"focusin":case"focusout":Is=null;break;case"dragenter":case"dragleave":Os=null;break;case"mouseover":case"mouseout":Fs=null;break;case"pointerover":case"pointerout":Tr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rr.delete(e.pointerId)}}function Fi(s,e,n,i,r,a){return s===null||s.nativeEvent!==a?(s={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},e!==null&&(e=sa(e),e!==null&&rm(e)),s):(s.eventSystemFlags|=i,e=s.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),s)}function RN(s,e,n,i,r){switch(e){case"focusin":return Is=Fi(Is,s,e,n,i,r),!0;case"dragenter":return Os=Fi(Os,s,e,n,i,r),!0;case"mouseover":return Fs=Fi(Fs,s,e,n,i,r),!0;case"pointerover":var a=r.pointerId;return Tr.set(a,Fi(Tr.get(a)||null,s,e,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Rr.set(a,Fi(Rr.get(a)||null,s,e,n,i,r)),!0}return!1}function ig(s){var e=dn(s.target);if(e!==null){var n=Ln(e);if(n!==null){if(e=n.tag,e===13){if(e=qx(n),e!==null){s.blockedOn=e,ng(s.priority,function(){tg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){s.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Fa(s){if(s.blockedOn!==null)return!1;for(var e=s.targetContainers;0<e.length;){var n=Dc(s.domEventName,s.eventSystemFlags,e[0],s.nativeEvent);if(n===null){n=s.nativeEvent;var i=new n.constructor(n.type,n);Pc=i,n.target.dispatchEvent(i),Pc=null}else return e=sa(n),e!==null&&rm(e),s.blockedOn=n,!1;e.shift()}return!0}function au(s,e,n){Fa(s)&&n.delete(e)}function EN(){zc=!1,Is!==null&&Fa(Is)&&(Is=null),Os!==null&&Fa(Os)&&(Os=null),Fs!==null&&Fa(Fs)&&(Fs=null),Tr.forEach(au),Rr.forEach(au)}function Vi(s,e){s.blockedOn===e&&(s.blockedOn=null,zc||(zc=!0,ut.unstable_scheduleCallback(ut.unstable_NormalPriority,EN)))}function Er(s){function e(r){return Vi(r,s)}if(0<ya.length){Vi(ya[0],s);for(var n=1;n<ya.length;n++){var i=ya[n];i.blockedOn===s&&(i.blockedOn=null)}}for(Is!==null&&Vi(Is,s),Os!==null&&Vi(Os,s),Fs!==null&&Vi(Fs,s),Tr.forEach(e),Rr.forEach(e),n=0;n<Es.length;n++)i=Es[n],i.blockedOn===s&&(i.blockedOn=null);for(;0<Es.length&&(n=Es[0],n.blockedOn===null);)ig(n),n.blockedOn===null&&Es.shift()}var ai=ws.ReactCurrentBatchConfig,hl=!0;function PN(s,e,n,i){var r=G,a=ai.transition;ai.transition=null;try{G=1,am(s,e,n,i)}finally{G=r,ai.transition=a}}function MN(s,e,n,i){var r=G,a=ai.transition;ai.transition=null;try{G=4,am(s,e,n,i)}finally{G=r,ai.transition=a}}function am(s,e,n,i){if(hl){var r=Dc(s,e,n,i);if(r===null)zo(s,e,i,ml,n),ru(s,i);else if(RN(r,s,e,n,i))i.stopPropagation();else if(ru(s,i),e&4&&-1<TN.indexOf(s)){for(;r!==null;){var a=sa(r);if(a!==null&&eg(a),a=Dc(s,e,n,i),a===null&&zo(s,e,i,ml,n),a===r)break;r=a}r!==null&&i.stopPropagation()}else zo(s,e,i,null,n)}}var ml=null;function Dc(s,e,n,i){if(ml=null,s=sm(i),s=dn(s),s!==null)if(e=Ln(s),e===null)s=null;else if(n=e.tag,n===13){if(s=qx(e),s!==null)return s;s=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;s=null}else e!==s&&(s=null);return ml=s,null}function rg(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(jN()){case nm:return 1;case Gx:return 4;case ol:case yN:return 16;case Qx:return 536870912;default:return 16}default:return 16}}var Ms=null,lm=null,Va=null;function ag(){if(Va)return Va;var s,e=lm,n=e.length,i,r="value"in Ms?Ms.value:Ms.textContent,a=r.length;for(s=0;s<n&&e[s]===r[s];s++);var l=n-s;for(i=1;i<=l&&e[n-i]===r[a-i];i++);return Va=r.slice(s,1<i?1-i:void 0)}function Ba(s){var e=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&e===13&&(s=13)):s=e,s===10&&(s=13),32<=s||s===13?s:0}function va(){return!0}function lu(){return!1}function jt(s){function e(n,i,r,a,l){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var o in s)s.hasOwnProperty(o)&&(n=s[o],this[o]=n?n(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?va:lu,this.isPropagationStopped=lu,this}return me(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=va)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=va)},persist:function(){},isPersistent:va}),e}var Ri={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},om=jt(Ri),ta=me({},Ri,{view:0,detail:0}),CN=jt(ta),So,To,Bi,ql=me({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cm,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Bi&&(Bi&&s.type==="mousemove"?(So=s.screenX-Bi.screenX,To=s.screenY-Bi.screenY):To=So=0,Bi=s),So)},movementY:function(s){return"movementY"in s?s.movementY:To}}),ou=jt(ql),LN=me({},ql,{dataTransfer:0}),AN=jt(LN),zN=me({},ta,{relatedTarget:0}),Ro=jt(zN),DN=me({},Ri,{animationName:0,elapsedTime:0,pseudoElement:0}),IN=jt(DN),ON=me({},Ri,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),FN=jt(ON),VN=me({},Ri,{data:0}),cu=jt(VN),BN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},UN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function HN(s){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(s):(s=UN[s])?!!e[s]:!1}function cm(){return HN}var $N=me({},ta,{key:function(s){if(s.key){var e=BN[s.key]||s.key;if(e!=="Unidentified")return e}return s.type==="keypress"?(s=Ba(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?WN[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cm,charCode:function(s){return s.type==="keypress"?Ba(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ba(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),qN=jt($N),XN=me({},ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hu=jt(XN),KN=me({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cm}),YN=jt(KN),GN=me({},Ri,{propertyName:0,elapsedTime:0,pseudoElement:0}),QN=jt(GN),ZN=me({},ql,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),JN=jt(ZN),ew=[9,13,27,32],hm=fs&&"CompositionEvent"in window,lr=null;fs&&"documentMode"in document&&(lr=document.documentMode);var tw=fs&&"TextEvent"in window&&!lr,lg=fs&&(!hm||lr&&8<lr&&11>=lr),mu=" ",du=!1;function og(s,e){switch(s){case"keyup":return ew.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cg(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Vn=!1;function sw(s,e){switch(s){case"compositionend":return cg(e);case"keypress":return e.which!==32?null:(du=!0,mu);case"textInput":return s=e.data,s===mu&&du?null:s;default:return null}}function nw(s,e){if(Vn)return s==="compositionend"||!hm&&og(s,e)?(s=ag(),Va=lm=Ms=null,Vn=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lg&&e.locale!=="ko"?null:e.data;default:return null}}var iw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uu(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e==="input"?!!iw[s.type]:e==="textarea"}function hg(s,e,n,i){Bx(i),e=dl(e,"onChange"),0<e.length&&(n=new om("onChange","change",null,n,i),s.push({event:n,listeners:e}))}var or=null,Pr=null;function rw(s){Ng(s,0)}function Xl(s){var e=Un(s);if(Ax(e))return s}function aw(s,e){if(s==="change")return e}var mg=!1;if(fs){var Eo;if(fs){var Po="oninput"in document;if(!Po){var pu=document.createElement("div");pu.setAttribute("oninput","return;"),Po=typeof pu.oninput=="function"}Eo=Po}else Eo=!1;mg=Eo&&(!document.documentMode||9<document.documentMode)}function fu(){or&&(or.detachEvent("onpropertychange",dg),Pr=or=null)}function dg(s){if(s.propertyName==="value"&&Xl(Pr)){var e=[];hg(e,Pr,s,sm(s)),$x(rw,e)}}function lw(s,e,n){s==="focusin"?(fu(),or=e,Pr=n,or.attachEvent("onpropertychange",dg)):s==="focusout"&&fu()}function ow(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Xl(Pr)}function cw(s,e){if(s==="click")return Xl(e)}function hw(s,e){if(s==="input"||s==="change")return Xl(e)}function mw(s,e){return s===e&&(s!==0||1/s===1/e)||s!==s&&e!==e}var Vt=typeof Object.is=="function"?Object.is:mw;function Mr(s,e){if(Vt(s,e))return!0;if(typeof s!="object"||s===null||typeof e!="object"||e===null)return!1;var n=Object.keys(s),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!jc.call(e,r)||!Vt(s[r],e[r]))return!1}return!0}function xu(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function gu(s,e){var n=xu(s);s=0;for(var i;n;){if(n.nodeType===3){if(i=s+n.textContent.length,s<=e&&i>=e)return{node:n,offset:e-s};s=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=xu(n)}}function ug(s,e){return s&&e?s===e?!0:s&&s.nodeType===3?!1:e&&e.nodeType===3?ug(s,e.parentNode):"contains"in s?s.contains(e):s.compareDocumentPosition?!!(s.compareDocumentPosition(e)&16):!1:!1}function pg(){for(var s=window,e=rl();e instanceof s.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)s=e.contentWindow;else break;e=rl(s.document)}return e}function mm(s){var e=s&&s.nodeName&&s.nodeName.toLowerCase();return e&&(e==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||e==="textarea"||s.contentEditable==="true")}function dw(s){var e=pg(),n=s.focusedElem,i=s.selectionRange;if(e!==n&&n&&n.ownerDocument&&ug(n.ownerDocument.documentElement,n)){if(i!==null&&mm(n)){if(e=i.start,s=i.end,s===void 0&&(s=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(s,n.value.length);else if(s=(e=n.ownerDocument||document)&&e.defaultView||window,s.getSelection){s=s.getSelection();var r=n.textContent.length,a=Math.min(i.start,r);i=i.end===void 0?a:Math.min(i.end,r),!s.extend&&a>i&&(r=i,i=a,a=r),r=gu(n,a);var l=gu(n,i);r&&l&&(s.rangeCount!==1||s.anchorNode!==r.node||s.anchorOffset!==r.offset||s.focusNode!==l.node||s.focusOffset!==l.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),s.removeAllRanges(),a>i?(s.addRange(e),s.extend(l.node,l.offset)):(e.setEnd(l.node,l.offset),s.addRange(e)))}}for(e=[],s=n;s=s.parentNode;)s.nodeType===1&&e.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)s=e[n],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var uw=fs&&"documentMode"in document&&11>=document.documentMode,Bn=null,Ic=null,cr=null,Oc=!1;function ju(s,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Oc||Bn==null||Bn!==rl(i)||(i=Bn,"selectionStart"in i&&mm(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),cr&&Mr(cr,i)||(cr=i,i=dl(Ic,"onSelect"),0<i.length&&(e=new om("onSelect","select",null,e,n),s.push({event:e,listeners:i}),e.target=Bn)))}function Na(s,e){var n={};return n[s.toLowerCase()]=e.toLowerCase(),n["Webkit"+s]="webkit"+e,n["Moz"+s]="moz"+e,n}var Wn={animationend:Na("Animation","AnimationEnd"),animationiteration:Na("Animation","AnimationIteration"),animationstart:Na("Animation","AnimationStart"),transitionend:Na("Transition","TransitionEnd")},Mo={},fg={};fs&&(fg=document.createElement("div").style,"AnimationEvent"in window||(delete Wn.animationend.animation,delete Wn.animationiteration.animation,delete Wn.animationstart.animation),"TransitionEvent"in window||delete Wn.transitionend.transition);function Kl(s){if(Mo[s])return Mo[s];if(!Wn[s])return s;var e=Wn[s],n;for(n in e)if(e.hasOwnProperty(n)&&n in fg)return Mo[s]=e[n];return s}var xg=Kl("animationend"),gg=Kl("animationiteration"),jg=Kl("animationstart"),yg=Kl("transitionend"),vg=new Map,yu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zs(s,e){vg.set(s,e),Cn(e,[s])}for(var Co=0;Co<yu.length;Co++){var Lo=yu[Co],pw=Lo.toLowerCase(),fw=Lo[0].toUpperCase()+Lo.slice(1);Zs(pw,"on"+fw)}Zs(xg,"onAnimationEnd");Zs(gg,"onAnimationIteration");Zs(jg,"onAnimationStart");Zs("dblclick","onDoubleClick");Zs("focusin","onFocus");Zs("focusout","onBlur");Zs(yg,"onTransitionEnd");di("onMouseEnter",["mouseout","mouseover"]);di("onMouseLeave",["mouseout","mouseover"]);di("onPointerEnter",["pointerout","pointerover"]);di("onPointerLeave",["pointerout","pointerover"]);Cn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),xw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zi));function vu(s,e,n){var i=s.type||"unknown-event";s.currentTarget=n,pN(i,e,void 0,s),s.currentTarget=null}function Ng(s,e){e=(e&4)!==0;for(var n=0;n<s.length;n++){var i=s[n],r=i.event;i=i.listeners;e:{var a=void 0;if(e)for(var l=i.length-1;0<=l;l--){var o=i[l],c=o.instance,h=o.currentTarget;if(o=o.listener,c!==a&&r.isPropagationStopped())break e;vu(r,o,h),a=c}else for(l=0;l<i.length;l++){if(o=i[l],c=o.instance,h=o.currentTarget,o=o.listener,c!==a&&r.isPropagationStopped())break e;vu(r,o,h),a=c}}}if(ll)throw s=Lc,ll=!1,Lc=null,s}function te(s,e){var n=e[Uc];n===void 0&&(n=e[Uc]=new Set);var i=s+"__bubble";n.has(i)||(wg(e,s,2,!1),n.add(i))}function Ao(s,e,n){var i=0;e&&(i|=4),wg(n,s,i,e)}var wa="_reactListening"+Math.random().toString(36).slice(2);function Cr(s){if(!s[wa]){s[wa]=!0,Ex.forEach(function(n){n!=="selectionchange"&&(xw.has(n)||Ao(n,!1,s),Ao(n,!0,s))});var e=s.nodeType===9?s:s.ownerDocument;e===null||e[wa]||(e[wa]=!0,Ao("selectionchange",!1,e))}}function wg(s,e,n,i){switch(rg(e)){case 1:var r=PN;break;case 4:r=MN;break;default:r=am}n=r.bind(null,e,n,s),r=void 0,!Cc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?s.addEventListener(e,n,{capture:!0,passive:r}):s.addEventListener(e,n,!0):r!==void 0?s.addEventListener(e,n,{passive:r}):s.addEventListener(e,n,!1)}function zo(s,e,n,i,r){var a=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var l=i.tag;if(l===3||l===4){var o=i.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(l===4)for(l=i.return;l!==null;){var c=l.tag;if((c===3||c===4)&&(c=l.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;l=l.return}for(;o!==null;){if(l=dn(o),l===null)return;if(c=l.tag,c===5||c===6){i=a=l;continue e}o=o.parentNode}}i=i.return}$x(function(){var h=a,m=sm(n),d=[];e:{var u=vg.get(s);if(u!==void 0){var p=om,y=s;switch(s){case"keypress":if(Ba(n)===0)break e;case"keydown":case"keyup":p=qN;break;case"focusin":y="focus",p=Ro;break;case"focusout":y="blur",p=Ro;break;case"beforeblur":case"afterblur":p=Ro;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=ou;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=AN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=YN;break;case xg:case gg:case jg:p=IN;break;case yg:p=QN;break;case"scroll":p=CN;break;case"wheel":p=JN;break;case"copy":case"cut":case"paste":p=FN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=hu}var g=(e&4)!==0,v=!g&&s==="scroll",f=g?u!==null?u+"Capture":null:u;g=[];for(var x=h,j;x!==null;){j=x;var w=j.stateNode;if(j.tag===5&&w!==null&&(j=w,f!==null&&(w=Sr(x,f),w!=null&&g.push(Lr(x,w,j)))),v)break;x=x.return}0<g.length&&(u=new p(u,y,null,n,m),d.push({event:u,listeners:g}))}}if(!(e&7)){e:{if(u=s==="mouseover"||s==="pointerover",p=s==="mouseout"||s==="pointerout",u&&n!==Pc&&(y=n.relatedTarget||n.fromElement)&&(dn(y)||y[xs]))break e;if((p||u)&&(u=m.window===m?m:(u=m.ownerDocument)?u.defaultView||u.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=h,y=y?dn(y):null,y!==null&&(v=Ln(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=h),p!==y)){if(g=ou,w="onMouseLeave",f="onMouseEnter",x="mouse",(s==="pointerout"||s==="pointerover")&&(g=hu,w="onPointerLeave",f="onPointerEnter",x="pointer"),v=p==null?u:Un(p),j=y==null?u:Un(y),u=new g(w,x+"leave",p,n,m),u.target=v,u.relatedTarget=j,w=null,dn(m)===h&&(g=new g(f,x+"enter",y,n,m),g.target=j,g.relatedTarget=v,w=g),v=w,p&&y)t:{for(g=p,f=y,x=0,j=g;j;j=Dn(j))x++;for(j=0,w=f;w;w=Dn(w))j++;for(;0<x-j;)g=Dn(g),x--;for(;0<j-x;)f=Dn(f),j--;for(;x--;){if(g===f||f!==null&&g===f.alternate)break t;g=Dn(g),f=Dn(f)}g=null}else g=null;p!==null&&Nu(d,u,p,g,!1),y!==null&&v!==null&&Nu(d,v,y,g,!0)}}e:{if(u=h?Un(h):window,p=u.nodeName&&u.nodeName.toLowerCase(),p==="select"||p==="input"&&u.type==="file")var N=aw;else if(uu(u))if(mg)N=hw;else{N=ow;var b=lw}else(p=u.nodeName)&&p.toLowerCase()==="input"&&(u.type==="checkbox"||u.type==="radio")&&(N=cw);if(N&&(N=N(s,h))){hg(d,N,n,m);break e}b&&b(s,u,h),s==="focusout"&&(b=u._wrapperState)&&b.controlled&&u.type==="number"&&kc(u,"number",u.value)}switch(b=h?Un(h):window,s){case"focusin":(uu(b)||b.contentEditable==="true")&&(Bn=b,Ic=h,cr=null);break;case"focusout":cr=Ic=Bn=null;break;case"mousedown":Oc=!0;break;case"contextmenu":case"mouseup":case"dragend":Oc=!1,ju(d,n,m);break;case"selectionchange":if(uw)break;case"keydown":case"keyup":ju(d,n,m)}var S;if(hm)e:{switch(s){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Vn?og(s,n)&&(k="onCompositionEnd"):s==="keydown"&&n.keyCode===229&&(k="onCompositionStart");k&&(lg&&n.locale!=="ko"&&(Vn||k!=="onCompositionStart"?k==="onCompositionEnd"&&Vn&&(S=ag()):(Ms=m,lm="value"in Ms?Ms.value:Ms.textContent,Vn=!0)),b=dl(h,k),0<b.length&&(k=new cu(k,s,null,n,m),d.push({event:k,listeners:b}),S?k.data=S:(S=cg(n),S!==null&&(k.data=S)))),(S=tw?sw(s,n):nw(s,n))&&(h=dl(h,"onBeforeInput"),0<h.length&&(m=new cu("onBeforeInput","beforeinput",null,n,m),d.push({event:m,listeners:h}),m.data=S))}Ng(d,e)})}function Lr(s,e,n){return{instance:s,listener:e,currentTarget:n}}function dl(s,e){for(var n=e+"Capture",i=[];s!==null;){var r=s,a=r.stateNode;r.tag===5&&a!==null&&(r=a,a=Sr(s,n),a!=null&&i.unshift(Lr(s,a,r)),a=Sr(s,e),a!=null&&i.push(Lr(s,a,r))),s=s.return}return i}function Dn(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function Nu(s,e,n,i,r){for(var a=e._reactName,l=[];n!==null&&n!==i;){var o=n,c=o.alternate,h=o.stateNode;if(c!==null&&c===i)break;o.tag===5&&h!==null&&(o=h,r?(c=Sr(n,a),c!=null&&l.unshift(Lr(n,c,o))):r||(c=Sr(n,a),c!=null&&l.push(Lr(n,c,o)))),n=n.return}l.length!==0&&s.push({event:e,listeners:l})}var gw=/\r\n?/g,jw=/\u0000|\uFFFD/g;function wu(s){return(typeof s=="string"?s:""+s).replace(gw,`
`).replace(jw,"")}function _a(s,e,n){if(e=wu(e),wu(s)!==e&&n)throw Error(R(425))}function ul(){}var Fc=null,Vc=null;function Bc(s,e){return s==="textarea"||s==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Wc=typeof setTimeout=="function"?setTimeout:void 0,yw=typeof clearTimeout=="function"?clearTimeout:void 0,_u=typeof Promise=="function"?Promise:void 0,vw=typeof queueMicrotask=="function"?queueMicrotask:typeof _u<"u"?function(s){return _u.resolve(null).then(s).catch(Nw)}:Wc;function Nw(s){setTimeout(function(){throw s})}function Do(s,e){var n=e,i=0;do{var r=n.nextSibling;if(s.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){s.removeChild(r),Er(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Er(e)}function Vs(s){for(;s!=null;s=s.nextSibling){var e=s.nodeType;if(e===1||e===3)break;if(e===8){if(e=s.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return s}function bu(s){s=s.previousSibling;for(var e=0;s;){if(s.nodeType===8){var n=s.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return s;e--}else n==="/$"&&e++}s=s.previousSibling}return null}var Ei=Math.random().toString(36).slice(2),qt="__reactFiber$"+Ei,Ar="__reactProps$"+Ei,xs="__reactContainer$"+Ei,Uc="__reactEvents$"+Ei,ww="__reactListeners$"+Ei,_w="__reactHandles$"+Ei;function dn(s){var e=s[qt];if(e)return e;for(var n=s.parentNode;n;){if(e=n[xs]||n[qt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(s=bu(s);s!==null;){if(n=s[qt])return n;s=bu(s)}return e}s=n,n=s.parentNode}return null}function sa(s){return s=s[qt]||s[xs],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Un(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(R(33))}function Yl(s){return s[Ar]||null}var Hc=[],Hn=-1;function Js(s){return{current:s}}function se(s){0>Hn||(s.current=Hc[Hn],Hc[Hn]=null,Hn--)}function J(s,e){Hn++,Hc[Hn]=s.current,s.current=e}var Ks={},We=Js(Ks),Ze=Js(!1),kn=Ks;function ui(s,e){var n=s.type.contextTypes;if(!n)return Ks;var i=s.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},a;for(a in n)r[a]=e[a];return i&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=e,s.__reactInternalMemoizedMaskedChildContext=r),r}function Je(s){return s=s.childContextTypes,s!=null}function pl(){se(Ze),se(We)}function ku(s,e,n){if(We.current!==Ks)throw Error(R(168));J(We,e),J(Ze,n)}function _g(s,e,n){var i=s.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(R(108,lN(s)||"Unknown",r));return me({},n,i)}function fl(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||Ks,kn=We.current,J(We,s),J(Ze,Ze.current),!0}function Su(s,e,n){var i=s.stateNode;if(!i)throw Error(R(169));n?(s=_g(s,e,kn),i.__reactInternalMemoizedMergedChildContext=s,se(Ze),se(We),J(We,s)):se(Ze),J(Ze,n)}var ls=null,Gl=!1,Io=!1;function bg(s){ls===null?ls=[s]:ls.push(s)}function bw(s){Gl=!0,bg(s)}function en(){if(!Io&&ls!==null){Io=!0;var s=0,e=G;try{var n=ls;for(G=1;s<n.length;s++){var i=n[s];do i=i(!0);while(i!==null)}ls=null,Gl=!1}catch(r){throw ls!==null&&(ls=ls.slice(s+1)),Yx(nm,en),r}finally{G=e,Io=!1}}return null}var $n=[],qn=0,xl=null,gl=0,wt=[],_t=0,Sn=null,cs=1,hs="";function ln(s,e){$n[qn++]=gl,$n[qn++]=xl,xl=s,gl=e}function kg(s,e,n){wt[_t++]=cs,wt[_t++]=hs,wt[_t++]=Sn,Sn=s;var i=cs;s=hs;var r=32-Ot(i)-1;i&=~(1<<r),n+=1;var a=32-Ot(e)+r;if(30<a){var l=r-r%5;a=(i&(1<<l)-1).toString(32),i>>=l,r-=l,cs=1<<32-Ot(e)+r|n<<r|i,hs=a+s}else cs=1<<a|n<<r|i,hs=s}function dm(s){s.return!==null&&(ln(s,1),kg(s,1,0))}function um(s){for(;s===xl;)xl=$n[--qn],$n[qn]=null,gl=$n[--qn],$n[qn]=null;for(;s===Sn;)Sn=wt[--_t],wt[_t]=null,hs=wt[--_t],wt[_t]=null,cs=wt[--_t],wt[_t]=null}var mt=null,ct=null,ne=!1,It=null;function Sg(s,e){var n=bt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=s,e=s.deletions,e===null?(s.deletions=[n],s.flags|=16):e.push(n)}function Tu(s,e){switch(s.tag){case 5:var n=s.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(s.stateNode=e,mt=s,ct=Vs(e.firstChild),!0):!1;case 6:return e=s.pendingProps===""||e.nodeType!==3?null:e,e!==null?(s.stateNode=e,mt=s,ct=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Sn!==null?{id:cs,overflow:hs}:null,s.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=bt(18,null,null,0),n.stateNode=e,n.return=s,s.child=n,mt=s,ct=null,!0):!1;default:return!1}}function $c(s){return(s.mode&1)!==0&&(s.flags&128)===0}function qc(s){if(ne){var e=ct;if(e){var n=e;if(!Tu(s,e)){if($c(s))throw Error(R(418));e=Vs(n.nextSibling);var i=mt;e&&Tu(s,e)?Sg(i,n):(s.flags=s.flags&-4097|2,ne=!1,mt=s)}}else{if($c(s))throw Error(R(418));s.flags=s.flags&-4097|2,ne=!1,mt=s}}}function Ru(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;mt=s}function ba(s){if(s!==mt)return!1;if(!ne)return Ru(s),ne=!0,!1;var e;if((e=s.tag!==3)&&!(e=s.tag!==5)&&(e=s.type,e=e!=="head"&&e!=="body"&&!Bc(s.type,s.memoizedProps)),e&&(e=ct)){if($c(s))throw Tg(),Error(R(418));for(;e;)Sg(s,e),e=Vs(e.nextSibling)}if(Ru(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(R(317));e:{for(s=s.nextSibling,e=0;s;){if(s.nodeType===8){var n=s.data;if(n==="/$"){if(e===0){ct=Vs(s.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}s=s.nextSibling}ct=null}}else ct=mt?Vs(s.stateNode.nextSibling):null;return!0}function Tg(){for(var s=ct;s;)s=Vs(s.nextSibling)}function pi(){ct=mt=null,ne=!1}function pm(s){It===null?It=[s]:It.push(s)}var kw=ws.ReactCurrentBatchConfig;function Wi(s,e,n){if(s=n.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(R(309));var i=n.stateNode}if(!i)throw Error(R(147,s));var r=i,a=""+s;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(l){var o=r.refs;l===null?delete o[a]:o[a]=l},e._stringRef=a,e)}if(typeof s!="string")throw Error(R(284));if(!n._owner)throw Error(R(290,s))}return s}function ka(s,e){throw s=Object.prototype.toString.call(e),Error(R(31,s==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":s))}function Eu(s){var e=s._init;return e(s._payload)}function Rg(s){function e(f,x){if(s){var j=f.deletions;j===null?(f.deletions=[x],f.flags|=16):j.push(x)}}function n(f,x){if(!s)return null;for(;x!==null;)e(f,x),x=x.sibling;return null}function i(f,x){for(f=new Map;x!==null;)x.key!==null?f.set(x.key,x):f.set(x.index,x),x=x.sibling;return f}function r(f,x){return f=Hs(f,x),f.index=0,f.sibling=null,f}function a(f,x,j){return f.index=j,s?(j=f.alternate,j!==null?(j=j.index,j<x?(f.flags|=2,x):j):(f.flags|=2,x)):(f.flags|=1048576,x)}function l(f){return s&&f.alternate===null&&(f.flags|=2),f}function o(f,x,j,w){return x===null||x.tag!==6?(x=Ho(j,f.mode,w),x.return=f,x):(x=r(x,j),x.return=f,x)}function c(f,x,j,w){var N=j.type;return N===Fn?m(f,x,j.props.children,w,j.key):x!==null&&(x.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ts&&Eu(N)===x.type)?(w=r(x,j.props),w.ref=Wi(f,x,j),w.return=f,w):(w=Ka(j.type,j.key,j.props,null,f.mode,w),w.ref=Wi(f,x,j),w.return=f,w)}function h(f,x,j,w){return x===null||x.tag!==4||x.stateNode.containerInfo!==j.containerInfo||x.stateNode.implementation!==j.implementation?(x=$o(j,f.mode,w),x.return=f,x):(x=r(x,j.children||[]),x.return=f,x)}function m(f,x,j,w,N){return x===null||x.tag!==7?(x=jn(j,f.mode,w,N),x.return=f,x):(x=r(x,j),x.return=f,x)}function d(f,x,j){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Ho(""+x,f.mode,j),x.return=f,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case pa:return j=Ka(x.type,x.key,x.props,null,f.mode,j),j.ref=Wi(f,null,x),j.return=f,j;case On:return x=$o(x,f.mode,j),x.return=f,x;case Ts:var w=x._init;return d(f,w(x._payload),j)}if(Gi(x)||Ii(x))return x=jn(x,f.mode,j,null),x.return=f,x;ka(f,x)}return null}function u(f,x,j,w){var N=x!==null?x.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return N!==null?null:o(f,x,""+j,w);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case pa:return j.key===N?c(f,x,j,w):null;case On:return j.key===N?h(f,x,j,w):null;case Ts:return N=j._init,u(f,x,N(j._payload),w)}if(Gi(j)||Ii(j))return N!==null?null:m(f,x,j,w,null);ka(f,j)}return null}function p(f,x,j,w,N){if(typeof w=="string"&&w!==""||typeof w=="number")return f=f.get(j)||null,o(x,f,""+w,N);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case pa:return f=f.get(w.key===null?j:w.key)||null,c(x,f,w,N);case On:return f=f.get(w.key===null?j:w.key)||null,h(x,f,w,N);case Ts:var b=w._init;return p(f,x,j,b(w._payload),N)}if(Gi(w)||Ii(w))return f=f.get(j)||null,m(x,f,w,N,null);ka(x,w)}return null}function y(f,x,j,w){for(var N=null,b=null,S=x,k=x=0,T=null;S!==null&&k<j.length;k++){S.index>k?(T=S,S=null):T=S.sibling;var P=u(f,S,j[k],w);if(P===null){S===null&&(S=T);break}s&&S&&P.alternate===null&&e(f,S),x=a(P,x,k),b===null?N=P:b.sibling=P,b=P,S=T}if(k===j.length)return n(f,S),ne&&ln(f,k),N;if(S===null){for(;k<j.length;k++)S=d(f,j[k],w),S!==null&&(x=a(S,x,k),b===null?N=S:b.sibling=S,b=S);return ne&&ln(f,k),N}for(S=i(f,S);k<j.length;k++)T=p(S,f,k,j[k],w),T!==null&&(s&&T.alternate!==null&&S.delete(T.key===null?k:T.key),x=a(T,x,k),b===null?N=T:b.sibling=T,b=T);return s&&S.forEach(function(I){return e(f,I)}),ne&&ln(f,k),N}function g(f,x,j,w){var N=Ii(j);if(typeof N!="function")throw Error(R(150));if(j=N.call(j),j==null)throw Error(R(151));for(var b=N=null,S=x,k=x=0,T=null,P=j.next();S!==null&&!P.done;k++,P=j.next()){S.index>k?(T=S,S=null):T=S.sibling;var I=u(f,S,P.value,w);if(I===null){S===null&&(S=T);break}s&&S&&I.alternate===null&&e(f,S),x=a(I,x,k),b===null?N=I:b.sibling=I,b=I,S=T}if(P.done)return n(f,S),ne&&ln(f,k),N;if(S===null){for(;!P.done;k++,P=j.next())P=d(f,P.value,w),P!==null&&(x=a(P,x,k),b===null?N=P:b.sibling=P,b=P);return ne&&ln(f,k),N}for(S=i(f,S);!P.done;k++,P=j.next())P=p(S,f,k,P.value,w),P!==null&&(s&&P.alternate!==null&&S.delete(P.key===null?k:P.key),x=a(P,x,k),b===null?N=P:b.sibling=P,b=P);return s&&S.forEach(function(F){return e(f,F)}),ne&&ln(f,k),N}function v(f,x,j,w){if(typeof j=="object"&&j!==null&&j.type===Fn&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case pa:e:{for(var N=j.key,b=x;b!==null;){if(b.key===N){if(N=j.type,N===Fn){if(b.tag===7){n(f,b.sibling),x=r(b,j.props.children),x.return=f,f=x;break e}}else if(b.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Ts&&Eu(N)===b.type){n(f,b.sibling),x=r(b,j.props),x.ref=Wi(f,b,j),x.return=f,f=x;break e}n(f,b);break}else e(f,b);b=b.sibling}j.type===Fn?(x=jn(j.props.children,f.mode,w,j.key),x.return=f,f=x):(w=Ka(j.type,j.key,j.props,null,f.mode,w),w.ref=Wi(f,x,j),w.return=f,f=w)}return l(f);case On:e:{for(b=j.key;x!==null;){if(x.key===b)if(x.tag===4&&x.stateNode.containerInfo===j.containerInfo&&x.stateNode.implementation===j.implementation){n(f,x.sibling),x=r(x,j.children||[]),x.return=f,f=x;break e}else{n(f,x);break}else e(f,x);x=x.sibling}x=$o(j,f.mode,w),x.return=f,f=x}return l(f);case Ts:return b=j._init,v(f,x,b(j._payload),w)}if(Gi(j))return y(f,x,j,w);if(Ii(j))return g(f,x,j,w);ka(f,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,x!==null&&x.tag===6?(n(f,x.sibling),x=r(x,j),x.return=f,f=x):(n(f,x),x=Ho(j,f.mode,w),x.return=f,f=x),l(f)):n(f,x)}return v}var fi=Rg(!0),Eg=Rg(!1),jl=Js(null),yl=null,Xn=null,fm=null;function xm(){fm=Xn=yl=null}function gm(s){var e=jl.current;se(jl),s._currentValue=e}function Xc(s,e,n){for(;s!==null;){var i=s.alternate;if((s.childLanes&e)!==e?(s.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),s===n)break;s=s.return}}function li(s,e){yl=s,fm=Xn=null,s=s.dependencies,s!==null&&s.firstContext!==null&&(s.lanes&e&&(Qe=!0),s.firstContext=null)}function Et(s){var e=s._currentValue;if(fm!==s)if(s={context:s,memoizedValue:e,next:null},Xn===null){if(yl===null)throw Error(R(308));Xn=s,yl.dependencies={lanes:0,firstContext:s}}else Xn=Xn.next=s;return e}var un=null;function jm(s){un===null?un=[s]:un.push(s)}function Pg(s,e,n,i){var r=e.interleaved;return r===null?(n.next=n,jm(e)):(n.next=r.next,r.next=n),e.interleaved=n,gs(s,i)}function gs(s,e){s.lanes|=e;var n=s.alternate;for(n!==null&&(n.lanes|=e),n=s,s=s.return;s!==null;)s.childLanes|=e,n=s.alternate,n!==null&&(n.childLanes|=e),n=s,s=s.return;return n.tag===3?n.stateNode:null}var Rs=!1;function ym(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mg(s,e){s=s.updateQueue,e.updateQueue===s&&(e.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function ms(s,e){return{eventTime:s,lane:e,tag:0,payload:null,callback:null,next:null}}function Bs(s,e,n){var i=s.updateQueue;if(i===null)return null;if(i=i.shared,$&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,gs(s,n)}return r=i.interleaved,r===null?(e.next=e,jm(i)):(e.next=r.next,r.next=e),i.interleaved=e,gs(s,n)}function Wa(s,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=s.pendingLanes,n|=i,e.lanes=n,im(s,n)}}function Pu(s,e){var n=s.updateQueue,i=s.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?r=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?r=a=e:a=a.next=e}else r=a=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,effects:i.effects},s.updateQueue=n;return}s=n.lastBaseUpdate,s===null?n.firstBaseUpdate=e:s.next=e,n.lastBaseUpdate=e}function vl(s,e,n,i){var r=s.updateQueue;Rs=!1;var a=r.firstBaseUpdate,l=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var c=o,h=c.next;c.next=null,l===null?a=h:l.next=h,l=c;var m=s.alternate;m!==null&&(m=m.updateQueue,o=m.lastBaseUpdate,o!==l&&(o===null?m.firstBaseUpdate=h:o.next=h,m.lastBaseUpdate=c))}if(a!==null){var d=r.baseState;l=0,m=h=c=null,o=a;do{var u=o.lane,p=o.eventTime;if((i&u)===u){m!==null&&(m=m.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=s,g=o;switch(u=e,p=n,g.tag){case 1:if(y=g.payload,typeof y=="function"){d=y.call(p,d,u);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,u=typeof y=="function"?y.call(p,d,u):y,u==null)break e;d=me({},d,u);break e;case 2:Rs=!0}}o.callback!==null&&o.lane!==0&&(s.flags|=64,u=r.effects,u===null?r.effects=[o]:u.push(o))}else p={eventTime:p,lane:u,tag:o.tag,payload:o.payload,callback:o.callback,next:null},m===null?(h=m=p,c=d):m=m.next=p,l|=u;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;u=o,o=u.next,u.next=null,r.lastBaseUpdate=u,r.shared.pending=null}}while(!0);if(m===null&&(c=d),r.baseState=c,r.firstBaseUpdate=h,r.lastBaseUpdate=m,e=r.shared.interleaved,e!==null){r=e;do l|=r.lane,r=r.next;while(r!==e)}else a===null&&(r.shared.lanes=0);Rn|=l,s.lanes=l,s.memoizedState=d}}function Mu(s,e,n){if(s=e.effects,e.effects=null,s!==null)for(e=0;e<s.length;e++){var i=s[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(R(191,r));r.call(i)}}}var na={},Qt=Js(na),zr=Js(na),Dr=Js(na);function pn(s){if(s===na)throw Error(R(174));return s}function vm(s,e){switch(J(Dr,e),J(zr,s),J(Qt,na),s=e.nodeType,s){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tc(null,"");break;default:s=s===8?e.parentNode:e,e=s.namespaceURI||null,s=s.tagName,e=Tc(e,s)}se(Qt),J(Qt,e)}function xi(){se(Qt),se(zr),se(Dr)}function Cg(s){pn(Dr.current);var e=pn(Qt.current),n=Tc(e,s.type);e!==n&&(J(zr,s),J(Qt,n))}function Nm(s){zr.current===s&&(se(Qt),se(zr))}var re=Js(0);function Nl(s){for(var e=s;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Oo=[];function wm(){for(var s=0;s<Oo.length;s++)Oo[s]._workInProgressVersionPrimary=null;Oo.length=0}var Ua=ws.ReactCurrentDispatcher,Fo=ws.ReactCurrentBatchConfig,Tn=0,ce=null,_e=null,Se=null,wl=!1,hr=!1,Ir=0,Sw=0;function ze(){throw Error(R(321))}function _m(s,e){if(e===null)return!1;for(var n=0;n<e.length&&n<s.length;n++)if(!Vt(s[n],e[n]))return!1;return!0}function bm(s,e,n,i,r,a){if(Tn=a,ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ua.current=s===null||s.memoizedState===null?Pw:Mw,s=n(i,r),hr){a=0;do{if(hr=!1,Ir=0,25<=a)throw Error(R(301));a+=1,Se=_e=null,e.updateQueue=null,Ua.current=Cw,s=n(i,r)}while(hr)}if(Ua.current=_l,e=_e!==null&&_e.next!==null,Tn=0,Se=_e=ce=null,wl=!1,e)throw Error(R(300));return s}function km(){var s=Ir!==0;return Ir=0,s}function Ht(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Se===null?ce.memoizedState=Se=s:Se=Se.next=s,Se}function Pt(){if(_e===null){var s=ce.alternate;s=s!==null?s.memoizedState:null}else s=_e.next;var e=Se===null?ce.memoizedState:Se.next;if(e!==null)Se=e,_e=s;else{if(s===null)throw Error(R(310));_e=s,s={memoizedState:_e.memoizedState,baseState:_e.baseState,baseQueue:_e.baseQueue,queue:_e.queue,next:null},Se===null?ce.memoizedState=Se=s:Se=Se.next=s}return Se}function Or(s,e){return typeof e=="function"?e(s):e}function Vo(s){var e=Pt(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=s;var i=_e,r=i.baseQueue,a=n.pending;if(a!==null){if(r!==null){var l=r.next;r.next=a.next,a.next=l}i.baseQueue=r=a,n.pending=null}if(r!==null){a=r.next,i=i.baseState;var o=l=null,c=null,h=a;do{var m=h.lane;if((Tn&m)===m)c!==null&&(c=c.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),i=h.hasEagerState?h.eagerState:s(i,h.action);else{var d={lane:m,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};c===null?(o=c=d,l=i):c=c.next=d,ce.lanes|=m,Rn|=m}h=h.next}while(h!==null&&h!==a);c===null?l=i:c.next=o,Vt(i,e.memoizedState)||(Qe=!0),e.memoizedState=i,e.baseState=l,e.baseQueue=c,n.lastRenderedState=i}if(s=n.interleaved,s!==null){r=s;do a=r.lane,ce.lanes|=a,Rn|=a,r=r.next;while(r!==s)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Bo(s){var e=Pt(),n=e.queue;if(n===null)throw Error(R(311));n.lastRenderedReducer=s;var i=n.dispatch,r=n.pending,a=e.memoizedState;if(r!==null){n.pending=null;var l=r=r.next;do a=s(a,l.action),l=l.next;while(l!==r);Vt(a,e.memoizedState)||(Qe=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),n.lastRenderedState=a}return[a,i]}function Lg(){}function Ag(s,e){var n=ce,i=Pt(),r=e(),a=!Vt(i.memoizedState,r);if(a&&(i.memoizedState=r,Qe=!0),i=i.queue,Sm(Ig.bind(null,n,i,s),[s]),i.getSnapshot!==e||a||Se!==null&&Se.memoizedState.tag&1){if(n.flags|=2048,Fr(9,Dg.bind(null,n,i,r,e),void 0,null),Re===null)throw Error(R(349));Tn&30||zg(n,e,r)}return r}function zg(s,e,n){s.flags|=16384,s={getSnapshot:e,value:n},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.stores=[s]):(n=e.stores,n===null?e.stores=[s]:n.push(s))}function Dg(s,e,n,i){e.value=n,e.getSnapshot=i,Og(e)&&Fg(s)}function Ig(s,e,n){return n(function(){Og(e)&&Fg(s)})}function Og(s){var e=s.getSnapshot;s=s.value;try{var n=e();return!Vt(s,n)}catch{return!0}}function Fg(s){var e=gs(s,1);e!==null&&Ft(e,s,1,-1)}function Cu(s){var e=Ht();return typeof s=="function"&&(s=s()),e.memoizedState=e.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Or,lastRenderedState:s},e.queue=s,s=s.dispatch=Ew.bind(null,ce,s),[e.memoizedState,s]}function Fr(s,e,n,i){return s={tag:s,create:e,destroy:n,deps:i,next:null},e=ce.updateQueue,e===null?(e={lastEffect:null,stores:null},ce.updateQueue=e,e.lastEffect=s.next=s):(n=e.lastEffect,n===null?e.lastEffect=s.next=s:(i=n.next,n.next=s,s.next=i,e.lastEffect=s)),s}function Vg(){return Pt().memoizedState}function Ha(s,e,n,i){var r=Ht();ce.flags|=s,r.memoizedState=Fr(1|e,n,void 0,i===void 0?null:i)}function Ql(s,e,n,i){var r=Pt();i=i===void 0?null:i;var a=void 0;if(_e!==null){var l=_e.memoizedState;if(a=l.destroy,i!==null&&_m(i,l.deps)){r.memoizedState=Fr(e,n,a,i);return}}ce.flags|=s,r.memoizedState=Fr(1|e,n,a,i)}function Lu(s,e){return Ha(8390656,8,s,e)}function Sm(s,e){return Ql(2048,8,s,e)}function Bg(s,e){return Ql(4,2,s,e)}function Wg(s,e){return Ql(4,4,s,e)}function Ug(s,e){if(typeof e=="function")return s=s(),e(s),function(){e(null)};if(e!=null)return s=s(),e.current=s,function(){e.current=null}}function Hg(s,e,n){return n=n!=null?n.concat([s]):null,Ql(4,4,Ug.bind(null,e,s),n)}function Tm(){}function $g(s,e){var n=Pt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&_m(e,i[1])?i[0]:(n.memoizedState=[s,e],s)}function qg(s,e){var n=Pt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&_m(e,i[1])?i[0]:(s=s(),n.memoizedState=[s,e],s)}function Xg(s,e,n){return Tn&21?(Vt(n,e)||(n=Zx(),ce.lanes|=n,Rn|=n,s.baseState=!0),e):(s.baseState&&(s.baseState=!1,Qe=!0),s.memoizedState=n)}function Tw(s,e){var n=G;G=n!==0&&4>n?n:4,s(!0);var i=Fo.transition;Fo.transition={};try{s(!1),e()}finally{G=n,Fo.transition=i}}function Kg(){return Pt().memoizedState}function Rw(s,e,n){var i=Us(s);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Yg(s))Gg(e,n);else if(n=Pg(s,e,n,i),n!==null){var r=qe();Ft(n,s,i,r),Qg(n,e,i)}}function Ew(s,e,n){var i=Us(s),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yg(s))Gg(e,r);else{var a=s.alternate;if(s.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var l=e.lastRenderedState,o=a(l,n);if(r.hasEagerState=!0,r.eagerState=o,Vt(o,l)){var c=e.interleaved;c===null?(r.next=r,jm(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=Pg(s,e,r,i),n!==null&&(r=qe(),Ft(n,s,i,r),Qg(n,e,i))}}function Yg(s){var e=s.alternate;return s===ce||e!==null&&e===ce}function Gg(s,e){hr=wl=!0;var n=s.pending;n===null?e.next=e:(e.next=n.next,n.next=e),s.pending=e}function Qg(s,e,n){if(n&4194240){var i=e.lanes;i&=s.pendingLanes,n|=i,e.lanes=n,im(s,n)}}var _l={readContext:Et,useCallback:ze,useContext:ze,useEffect:ze,useImperativeHandle:ze,useInsertionEffect:ze,useLayoutEffect:ze,useMemo:ze,useReducer:ze,useRef:ze,useState:ze,useDebugValue:ze,useDeferredValue:ze,useTransition:ze,useMutableSource:ze,useSyncExternalStore:ze,useId:ze,unstable_isNewReconciler:!1},Pw={readContext:Et,useCallback:function(s,e){return Ht().memoizedState=[s,e===void 0?null:e],s},useContext:Et,useEffect:Lu,useImperativeHandle:function(s,e,n){return n=n!=null?n.concat([s]):null,Ha(4194308,4,Ug.bind(null,e,s),n)},useLayoutEffect:function(s,e){return Ha(4194308,4,s,e)},useInsertionEffect:function(s,e){return Ha(4,2,s,e)},useMemo:function(s,e){var n=Ht();return e=e===void 0?null:e,s=s(),n.memoizedState=[s,e],s},useReducer:function(s,e,n){var i=Ht();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:e},i.queue=s,s=s.dispatch=Rw.bind(null,ce,s),[i.memoizedState,s]},useRef:function(s){var e=Ht();return s={current:s},e.memoizedState=s},useState:Cu,useDebugValue:Tm,useDeferredValue:function(s){return Ht().memoizedState=s},useTransition:function(){var s=Cu(!1),e=s[0];return s=Tw.bind(null,s[1]),Ht().memoizedState=s,[e,s]},useMutableSource:function(){},useSyncExternalStore:function(s,e,n){var i=ce,r=Ht();if(ne){if(n===void 0)throw Error(R(407));n=n()}else{if(n=e(),Re===null)throw Error(R(349));Tn&30||zg(i,e,n)}r.memoizedState=n;var a={value:n,getSnapshot:e};return r.queue=a,Lu(Ig.bind(null,i,a,s),[s]),i.flags|=2048,Fr(9,Dg.bind(null,i,a,n,e),void 0,null),n},useId:function(){var s=Ht(),e=Re.identifierPrefix;if(ne){var n=hs,i=cs;n=(i&~(1<<32-Ot(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ir++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Sw++,e=":"+e+"r"+n.toString(32)+":";return s.memoizedState=e},unstable_isNewReconciler:!1},Mw={readContext:Et,useCallback:$g,useContext:Et,useEffect:Sm,useImperativeHandle:Hg,useInsertionEffect:Bg,useLayoutEffect:Wg,useMemo:qg,useReducer:Vo,useRef:Vg,useState:function(){return Vo(Or)},useDebugValue:Tm,useDeferredValue:function(s){var e=Pt();return Xg(e,_e.memoizedState,s)},useTransition:function(){var s=Vo(Or)[0],e=Pt().memoizedState;return[s,e]},useMutableSource:Lg,useSyncExternalStore:Ag,useId:Kg,unstable_isNewReconciler:!1},Cw={readContext:Et,useCallback:$g,useContext:Et,useEffect:Sm,useImperativeHandle:Hg,useInsertionEffect:Bg,useLayoutEffect:Wg,useMemo:qg,useReducer:Bo,useRef:Vg,useState:function(){return Bo(Or)},useDebugValue:Tm,useDeferredValue:function(s){var e=Pt();return _e===null?e.memoizedState=s:Xg(e,_e.memoizedState,s)},useTransition:function(){var s=Bo(Or)[0],e=Pt().memoizedState;return[s,e]},useMutableSource:Lg,useSyncExternalStore:Ag,useId:Kg,unstable_isNewReconciler:!1};function zt(s,e){if(s&&s.defaultProps){e=me({},e),s=s.defaultProps;for(var n in s)e[n]===void 0&&(e[n]=s[n]);return e}return e}function Kc(s,e,n,i){e=s.memoizedState,n=n(i,e),n=n==null?e:me({},e,n),s.memoizedState=n,s.lanes===0&&(s.updateQueue.baseState=n)}var Zl={isMounted:function(s){return(s=s._reactInternals)?Ln(s)===s:!1},enqueueSetState:function(s,e,n){s=s._reactInternals;var i=qe(),r=Us(s),a=ms(i,r);a.payload=e,n!=null&&(a.callback=n),e=Bs(s,a,r),e!==null&&(Ft(e,s,r,i),Wa(e,s,r))},enqueueReplaceState:function(s,e,n){s=s._reactInternals;var i=qe(),r=Us(s),a=ms(i,r);a.tag=1,a.payload=e,n!=null&&(a.callback=n),e=Bs(s,a,r),e!==null&&(Ft(e,s,r,i),Wa(e,s,r))},enqueueForceUpdate:function(s,e){s=s._reactInternals;var n=qe(),i=Us(s),r=ms(n,i);r.tag=2,e!=null&&(r.callback=e),e=Bs(s,r,i),e!==null&&(Ft(e,s,i,n),Wa(e,s,i))}};function Au(s,e,n,i,r,a,l){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(i,a,l):e.prototype&&e.prototype.isPureReactComponent?!Mr(n,i)||!Mr(r,a):!0}function Zg(s,e,n){var i=!1,r=Ks,a=e.contextType;return typeof a=="object"&&a!==null?a=Et(a):(r=Je(e)?kn:We.current,i=e.contextTypes,a=(i=i!=null)?ui(s,r):Ks),e=new e(n,a),s.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zl,s.stateNode=e,e._reactInternals=s,i&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=r,s.__reactInternalMemoizedMaskedChildContext=a),e}function zu(s,e,n,i){s=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==s&&Zl.enqueueReplaceState(e,e.state,null)}function Yc(s,e,n,i){var r=s.stateNode;r.props=n,r.state=s.memoizedState,r.refs={},ym(s);var a=e.contextType;typeof a=="object"&&a!==null?r.context=Et(a):(a=Je(e)?kn:We.current,r.context=ui(s,a)),r.state=s.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(Kc(s,e,a,n),r.state=s.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Zl.enqueueReplaceState(r,r.state,null),vl(s,n,r,i),r.state=s.memoizedState),typeof r.componentDidMount=="function"&&(s.flags|=4194308)}function gi(s,e){try{var n="",i=e;do n+=aN(i),i=i.return;while(i);var r=n}catch(a){r=`
Error generating stack: `+a.message+`
`+a.stack}return{value:s,source:e,stack:r,digest:null}}function Wo(s,e,n){return{value:s,source:null,stack:n??null,digest:e??null}}function Gc(s,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Lw=typeof WeakMap=="function"?WeakMap:Map;function Jg(s,e,n){n=ms(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){kl||(kl=!0,ah=i),Gc(s,e)},n}function ej(s,e,n){n=ms(-1,n),n.tag=3;var i=s.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Gc(s,e)}}var a=s.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Gc(s,e),typeof i!="function"&&(Ws===null?Ws=new Set([this]):Ws.add(this));var l=e.stack;this.componentDidCatch(e.value,{componentStack:l!==null?l:""})}),n}function Du(s,e,n){var i=s.pingCache;if(i===null){i=s.pingCache=new Lw;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),s=Xw.bind(null,s,e,n),e.then(s,s))}function Iu(s){do{var e;if((e=s.tag===13)&&(e=s.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return s;s=s.return}while(s!==null);return null}function Ou(s,e,n,i,r){return s.mode&1?(s.flags|=65536,s.lanes=r,s):(s===e?s.flags|=65536:(s.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=ms(-1,1),e.tag=2,Bs(n,e,1))),n.lanes|=1),s)}var Aw=ws.ReactCurrentOwner,Qe=!1;function He(s,e,n,i){e.child=s===null?Eg(e,null,n,i):fi(e,s.child,n,i)}function Fu(s,e,n,i,r){n=n.render;var a=e.ref;return li(e,r),i=bm(s,e,n,i,a,r),n=km(),s!==null&&!Qe?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~r,js(s,e,r)):(ne&&n&&dm(e),e.flags|=1,He(s,e,i,r),e.child)}function Vu(s,e,n,i,r){if(s===null){var a=n.type;return typeof a=="function"&&!zm(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=a,tj(s,e,a,i,r)):(s=Ka(n.type,null,i,e,e.mode,r),s.ref=e.ref,s.return=e,e.child=s)}if(a=s.child,!(s.lanes&r)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:Mr,n(l,i)&&s.ref===e.ref)return js(s,e,r)}return e.flags|=1,s=Hs(a,i),s.ref=e.ref,s.return=e,e.child=s}function tj(s,e,n,i,r){if(s!==null){var a=s.memoizedProps;if(Mr(a,i)&&s.ref===e.ref)if(Qe=!1,e.pendingProps=i=a,(s.lanes&r)!==0)s.flags&131072&&(Qe=!0);else return e.lanes=s.lanes,js(s,e,r)}return Qc(s,e,n,i,r)}function sj(s,e,n){var i=e.pendingProps,r=i.children,a=s!==null?s.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(Yn,at),at|=n;else{if(!(n&1073741824))return s=a!==null?a.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:s,cachePool:null,transitions:null},e.updateQueue=null,J(Yn,at),at|=s,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=a!==null?a.baseLanes:n,J(Yn,at),at|=i}else a!==null?(i=a.baseLanes|n,e.memoizedState=null):i=n,J(Yn,at),at|=i;return He(s,e,r,n),e.child}function nj(s,e){var n=e.ref;(s===null&&n!==null||s!==null&&s.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qc(s,e,n,i,r){var a=Je(n)?kn:We.current;return a=ui(e,a),li(e,r),n=bm(s,e,n,i,a,r),i=km(),s!==null&&!Qe?(e.updateQueue=s.updateQueue,e.flags&=-2053,s.lanes&=~r,js(s,e,r)):(ne&&i&&dm(e),e.flags|=1,He(s,e,n,r),e.child)}function Bu(s,e,n,i,r){if(Je(n)){var a=!0;fl(e)}else a=!1;if(li(e,r),e.stateNode===null)$a(s,e),Zg(e,n,i),Yc(e,n,i,r),i=!0;else if(s===null){var l=e.stateNode,o=e.memoizedProps;l.props=o;var c=l.context,h=n.contextType;typeof h=="object"&&h!==null?h=Et(h):(h=Je(n)?kn:We.current,h=ui(e,h));var m=n.getDerivedStateFromProps,d=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";d||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==i||c!==h)&&zu(e,l,i,h),Rs=!1;var u=e.memoizedState;l.state=u,vl(e,i,l,r),c=e.memoizedState,o!==i||u!==c||Ze.current||Rs?(typeof m=="function"&&(Kc(e,n,m,i),c=e.memoizedState),(o=Rs||Au(e,n,o,i,u,c,h))?(d||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(e.flags|=4194308)):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=c),l.props=i,l.state=c,l.context=h,i=o):(typeof l.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{l=e.stateNode,Mg(s,e),o=e.memoizedProps,h=e.type===e.elementType?o:zt(e.type,o),l.props=h,d=e.pendingProps,u=l.context,c=n.contextType,typeof c=="object"&&c!==null?c=Et(c):(c=Je(n)?kn:We.current,c=ui(e,c));var p=n.getDerivedStateFromProps;(m=typeof p=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(o!==d||u!==c)&&zu(e,l,i,c),Rs=!1,u=e.memoizedState,l.state=u,vl(e,i,l,r);var y=e.memoizedState;o!==d||u!==y||Ze.current||Rs?(typeof p=="function"&&(Kc(e,n,p,i),y=e.memoizedState),(h=Rs||Au(e,n,h,i,u,y,c)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(i,y,c),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(i,y,c)),typeof l.componentDidUpdate=="function"&&(e.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof l.componentDidUpdate!="function"||o===s.memoizedProps&&u===s.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===s.memoizedProps&&u===s.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=y),l.props=i,l.state=y,l.context=c,i=h):(typeof l.componentDidUpdate!="function"||o===s.memoizedProps&&u===s.memoizedState||(e.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||o===s.memoizedProps&&u===s.memoizedState||(e.flags|=1024),i=!1)}return Zc(s,e,n,i,a,r)}function Zc(s,e,n,i,r,a){nj(s,e);var l=(e.flags&128)!==0;if(!i&&!l)return r&&Su(e,n,!1),js(s,e,a);i=e.stateNode,Aw.current=e;var o=l&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,s!==null&&l?(e.child=fi(e,s.child,null,a),e.child=fi(e,null,o,a)):He(s,e,o,a),e.memoizedState=i.state,r&&Su(e,n,!0),e.child}function ij(s){var e=s.stateNode;e.pendingContext?ku(s,e.pendingContext,e.pendingContext!==e.context):e.context&&ku(s,e.context,!1),vm(s,e.containerInfo)}function Wu(s,e,n,i,r){return pi(),pm(r),e.flags|=256,He(s,e,n,i),e.child}var Jc={dehydrated:null,treeContext:null,retryLane:0};function eh(s){return{baseLanes:s,cachePool:null,transitions:null}}function rj(s,e,n){var i=e.pendingProps,r=re.current,a=!1,l=(e.flags&128)!==0,o;if((o=l)||(o=s!==null&&s.memoizedState===null?!1:(r&2)!==0),o?(a=!0,e.flags&=-129):(s===null||s.memoizedState!==null)&&(r|=1),J(re,r&1),s===null)return qc(e),s=e.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?(e.mode&1?s.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(l=i.children,s=i.fallback,a?(i=e.mode,a=e.child,l={mode:"hidden",children:l},!(i&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=to(l,i,0,null),s=jn(s,i,n,null),a.return=e,s.return=e,a.sibling=s,e.child=a,e.child.memoizedState=eh(n),e.memoizedState=Jc,s):Rm(e,l));if(r=s.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return zw(s,e,l,i,o,r,n);if(a){a=i.fallback,l=e.mode,r=s.child,o=r.sibling;var c={mode:"hidden",children:i.children};return!(l&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=c,e.deletions=null):(i=Hs(r,c),i.subtreeFlags=r.subtreeFlags&14680064),o!==null?a=Hs(o,a):(a=jn(a,l,n,null),a.flags|=2),a.return=e,i.return=e,i.sibling=a,e.child=i,i=a,a=e.child,l=s.child.memoizedState,l=l===null?eh(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=s.childLanes&~n,e.memoizedState=Jc,i}return a=s.child,s=a.sibling,i=Hs(a,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,s!==null&&(n=e.deletions,n===null?(e.deletions=[s],e.flags|=16):n.push(s)),e.child=i,e.memoizedState=null,i}function Rm(s,e){return e=to({mode:"visible",children:e},s.mode,0,null),e.return=s,s.child=e}function Sa(s,e,n,i){return i!==null&&pm(i),fi(e,s.child,null,n),s=Rm(e,e.pendingProps.children),s.flags|=2,e.memoizedState=null,s}function zw(s,e,n,i,r,a,l){if(n)return e.flags&256?(e.flags&=-257,i=Wo(Error(R(422))),Sa(s,e,l,i)):e.memoizedState!==null?(e.child=s.child,e.flags|=128,null):(a=i.fallback,r=e.mode,i=to({mode:"visible",children:i.children},r,0,null),a=jn(a,r,l,null),a.flags|=2,i.return=e,a.return=e,i.sibling=a,e.child=i,e.mode&1&&fi(e,s.child,null,l),e.child.memoizedState=eh(l),e.memoizedState=Jc,a);if(!(e.mode&1))return Sa(s,e,l,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var o=i.dgst;return i=o,a=Error(R(419)),i=Wo(a,i,void 0),Sa(s,e,l,i)}if(o=(l&s.childLanes)!==0,Qe||o){if(i=Re,i!==null){switch(l&-l){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|l)?0:r,r!==0&&r!==a.retryLane&&(a.retryLane=r,gs(s,r),Ft(i,s,r,-1))}return Am(),i=Wo(Error(R(421))),Sa(s,e,l,i)}return r.data==="$?"?(e.flags|=128,e.child=s.child,e=Kw.bind(null,s),r._reactRetry=e,null):(s=a.treeContext,ct=Vs(r.nextSibling),mt=e,ne=!0,It=null,s!==null&&(wt[_t++]=cs,wt[_t++]=hs,wt[_t++]=Sn,cs=s.id,hs=s.overflow,Sn=e),e=Rm(e,i.children),e.flags|=4096,e)}function Uu(s,e,n){s.lanes|=e;var i=s.alternate;i!==null&&(i.lanes|=e),Xc(s.return,e,n)}function Uo(s,e,n,i,r){var a=s.memoizedState;a===null?s.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function aj(s,e,n){var i=e.pendingProps,r=i.revealOrder,a=i.tail;if(He(s,e,i.children,n),i=re.current,i&2)i=i&1|2,e.flags|=128;else{if(s!==null&&s.flags&128)e:for(s=e.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Uu(s,n,e);else if(s.tag===19)Uu(s,n,e);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break e;for(;s.sibling===null;){if(s.return===null||s.return===e)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}i&=1}if(J(re,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)s=n.alternate,s!==null&&Nl(s)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Uo(e,!1,r,n,a);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(s=r.alternate,s!==null&&Nl(s)===null){e.child=r;break}s=r.sibling,r.sibling=n,n=r,r=s}Uo(e,!0,n,null,a);break;case"together":Uo(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $a(s,e){!(e.mode&1)&&s!==null&&(s.alternate=null,e.alternate=null,e.flags|=2)}function js(s,e,n){if(s!==null&&(e.dependencies=s.dependencies),Rn|=e.lanes,!(n&e.childLanes))return null;if(s!==null&&e.child!==s.child)throw Error(R(153));if(e.child!==null){for(s=e.child,n=Hs(s,s.pendingProps),e.child=n,n.return=e;s.sibling!==null;)s=s.sibling,n=n.sibling=Hs(s,s.pendingProps),n.return=e;n.sibling=null}return e.child}function Dw(s,e,n){switch(e.tag){case 3:ij(e),pi();break;case 5:Cg(e);break;case 1:Je(e.type)&&fl(e);break;case 4:vm(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;J(jl,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(J(re,re.current&1),e.flags|=128,null):n&e.child.childLanes?rj(s,e,n):(J(re,re.current&1),s=js(s,e,n),s!==null?s.sibling:null);J(re,re.current&1);break;case 19:if(i=(n&e.childLanes)!==0,s.flags&128){if(i)return aj(s,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),J(re,re.current),i)break;return null;case 22:case 23:return e.lanes=0,sj(s,e,n)}return js(s,e,n)}var lj,th,oj,cj;lj=function(s,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)s.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};th=function(){};oj=function(s,e,n,i){var r=s.memoizedProps;if(r!==i){s=e.stateNode,pn(Qt.current);var a=null;switch(n){case"input":r=_c(s,r),i=_c(s,i),a=[];break;case"select":r=me({},r,{value:void 0}),i=me({},i,{value:void 0}),a=[];break;case"textarea":r=Sc(s,r),i=Sc(s,i),a=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(s.onclick=ul)}Rc(n,i);var l;n=null;for(h in r)if(!i.hasOwnProperty(h)&&r.hasOwnProperty(h)&&r[h]!=null)if(h==="style"){var o=r[h];for(l in o)o.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(br.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in i){var c=i[h];if(o=r!=null?r[h]:void 0,i.hasOwnProperty(h)&&c!==o&&(c!=null||o!=null))if(h==="style")if(o){for(l in o)!o.hasOwnProperty(l)||c&&c.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in c)c.hasOwnProperty(l)&&o[l]!==c[l]&&(n||(n={}),n[l]=c[l])}else n||(a||(a=[]),a.push(h,n)),n=c;else h==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(a=a||[]).push(h,c)):h==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(h,""+c):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(br.hasOwnProperty(h)?(c!=null&&h==="onScroll"&&te("scroll",s),a||o===c||(a=[])):(a=a||[]).push(h,c))}n&&(a=a||[]).push("style",n);var h=a;(e.updateQueue=h)&&(e.flags|=4)}};cj=function(s,e,n,i){n!==i&&(e.flags|=4)};function Ui(s,e){if(!ne)switch(s.tailMode){case"hidden":e=s.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?s.tail=null:n.sibling=null;break;case"collapsed":n=s.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||s.tail===null?s.tail=null:s.tail.sibling=null:i.sibling=null}}function De(s){var e=s.alternate!==null&&s.alternate.child===s.child,n=0,i=0;if(e)for(var r=s.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=s,r=r.sibling;else for(r=s.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=s,r=r.sibling;return s.subtreeFlags|=i,s.childLanes=n,e}function Iw(s,e,n){var i=e.pendingProps;switch(um(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return De(e),null;case 1:return Je(e.type)&&pl(),De(e),null;case 3:return i=e.stateNode,xi(),se(Ze),se(We),wm(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(s===null||s.child===null)&&(ba(e)?e.flags|=4:s===null||s.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,It!==null&&(ch(It),It=null))),th(s,e),De(e),null;case 5:Nm(e);var r=pn(Dr.current);if(n=e.type,s!==null&&e.stateNode!=null)oj(s,e,n,i,r),s.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(R(166));return De(e),null}if(s=pn(Qt.current),ba(e)){i=e.stateNode,n=e.type;var a=e.memoizedProps;switch(i[qt]=e,i[Ar]=a,s=(e.mode&1)!==0,n){case"dialog":te("cancel",i),te("close",i);break;case"iframe":case"object":case"embed":te("load",i);break;case"video":case"audio":for(r=0;r<Zi.length;r++)te(Zi[r],i);break;case"source":te("error",i);break;case"img":case"image":case"link":te("error",i),te("load",i);break;case"details":te("toggle",i);break;case"input":Zd(i,a),te("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},te("invalid",i);break;case"textarea":eu(i,a),te("invalid",i)}Rc(n,a),r=null;for(var l in a)if(a.hasOwnProperty(l)){var o=a[l];l==="children"?typeof o=="string"?i.textContent!==o&&(a.suppressHydrationWarning!==!0&&_a(i.textContent,o,s),r=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&_a(i.textContent,o,s),r=["children",""+o]):br.hasOwnProperty(l)&&o!=null&&l==="onScroll"&&te("scroll",i)}switch(n){case"input":fa(i),Jd(i,a,!0);break;case"textarea":fa(i),tu(i);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(i.onclick=ul)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{l=r.nodeType===9?r:r.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Ix(n)),s==="http://www.w3.org/1999/xhtml"?n==="script"?(s=l.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof i.is=="string"?s=l.createElement(n,{is:i.is}):(s=l.createElement(n),n==="select"&&(l=s,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):s=l.createElementNS(s,n),s[qt]=e,s[Ar]=i,lj(s,e,!1,!1),e.stateNode=s;e:{switch(l=Ec(n,i),n){case"dialog":te("cancel",s),te("close",s),r=i;break;case"iframe":case"object":case"embed":te("load",s),r=i;break;case"video":case"audio":for(r=0;r<Zi.length;r++)te(Zi[r],s);r=i;break;case"source":te("error",s),r=i;break;case"img":case"image":case"link":te("error",s),te("load",s),r=i;break;case"details":te("toggle",s),r=i;break;case"input":Zd(s,i),r=_c(s,i),te("invalid",s);break;case"option":r=i;break;case"select":s._wrapperState={wasMultiple:!!i.multiple},r=me({},i,{value:void 0}),te("invalid",s);break;case"textarea":eu(s,i),r=Sc(s,i),te("invalid",s);break;default:r=i}Rc(n,r),o=r;for(a in o)if(o.hasOwnProperty(a)){var c=o[a];a==="style"?Vx(s,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ox(s,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&kr(s,c):typeof c=="number"&&kr(s,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(br.hasOwnProperty(a)?c!=null&&a==="onScroll"&&te("scroll",s):c!=null&&Zh(s,a,c,l))}switch(n){case"input":fa(s),Jd(s,i,!1);break;case"textarea":fa(s),tu(s);break;case"option":i.value!=null&&s.setAttribute("value",""+Xs(i.value));break;case"select":s.multiple=!!i.multiple,a=i.value,a!=null?ni(s,!!i.multiple,a,!1):i.defaultValue!=null&&ni(s,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(s.onclick=ul)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return De(e),null;case 6:if(s&&e.stateNode!=null)cj(s,e,s.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(R(166));if(n=pn(Dr.current),pn(Qt.current),ba(e)){if(i=e.stateNode,n=e.memoizedProps,i[qt]=e,(a=i.nodeValue!==n)&&(s=mt,s!==null))switch(s.tag){case 3:_a(i.nodeValue,n,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&_a(i.nodeValue,n,(s.mode&1)!==0)}a&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[qt]=e,e.stateNode=i}return De(e),null;case 13:if(se(re),i=e.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(ne&&ct!==null&&e.mode&1&&!(e.flags&128))Tg(),pi(),e.flags|=98560,a=!1;else if(a=ba(e),i!==null&&i.dehydrated!==null){if(s===null){if(!a)throw Error(R(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(R(317));a[qt]=e}else pi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;De(e),a=!1}else It!==null&&(ch(It),It=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(s!==null&&s.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(s===null||re.current&1?be===0&&(be=3):Am())),e.updateQueue!==null&&(e.flags|=4),De(e),null);case 4:return xi(),th(s,e),s===null&&Cr(e.stateNode.containerInfo),De(e),null;case 10:return gm(e.type._context),De(e),null;case 17:return Je(e.type)&&pl(),De(e),null;case 19:if(se(re),a=e.memoizedState,a===null)return De(e),null;if(i=(e.flags&128)!==0,l=a.rendering,l===null)if(i)Ui(a,!1);else{if(be!==0||s!==null&&s.flags&128)for(s=e.child;s!==null;){if(l=Nl(s),l!==null){for(e.flags|=128,Ui(a,!1),i=l.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)a=n,s=i,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=s,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,s=l.dependencies,a.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),n=n.sibling;return J(re,re.current&1|2),e.child}s=s.sibling}a.tail!==null&&je()>ji&&(e.flags|=128,i=!0,Ui(a,!1),e.lanes=4194304)}else{if(!i)if(s=Nl(l),s!==null){if(e.flags|=128,i=!0,n=s.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ui(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!ne)return De(e),null}else 2*je()-a.renderingStartTime>ji&&n!==1073741824&&(e.flags|=128,i=!0,Ui(a,!1),e.lanes=4194304);a.isBackwards?(l.sibling=e.child,e.child=l):(n=a.last,n!==null?n.sibling=l:e.child=l,a.last=l)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=je(),e.sibling=null,n=re.current,J(re,i?n&1|2:n&1),e):(De(e),null);case 22:case 23:return Lm(),i=e.memoizedState!==null,s!==null&&s.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?at&1073741824&&(De(e),e.subtreeFlags&6&&(e.flags|=8192)):De(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function Ow(s,e){switch(um(e),e.tag){case 1:return Je(e.type)&&pl(),s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 3:return xi(),se(Ze),se(We),wm(),s=e.flags,s&65536&&!(s&128)?(e.flags=s&-65537|128,e):null;case 5:return Nm(e),null;case 13:if(se(re),s=e.memoizedState,s!==null&&s.dehydrated!==null){if(e.alternate===null)throw Error(R(340));pi()}return s=e.flags,s&65536?(e.flags=s&-65537|128,e):null;case 19:return se(re),null;case 4:return xi(),null;case 10:return gm(e.type._context),null;case 22:case 23:return Lm(),null;case 24:return null;default:return null}}var Ta=!1,Oe=!1,Fw=typeof WeakSet=="function"?WeakSet:Set,M=null;function Kn(s,e){var n=s.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){pe(s,e,i)}else n.current=null}function sh(s,e,n){try{n()}catch(i){pe(s,e,i)}}var Hu=!1;function Vw(s,e){if(Fc=hl,s=pg(),mm(s)){if("selectionStart"in s)var n={start:s.selectionStart,end:s.selectionEnd};else e:{n=(n=s.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,o=-1,c=-1,h=0,m=0,d=s,u=null;t:for(;;){for(var p;d!==n||r!==0&&d.nodeType!==3||(o=l+r),d!==a||i!==0&&d.nodeType!==3||(c=l+i),d.nodeType===3&&(l+=d.nodeValue.length),(p=d.firstChild)!==null;)u=d,d=p;for(;;){if(d===s)break t;if(u===n&&++h===r&&(o=l),u===a&&++m===i&&(c=l),(p=d.nextSibling)!==null)break;d=u,u=d.parentNode}d=p}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Vc={focusedElem:s,selectionRange:n},hl=!1,M=e;M!==null;)if(e=M,s=e.child,(e.subtreeFlags&1028)!==0&&s!==null)s.return=e,M=s;else for(;M!==null;){e=M;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,v=y.memoizedState,f=e.stateNode,x=f.getSnapshotBeforeUpdate(e.elementType===e.type?g:zt(e.type,g),v);f.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(w){pe(e,e.return,w)}if(s=e.sibling,s!==null){s.return=e.return,M=s;break}M=e.return}return y=Hu,Hu=!1,y}function mr(s,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&s)===s){var a=r.destroy;r.destroy=void 0,a!==void 0&&sh(e,n,a)}r=r.next}while(r!==i)}}function Jl(s,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&s)===s){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function nh(s){var e=s.ref;if(e!==null){var n=s.stateNode;switch(s.tag){case 5:s=n;break;default:s=n}typeof e=="function"?e(s):e.current=s}}function hj(s){var e=s.alternate;e!==null&&(s.alternate=null,hj(e)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(e=s.stateNode,e!==null&&(delete e[qt],delete e[Ar],delete e[Uc],delete e[ww],delete e[_w])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function mj(s){return s.tag===5||s.tag===3||s.tag===4}function $u(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||mj(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function ih(s,e,n){var i=s.tag;if(i===5||i===6)s=s.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(s,e):n.insertBefore(s,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(s,n)):(e=n,e.appendChild(s)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ul));else if(i!==4&&(s=s.child,s!==null))for(ih(s,e,n),s=s.sibling;s!==null;)ih(s,e,n),s=s.sibling}function rh(s,e,n){var i=s.tag;if(i===5||i===6)s=s.stateNode,e?n.insertBefore(s,e):n.appendChild(s);else if(i!==4&&(s=s.child,s!==null))for(rh(s,e,n),s=s.sibling;s!==null;)rh(s,e,n),s=s.sibling}var Me=null,Dt=!1;function _s(s,e,n){for(n=n.child;n!==null;)dj(s,e,n),n=n.sibling}function dj(s,e,n){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount($l,n)}catch{}switch(n.tag){case 5:Oe||Kn(n,e);case 6:var i=Me,r=Dt;Me=null,_s(s,e,n),Me=i,Dt=r,Me!==null&&(Dt?(s=Me,n=n.stateNode,s.nodeType===8?s.parentNode.removeChild(n):s.removeChild(n)):Me.removeChild(n.stateNode));break;case 18:Me!==null&&(Dt?(s=Me,n=n.stateNode,s.nodeType===8?Do(s.parentNode,n):s.nodeType===1&&Do(s,n),Er(s)):Do(Me,n.stateNode));break;case 4:i=Me,r=Dt,Me=n.stateNode.containerInfo,Dt=!0,_s(s,e,n),Me=i,Dt=r;break;case 0:case 11:case 14:case 15:if(!Oe&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var a=r,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&sh(n,e,l),r=r.next}while(r!==i)}_s(s,e,n);break;case 1:if(!Oe&&(Kn(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){pe(n,e,o)}_s(s,e,n);break;case 21:_s(s,e,n);break;case 22:n.mode&1?(Oe=(i=Oe)||n.memoizedState!==null,_s(s,e,n),Oe=i):_s(s,e,n);break;default:_s(s,e,n)}}function qu(s){var e=s.updateQueue;if(e!==null){s.updateQueue=null;var n=s.stateNode;n===null&&(n=s.stateNode=new Fw),e.forEach(function(i){var r=Yw.bind(null,s,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Lt(s,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var a=s,l=e,o=l;e:for(;o!==null;){switch(o.tag){case 5:Me=o.stateNode,Dt=!1;break e;case 3:Me=o.stateNode.containerInfo,Dt=!0;break e;case 4:Me=o.stateNode.containerInfo,Dt=!0;break e}o=o.return}if(Me===null)throw Error(R(160));dj(a,l,r),Me=null,Dt=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(h){pe(r,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)uj(e,s),e=e.sibling}function uj(s,e){var n=s.alternate,i=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Lt(e,s),Wt(s),i&4){try{mr(3,s,s.return),Jl(3,s)}catch(g){pe(s,s.return,g)}try{mr(5,s,s.return)}catch(g){pe(s,s.return,g)}}break;case 1:Lt(e,s),Wt(s),i&512&&n!==null&&Kn(n,n.return);break;case 5:if(Lt(e,s),Wt(s),i&512&&n!==null&&Kn(n,n.return),s.flags&32){var r=s.stateNode;try{kr(r,"")}catch(g){pe(s,s.return,g)}}if(i&4&&(r=s.stateNode,r!=null)){var a=s.memoizedProps,l=n!==null?n.memoizedProps:a,o=s.type,c=s.updateQueue;if(s.updateQueue=null,c!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&zx(r,a),Ec(o,l);var h=Ec(o,a);for(l=0;l<c.length;l+=2){var m=c[l],d=c[l+1];m==="style"?Vx(r,d):m==="dangerouslySetInnerHTML"?Ox(r,d):m==="children"?kr(r,d):Zh(r,m,d,h)}switch(o){case"input":bc(r,a);break;case"textarea":Dx(r,a);break;case"select":var u=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?ni(r,!!a.multiple,p,!1):u!==!!a.multiple&&(a.defaultValue!=null?ni(r,!!a.multiple,a.defaultValue,!0):ni(r,!!a.multiple,a.multiple?[]:"",!1))}r[Ar]=a}catch(g){pe(s,s.return,g)}}break;case 6:if(Lt(e,s),Wt(s),i&4){if(s.stateNode===null)throw Error(R(162));r=s.stateNode,a=s.memoizedProps;try{r.nodeValue=a}catch(g){pe(s,s.return,g)}}break;case 3:if(Lt(e,s),Wt(s),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Er(e.containerInfo)}catch(g){pe(s,s.return,g)}break;case 4:Lt(e,s),Wt(s);break;case 13:Lt(e,s),Wt(s),r=s.child,r.flags&8192&&(a=r.memoizedState!==null,r.stateNode.isHidden=a,!a||r.alternate!==null&&r.alternate.memoizedState!==null||(Mm=je())),i&4&&qu(s);break;case 22:if(m=n!==null&&n.memoizedState!==null,s.mode&1?(Oe=(h=Oe)||m,Lt(e,s),Oe=h):Lt(e,s),Wt(s),i&8192){if(h=s.memoizedState!==null,(s.stateNode.isHidden=h)&&!m&&s.mode&1)for(M=s,m=s.child;m!==null;){for(d=M=m;M!==null;){switch(u=M,p=u.child,u.tag){case 0:case 11:case 14:case 15:mr(4,u,u.return);break;case 1:Kn(u,u.return);var y=u.stateNode;if(typeof y.componentWillUnmount=="function"){i=u,n=u.return;try{e=i,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(g){pe(i,n,g)}}break;case 5:Kn(u,u.return);break;case 22:if(u.memoizedState!==null){Ku(d);continue}}p!==null?(p.return=u,M=p):Ku(d)}m=m.sibling}e:for(m=null,d=s;;){if(d.tag===5){if(m===null){m=d;try{r=d.stateNode,h?(a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=d.stateNode,c=d.memoizedProps.style,l=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Fx("display",l))}catch(g){pe(s,s.return,g)}}}else if(d.tag===6){if(m===null)try{d.stateNode.nodeValue=h?"":d.memoizedProps}catch(g){pe(s,s.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===s)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===s)break e;for(;d.sibling===null;){if(d.return===null||d.return===s)break e;m===d&&(m=null),d=d.return}m===d&&(m=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Lt(e,s),Wt(s),i&4&&qu(s);break;case 21:break;default:Lt(e,s),Wt(s)}}function Wt(s){var e=s.flags;if(e&2){try{e:{for(var n=s.return;n!==null;){if(mj(n)){var i=n;break e}n=n.return}throw Error(R(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(kr(r,""),i.flags&=-33);var a=$u(s);rh(s,a,r);break;case 3:case 4:var l=i.stateNode.containerInfo,o=$u(s);ih(s,o,l);break;default:throw Error(R(161))}}catch(c){pe(s,s.return,c)}s.flags&=-3}e&4096&&(s.flags&=-4097)}function Bw(s,e,n){M=s,pj(s)}function pj(s,e,n){for(var i=(s.mode&1)!==0;M!==null;){var r=M,a=r.child;if(r.tag===22&&i){var l=r.memoizedState!==null||Ta;if(!l){var o=r.alternate,c=o!==null&&o.memoizedState!==null||Oe;o=Ta;var h=Oe;if(Ta=l,(Oe=c)&&!h)for(M=r;M!==null;)l=M,c=l.child,l.tag===22&&l.memoizedState!==null?Yu(r):c!==null?(c.return=l,M=c):Yu(r);for(;a!==null;)M=a,pj(a),a=a.sibling;M=r,Ta=o,Oe=h}Xu(s)}else r.subtreeFlags&8772&&a!==null?(a.return=r,M=a):Xu(s)}}function Xu(s){for(;M!==null;){var e=M;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Oe||Jl(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Oe)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:zt(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Mu(e,a,i);break;case 3:var l=e.updateQueue;if(l!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Mu(e,l,n)}break;case 5:var o=e.stateNode;if(n===null&&e.flags&4){n=o;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var m=h.memoizedState;if(m!==null){var d=m.dehydrated;d!==null&&Er(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}Oe||e.flags&512&&nh(e)}catch(u){pe(e,e.return,u)}}if(e===s){M=null;break}if(n=e.sibling,n!==null){n.return=e.return,M=n;break}M=e.return}}function Ku(s){for(;M!==null;){var e=M;if(e===s){M=null;break}var n=e.sibling;if(n!==null){n.return=e.return,M=n;break}M=e.return}}function Yu(s){for(;M!==null;){var e=M;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Jl(4,e)}catch(c){pe(e,n,c)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(c){pe(e,r,c)}}var a=e.return;try{nh(e)}catch(c){pe(e,a,c)}break;case 5:var l=e.return;try{nh(e)}catch(c){pe(e,l,c)}}}catch(c){pe(e,e.return,c)}if(e===s){M=null;break}var o=e.sibling;if(o!==null){o.return=e.return,M=o;break}M=e.return}}var Ww=Math.ceil,bl=ws.ReactCurrentDispatcher,Em=ws.ReactCurrentOwner,Rt=ws.ReactCurrentBatchConfig,$=0,Re=null,Ne=null,Ce=0,at=0,Yn=Js(0),be=0,Vr=null,Rn=0,eo=0,Pm=0,dr=null,Ge=null,Mm=0,ji=1/0,rs=null,kl=!1,ah=null,Ws=null,Ra=!1,Cs=null,Sl=0,ur=0,lh=null,qa=-1,Xa=0;function qe(){return $&6?je():qa!==-1?qa:qa=je()}function Us(s){return s.mode&1?$&2&&Ce!==0?Ce&-Ce:kw.transition!==null?(Xa===0&&(Xa=Zx()),Xa):(s=G,s!==0||(s=window.event,s=s===void 0?16:rg(s.type)),s):1}function Ft(s,e,n,i){if(50<ur)throw ur=0,lh=null,Error(R(185));ea(s,n,i),(!($&2)||s!==Re)&&(s===Re&&(!($&2)&&(eo|=n),be===4&&Ps(s,Ce)),et(s,i),n===1&&$===0&&!(e.mode&1)&&(ji=je()+500,Gl&&en()))}function et(s,e){var n=s.callbackNode;kN(s,e);var i=cl(s,s===Re?Ce:0);if(i===0)n!==null&&iu(n),s.callbackNode=null,s.callbackPriority=0;else if(e=i&-i,s.callbackPriority!==e){if(n!=null&&iu(n),e===1)s.tag===0?bw(Gu.bind(null,s)):bg(Gu.bind(null,s)),vw(function(){!($&6)&&en()}),n=null;else{switch(Jx(i)){case 1:n=nm;break;case 4:n=Gx;break;case 16:n=ol;break;case 536870912:n=Qx;break;default:n=ol}n=wj(n,fj.bind(null,s))}s.callbackPriority=e,s.callbackNode=n}}function fj(s,e){if(qa=-1,Xa=0,$&6)throw Error(R(327));var n=s.callbackNode;if(oi()&&s.callbackNode!==n)return null;var i=cl(s,s===Re?Ce:0);if(i===0)return null;if(i&30||i&s.expiredLanes||e)e=Tl(s,i);else{e=i;var r=$;$|=2;var a=gj();(Re!==s||Ce!==e)&&(rs=null,ji=je()+500,gn(s,e));do try{$w();break}catch(o){xj(s,o)}while(!0);xm(),bl.current=a,$=r,Ne!==null?e=0:(Re=null,Ce=0,e=be)}if(e!==0){if(e===2&&(r=Ac(s),r!==0&&(i=r,e=oh(s,r))),e===1)throw n=Vr,gn(s,0),Ps(s,i),et(s,je()),n;if(e===6)Ps(s,i);else{if(r=s.current.alternate,!(i&30)&&!Uw(r)&&(e=Tl(s,i),e===2&&(a=Ac(s),a!==0&&(i=a,e=oh(s,a))),e===1))throw n=Vr,gn(s,0),Ps(s,i),et(s,je()),n;switch(s.finishedWork=r,s.finishedLanes=i,e){case 0:case 1:throw Error(R(345));case 2:on(s,Ge,rs);break;case 3:if(Ps(s,i),(i&130023424)===i&&(e=Mm+500-je(),10<e)){if(cl(s,0)!==0)break;if(r=s.suspendedLanes,(r&i)!==i){qe(),s.pingedLanes|=s.suspendedLanes&r;break}s.timeoutHandle=Wc(on.bind(null,s,Ge,rs),e);break}on(s,Ge,rs);break;case 4:if(Ps(s,i),(i&4194240)===i)break;for(e=s.eventTimes,r=-1;0<i;){var l=31-Ot(i);a=1<<l,l=e[l],l>r&&(r=l),i&=~a}if(i=r,i=je()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ww(i/1960))-i,10<i){s.timeoutHandle=Wc(on.bind(null,s,Ge,rs),i);break}on(s,Ge,rs);break;case 5:on(s,Ge,rs);break;default:throw Error(R(329))}}}return et(s,je()),s.callbackNode===n?fj.bind(null,s):null}function oh(s,e){var n=dr;return s.current.memoizedState.isDehydrated&&(gn(s,e).flags|=256),s=Tl(s,e),s!==2&&(e=Ge,Ge=n,e!==null&&ch(e)),s}function ch(s){Ge===null?Ge=s:Ge.push.apply(Ge,s)}function Uw(s){for(var e=s;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!Vt(a(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===s)break;for(;e.sibling===null;){if(e.return===null||e.return===s)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ps(s,e){for(e&=~Pm,e&=~eo,s.suspendedLanes|=e,s.pingedLanes&=~e,s=s.expirationTimes;0<e;){var n=31-Ot(e),i=1<<n;s[n]=-1,e&=~i}}function Gu(s){if($&6)throw Error(R(327));oi();var e=cl(s,0);if(!(e&1))return et(s,je()),null;var n=Tl(s,e);if(s.tag!==0&&n===2){var i=Ac(s);i!==0&&(e=i,n=oh(s,i))}if(n===1)throw n=Vr,gn(s,0),Ps(s,e),et(s,je()),n;if(n===6)throw Error(R(345));return s.finishedWork=s.current.alternate,s.finishedLanes=e,on(s,Ge,rs),et(s,je()),null}function Cm(s,e){var n=$;$|=1;try{return s(e)}finally{$=n,$===0&&(ji=je()+500,Gl&&en())}}function En(s){Cs!==null&&Cs.tag===0&&!($&6)&&oi();var e=$;$|=1;var n=Rt.transition,i=G;try{if(Rt.transition=null,G=1,s)return s()}finally{G=i,Rt.transition=n,$=e,!($&6)&&en()}}function Lm(){at=Yn.current,se(Yn)}function gn(s,e){s.finishedWork=null,s.finishedLanes=0;var n=s.timeoutHandle;if(n!==-1&&(s.timeoutHandle=-1,yw(n)),Ne!==null)for(n=Ne.return;n!==null;){var i=n;switch(um(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&pl();break;case 3:xi(),se(Ze),se(We),wm();break;case 5:Nm(i);break;case 4:xi();break;case 13:se(re);break;case 19:se(re);break;case 10:gm(i.type._context);break;case 22:case 23:Lm()}n=n.return}if(Re=s,Ne=s=Hs(s.current,null),Ce=at=e,be=0,Vr=null,Pm=eo=Rn=0,Ge=dr=null,un!==null){for(e=0;e<un.length;e++)if(n=un[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,a=n.pending;if(a!==null){var l=a.next;a.next=r,i.next=l}n.pending=i}un=null}return s}function xj(s,e){do{var n=Ne;try{if(xm(),Ua.current=_l,wl){for(var i=ce.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}wl=!1}if(Tn=0,Se=_e=ce=null,hr=!1,Ir=0,Em.current=null,n===null||n.return===null){be=1,Vr=e,Ne=null;break}e:{var a=s,l=n.return,o=n,c=e;if(e=Ce,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var h=c,m=o,d=m.tag;if(!(m.mode&1)&&(d===0||d===11||d===15)){var u=m.alternate;u?(m.updateQueue=u.updateQueue,m.memoizedState=u.memoizedState,m.lanes=u.lanes):(m.updateQueue=null,m.memoizedState=null)}var p=Iu(l);if(p!==null){p.flags&=-257,Ou(p,l,o,a,e),p.mode&1&&Du(a,h,e),e=p,c=h;var y=e.updateQueue;if(y===null){var g=new Set;g.add(c),e.updateQueue=g}else y.add(c);break e}else{if(!(e&1)){Du(a,h,e),Am();break e}c=Error(R(426))}}else if(ne&&o.mode&1){var v=Iu(l);if(v!==null){!(v.flags&65536)&&(v.flags|=256),Ou(v,l,o,a,e),pm(gi(c,o));break e}}a=c=gi(c,o),be!==4&&(be=2),dr===null?dr=[a]:dr.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var f=Jg(a,c,e);Pu(a,f);break e;case 1:o=c;var x=a.type,j=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Ws===null||!Ws.has(j)))){a.flags|=65536,e&=-e,a.lanes|=e;var w=ej(a,o,e);Pu(a,w);break e}}a=a.return}while(a!==null)}yj(n)}catch(N){e=N,Ne===n&&n!==null&&(Ne=n=n.return);continue}break}while(!0)}function gj(){var s=bl.current;return bl.current=_l,s===null?_l:s}function Am(){(be===0||be===3||be===2)&&(be=4),Re===null||!(Rn&268435455)&&!(eo&268435455)||Ps(Re,Ce)}function Tl(s,e){var n=$;$|=2;var i=gj();(Re!==s||Ce!==e)&&(rs=null,gn(s,e));do try{Hw();break}catch(r){xj(s,r)}while(!0);if(xm(),$=n,bl.current=i,Ne!==null)throw Error(R(261));return Re=null,Ce=0,be}function Hw(){for(;Ne!==null;)jj(Ne)}function $w(){for(;Ne!==null&&!xN();)jj(Ne)}function jj(s){var e=Nj(s.alternate,s,at);s.memoizedProps=s.pendingProps,e===null?yj(s):Ne=e,Em.current=null}function yj(s){var e=s;do{var n=e.alternate;if(s=e.return,e.flags&32768){if(n=Ow(n,e),n!==null){n.flags&=32767,Ne=n;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{be=6,Ne=null;return}}else if(n=Iw(n,e,at),n!==null){Ne=n;return}if(e=e.sibling,e!==null){Ne=e;return}Ne=e=s}while(e!==null);be===0&&(be=5)}function on(s,e,n){var i=G,r=Rt.transition;try{Rt.transition=null,G=1,qw(s,e,n,i)}finally{Rt.transition=r,G=i}return null}function qw(s,e,n,i){do oi();while(Cs!==null);if($&6)throw Error(R(327));n=s.finishedWork;var r=s.finishedLanes;if(n===null)return null;if(s.finishedWork=null,s.finishedLanes=0,n===s.current)throw Error(R(177));s.callbackNode=null,s.callbackPriority=0;var a=n.lanes|n.childLanes;if(SN(s,a),s===Re&&(Ne=Re=null,Ce=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ra||(Ra=!0,wj(ol,function(){return oi(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=Rt.transition,Rt.transition=null;var l=G;G=1;var o=$;$|=4,Em.current=null,Vw(s,n),uj(n,s),dw(Vc),hl=!!Fc,Vc=Fc=null,s.current=n,Bw(n),gN(),$=o,G=l,Rt.transition=a}else s.current=n;if(Ra&&(Ra=!1,Cs=s,Sl=r),a=s.pendingLanes,a===0&&(Ws=null),vN(n.stateNode),et(s,je()),e!==null)for(i=s.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(kl)throw kl=!1,s=ah,ah=null,s;return Sl&1&&s.tag!==0&&oi(),a=s.pendingLanes,a&1?s===lh?ur++:(ur=0,lh=s):ur=0,en(),null}function oi(){if(Cs!==null){var s=Jx(Sl),e=Rt.transition,n=G;try{if(Rt.transition=null,G=16>s?16:s,Cs===null)var i=!1;else{if(s=Cs,Cs=null,Sl=0,$&6)throw Error(R(331));var r=$;for($|=4,M=s.current;M!==null;){var a=M,l=a.child;if(M.flags&16){var o=a.deletions;if(o!==null){for(var c=0;c<o.length;c++){var h=o[c];for(M=h;M!==null;){var m=M;switch(m.tag){case 0:case 11:case 15:mr(8,m,a)}var d=m.child;if(d!==null)d.return=m,M=d;else for(;M!==null;){m=M;var u=m.sibling,p=m.return;if(hj(m),m===h){M=null;break}if(u!==null){u.return=p,M=u;break}M=p}}}var y=a.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}M=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,M=l;else e:for(;M!==null;){if(a=M,a.flags&2048)switch(a.tag){case 0:case 11:case 15:mr(9,a,a.return)}var f=a.sibling;if(f!==null){f.return=a.return,M=f;break e}M=a.return}}var x=s.current;for(M=x;M!==null;){l=M;var j=l.child;if(l.subtreeFlags&2064&&j!==null)j.return=l,M=j;else e:for(l=x;M!==null;){if(o=M,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Jl(9,o)}}catch(N){pe(o,o.return,N)}if(o===l){M=null;break e}var w=o.sibling;if(w!==null){w.return=o.return,M=w;break e}M=o.return}}if($=r,en(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot($l,s)}catch{}i=!0}return i}finally{G=n,Rt.transition=e}}return!1}function Qu(s,e,n){e=gi(n,e),e=Jg(s,e,1),s=Bs(s,e,1),e=qe(),s!==null&&(ea(s,1,e),et(s,e))}function pe(s,e,n){if(s.tag===3)Qu(s,s,n);else for(;e!==null;){if(e.tag===3){Qu(e,s,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ws===null||!Ws.has(i))){s=gi(n,s),s=ej(e,s,1),e=Bs(e,s,1),s=qe(),e!==null&&(ea(e,1,s),et(e,s));break}}e=e.return}}function Xw(s,e,n){var i=s.pingCache;i!==null&&i.delete(e),e=qe(),s.pingedLanes|=s.suspendedLanes&n,Re===s&&(Ce&n)===n&&(be===4||be===3&&(Ce&130023424)===Ce&&500>je()-Mm?gn(s,0):Pm|=n),et(s,e)}function vj(s,e){e===0&&(s.mode&1?(e=ja,ja<<=1,!(ja&130023424)&&(ja=4194304)):e=1);var n=qe();s=gs(s,e),s!==null&&(ea(s,e,n),et(s,n))}function Kw(s){var e=s.memoizedState,n=0;e!==null&&(n=e.retryLane),vj(s,n)}function Yw(s,e){var n=0;switch(s.tag){case 13:var i=s.stateNode,r=s.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=s.stateNode;break;default:throw Error(R(314))}i!==null&&i.delete(e),vj(s,n)}var Nj;Nj=function(s,e,n){if(s!==null)if(s.memoizedProps!==e.pendingProps||Ze.current)Qe=!0;else{if(!(s.lanes&n)&&!(e.flags&128))return Qe=!1,Dw(s,e,n);Qe=!!(s.flags&131072)}else Qe=!1,ne&&e.flags&1048576&&kg(e,gl,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;$a(s,e),s=e.pendingProps;var r=ui(e,We.current);li(e,n),r=bm(null,e,i,s,r,n);var a=km();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Je(i)?(a=!0,fl(e)):a=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,ym(e),r.updater=Zl,e.stateNode=r,r._reactInternals=e,Yc(e,i,s,n),e=Zc(null,e,i,!0,a,n)):(e.tag=0,ne&&a&&dm(e),He(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch($a(s,e),s=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=Qw(i),s=zt(i,s),r){case 0:e=Qc(null,e,i,s,n);break e;case 1:e=Bu(null,e,i,s,n);break e;case 11:e=Fu(null,e,i,s,n);break e;case 14:e=Vu(null,e,i,zt(i.type,s),n);break e}throw Error(R(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:zt(i,r),Qc(s,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:zt(i,r),Bu(s,e,i,r,n);case 3:e:{if(ij(e),s===null)throw Error(R(387));i=e.pendingProps,a=e.memoizedState,r=a.element,Mg(s,e),vl(e,i,null,n);var l=e.memoizedState;if(i=l.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){r=gi(Error(R(423)),e),e=Wu(s,e,i,n,r);break e}else if(i!==r){r=gi(Error(R(424)),e),e=Wu(s,e,i,n,r);break e}else for(ct=Vs(e.stateNode.containerInfo.firstChild),mt=e,ne=!0,It=null,n=Eg(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(pi(),i===r){e=js(s,e,n);break e}He(s,e,i,n)}e=e.child}return e;case 5:return Cg(e),s===null&&qc(e),i=e.type,r=e.pendingProps,a=s!==null?s.memoizedProps:null,l=r.children,Bc(i,r)?l=null:a!==null&&Bc(i,a)&&(e.flags|=32),nj(s,e),He(s,e,l,n),e.child;case 6:return s===null&&qc(e),null;case 13:return rj(s,e,n);case 4:return vm(e,e.stateNode.containerInfo),i=e.pendingProps,s===null?e.child=fi(e,null,i,n):He(s,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:zt(i,r),Fu(s,e,i,r,n);case 7:return He(s,e,e.pendingProps,n),e.child;case 8:return He(s,e,e.pendingProps.children,n),e.child;case 12:return He(s,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,a=e.memoizedProps,l=r.value,J(jl,i._currentValue),i._currentValue=l,a!==null)if(Vt(a.value,l)){if(a.children===r.children&&!Ze.current){e=js(s,e,n);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var o=a.dependencies;if(o!==null){l=a.child;for(var c=o.firstContext;c!==null;){if(c.context===i){if(a.tag===1){c=ms(-1,n&-n),c.tag=2;var h=a.updateQueue;if(h!==null){h=h.shared;var m=h.pending;m===null?c.next=c:(c.next=m.next,m.next=c),h.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Xc(a.return,n,e),o.lanes|=n;break}c=c.next}}else if(a.tag===10)l=a.type===e.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(R(341));l.lanes|=n,o=l.alternate,o!==null&&(o.lanes|=n),Xc(l,n,e),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===e){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}He(s,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,li(e,n),r=Et(r),i=i(r),e.flags|=1,He(s,e,i,n),e.child;case 14:return i=e.type,r=zt(i,e.pendingProps),r=zt(i.type,r),Vu(s,e,i,r,n);case 15:return tj(s,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:zt(i,r),$a(s,e),e.tag=1,Je(i)?(s=!0,fl(e)):s=!1,li(e,n),Zg(e,i,r),Yc(e,i,r,n),Zc(null,e,i,!0,s,n);case 19:return aj(s,e,n);case 22:return sj(s,e,n)}throw Error(R(156,e.tag))};function wj(s,e){return Yx(s,e)}function Gw(s,e,n,i){this.tag=s,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bt(s,e,n,i){return new Gw(s,e,n,i)}function zm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Qw(s){if(typeof s=="function")return zm(s)?1:0;if(s!=null){if(s=s.$$typeof,s===em)return 11;if(s===tm)return 14}return 2}function Hs(s,e){var n=s.alternate;return n===null?(n=bt(s.tag,e,s.key,s.mode),n.elementType=s.elementType,n.type=s.type,n.stateNode=s.stateNode,n.alternate=s,s.alternate=n):(n.pendingProps=e,n.type=s.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=s.flags&14680064,n.childLanes=s.childLanes,n.lanes=s.lanes,n.child=s.child,n.memoizedProps=s.memoizedProps,n.memoizedState=s.memoizedState,n.updateQueue=s.updateQueue,e=s.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=s.sibling,n.index=s.index,n.ref=s.ref,n}function Ka(s,e,n,i,r,a){var l=2;if(i=s,typeof s=="function")zm(s)&&(l=1);else if(typeof s=="string")l=5;else e:switch(s){case Fn:return jn(n.children,r,a,e);case Jh:l=8,r|=8;break;case yc:return s=bt(12,n,e,r|2),s.elementType=yc,s.lanes=a,s;case vc:return s=bt(13,n,e,r),s.elementType=vc,s.lanes=a,s;case Nc:return s=bt(19,n,e,r),s.elementType=Nc,s.lanes=a,s;case Cx:return to(n,r,a,e);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case Px:l=10;break e;case Mx:l=9;break e;case em:l=11;break e;case tm:l=14;break e;case Ts:l=16,i=null;break e}throw Error(R(130,s==null?s:typeof s,""))}return e=bt(l,n,e,r),e.elementType=s,e.type=i,e.lanes=a,e}function jn(s,e,n,i){return s=bt(7,s,i,e),s.lanes=n,s}function to(s,e,n,i){return s=bt(22,s,i,e),s.elementType=Cx,s.lanes=n,s.stateNode={isHidden:!1},s}function Ho(s,e,n){return s=bt(6,s,null,e),s.lanes=n,s}function $o(s,e,n){return e=bt(4,s.children!==null?s.children:[],s.key,e),e.lanes=n,e.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},e}function Zw(s,e,n,i,r){this.tag=e,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ko(0),this.expirationTimes=ko(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ko(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Dm(s,e,n,i,r,a,l,o,c){return s=new Zw(s,e,n,o,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=bt(3,null,null,e),s.current=a,a.stateNode=s,a.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ym(a),s}function Jw(s,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:On,key:i==null?null:""+i,children:s,containerInfo:e,implementation:n}}function _j(s){if(!s)return Ks;s=s._reactInternals;e:{if(Ln(s)!==s||s.tag!==1)throw Error(R(170));var e=s;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Je(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(s.tag===1){var n=s.type;if(Je(n))return _g(s,n,e)}return e}function bj(s,e,n,i,r,a,l,o,c){return s=Dm(n,i,!0,s,r,a,l,o,c),s.context=_j(null),n=s.current,i=qe(),r=Us(n),a=ms(i,r),a.callback=e??null,Bs(n,a,r),s.current.lanes=r,ea(s,r,i),et(s,i),s}function so(s,e,n,i){var r=e.current,a=qe(),l=Us(r);return n=_j(n),e.context===null?e.context=n:e.pendingContext=n,e=ms(a,l),e.payload={element:s},i=i===void 0?null:i,i!==null&&(e.callback=i),s=Bs(r,e,l),s!==null&&(Ft(s,r,l,a),Wa(s,r,l)),l}function Rl(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Zu(s,e){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var n=s.retryLane;s.retryLane=n!==0&&n<e?n:e}}function Im(s,e){Zu(s,e),(s=s.alternate)&&Zu(s,e)}function e1(){return null}var kj=typeof reportError=="function"?reportError:function(s){console.error(s)};function Om(s){this._internalRoot=s}no.prototype.render=Om.prototype.render=function(s){var e=this._internalRoot;if(e===null)throw Error(R(409));so(s,e,null,null)};no.prototype.unmount=Om.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var e=s.containerInfo;En(function(){so(null,s,null,null)}),e[xs]=null}};function no(s){this._internalRoot=s}no.prototype.unstable_scheduleHydration=function(s){if(s){var e=sg();s={blockedOn:null,target:s,priority:e};for(var n=0;n<Es.length&&e!==0&&e<Es[n].priority;n++);Es.splice(n,0,s),n===0&&ig(s)}};function Fm(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function io(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Ju(){}function t1(s,e,n,i,r){if(r){if(typeof i=="function"){var a=i;i=function(){var h=Rl(l);a.call(h)}}var l=bj(e,i,s,0,null,!1,!1,"",Ju);return s._reactRootContainer=l,s[xs]=l.current,Cr(s.nodeType===8?s.parentNode:s),En(),l}for(;r=s.lastChild;)s.removeChild(r);if(typeof i=="function"){var o=i;i=function(){var h=Rl(c);o.call(h)}}var c=Dm(s,0,!1,null,null,!1,!1,"",Ju);return s._reactRootContainer=c,s[xs]=c.current,Cr(s.nodeType===8?s.parentNode:s),En(function(){so(e,c,n,i)}),c}function ro(s,e,n,i,r){var a=n._reactRootContainer;if(a){var l=a;if(typeof r=="function"){var o=r;r=function(){var c=Rl(l);o.call(c)}}so(e,l,s,r)}else l=t1(n,e,s,r,i);return Rl(l)}eg=function(s){switch(s.tag){case 3:var e=s.stateNode;if(e.current.memoizedState.isDehydrated){var n=Qi(e.pendingLanes);n!==0&&(im(e,n|1),et(e,je()),!($&6)&&(ji=je()+500,en()))}break;case 13:En(function(){var i=gs(s,1);if(i!==null){var r=qe();Ft(i,s,1,r)}}),Im(s,1)}};rm=function(s){if(s.tag===13){var e=gs(s,134217728);if(e!==null){var n=qe();Ft(e,s,134217728,n)}Im(s,134217728)}};tg=function(s){if(s.tag===13){var e=Us(s),n=gs(s,e);if(n!==null){var i=qe();Ft(n,s,e,i)}Im(s,e)}};sg=function(){return G};ng=function(s,e){var n=G;try{return G=s,e()}finally{G=n}};Mc=function(s,e,n){switch(e){case"input":if(bc(s,n),e=n.name,n.type==="radio"&&e!=null){for(n=s;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==s&&i.form===s.form){var r=Yl(i);if(!r)throw Error(R(90));Ax(i),bc(i,r)}}}break;case"textarea":Dx(s,n);break;case"select":e=n.value,e!=null&&ni(s,!!n.multiple,e,!1)}};Ux=Cm;Hx=En;var s1={usingClientEntryPoint:!1,Events:[sa,Un,Yl,Bx,Wx,Cm]},Hi={findFiberByHostInstance:dn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},n1={bundleType:Hi.bundleType,version:Hi.version,rendererPackageName:Hi.rendererPackageName,rendererConfig:Hi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ws.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=Xx(s),s===null?null:s.stateNode},findFiberByHostInstance:Hi.findFiberByHostInstance||e1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ea=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ea.isDisabled&&Ea.supportsFiber)try{$l=Ea.inject(n1),Gt=Ea}catch{}}gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s1;gt.createPortal=function(s,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fm(e))throw Error(R(200));return Jw(s,e,null,n)};gt.createRoot=function(s,e){if(!Fm(s))throw Error(R(299));var n=!1,i="",r=kj;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Dm(s,1,!1,null,null,n,!1,i,r),s[xs]=e.current,Cr(s.nodeType===8?s.parentNode:s),new Om(e)};gt.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var e=s._reactInternals;if(e===void 0)throw typeof s.render=="function"?Error(R(188)):(s=Object.keys(s).join(","),Error(R(268,s)));return s=Xx(e),s=s===null?null:s.stateNode,s};gt.flushSync=function(s){return En(s)};gt.hydrate=function(s,e,n){if(!io(e))throw Error(R(200));return ro(null,s,e,!0,n)};gt.hydrateRoot=function(s,e,n){if(!Fm(s))throw Error(R(405));var i=n!=null&&n.hydratedSources||null,r=!1,a="",l=kj;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),e=bj(e,null,s,1,n??null,r,!1,a,l),s[xs]=e.current,Cr(s),i)for(s=0;s<i.length;s++)n=i[s],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new no(e)};gt.render=function(s,e,n){if(!io(e))throw Error(R(200));return ro(null,s,e,!1,n)};gt.unmountComponentAtNode=function(s){if(!io(s))throw Error(R(40));return s._reactRootContainer?(En(function(){ro(null,null,s,!1,function(){s._reactRootContainer=null,s[xs]=null})}),!0):!1};gt.unstable_batchedUpdates=Cm;gt.unstable_renderSubtreeIntoContainer=function(s,e,n,i){if(!io(n))throw Error(R(200));if(s==null||s._reactInternals===void 0)throw Error(R(38));return ro(s,e,n,!1,i)};gt.version="18.3.1-next-f1338f8080-20240426";function Sj(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sj)}catch(s){console.error(s)}}Sj(),Sx.exports=gt;var i1=Sx.exports,ep=i1;gc.createRoot=ep.createRoot,gc.hydrateRoot=ep.hydrateRoot;/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var tp="popstate";function r1(s={}){function e(i,r){let{pathname:a,search:l,hash:o}=i.location;return hh("",{pathname:a,search:l,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Br(r)}return l1(e,n,null,s)}function he(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function Mt(s,e){if(!s){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function a1(){return Math.random().toString(36).substring(2,10)}function sp(s,e){return{usr:s.state,key:s.key,idx:e}}function hh(s,e,n=null,i){return{pathname:typeof s=="string"?s:s.pathname,search:"",hash:"",...typeof e=="string"?Pi(e):e,state:n,key:e&&e.key||i||a1()}}function Br({pathname:s="/",search:e="",hash:n=""}){return e&&e!=="?"&&(s+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(s+=n.charAt(0)==="#"?n:"#"+n),s}function Pi(s){let e={};if(s){let n=s.indexOf("#");n>=0&&(e.hash=s.substring(n),s=s.substring(0,n));let i=s.indexOf("?");i>=0&&(e.search=s.substring(i),s=s.substring(0,i)),s&&(e.pathname=s)}return e}function l1(s,e,n,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,l=r.history,o="POP",c=null,h=m();h==null&&(h=0,l.replaceState({...l.state,idx:h},""));function m(){return(l.state||{idx:null}).idx}function d(){o="POP";let v=m(),f=v==null?null:v-h;h=v,c&&c({action:o,location:g.location,delta:f})}function u(v,f){o="PUSH";let x=hh(g.location,v,f);h=m()+1;let j=sp(x,h),w=g.createHref(x);try{l.pushState(j,"",w)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(w)}a&&c&&c({action:o,location:g.location,delta:1})}function p(v,f){o="REPLACE";let x=hh(g.location,v,f);h=m();let j=sp(x,h),w=g.createHref(x);l.replaceState(j,"",w),a&&c&&c({action:o,location:g.location,delta:0})}function y(v){return o1(v)}let g={get action(){return o},get location(){return s(r,l)},listen(v){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(tp,d),c=v,()=>{r.removeEventListener(tp,d),c=null}},createHref(v){return e(r,v)},createURL:y,encodeLocation(v){let f=y(v);return{pathname:f.pathname,search:f.search,hash:f.hash}},push:u,replace:p,go(v){return l.go(v)}};return g}function o1(s,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),he(n,"No window.location.(origin|href) available to create URL");let i=typeof s=="string"?s:Br(s);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Tj(s,e,n="/"){return c1(s,e,n,!1)}function c1(s,e,n,i){let r=typeof e=="string"?Pi(e):e,a=ys(r.pathname||"/",n);if(a==null)return null;let l=Rj(s);h1(l);let o=null;for(let c=0;o==null&&c<l.length;++c){let h=N1(a);o=y1(l[c],h,i)}return o}function Rj(s,e=[],n=[],i="",r=!1){let a=(l,o,c=r,h)=>{let m={relativePath:h===void 0?l.path||"":h,caseSensitive:l.caseSensitive===!0,childrenIndex:o,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(i)&&c)return;he(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length)}let d=ds([i,m.relativePath]),u=n.concat(m);l.children&&l.children.length>0&&(he(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Rj(l.children,e,u,d,c)),!(l.path==null&&!l.index)&&e.push({path:d,score:g1(d,l.index),routesMeta:u})};return s.forEach((l,o)=>{var c;if(l.path===""||!((c=l.path)!=null&&c.includes("?")))a(l,o);else for(let h of Ej(l.path))a(l,o,!0,h)}),e}function Ej(s){let e=s.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let l=Ej(i.join("/")),o=[];return o.push(...l.map(c=>c===""?a:[a,c].join("/"))),r&&o.push(...l),o.map(c=>s.startsWith("/")&&c===""?"/":c)}function h1(s){s.sort((e,n)=>e.score!==n.score?n.score-e.score:j1(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var m1=/^:[\w-]+$/,d1=3,u1=2,p1=1,f1=10,x1=-2,np=s=>s==="*";function g1(s,e){let n=s.split("/"),i=n.length;return n.some(np)&&(i+=x1),e&&(i+=u1),n.filter(r=>!np(r)).reduce((r,a)=>r+(m1.test(a)?d1:a===""?p1:f1),i)}function j1(s,e){return s.length===e.length&&s.slice(0,-1).every((i,r)=>i===e[r])?s[s.length-1]-e[e.length-1]:0}function y1(s,e,n=!1){let{routesMeta:i}=s,r={},a="/",l=[];for(let o=0;o<i.length;++o){let c=i[o],h=o===i.length-1,m=a==="/"?e:e.slice(a.length)||"/",d=El({path:c.relativePath,caseSensitive:c.caseSensitive,end:h},m),u=c.route;if(!d&&h&&n&&!i[i.length-1].route.index&&(d=El({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},m)),!d)return null;Object.assign(r,d.params),l.push({params:r,pathname:ds([a,d.pathname]),pathnameBase:S1(ds([a,d.pathnameBase])),route:u}),d.pathnameBase!=="/"&&(a=ds([a,d.pathnameBase]))}return l}function El(s,e){typeof s=="string"&&(s={path:s,caseSensitive:!1,end:!0});let[n,i]=v1(s.path,s.caseSensitive,s.end),r=e.match(n);if(!r)return null;let a=r[0],l=a.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:i.reduce((h,{paramName:m,isOptional:d},u)=>{if(m==="*"){let y=o[u]||"";l=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const p=o[u];return d&&!p?h[m]=void 0:h[m]=(p||"").replace(/%2F/g,"/"),h},{}),pathname:a,pathnameBase:l,pattern:s}}function v1(s,e=!1,n=!0){Mt(s==="*"||!s.endsWith("*")||s.endsWith("/*"),`Route path "${s}" will be treated as if it were "${s.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${s.replace(/\*$/,"/*")}".`);let i=[],r="^"+s.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,o,c)=>(i.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return s.endsWith("*")?(i.push({paramName:"*"}),r+=s==="*"||s==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":s!==""&&s!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function N1(s){try{return s.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Mt(!1,`The URL path "${s}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),s}}function ys(s,e){if(e==="/")return s;if(!s.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=s.charAt(n);return i&&i!=="/"?null:s.slice(n)||"/"}var w1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_1=s=>w1.test(s);function b1(s,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof s=="string"?Pi(s):s,a;if(n)if(_1(n))a=n;else{if(n.includes("//")){let l=n;n=n.replace(/\/\/+/g,"/"),Mt(!1,`Pathnames cannot have embedded double slashes - normalizing ${l} -> ${n}`)}n.startsWith("/")?a=ip(n.substring(1),"/"):a=ip(n,e)}else a=e;return{pathname:a,search:T1(i),hash:R1(r)}}function ip(s,e){let n=e.replace(/\/+$/,"").split("/");return s.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function qo(s,e,n,i){return`Cannot include a '${s}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function k1(s){return s.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Pj(s){let e=k1(s);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Mj(s,e,n,i=!1){let r;typeof s=="string"?r=Pi(s):(r={...s},he(!r.pathname||!r.pathname.includes("?"),qo("?","pathname","search",r)),he(!r.pathname||!r.pathname.includes("#"),qo("#","pathname","hash",r)),he(!r.search||!r.search.includes("#"),qo("#","search","hash",r)));let a=s===""||r.pathname==="",l=a?"/":r.pathname,o;if(l==null)o=n;else{let d=e.length-1;if(!i&&l.startsWith("..")){let u=l.split("/");for(;u[0]==="..";)u.shift(),d-=1;r.pathname=u.join("/")}o=d>=0?e[d]:"/"}let c=b1(r,o),h=l&&l!=="/"&&l.endsWith("/"),m=(a||l===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(h||m)&&(c.pathname+="/"),c}var ds=s=>s.join("/").replace(/\/\/+/g,"/"),S1=s=>s.replace(/\/+$/,"").replace(/^\/*/,"/"),T1=s=>!s||s==="?"?"":s.startsWith("?")?s:"?"+s,R1=s=>!s||s==="#"?"":s.startsWith("#")?s:"#"+s;function E1(s){return s!=null&&typeof s.status=="number"&&typeof s.statusText=="string"&&typeof s.internal=="boolean"&&"data"in s}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Cj=["POST","PUT","PATCH","DELETE"];new Set(Cj);var P1=["GET",...Cj];new Set(P1);var Mi=_.createContext(null);Mi.displayName="DataRouter";var ao=_.createContext(null);ao.displayName="DataRouterState";_.createContext(!1);var Lj=_.createContext({isTransitioning:!1});Lj.displayName="ViewTransition";var M1=_.createContext(new Map);M1.displayName="Fetchers";var C1=_.createContext(null);C1.displayName="Await";var ss=_.createContext(null);ss.displayName="Navigation";var ia=_.createContext(null);ia.displayName="Location";var ns=_.createContext({outlet:null,matches:[],isDataRoute:!1});ns.displayName="Route";var Vm=_.createContext(null);Vm.displayName="RouteError";function L1(s,{relative:e}={}){he(ra(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=_.useContext(ss),{hash:r,pathname:a,search:l}=aa(s,{relative:e}),o=a;return n!=="/"&&(o=a==="/"?n:ds([n,a])),i.createHref({pathname:o,search:l,hash:r})}function ra(){return _.useContext(ia)!=null}function is(){return he(ra(),"useLocation() may be used only in the context of a <Router> component."),_.useContext(ia).location}var Aj="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function zj(s){_.useContext(ss).static||_.useLayoutEffect(s)}function Dj(){let{isDataRoute:s}=_.useContext(ns);return s?q1():A1()}function A1(){he(ra(),"useNavigate() may be used only in the context of a <Router> component.");let s=_.useContext(Mi),{basename:e,navigator:n}=_.useContext(ss),{matches:i}=_.useContext(ns),{pathname:r}=is(),a=JSON.stringify(Pj(i)),l=_.useRef(!1);return zj(()=>{l.current=!0}),_.useCallback((c,h={})=>{if(Mt(l.current,Aj),!l.current)return;if(typeof c=="number"){n.go(c);return}let m=Mj(c,JSON.parse(a),r,h.relative==="path");s==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:ds([e,m.pathname])),(h.replace?n.replace:n.push)(m,h.state,h)},[e,n,a,r,s])}_.createContext(null);function fE(){let{matches:s}=_.useContext(ns),e=s[s.length-1];return e?e.params:{}}function aa(s,{relative:e}={}){let{matches:n}=_.useContext(ns),{pathname:i}=is(),r=JSON.stringify(Pj(n));return _.useMemo(()=>Mj(s,JSON.parse(r),i,e==="path"),[s,r,i,e])}function z1(s,e){return Ij(s,e)}function Ij(s,e,n,i,r){var x;he(ra(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=_.useContext(ss),{matches:l}=_.useContext(ns),o=l[l.length-1],c=o?o.params:{},h=o?o.pathname:"/",m=o?o.pathnameBase:"/",d=o&&o.route;{let j=d&&d.path||"";Oj(h,!d||j.endsWith("*")||j.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${h}" (under <Route path="${j}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${j}"> to <Route path="${j==="/"?"*":`${j}/*`}">.`)}let u=is(),p;if(e){let j=typeof e=="string"?Pi(e):e;he(m==="/"||((x=j.pathname)==null?void 0:x.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${j.pathname}" was given in the \`location\` prop.`),p=j}else p=u;let y=p.pathname||"/",g=y;if(m!=="/"){let j=m.replace(/^\//,"").split("/");g="/"+y.replace(/^\//,"").split("/").slice(j.length).join("/")}let v=Tj(s,{pathname:g});Mt(d||v!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Mt(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let f=V1(v&&v.map(j=>Object.assign({},j,{params:Object.assign({},c,j.params),pathname:ds([m,a.encodeLocation?a.encodeLocation(j.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?m:ds([m,a.encodeLocation?a.encodeLocation(j.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:j.pathnameBase])})),l,n,i,r);return e&&f?_.createElement(ia.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},f):f}function D1(){let s=$1(),e=E1(s)?`${s.status} ${s.statusText}`:s instanceof Error?s.message:JSON.stringify(s),n=s instanceof Error?s.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",s),l=_.createElement(_.Fragment,null,_.createElement("p",null," Hey developer "),_.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",_.createElement("code",{style:a},"ErrorBoundary")," or"," ",_.createElement("code",{style:a},"errorElement")," prop on your route.")),_.createElement(_.Fragment,null,_.createElement("h2",null,"Unexpected Application Error!"),_.createElement("h3",{style:{fontStyle:"italic"}},e),n?_.createElement("pre",{style:r},n):null,l)}var I1=_.createElement(D1,null),O1=class extends _.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,e){return e.location!==s.location||e.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:e.error,location:e.location,revalidation:s.revalidation||e.revalidation}}componentDidCatch(s,e){this.props.onError?this.props.onError(s,e):console.error("React Router caught the following error during render",s)}render(){return this.state.error!==void 0?_.createElement(ns.Provider,{value:this.props.routeContext},_.createElement(Vm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function F1({routeContext:s,match:e,children:n}){let i=_.useContext(Mi);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),_.createElement(ns.Provider,{value:s},n)}function V1(s,e=[],n=null,i=null,r=null){if(s==null){if(!n)return null;if(n.errors)s=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)s=n.matches;else return null}let a=s,l=n==null?void 0:n.errors;if(l!=null){let m=a.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);he(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let o=!1,c=-1;if(n)for(let m=0;m<a.length;m++){let d=a[m];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=m),d.route.id){let{loaderData:u,errors:p}=n,y=d.route.loader&&!u.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||y){o=!0,c>=0?a=a.slice(0,c+1):a=[a[0]];break}}}let h=n&&i?(m,d)=>{var u,p;i(m,{location:n.location,params:((p=(u=n.matches)==null?void 0:u[0])==null?void 0:p.params)??{},errorInfo:d})}:void 0;return a.reduceRight((m,d,u)=>{let p,y=!1,g=null,v=null;n&&(p=l&&d.route.id?l[d.route.id]:void 0,g=d.route.errorElement||I1,o&&(c<0&&u===0?(Oj("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,v=null):c===u&&(y=!0,v=d.route.hydrateFallbackElement||null)));let f=e.concat(a.slice(0,u+1)),x=()=>{let j;return p?j=g:y?j=v:d.route.Component?j=_.createElement(d.route.Component,null):d.route.element?j=d.route.element:j=m,_.createElement(F1,{match:d,routeContext:{outlet:m,matches:f,isDataRoute:n!=null},children:j})};return n&&(d.route.ErrorBoundary||d.route.errorElement||u===0)?_.createElement(O1,{location:n.location,revalidation:n.revalidation,component:g,error:p,children:x(),routeContext:{outlet:null,matches:f,isDataRoute:!0},onError:h}):x()},null)}function Bm(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function B1(s){let e=_.useContext(Mi);return he(e,Bm(s)),e}function W1(s){let e=_.useContext(ao);return he(e,Bm(s)),e}function U1(s){let e=_.useContext(ns);return he(e,Bm(s)),e}function Wm(s){let e=U1(s),n=e.matches[e.matches.length-1];return he(n.route.id,`${s} can only be used on routes that contain a unique "id"`),n.route.id}function H1(){return Wm("useRouteId")}function $1(){var i;let s=_.useContext(Vm),e=W1("useRouteError"),n=Wm("useRouteError");return s!==void 0?s:(i=e.errors)==null?void 0:i[n]}function q1(){let{router:s}=B1("useNavigate"),e=Wm("useNavigate"),n=_.useRef(!1);return zj(()=>{n.current=!0}),_.useCallback(async(r,a={})=>{Mt(n.current,Aj),n.current&&(typeof r=="number"?s.navigate(r):await s.navigate(r,{fromRouteId:e,...a}))},[s,e])}var rp={};function Oj(s,e,n){!e&&!rp[s]&&(rp[s]=!0,Mt(!1,n))}_.memo(X1);function X1({routes:s,future:e,state:n,unstable_onError:i}){return Ij(s,void 0,n,i,e)}function Ut(s){he(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function K1({basename:s="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:a=!1}){he(!ra(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=s.replace(/^\/*/,"/"),o=_.useMemo(()=>({basename:l,navigator:r,static:a,future:{}}),[l,r,a]);typeof n=="string"&&(n=Pi(n));let{pathname:c="/",search:h="",hash:m="",state:d=null,key:u="default"}=n,p=_.useMemo(()=>{let y=ys(c,l);return y==null?null:{location:{pathname:y,search:h,hash:m,state:d,key:u},navigationType:i}},[l,c,h,m,d,u,i]);return Mt(p!=null,`<Router basename="${l}"> is not able to match the URL "${c}${h}${m}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:_.createElement(ss.Provider,{value:o},_.createElement(ia.Provider,{children:e,value:p}))}function Y1({children:s,location:e}){return z1(mh(s),e)}function mh(s,e=[]){let n=[];return _.Children.forEach(s,(i,r)=>{if(!_.isValidElement(i))return;let a=[...e,r];if(i.type===_.Fragment){n.push.apply(n,mh(i.props.children,a));return}he(i.type===Ut,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),he(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=mh(i.props.children,a)),n.push(l)}),n}var Ya="get",Ga="application/x-www-form-urlencoded";function lo(s){return s!=null&&typeof s.tagName=="string"}function G1(s){return lo(s)&&s.tagName.toLowerCase()==="button"}function Q1(s){return lo(s)&&s.tagName.toLowerCase()==="form"}function Z1(s){return lo(s)&&s.tagName.toLowerCase()==="input"}function J1(s){return!!(s.metaKey||s.altKey||s.ctrlKey||s.shiftKey)}function e_(s,e){return s.button===0&&(!e||e==="_self")&&!J1(s)}function dh(s=""){return new URLSearchParams(typeof s=="string"||Array.isArray(s)||s instanceof URLSearchParams?s:Object.keys(s).reduce((e,n)=>{let i=s[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function t_(s,e){let n=dh(s);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(a=>{n.append(r,a)})}),n}var Pa=null;function s_(){if(Pa===null)try{new FormData(document.createElement("form"),0),Pa=!1}catch{Pa=!0}return Pa}var n_=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xo(s){return s!=null&&!n_.has(s)?(Mt(!1,`"${s}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ga}"`),null):s}function i_(s,e){let n,i,r,a,l;if(Q1(s)){let o=s.getAttribute("action");i=o?ys(o,e):null,n=s.getAttribute("method")||Ya,r=Xo(s.getAttribute("enctype"))||Ga,a=new FormData(s)}else if(G1(s)||Z1(s)&&(s.type==="submit"||s.type==="image")){let o=s.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=s.getAttribute("formaction")||o.getAttribute("action");if(i=c?ys(c,e):null,n=s.getAttribute("formmethod")||o.getAttribute("method")||Ya,r=Xo(s.getAttribute("formenctype"))||Xo(o.getAttribute("enctype"))||Ga,a=new FormData(o,s),!s_()){let{name:h,type:m,value:d}=s;if(m==="image"){let u=h?`${h}.`:"";a.append(`${u}x`,"0"),a.append(`${u}y`,"0")}else h&&a.append(h,d)}}else{if(lo(s))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Ya,i=null,r=Ga,l=s}return a&&r==="text/plain"&&(l=a,a=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Um(s,e){if(s===!1||s===null||typeof s>"u")throw new Error(e)}function r_(s,e,n){let i=typeof s=="string"?new URL(s,typeof window>"u"?"server://singlefetch/":window.location.origin):s;return i.pathname==="/"?i.pathname=`_root.${n}`:e&&ys(i.pathname,e)==="/"?i.pathname=`${e.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function a_(s,e){if(s.id in e)return e[s.id];try{let n=await import(s.module);return e[s.id]=n,n}catch(n){return console.error(`Error loading route module \`${s.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function l_(s){return s==null?!1:s.href==null?s.rel==="preload"&&typeof s.imageSrcSet=="string"&&typeof s.imageSizes=="string":typeof s.rel=="string"&&typeof s.href=="string"}async function o_(s,e,n){let i=await Promise.all(s.map(async r=>{let a=e.routes[r.route.id];if(a){let l=await a_(a,n);return l.links?l.links():[]}return[]}));return d_(i.flat(1).filter(l_).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function ap(s,e,n,i,r,a){let l=(c,h)=>n[h]?c.route.id!==n[h].route.id:!0,o=(c,h)=>{var m;return n[h].pathname!==c.pathname||((m=n[h].route.path)==null?void 0:m.endsWith("*"))&&n[h].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,h)=>l(c,h)||o(c,h)):a==="data"?e.filter((c,h)=>{var d;let m=i.routes[c.route.id];if(!m||!m.hasLoader)return!1;if(l(c,h)||o(c,h))return!0;if(c.route.shouldRevalidate){let u=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((d=n[0])==null?void 0:d.params)||{},nextUrl:new URL(s,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof u=="boolean")return u}return!0}):[]}function c_(s,e,{includeHydrateFallback:n}={}){return h_(s.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function h_(s){return[...new Set(s)]}function m_(s){let e={},n=Object.keys(s).sort();for(let i of n)e[i]=s[i];return e}function d_(s,e){let n=new Set;return new Set(e),s.reduce((i,r)=>{let a=JSON.stringify(m_(r));return n.has(a)||(n.add(a),i.push({key:a,link:r})),i},[])}function Fj(){let s=_.useContext(Mi);return Um(s,"You must render this element inside a <DataRouterContext.Provider> element"),s}function u_(){let s=_.useContext(ao);return Um(s,"You must render this element inside a <DataRouterStateContext.Provider> element"),s}var Hm=_.createContext(void 0);Hm.displayName="FrameworkContext";function Vj(){let s=_.useContext(Hm);return Um(s,"You must render this element inside a <HydratedRouter> element"),s}function p_(s,e){let n=_.useContext(Hm),[i,r]=_.useState(!1),[a,l]=_.useState(!1),{onFocus:o,onBlur:c,onMouseEnter:h,onMouseLeave:m,onTouchStart:d}=e,u=_.useRef(null);_.useEffect(()=>{if(s==="render"&&l(!0),s==="viewport"){let g=f=>{f.forEach(x=>{l(x.isIntersecting)})},v=new IntersectionObserver(g,{threshold:.5});return u.current&&v.observe(u.current),()=>{v.disconnect()}}},[s]),_.useEffect(()=>{if(i){let g=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(g)}}},[i]);let p=()=>{r(!0)},y=()=>{r(!1),l(!1)};return n?s!=="intent"?[a,u,{}]:[a,u,{onFocus:$i(o,p),onBlur:$i(c,y),onMouseEnter:$i(h,p),onMouseLeave:$i(m,y),onTouchStart:$i(d,p)}]:[!1,u,{}]}function $i(s,e){return n=>{s&&s(n),n.defaultPrevented||e(n)}}function f_({page:s,...e}){let{router:n}=Fj(),i=_.useMemo(()=>Tj(n.routes,s,n.basename),[n.routes,s,n.basename]);return i?_.createElement(g_,{page:s,matches:i,...e}):null}function x_(s){let{manifest:e,routeModules:n}=Vj(),[i,r]=_.useState([]);return _.useEffect(()=>{let a=!1;return o_(s,e,n).then(l=>{a||r(l)}),()=>{a=!0}},[s,e,n]),i}function g_({page:s,matches:e,...n}){let i=is(),{manifest:r,routeModules:a}=Vj(),{basename:l}=Fj(),{loaderData:o,matches:c}=u_(),h=_.useMemo(()=>ap(s,e,c,r,i,"data"),[s,e,c,r,i]),m=_.useMemo(()=>ap(s,e,c,r,i,"assets"),[s,e,c,r,i]),d=_.useMemo(()=>{if(s===i.pathname+i.search+i.hash)return[];let y=new Set,g=!1;if(e.forEach(f=>{var j;let x=r.routes[f.route.id];!x||!x.hasLoader||(!h.some(w=>w.route.id===f.route.id)&&f.route.id in o&&((j=a[f.route.id])!=null&&j.shouldRevalidate)||x.hasClientLoader?g=!0:y.add(f.route.id))}),y.size===0)return[];let v=r_(s,l,"data");return g&&y.size>0&&v.searchParams.set("_routes",e.filter(f=>y.has(f.route.id)).map(f=>f.route.id).join(",")),[v.pathname+v.search]},[l,o,i,r,h,e,s,a]),u=_.useMemo(()=>c_(m,r),[m,r]),p=x_(m);return _.createElement(_.Fragment,null,d.map(y=>_.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),u.map(y=>_.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),p.map(({key:y,link:g})=>_.createElement("link",{key:y,nonce:n.nonce,...g})))}function j_(...s){return e=>{s.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var Bj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Bj&&(window.__reactRouterVersion="7.9.6")}catch{}function y_({basename:s,children:e,window:n}){let i=_.useRef();i.current==null&&(i.current=r1({window:n,v5Compat:!0}));let r=i.current,[a,l]=_.useState({action:r.action,location:r.location}),o=_.useCallback(c=>{_.startTransition(()=>l(c))},[l]);return _.useLayoutEffect(()=>r.listen(o),[r,o]),_.createElement(K1,{basename:s,children:e,location:a.location,navigationType:a.action,navigator:r})}var Wj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ls=_.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:a,replace:l,state:o,target:c,to:h,preventScrollReset:m,viewTransition:d,...u},p){let{basename:y}=_.useContext(ss),g=typeof h=="string"&&Wj.test(h),v,f=!1;if(typeof h=="string"&&g&&(v=h,Bj))try{let T=new URL(window.location.href),P=h.startsWith("//")?new URL(T.protocol+h):new URL(h),I=ys(P.pathname,y);P.origin===T.origin&&I!=null?h=I+P.search+P.hash:f=!0}catch{Mt(!1,`<Link to="${h}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let x=L1(h,{relative:r}),[j,w,N]=p_(i,u),b=__(h,{replace:l,state:o,target:c,preventScrollReset:m,relative:r,viewTransition:d});function S(T){e&&e(T),T.defaultPrevented||b(T)}let k=_.createElement("a",{...u,...N,href:v||x,onClick:f||a?e:S,ref:j_(p,w),target:c,"data-discover":!g&&n==="render"?"true":void 0});return j&&!g?_.createElement(_.Fragment,null,k,_.createElement(f_,{page:x})):k});Ls.displayName="Link";var v_=_.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:a,to:l,viewTransition:o,children:c,...h},m){let d=aa(l,{relative:h.relative}),u=is(),p=_.useContext(ao),{navigator:y,basename:g}=_.useContext(ss),v=p!=null&&R_(d)&&o===!0,f=y.encodeLocation?y.encodeLocation(d).pathname:d.pathname,x=u.pathname,j=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;n||(x=x.toLowerCase(),j=j?j.toLowerCase():null,f=f.toLowerCase()),j&&g&&(j=ys(j,g)||j);const w=f!=="/"&&f.endsWith("/")?f.length-1:f.length;let N=x===f||!r&&x.startsWith(f)&&x.charAt(w)==="/",b=j!=null&&(j===f||!r&&j.startsWith(f)&&j.charAt(f.length)==="/"),S={isActive:N,isPending:b,isTransitioning:v},k=N?e:void 0,T;typeof i=="function"?T=i(S):T=[i,N?"active":null,b?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let P=typeof a=="function"?a(S):a;return _.createElement(Ls,{...h,"aria-current":k,className:T,ref:m,style:P,to:l,viewTransition:o},typeof c=="function"?c(S):c)});v_.displayName="NavLink";var N_=_.forwardRef(({discover:s="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:a,method:l=Ya,action:o,onSubmit:c,relative:h,preventScrollReset:m,viewTransition:d,...u},p)=>{let y=S_(),g=T_(o,{relative:h}),v=l.toLowerCase()==="get"?"get":"post",f=typeof o=="string"&&Wj.test(o),x=j=>{if(c&&c(j),j.defaultPrevented)return;j.preventDefault();let w=j.nativeEvent.submitter,N=(w==null?void 0:w.getAttribute("formmethod"))||l;y(w||j.currentTarget,{fetcherKey:e,method:N,navigate:n,replace:r,state:a,relative:h,preventScrollReset:m,viewTransition:d})};return _.createElement("form",{ref:p,method:v,action:g,onSubmit:i?c:x,...u,"data-discover":!f&&s==="render"?"true":void 0})});N_.displayName="Form";function w_(s){return`${s} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Uj(s){let e=_.useContext(Mi);return he(e,w_(s)),e}function __(s,{target:e,replace:n,state:i,preventScrollReset:r,relative:a,viewTransition:l}={}){let o=Dj(),c=is(),h=aa(s,{relative:a});return _.useCallback(m=>{if(e_(m,e)){m.preventDefault();let d=n!==void 0?n:Br(c)===Br(h);o(s,{replace:d,state:i,preventScrollReset:r,relative:a,viewTransition:l})}},[c,o,h,n,i,e,s,r,a,l])}function xE(s){Mt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=_.useRef(dh(s)),n=_.useRef(!1),i=is(),r=_.useMemo(()=>t_(i.search,n.current?null:e.current),[i.search]),a=Dj(),l=_.useCallback((o,c)=>{const h=dh(typeof o=="function"?o(new URLSearchParams(r)):o);n.current=!0,a("?"+h,c)},[a,r]);return[r,l]}var b_=0,k_=()=>`__${String(++b_)}__`;function S_(){let{router:s}=Uj("useSubmit"),{basename:e}=_.useContext(ss),n=H1();return _.useCallback(async(i,r={})=>{let{action:a,method:l,encType:o,formData:c,body:h}=i_(i,e);if(r.navigate===!1){let m=r.fetcherKey||k_();await s.fetch(m,n,r.action||a,{preventScrollReset:r.preventScrollReset,formData:c,body:h,formMethod:r.method||l,formEncType:r.encType||o,flushSync:r.flushSync})}else await s.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:c,body:h,formMethod:r.method||l,formEncType:r.encType||o,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[s,e,n])}function T_(s,{relative:e}={}){let{basename:n}=_.useContext(ss),i=_.useContext(ns);he(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...aa(s||".",{relative:e})},l=is();if(s==null){a.search=l.search;let o=new URLSearchParams(a.search),c=o.getAll("index");if(c.some(m=>m==="")){o.delete("index"),c.filter(d=>d).forEach(d=>o.append("index",d));let m=o.toString();a.search=m?`?${m}`:""}}return(!s||s===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:ds([n,a.pathname])),Br(a)}function R_(s,{relative:e}={}){let n=_.useContext(Lj);he(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Uj("useViewTransitionState"),r=aa(s,{relative:e});if(!n.isTransitioning)return!1;let a=ys(n.currentLocation.pathname,i)||n.currentLocation.pathname,l=ys(n.nextLocation.pathname,i)||n.nextLocation.pathname;return El(r.pathname,l)!=null||El(r.pathname,a)!=null}const E_="modulepreload",P_=function(s){return"/"+s},lp={},Ci=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),o=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=P_(c),c in lp)return;lp[c]=!0;const h=c.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${m}`))return;const d=document.createElement("link");if(d.rel=h?"stylesheet":E_,h||(d.as="script"),d.crossOrigin="",d.href=c,o&&d.setAttribute("nonce",o),document.head.appendChild(d),h)return new Promise((u,p)=>{d.addEventListener("load",u),d.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(l){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=l,window.dispatchEvent(o),!o.defaultPrevented)throw l}return r.then(l=>{for(const o of l||[])o.status==="rejected"&&a(o.reason);return e().catch(a)})},$m=_.createContext({});function Li(s){const e=_.useRef(null);return e.current===null&&(e.current=s()),e.current}const oo=_.createContext(null),co=_.createContext({transformPagePoint:s=>s,isStatic:!1,reducedMotion:"never"});class M_ extends _.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=this.props.sizeRef.current;i.height=n.offsetHeight||0,i.width=n.offsetWidth||0,i.top=n.offsetTop,i.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function C_({children:s,isPresent:e}){const n=_.useId(),i=_.useRef(null),r=_.useRef({width:0,height:0,top:0,left:0}),{nonce:a}=_.useContext(co);return _.useInsertionEffect(()=>{const{width:l,height:o,top:c,left:h}=r.current;if(e||!i.current||!l||!o)return;i.current.dataset.motionPopId=n;const m=document.createElement("style");return a&&(m.nonce=a),document.head.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${l}px !important;
            height: ${o}px !important;
            top: ${c}px !important;
            left: ${h}px !important;
          }
        `),()=>{document.head.removeChild(m)}},[e]),t.jsx(M_,{isPresent:e,childRef:i,sizeRef:r,children:_.cloneElement(s,{ref:i})})}const L_=({children:s,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:a,mode:l})=>{const o=Li(A_),c=_.useId(),h=_.useCallback(d=>{o.set(d,!0);for(const u of o.values())if(!u)return;i&&i()},[o,i]),m=_.useMemo(()=>({id:c,initial:e,isPresent:n,custom:r,onExitComplete:h,register:d=>(o.set(d,!1),()=>o.delete(d))}),a?[Math.random(),h]:[n,h]);return _.useMemo(()=>{o.forEach((d,u)=>o.set(u,!1))},[n]),_.useEffect(()=>{!n&&!o.size&&i&&i()},[n]),l==="popLayout"&&(s=t.jsx(C_,{isPresent:n,children:s})),t.jsx(oo.Provider,{value:m,children:s})};function A_(){return new Map}function Hj(s=!0){const e=_.useContext(oo);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,a=_.useId();_.useEffect(()=>{s&&r(a)},[s]);const l=_.useCallback(()=>s&&i&&i(a),[a,i,s]);return!n&&i?[!1,l]:[!0]}const Ma=s=>s.key||"";function op(s){const e=[];return _.Children.forEach(s,n=>{_.isValidElement(n)&&e.push(n)}),e}const qm=typeof window<"u",ho=qm?_.useLayoutEffect:_.useEffect,uh=({children:s,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:a="sync",propagate:l=!1})=>{const[o,c]=Hj(l),h=_.useMemo(()=>op(s),[s]),m=l&&!o?[]:h.map(Ma),d=_.useRef(!0),u=_.useRef(h),p=Li(()=>new Map),[y,g]=_.useState(h),[v,f]=_.useState(h);ho(()=>{d.current=!1,u.current=h;for(let w=0;w<v.length;w++){const N=Ma(v[w]);m.includes(N)?p.delete(N):p.get(N)!==!0&&p.set(N,!1)}},[v,m.length,m.join("-")]);const x=[];if(h!==y){let w=[...h];for(let N=0;N<v.length;N++){const b=v[N],S=Ma(b);m.includes(S)||(w.splice(N,0,b),x.push(b))}a==="wait"&&x.length&&(w=x),f(op(w)),g(h);return}const{forceRender:j}=_.useContext($m);return t.jsx(t.Fragment,{children:v.map(w=>{const N=Ma(w),b=l&&!o?!1:h===v||m.includes(N),S=()=>{if(p.has(N))p.set(N,!0);else return;let k=!0;p.forEach(T=>{T||(k=!1)}),k&&(j==null||j(),f(u.current),l&&(c==null||c()),i&&i())};return t.jsx(L_,{isPresent:b,initial:!d.current||n?void 0:!1,custom:b?void 0:e,presenceAffectsLayout:r,mode:a,onExitComplete:b?void 0:S,children:w},N)})})},Xe=s=>s;let z_=Xe,$j=Xe;function Xm(s){let e;return()=>(e===void 0&&(e=s()),e)}const Pn=(s,e,n)=>{const i=e-s;return i===0?1:(n-s)/i},us=s=>s*1e3,ps=s=>s/1e3,D_={useManualTiming:!1};function I_(s){let e=new Set,n=new Set,i=!1,r=!1;const a=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function o(h){a.has(h)&&(c.schedule(h),s()),h(l)}const c={schedule:(h,m=!1,d=!1)=>{const p=d&&i?e:n;return m&&a.add(h),p.has(h)||p.add(h),h},cancel:h=>{n.delete(h),a.delete(h)},process:h=>{if(l=h,i){r=!0;return}i=!0,[e,n]=[n,e],e.forEach(o),e.clear(),i=!1,r&&(r=!1,c.process(h))}};return c}const Ca=["read","resolveKeyframes","update","preRender","render","postRender"],O_=40;function qj(s,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,l=Ca.reduce((f,x)=>(f[x]=I_(a),f),{}),{read:o,resolveKeyframes:c,update:h,preRender:m,render:d,postRender:u}=l,p=()=>{const f=performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(f-r.timestamp,O_),1),r.timestamp=f,r.isProcessing=!0,o.process(r),c.process(r),h.process(r),m.process(r),d.process(r),u.process(r),r.isProcessing=!1,n&&e&&(i=!1,s(p))},y=()=>{n=!0,i=!0,r.isProcessing||s(p)};return{schedule:Ca.reduce((f,x)=>{const j=l[x];return f[x]=(w,N=!1,b=!1)=>(n||y(),j.schedule(w,N,b)),f},{}),cancel:f=>{for(let x=0;x<Ca.length;x++)l[Ca[x]].cancel(f)},state:r,steps:l}}const{schedule:q,cancel:Bt,state:ke,steps:Ko}=qj(typeof requestAnimationFrame<"u"?requestAnimationFrame:Xe,!0),Xj=_.createContext({strict:!1}),cp={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yi={};for(const s in cp)yi[s]={isEnabled:e=>cp[s].some(n=>!!e[n])};function F_(s){for(const e in s)yi[e]={...yi[e],...s[e]}}const V_=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Pl(s){return s.startsWith("while")||s.startsWith("drag")&&s!=="draggable"||s.startsWith("layout")||s.startsWith("onTap")||s.startsWith("onPan")||s.startsWith("onLayout")||V_.has(s)}let Kj=s=>!Pl(s);function B_(s){s&&(Kj=e=>e.startsWith("on")?!Pl(e):s(e))}try{B_(require("@emotion/is-prop-valid").default)}catch{}function W_(s,e,n){const i={};for(const r in s)r==="values"&&typeof s.values=="object"||(Kj(r)||n===!0&&Pl(r)||!e&&!Pl(r)||s.draggable&&r.startsWith("onDrag"))&&(i[r]=s[r]);return i}function U_(s){if(typeof Proxy>"u")return s;const e=new Map,n=(...i)=>s(...i);return new Proxy(n,{get:(i,r)=>r==="create"?s:(e.has(r)||e.set(r,s(r)),e.get(r))})}const mo=_.createContext({});function Wr(s){return typeof s=="string"||Array.isArray(s)}function uo(s){return s!==null&&typeof s=="object"&&typeof s.start=="function"}const Km=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ym=["initial",...Km];function po(s){return uo(s.animate)||Ym.some(e=>Wr(s[e]))}function Yj(s){return!!(po(s)||s.variants)}function H_(s,e){if(po(s)){const{initial:n,animate:i}=s;return{initial:n===!1||Wr(n)?n:void 0,animate:Wr(i)?i:void 0}}return s.inherit!==!1?e:{}}function $_(s){const{initial:e,animate:n}=H_(s,_.useContext(mo));return _.useMemo(()=>({initial:e,animate:n}),[hp(e),hp(n)])}function hp(s){return Array.isArray(s)?s.join(" "):s}const q_=Symbol.for("motionComponentSymbol");function Gn(s){return s&&typeof s=="object"&&Object.prototype.hasOwnProperty.call(s,"current")}function X_(s,e,n){return _.useCallback(i=>{i&&s.onMount&&s.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):Gn(n)&&(n.current=i))},[e])}const Gm=s=>s.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),K_="framerAppearId",Gj="data-"+Gm(K_),{schedule:Qm}=qj(queueMicrotask,!1),Qj=_.createContext({});function Y_(s,e,n,i,r){var a,l;const{visualElement:o}=_.useContext(mo),c=_.useContext(Xj),h=_.useContext(oo),m=_.useContext(co).reducedMotion,d=_.useRef(null);i=i||c.renderer,!d.current&&i&&(d.current=i(s,{visualState:e,parent:o,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const u=d.current,p=_.useContext(Qj);u&&!u.projection&&r&&(u.type==="html"||u.type==="svg")&&G_(d.current,n,r,p);const y=_.useRef(!1);_.useInsertionEffect(()=>{u&&y.current&&u.update(n,h)});const g=n[Gj],v=_.useRef(!!g&&!(!((a=window.MotionHandoffIsComplete)===null||a===void 0)&&a.call(window,g))&&((l=window.MotionHasOptimisedAnimation)===null||l===void 0?void 0:l.call(window,g)));return ho(()=>{u&&(y.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),Qm.render(u.render),v.current&&u.animationState&&u.animationState.animateChanges())}),_.useEffect(()=>{u&&(!v.current&&u.animationState&&u.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{var f;(f=window.MotionHandoffMarkAsComplete)===null||f===void 0||f.call(window,g)}),v.current=!1))}),u}function G_(s,e,n,i){const{layoutId:r,layout:a,drag:l,dragConstraints:o,layoutScroll:c,layoutRoot:h}=e;s.projection=new n(s.latestValues,e["data-framer-portal-id"]?void 0:Zj(s.parent)),s.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:!!l||o&&Gn(o),visualElement:s,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,layoutScroll:c,layoutRoot:h})}function Zj(s){if(s)return s.options.allowProjection!==!1?s.projection:Zj(s.parent)}function Q_({preloadedFeatures:s,createVisualElement:e,useRender:n,useVisualState:i,Component:r}){var a,l;s&&F_(s);function o(h,m){let d;const u={..._.useContext(co),...h,layoutId:Z_(h)},{isStatic:p}=u,y=$_(h),g=i(h,p);if(!p&&qm){J_();const v=eb(u);d=v.MeasureLayout,y.visualElement=Y_(r,g,u,e,v.ProjectionNode)}return t.jsxs(mo.Provider,{value:y,children:[d&&y.visualElement?t.jsx(d,{visualElement:y.visualElement,...u}):null,n(r,h,X_(g,y.visualElement,m),g,p,y.visualElement)]})}o.displayName=`motion.${typeof r=="string"?r:`create(${(l=(a=r.displayName)!==null&&a!==void 0?a:r.name)!==null&&l!==void 0?l:""})`}`;const c=_.forwardRef(o);return c[q_]=r,c}function Z_({layoutId:s}){const e=_.useContext($m).id;return e&&s!==void 0?e+"-"+s:s}function J_(s,e){_.useContext(Xj).strict}function eb(s){const{drag:e,layout:n}=yi;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(s)||n!=null&&n.isEnabled(s)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const tb=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Zm(s){return typeof s!="string"||s.includes("-")?!1:!!(tb.indexOf(s)>-1||/[A-Z]/u.test(s))}function mp(s){const e=[{},{}];return s==null||s.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function Jm(s,e,n,i){if(typeof e=="function"){const[r,a]=mp(i);e=e(n!==void 0?n:s.custom,r,a)}if(typeof e=="string"&&(e=s.variants&&s.variants[e]),typeof e=="function"){const[r,a]=mp(i);e=e(n!==void 0?n:s.custom,r,a)}return e}const ph=s=>Array.isArray(s),sb=s=>!!(s&&typeof s=="object"&&s.mix&&s.toValue),nb=s=>ph(s)?s[s.length-1]||0:s,Ve=s=>!!(s&&s.getVelocity);function Qa(s){const e=Ve(s)?s.get():s;return sb(e)?e.toValue():e}function ib({scrapeMotionValuesFromProps:s,createRenderState:e,onUpdate:n},i,r,a){const l={latestValues:rb(i,r,a,s),renderState:e()};return n&&(l.onMount=o=>n({props:i,current:o,...l}),l.onUpdate=o=>n(o)),l}const Jj=s=>(e,n)=>{const i=_.useContext(mo),r=_.useContext(oo),a=()=>ib(s,e,i,r);return n?a():Li(a)};function rb(s,e,n,i){const r={},a=i(s,{});for(const u in a)r[u]=Qa(a[u]);let{initial:l,animate:o}=s;const c=po(s),h=Yj(s);e&&h&&!c&&s.inherit!==!1&&(l===void 0&&(l=e.initial),o===void 0&&(o=e.animate));let m=n?n.initial===!1:!1;m=m||l===!1;const d=m?o:l;if(d&&typeof d!="boolean"&&!uo(d)){const u=Array.isArray(d)?d:[d];for(let p=0;p<u.length;p++){const y=Jm(s,u[p]);if(y){const{transitionEnd:g,transition:v,...f}=y;for(const x in f){let j=f[x];if(Array.isArray(j)){const w=m?j.length-1:0;j=j[w]}j!==null&&(r[x]=j)}for(const x in g)r[x]=g[x]}}}return r}const Ai=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],An=new Set(Ai),ey=s=>e=>typeof e=="string"&&e.startsWith(s),ty=ey("--"),ab=ey("var(--"),ed=s=>ab(s)?lb.test(s.split("/*")[0].trim()):!1,lb=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,sy=(s,e)=>e&&typeof s=="number"?e.transform(s):s,es=(s,e,n)=>n>e?e:n<s?s:n,zi={test:s=>typeof s=="number",parse:parseFloat,transform:s=>s},Ur={...zi,transform:s=>es(0,1,s)},La={...zi,default:1},la=s=>({test:e=>typeof e=="string"&&e.endsWith(s)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${s}`}),ks=la("deg"),Zt=la("%"),D=la("px"),ob=la("vh"),cb=la("vw"),dp={...Zt,parse:s=>Zt.parse(s)/100,transform:s=>Zt.transform(s*100)},hb={borderWidth:D,borderTopWidth:D,borderRightWidth:D,borderBottomWidth:D,borderLeftWidth:D,borderRadius:D,radius:D,borderTopLeftRadius:D,borderTopRightRadius:D,borderBottomRightRadius:D,borderBottomLeftRadius:D,width:D,maxWidth:D,height:D,maxHeight:D,top:D,right:D,bottom:D,left:D,padding:D,paddingTop:D,paddingRight:D,paddingBottom:D,paddingLeft:D,margin:D,marginTop:D,marginRight:D,marginBottom:D,marginLeft:D,backgroundPositionX:D,backgroundPositionY:D},mb={rotate:ks,rotateX:ks,rotateY:ks,rotateZ:ks,scale:La,scaleX:La,scaleY:La,scaleZ:La,skew:ks,skewX:ks,skewY:ks,distance:D,translateX:D,translateY:D,translateZ:D,x:D,y:D,z:D,perspective:D,transformPerspective:D,opacity:Ur,originX:dp,originY:dp,originZ:D},up={...zi,transform:Math.round},td={...hb,...mb,zIndex:up,size:D,fillOpacity:Ur,strokeOpacity:Ur,numOctaves:up},db={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ub=Ai.length;function pb(s,e,n){let i="",r=!0;for(let a=0;a<ub;a++){const l=Ai[a],o=s[l];if(o===void 0)continue;let c=!0;if(typeof o=="number"?c=o===(l.startsWith("scale")?1:0):c=parseFloat(o)===0,!c||n){const h=sy(o,td[l]);if(!c){r=!1;const m=db[l]||l;i+=`${m}(${h}) `}n&&(e[l]=h)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function sd(s,e,n){const{style:i,vars:r,transformOrigin:a}=s;let l=!1,o=!1;for(const c in e){const h=e[c];if(An.has(c)){l=!0;continue}else if(ty(c)){r[c]=h;continue}else{const m=sy(h,td[c]);c.startsWith("origin")?(o=!0,a[c]=m):i[c]=m}}if(e.transform||(l||n?i.transform=pb(e,s.transform,n):i.transform&&(i.transform="none")),o){const{originX:c="50%",originY:h="50%",originZ:m=0}=a;i.transformOrigin=`${c} ${h} ${m}`}}const fb={offset:"stroke-dashoffset",array:"stroke-dasharray"},xb={offset:"strokeDashoffset",array:"strokeDasharray"};function gb(s,e,n=1,i=0,r=!0){s.pathLength=1;const a=r?fb:xb;s[a.offset]=D.transform(-i);const l=D.transform(e),o=D.transform(n);s[a.array]=`${l} ${o}`}function pp(s,e,n){return typeof s=="string"?s:D.transform(e+n*s)}function jb(s,e,n){const i=pp(e,s.x,s.width),r=pp(n,s.y,s.height);return`${i} ${r}`}function nd(s,{attrX:e,attrY:n,attrScale:i,originX:r,originY:a,pathLength:l,pathSpacing:o=1,pathOffset:c=0,...h},m,d){if(sd(s,h,d),m){s.style.viewBox&&(s.attrs.viewBox=s.style.viewBox);return}s.attrs=s.style,s.style={};const{attrs:u,style:p,dimensions:y}=s;u.transform&&(y&&(p.transform=u.transform),delete u.transform),y&&(r!==void 0||a!==void 0||p.transform)&&(p.transformOrigin=jb(y,r!==void 0?r:.5,a!==void 0?a:.5)),e!==void 0&&(u.x=e),n!==void 0&&(u.y=n),i!==void 0&&(u.scale=i),l!==void 0&&gb(u,l,o,c,!1)}const id=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),ny=()=>({...id(),attrs:{}}),rd=s=>typeof s=="string"&&s.toLowerCase()==="svg";function iy(s,{style:e,vars:n},i,r){Object.assign(s.style,e,r&&r.getProjectionStyles(i));for(const a in n)s.style.setProperty(a,n[a])}const ry=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ay(s,e,n,i){iy(s,e,void 0,i);for(const r in e.attrs)s.setAttribute(ry.has(r)?r:Gm(r),e.attrs[r])}const Ml={};function yb(s){Object.assign(Ml,s)}function ly(s,{layout:e,layoutId:n}){return An.has(s)||s.startsWith("origin")||(e||n!==void 0)&&(!!Ml[s]||s==="opacity")}function ad(s,e,n){var i;const{style:r}=s,a={};for(const l in r)(Ve(r[l])||e.style&&Ve(e.style[l])||ly(l,s)||((i=n==null?void 0:n.getValue(l))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(a[l]=r[l]);return a}function oy(s,e,n){const i=ad(s,e,n);for(const r in s)if(Ve(s[r])||Ve(e[r])){const a=Ai.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[a]=s[r]}return i}function vb(s,e){try{e.dimensions=typeof s.getBBox=="function"?s.getBBox():s.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const fp=["x","y","width","height","cx","cy","r"],Nb={useVisualState:Jj({scrapeMotionValuesFromProps:oy,createRenderState:ny,onUpdate:({props:s,prevProps:e,current:n,renderState:i,latestValues:r})=>{if(!n)return;let a=!!s.drag;if(!a){for(const o in r)if(An.has(o)){a=!0;break}}if(!a)return;let l=!e;if(e)for(let o=0;o<fp.length;o++){const c=fp[o];s[c]!==e[c]&&(l=!0)}l&&q.read(()=>{vb(n,i),q.render(()=>{nd(i,r,rd(n.tagName),s.transformTemplate),ay(n,i)})})}})},wb={useVisualState:Jj({scrapeMotionValuesFromProps:ad,createRenderState:id})};function cy(s,e,n){for(const i in e)!Ve(e[i])&&!ly(i,n)&&(s[i]=e[i])}function _b({transformTemplate:s},e){return _.useMemo(()=>{const n=id();return sd(n,e,s),Object.assign({},n.vars,n.style)},[e])}function bb(s,e){const n=s.style||{},i={};return cy(i,n,s),Object.assign(i,_b(s,e)),i}function kb(s,e){const n={},i=bb(s,e);return s.drag&&s.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=s.drag===!0?"none":`pan-${s.drag==="x"?"y":"x"}`),s.tabIndex===void 0&&(s.onTap||s.onTapStart||s.whileTap)&&(n.tabIndex=0),n.style=i,n}function Sb(s,e,n,i){const r=_.useMemo(()=>{const a=ny();return nd(a,e,rd(i),s.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(s.style){const a={};cy(a,s.style,s),r.style={...a,...r.style}}return r}function Tb(s=!1){return(n,i,r,{latestValues:a},l)=>{const c=(Zm(n)?Sb:kb)(i,a,l,n),h=W_(i,typeof n=="string",s),m=n!==_.Fragment?{...h,...c,ref:r}:{},{children:d}=i,u=_.useMemo(()=>Ve(d)?d.get():d,[d]);return _.createElement(n,{...m,children:u})}}function Rb(s,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const l={...Zm(i)?Nb:wb,preloadedFeatures:s,useRender:Tb(r),createVisualElement:e,Component:i};return Q_(l)}}function hy(s,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==s.length)return!1;for(let i=0;i<n;i++)if(e[i]!==s[i])return!1;return!0}function fo(s,e,n){const i=s.getProps();return Jm(i,e,n!==void 0?n:i.custom,s)}const my=Xm(()=>window.ScrollTimeline!==void 0);class Eb{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,n){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=n}attachTimeline(e,n){const i=this.animations.map(r=>{if(my()&&r.attachTimeline)return r.attachTimeline(e);if(typeof n=="function")return n(r)});return()=>{i.forEach((r,a)=>{r&&r(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Pb extends Eb{then(e,n){return Promise.all(this.animations).then(e).catch(n)}}function ld(s,e){return s?s[e]||s.default||s:void 0}const fh=2e4;function dy(s){let e=0;const n=50;let i=s.next(e);for(;!i.done&&e<fh;)e+=n,i=s.next(e);return e>=fh?1/0:e}function od(s){return typeof s=="function"}function xp(s,e){s.timeline=e,s.onfinish=null}const cd=s=>Array.isArray(s)&&typeof s[0]=="number",Mb={linearEasing:void 0};function Cb(s,e){const n=Xm(s);return()=>{var i;return(i=Mb[e])!==null&&i!==void 0?i:n()}}const Cl=Cb(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),uy=(s,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let a=0;a<r;a++)i+=s(Pn(0,r-1,a))+", ";return`linear(${i.substring(0,i.length-2)})`};function py(s){return!!(typeof s=="function"&&Cl()||!s||typeof s=="string"&&(s in xh||Cl())||cd(s)||Array.isArray(s)&&s.every(py))}const Ji=([s,e,n,i])=>`cubic-bezier(${s}, ${e}, ${n}, ${i})`,xh={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ji([0,.65,.55,1]),circOut:Ji([.55,0,1,.45]),backIn:Ji([.31,.01,.66,-.59]),backOut:Ji([.33,1.53,.69,.99])};function fy(s,e){if(s)return typeof s=="function"&&Cl()?uy(s,e):cd(s)?Ji(s):Array.isArray(s)?s.map(n=>fy(n,e)||xh.easeOut):xh[s]}const At={x:!1,y:!1};function xy(){return At.x||At.y}function gy(s,e,n){var i;if(s instanceof Element)return[s];if(typeof s=="string"){let r=document;const a=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(s);return a?Array.from(a):[]}return Array.from(s)}function jy(s,e){const n=gy(s),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function gp(s){return e=>{e.pointerType==="touch"||xy()||s(e)}}function Lb(s,e,n={}){const[i,r,a]=jy(s,n),l=gp(o=>{const{target:c}=o,h=e(o);if(typeof h!="function"||!c)return;const m=gp(d=>{h(d),c.removeEventListener("pointerleave",m)});c.addEventListener("pointerleave",m,r)});return i.forEach(o=>{o.addEventListener("pointerenter",l,r)}),a}const yy=(s,e)=>e?s===e?!0:yy(s,e.parentElement):!1,hd=s=>s.pointerType==="mouse"?typeof s.button!="number"||s.button<=0:s.isPrimary!==!1,Ab=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function zb(s){return Ab.has(s.tagName)||s.tabIndex!==-1}const er=new WeakSet;function jp(s){return e=>{e.key==="Enter"&&s(e)}}function Yo(s,e){s.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Db=(s,e)=>{const n=s.currentTarget;if(!n)return;const i=jp(()=>{if(er.has(n))return;Yo(n,"down");const r=jp(()=>{Yo(n,"up")}),a=()=>Yo(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",a,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function yp(s){return hd(s)&&!xy()}function Ib(s,e,n={}){const[i,r,a]=jy(s,n),l=o=>{const c=o.currentTarget;if(!yp(o)||er.has(c))return;er.add(c);const h=e(o),m=(p,y)=>{window.removeEventListener("pointerup",d),window.removeEventListener("pointercancel",u),!(!yp(p)||!er.has(c))&&(er.delete(c),typeof h=="function"&&h(p,{success:y}))},d=p=>{m(p,n.useGlobalTarget||yy(c,p.target))},u=p=>{m(p,!1)};window.addEventListener("pointerup",d,r),window.addEventListener("pointercancel",u,r)};return i.forEach(o=>{!zb(o)&&o.getAttribute("tabindex")===null&&(o.tabIndex=0),(n.useGlobalTarget?window:o).addEventListener("pointerdown",l,r),o.addEventListener("focus",h=>Db(h,r),r)}),a}function Ob(s){return s==="x"||s==="y"?At[s]?null:(At[s]=!0,()=>{At[s]=!1}):At.x||At.y?null:(At.x=At.y=!0,()=>{At.x=At.y=!1})}const vy=new Set(["width","height","top","left","right","bottom",...Ai]);let Za;function Fb(){Za=void 0}const Jt={now:()=>(Za===void 0&&Jt.set(ke.isProcessing||D_.useManualTiming?ke.timestamp:performance.now()),Za),set:s=>{Za=s,queueMicrotask(Fb)}};function md(s,e){s.indexOf(e)===-1&&s.push(e)}function dd(s,e){const n=s.indexOf(e);n>-1&&s.splice(n,1)}class ud{constructor(){this.subscriptions=[]}add(e){return md(this.subscriptions,e),()=>dd(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let a=0;a<r;a++){const l=this.subscriptions[a];l&&l(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function pd(s,e){return e?s*(1e3/e):0}const vp=30,Vb=s=>!isNaN(parseFloat(s)),pr={current:void 0};class Bb{constructor(e,n={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const a=Jt.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=Jt.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Vb(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new ud);const i=this.events[e].add(n);return e==="change"?()=>{i(),q.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return pr.current&&pr.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=Jt.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>vp)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,vp);return pd(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Kt(s,e){return new Bb(s,e)}function Wb(s,e,n){s.hasValue(e)?s.getValue(e).set(n):s.addValue(e,Kt(n))}function Ub(s,e){const n=fo(s,e);let{transitionEnd:i={},transition:r={},...a}=n||{};a={...a,...i};for(const l in a){const o=nb(a[l]);Wb(s,l,o)}}function Hb(s){return!!(Ve(s)&&s.add)}function gh(s,e){const n=s.getValue("willChange");if(Hb(n))return n.add(e)}function Ny(s){return s.props[Gj]}const wy=(s,e,n)=>(((1-3*n+3*e)*s+(3*n-6*e))*s+3*e)*s,$b=1e-7,qb=12;function Xb(s,e,n,i,r){let a,l,o=0;do l=e+(n-e)/2,a=wy(l,i,r)-s,a>0?n=l:e=l;while(Math.abs(a)>$b&&++o<qb);return l}function oa(s,e,n,i){if(s===e&&n===i)return Xe;const r=a=>Xb(a,0,1,s,n);return a=>a===0||a===1?a:wy(r(a),e,i)}const _y=s=>e=>e<=.5?s(2*e)/2:(2-s(2*(1-e)))/2,by=s=>e=>1-s(1-e),ky=oa(.33,1.53,.69,.99),fd=by(ky),Sy=_y(fd),Ty=s=>(s*=2)<1?.5*fd(s):.5*(2-Math.pow(2,-10*(s-1))),xd=s=>1-Math.sin(Math.acos(s)),Ry=by(xd),Ey=_y(xd),Py=s=>/^0[^.\s]+$/u.test(s);function Kb(s){return typeof s=="number"?s===0:s!==null?s==="none"||s==="0"||Py(s):!0}const fr=s=>Math.round(s*1e5)/1e5,gd=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Yb(s){return s==null}const Gb=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,jd=(s,e)=>n=>!!(typeof n=="string"&&Gb.test(n)&&n.startsWith(s)||e&&!Yb(n)&&Object.prototype.hasOwnProperty.call(n,e)),My=(s,e,n)=>i=>{if(typeof i!="string")return i;const[r,a,l,o]=i.match(gd);return{[s]:parseFloat(r),[e]:parseFloat(a),[n]:parseFloat(l),alpha:o!==void 0?parseFloat(o):1}},Qb=s=>es(0,255,s),Go={...zi,transform:s=>Math.round(Qb(s))},fn={test:jd("rgb","red"),parse:My("red","green","blue"),transform:({red:s,green:e,blue:n,alpha:i=1})=>"rgba("+Go.transform(s)+", "+Go.transform(e)+", "+Go.transform(n)+", "+fr(Ur.transform(i))+")"};function Zb(s){let e="",n="",i="",r="";return s.length>5?(e=s.substring(1,3),n=s.substring(3,5),i=s.substring(5,7),r=s.substring(7,9)):(e=s.substring(1,2),n=s.substring(2,3),i=s.substring(3,4),r=s.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const jh={test:jd("#"),parse:Zb,transform:fn.transform},Qn={test:jd("hsl","hue"),parse:My("hue","saturation","lightness"),transform:({hue:s,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(s)+", "+Zt.transform(fr(e))+", "+Zt.transform(fr(n))+", "+fr(Ur.transform(i))+")"},Ie={test:s=>fn.test(s)||jh.test(s)||Qn.test(s),parse:s=>fn.test(s)?fn.parse(s):Qn.test(s)?Qn.parse(s):jh.parse(s),transform:s=>typeof s=="string"?s:s.hasOwnProperty("red")?fn.transform(s):Qn.transform(s)},Jb=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ek(s){var e,n;return isNaN(s)&&typeof s=="string"&&(((e=s.match(gd))===null||e===void 0?void 0:e.length)||0)+(((n=s.match(Jb))===null||n===void 0?void 0:n.length)||0)>0}const Cy="number",Ly="color",tk="var",sk="var(",Np="${}",nk=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Hr(s){const e=s.toString(),n=[],i={color:[],number:[],var:[]},r=[];let a=0;const o=e.replace(nk,c=>(Ie.test(c)?(i.color.push(a),r.push(Ly),n.push(Ie.parse(c))):c.startsWith(sk)?(i.var.push(a),r.push(tk),n.push(c)):(i.number.push(a),r.push(Cy),n.push(parseFloat(c))),++a,Np)).split(Np);return{values:n,split:o,indexes:i,types:r}}function Ay(s){return Hr(s).values}function zy(s){const{split:e,types:n}=Hr(s),i=e.length;return r=>{let a="";for(let l=0;l<i;l++)if(a+=e[l],r[l]!==void 0){const o=n[l];o===Cy?a+=fr(r[l]):o===Ly?a+=Ie.transform(r[l]):a+=r[l]}return a}}const ik=s=>typeof s=="number"?0:s;function rk(s){const e=Ay(s);return zy(s)(e.map(ik))}const Ys={test:ek,parse:Ay,createTransformer:zy,getAnimatableNone:rk},ak=new Set(["brightness","contrast","saturate","opacity"]);function lk(s){const[e,n]=s.slice(0,-1).split("(");if(e==="drop-shadow")return s;const[i]=n.match(gd)||[];if(!i)return s;const r=n.replace(i,"");let a=ak.has(e)?1:0;return i!==n&&(a*=100),e+"("+a+r+")"}const ok=/\b([a-z-]*)\(.*?\)/gu,yh={...Ys,getAnimatableNone:s=>{const e=s.match(ok);return e?e.map(lk).join(" "):s}},ck={...td,color:Ie,backgroundColor:Ie,outlineColor:Ie,fill:Ie,stroke:Ie,borderColor:Ie,borderTopColor:Ie,borderRightColor:Ie,borderBottomColor:Ie,borderLeftColor:Ie,filter:yh,WebkitFilter:yh},yd=s=>ck[s];function Dy(s,e){let n=yd(s);return n!==yh&&(n=Ys),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const hk=new Set(["auto","none","0"]);function mk(s,e,n){let i=0,r;for(;i<s.length&&!r;){const a=s[i];typeof a=="string"&&!hk.has(a)&&Hr(a).values.length&&(r=s[i]),i++}if(r&&n)for(const a of e)s[a]=Dy(n,r)}const wp=s=>s===zi||s===D,_p=(s,e)=>parseFloat(s.split(", ")[e]),bp=(s,e)=>(n,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return _p(r[1],e);{const a=i.match(/^matrix\((.+)\)$/u);return a?_p(a[1],s):0}},dk=new Set(["x","y","z"]),uk=Ai.filter(s=>!dk.has(s));function pk(s){const e=[];return uk.forEach(n=>{const i=s.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const vi={width:({x:s},{paddingLeft:e="0",paddingRight:n="0"})=>s.max-s.min-parseFloat(e)-parseFloat(n),height:({y:s},{paddingTop:e="0",paddingBottom:n="0"})=>s.max-s.min-parseFloat(e)-parseFloat(n),top:(s,{top:e})=>parseFloat(e),left:(s,{left:e})=>parseFloat(e),bottom:({y:s},{top:e})=>parseFloat(e)+(s.max-s.min),right:({x:s},{left:e})=>parseFloat(e)+(s.max-s.min),x:bp(4,13),y:bp(5,14)};vi.translateX=vi.x;vi.translateY=vi.y;const yn=new Set;let vh=!1,Nh=!1;function Iy(){if(Nh){const s=Array.from(yn).filter(i=>i.needsMeasurement),e=new Set(s.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=pk(i);r.length&&(n.set(i,r),i.render())}),s.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([a,l])=>{var o;(o=i.getValue(a))===null||o===void 0||o.set(l)})}),s.forEach(i=>i.measureEndState()),s.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Nh=!1,vh=!1,yn.forEach(s=>s.complete()),yn.clear()}function Oy(){yn.forEach(s=>{s.readKeyframes(),s.needsMeasurement&&(Nh=!0)})}function fk(){Oy(),Iy()}class vd{constructor(e,n,i,r,a,l=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=a,this.isAsync=l}scheduleResolve(){this.isScheduled=!0,this.isAsync?(yn.add(this),vh||(vh=!0,q.read(Oy),q.resolveKeyframes(Iy))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;for(let a=0;a<e.length;a++)if(e[a]===null)if(a===0){const l=r==null?void 0:r.get(),o=e[e.length-1];if(l!==void 0)e[0]=l;else if(i&&n){const c=i.readValue(n,o);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=o),r&&l===void 0&&r.set(e[0])}else e[a]=e[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),yn.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,yn.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const Fy=s=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(s),xk=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function gk(s){const e=xk.exec(s);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function Vy(s,e,n=1){const[i,r]=gk(s);if(!i)return;const a=window.getComputedStyle(e).getPropertyValue(i);if(a){const l=a.trim();return Fy(l)?parseFloat(l):l}return ed(r)?Vy(r,e,n+1):r}const By=s=>e=>e.test(s),jk={test:s=>s==="auto",parse:s=>s},Wy=[zi,D,Zt,ks,cb,ob,jk],kp=s=>Wy.find(By(s));class Uy extends vd{constructor(e,n,i,r,a){super(e,n,i,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let h=e[c];if(typeof h=="string"&&(h=h.trim(),ed(h))){const m=Vy(h,n.current);m!==void 0&&(e[c]=m),c===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!vy.has(i)||e.length!==2)return;const[r,a]=e,l=kp(r),o=kp(a);if(l!==o)if(wp(l)&&wp(o))for(let c=0;c<e.length;c++){const h=e[c];typeof h=="string"&&(e[c]=parseFloat(h))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)Kb(e[r])&&i.push(r);i.length&&mk(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=vi[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:n,name:i,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const a=n.getValue(i);a&&a.jump(this.measuredOrigin,!1);const l=r.length-1,o=r[l];r[l]=vi[i](n.measureViewportBox(),window.getComputedStyle(n.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,h])=>{n.getValue(c).set(h)}),this.resolveNoneKeyframes()}}const Sp=(s,e)=>e==="zIndex"?!1:!!(typeof s=="number"||Array.isArray(s)||typeof s=="string"&&(Ys.test(s)||s==="0")&&!s.startsWith("url("));function yk(s){const e=s[0];if(s.length===1)return!0;for(let n=0;n<s.length;n++)if(s[n]!==e)return!0}function vk(s,e,n,i){const r=s[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const a=s[s.length-1],l=Sp(r,e),o=Sp(a,e);return!l||!o?!1:yk(s)||(n==="spring"||od(n))&&i}const Nk=s=>s!==null;function xo(s,{repeat:e,repeatType:n="loop"},i){const r=s.filter(Nk),a=e&&n!=="loop"&&e%2===1?0:r.length-1;return!a||i===void 0?r[a]:i}const wk=40;class Hy{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:l="loop",...o}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Jt.now(),this.options={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:a,repeatType:l,...o},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>wk?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&fk(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=Jt.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:a,delay:l,onComplete:o,onUpdate:c,isGenerator:h}=this.options;if(!h&&!vk(e,i,r,a))if(l)this.options.duration=0;else{c&&c(xo(e,this.options,n)),o&&o(),this.resolveFinishedPromise();return}const m=this.initPlayback(e,n);m!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...m},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const le=(s,e,n)=>s+(e-s)*n;function Qo(s,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?s+(e-s)*6*n:n<1/2?e:n<2/3?s+(e-s)*(2/3-n)*6:s}function _k({hue:s,saturation:e,lightness:n,alpha:i}){s/=360,e/=100,n/=100;let r=0,a=0,l=0;if(!e)r=a=l=n;else{const o=n<.5?n*(1+e):n+e-n*e,c=2*n-o;r=Qo(c,o,s+1/3),a=Qo(c,o,s),l=Qo(c,o,s-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(l*255),alpha:i}}function Ll(s,e){return n=>n>0?e:s}const Zo=(s,e,n)=>{const i=s*s,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},bk=[jh,fn,Qn],kk=s=>bk.find(e=>e.test(s));function Tp(s){const e=kk(s);if(!e)return!1;let n=e.parse(s);return e===Qn&&(n=_k(n)),n}const Rp=(s,e)=>{const n=Tp(s),i=Tp(e);if(!n||!i)return Ll(s,e);const r={...n};return a=>(r.red=Zo(n.red,i.red,a),r.green=Zo(n.green,i.green,a),r.blue=Zo(n.blue,i.blue,a),r.alpha=le(n.alpha,i.alpha,a),fn.transform(r))},Sk=(s,e)=>n=>e(s(n)),ca=(...s)=>s.reduce(Sk),wh=new Set(["none","hidden"]);function Tk(s,e){return wh.has(s)?n=>n<=0?s:e:n=>n>=1?e:s}function Rk(s,e){return n=>le(s,e,n)}function Nd(s){return typeof s=="number"?Rk:typeof s=="string"?ed(s)?Ll:Ie.test(s)?Rp:Mk:Array.isArray(s)?$y:typeof s=="object"?Ie.test(s)?Rp:Ek:Ll}function $y(s,e){const n=[...s],i=n.length,r=s.map((a,l)=>Nd(a)(a,e[l]));return a=>{for(let l=0;l<i;l++)n[l]=r[l](a);return n}}function Ek(s,e){const n={...s,...e},i={};for(const r in n)s[r]!==void 0&&e[r]!==void 0&&(i[r]=Nd(s[r])(s[r],e[r]));return r=>{for(const a in i)n[a]=i[a](r);return n}}function Pk(s,e){var n;const i=[],r={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const l=e.types[a],o=s.indexes[l][r[l]],c=(n=s.values[o])!==null&&n!==void 0?n:0;i[a]=c,r[l]++}return i}const Mk=(s,e)=>{const n=Ys.createTransformer(e),i=Hr(s),r=Hr(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?wh.has(s)&&!r.values.length||wh.has(e)&&!i.values.length?Tk(s,e):ca($y(Pk(i,r),r.values),n):Ll(s,e)};function qy(s,e,n){return typeof s=="number"&&typeof e=="number"&&typeof n=="number"?le(s,e,n):Nd(s)(s,e)}const Ck=5;function Xy(s,e,n){const i=Math.max(e-Ck,0);return pd(n-s(i),e-i)}const ue={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Jo=.001;function Lk({duration:s=ue.duration,bounce:e=ue.bounce,velocity:n=ue.velocity,mass:i=ue.mass}){let r,a,l=1-e;l=es(ue.minDamping,ue.maxDamping,l),s=es(ue.minDuration,ue.maxDuration,ps(s)),l<1?(r=h=>{const m=h*l,d=m*s,u=m-n,p=_h(h,l),y=Math.exp(-d);return Jo-u/p*y},a=h=>{const d=h*l*s,u=d*n+n,p=Math.pow(l,2)*Math.pow(h,2)*s,y=Math.exp(-d),g=_h(Math.pow(h,2),l);return(-r(h)+Jo>0?-1:1)*((u-p)*y)/g}):(r=h=>{const m=Math.exp(-h*s),d=(h-n)*s+1;return-Jo+m*d},a=h=>{const m=Math.exp(-h*s),d=(n-h)*(s*s);return m*d});const o=5/s,c=zk(r,a,o);if(s=us(s),isNaN(c))return{stiffness:ue.stiffness,damping:ue.damping,duration:s};{const h=Math.pow(c,2)*i;return{stiffness:h,damping:l*2*Math.sqrt(i*h),duration:s}}}const Ak=12;function zk(s,e,n){let i=n;for(let r=1;r<Ak;r++)i=i-s(i)/e(i);return i}function _h(s,e){return s*Math.sqrt(1-e*e)}const Dk=["duration","bounce"],Ik=["stiffness","damping","mass"];function Ep(s,e){return e.some(n=>s[n]!==void 0)}function Ok(s){let e={velocity:ue.velocity,stiffness:ue.stiffness,damping:ue.damping,mass:ue.mass,isResolvedFromDuration:!1,...s};if(!Ep(s,Ik)&&Ep(s,Dk))if(s.visualDuration){const n=s.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,a=2*es(.05,1,1-(s.bounce||0))*Math.sqrt(r);e={...e,mass:ue.mass,stiffness:r,damping:a}}else{const n=Lk(s);e={...e,...n,mass:ue.mass},e.isResolvedFromDuration=!0}return e}function Ky(s=ue.visualDuration,e=ue.bounce){const n=typeof s!="object"?{visualDuration:s,keyframes:[0,1],bounce:e}:s;let{restSpeed:i,restDelta:r}=n;const a=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],o={done:!1,value:a},{stiffness:c,damping:h,mass:m,duration:d,velocity:u,isResolvedFromDuration:p}=Ok({...n,velocity:-ps(n.velocity||0)}),y=u||0,g=h/(2*Math.sqrt(c*m)),v=l-a,f=ps(Math.sqrt(c/m)),x=Math.abs(v)<5;i||(i=x?ue.restSpeed.granular:ue.restSpeed.default),r||(r=x?ue.restDelta.granular:ue.restDelta.default);let j;if(g<1){const N=_h(f,g);j=b=>{const S=Math.exp(-g*f*b);return l-S*((y+g*f*v)/N*Math.sin(N*b)+v*Math.cos(N*b))}}else if(g===1)j=N=>l-Math.exp(-f*N)*(v+(y+f*v)*N);else{const N=f*Math.sqrt(g*g-1);j=b=>{const S=Math.exp(-g*f*b),k=Math.min(N*b,300);return l-S*((y+g*f*v)*Math.sinh(k)+N*v*Math.cosh(k))/N}}const w={calculatedDuration:p&&d||null,next:N=>{const b=j(N);if(p)o.done=N>=d;else{let S=0;g<1&&(S=N===0?us(y):Xy(j,N,b));const k=Math.abs(S)<=i,T=Math.abs(l-b)<=r;o.done=k&&T}return o.value=o.done?l:b,o},toString:()=>{const N=Math.min(dy(w),fh),b=uy(S=>w.next(N*S).value,N,30);return N+"ms "+b}};return w}function Pp({keyframes:s,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:l,min:o,max:c,restDelta:h=.5,restSpeed:m}){const d=s[0],u={done:!1,value:d},p=k=>o!==void 0&&k<o||c!==void 0&&k>c,y=k=>o===void 0?c:c===void 0||Math.abs(o-k)<Math.abs(c-k)?o:c;let g=n*e;const v=d+g,f=l===void 0?v:l(v);f!==v&&(g=f-d);const x=k=>-g*Math.exp(-k/i),j=k=>f+x(k),w=k=>{const T=x(k),P=j(k);u.done=Math.abs(T)<=h,u.value=u.done?f:P};let N,b;const S=k=>{p(u.value)&&(N=k,b=Ky({keyframes:[u.value,y(u.value)],velocity:Xy(j,k,u.value),damping:r,stiffness:a,restDelta:h,restSpeed:m}))};return S(0),{calculatedDuration:null,next:k=>{let T=!1;return!b&&N===void 0&&(T=!0,w(k),S(k)),N!==void 0&&k>=N?b.next(k-N):(!T&&w(k),u)}}}const Fk=oa(.42,0,1,1),Vk=oa(0,0,.58,1),Yy=oa(.42,0,.58,1),Bk=s=>Array.isArray(s)&&typeof s[0]!="number",Wk={linear:Xe,easeIn:Fk,easeInOut:Yy,easeOut:Vk,circIn:xd,circInOut:Ey,circOut:Ry,backIn:fd,backInOut:Sy,backOut:ky,anticipate:Ty},Mp=s=>{if(cd(s)){$j(s.length===4);const[e,n,i,r]=s;return oa(e,n,i,r)}else if(typeof s=="string")return Wk[s];return s};function Uk(s,e,n){const i=[],r=n||qy,a=s.length-1;for(let l=0;l<a;l++){let o=r(s[l],s[l+1]);if(e){const c=Array.isArray(e)?e[l]||Xe:e;o=ca(c,o)}i.push(o)}return i}function wd(s,e,{clamp:n=!0,ease:i,mixer:r}={}){const a=s.length;if($j(a===e.length),a===1)return()=>e[0];if(a===2&&e[0]===e[1])return()=>e[1];const l=s[0]===s[1];s[0]>s[a-1]&&(s=[...s].reverse(),e=[...e].reverse());const o=Uk(e,i,r),c=o.length,h=m=>{if(l&&m<s[0])return e[0];let d=0;if(c>1)for(;d<s.length-2&&!(m<s[d+1]);d++);const u=Pn(s[d],s[d+1],m);return o[d](u)};return n?m=>h(es(s[0],s[a-1],m)):h}function Hk(s,e){const n=s[s.length-1];for(let i=1;i<=e;i++){const r=Pn(0,e,i);s.push(le(n,1,r))}}function Gy(s){const e=[0];return Hk(e,s.length-1),e}function $k(s,e){return s.map(n=>n*e)}function qk(s,e){return s.map(()=>e||Yy).splice(0,s.length-1)}function Al({duration:s=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=Bk(i)?i.map(Mp):Mp(i),a={done:!1,value:e[0]},l=$k(n&&n.length===e.length?n:Gy(e),s),o=wd(l,e,{ease:Array.isArray(r)?r:qk(e,r)});return{calculatedDuration:s,next:c=>(a.value=o(c),a.done=c>=s,a)}}const Xk=s=>{const e=({timestamp:n})=>s(n);return{start:()=>q.update(e,!0),stop:()=>Bt(e),now:()=>ke.isProcessing?ke.timestamp:Jt.now()}},Kk={decay:Pp,inertia:Pp,tween:Al,keyframes:Al,spring:Ky},Yk=s=>s/100;class _d extends Hy{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:i,element:r,keyframes:a}=this.options,l=(r==null?void 0:r.KeyframeResolver)||vd,o=(c,h)=>this.onKeyframesResolved(c,h);this.resolver=new l(a,o,n,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:a,velocity:l=0}=this.options,o=od(n)?n:Kk[n]||Al;let c,h;o!==Al&&typeof e[0]!="number"&&(c=ca(Yk,qy(e[0],e[1])),e=[0,100]);const m=o({...this.options,keyframes:e});a==="mirror"&&(h=o({...this.options,keyframes:[...e].reverse(),velocity:-l})),m.calculatedDuration===null&&(m.calculatedDuration=dy(m));const{calculatedDuration:d}=m,u=d+r,p=u*(i+1)-r;return{generator:m,mirroredGenerator:h,mapPercentToKeyframes:c,calculatedDuration:d,resolvedDuration:u,totalDuration:p}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:i}=this;if(!i){const{keyframes:k}=this.options;return{done:!0,value:k[k.length-1]}}const{finalKeyframe:r,generator:a,mirroredGenerator:l,mapPercentToKeyframes:o,keyframes:c,calculatedDuration:h,totalDuration:m,resolvedDuration:d}=i;if(this.startTime===null)return a.next(0);const{delay:u,repeat:p,repeatType:y,repeatDelay:g,onUpdate:v}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-m/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const f=this.currentTime-u*(this.speed>=0?1:-1),x=this.speed>=0?f<0:f>m;this.currentTime=Math.max(f,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=m);let j=this.currentTime,w=a;if(p){const k=Math.min(this.currentTime,m)/d;let T=Math.floor(k),P=k%1;!P&&k>=1&&(P=1),P===1&&T--,T=Math.min(T,p+1),!!(T%2)&&(y==="reverse"?(P=1-P,g&&(P-=g/d)):y==="mirror"&&(w=l)),j=es(0,1,P)*d}const N=x?{done:!1,value:c[0]}:w.next(j);o&&(N.value=o(N.value));let{done:b}=N;!x&&h!==null&&(b=this.speed>=0?this.currentTime>=m:this.currentTime<=0);const S=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&b);return S&&r!==void 0&&(N.value=xo(c,this.options,r)),v&&v(N.value),S&&this.finish(),N}get duration(){const{resolved:e}=this;return e?ps(e.calculatedDuration):0}get time(){return ps(this.currentTime)}set time(e){e=us(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=ps(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Xk,onPlay:n,startTime:i}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Gk=new Set(["opacity","clipPath","filter","transform"]);function Qk(s,e,n,{delay:i=0,duration:r=300,repeat:a=0,repeatType:l="loop",ease:o="easeInOut",times:c}={}){const h={[e]:n};c&&(h.offset=c);const m=fy(o,r);return Array.isArray(m)&&(h.easing=m),s.animate(h,{delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:l==="reverse"?"alternate":"normal"})}const Zk=Xm(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),zl=10,Jk=2e4;function e2(s){return od(s.type)||s.type==="spring"||!py(s.ease)}function t2(s,e){const n=new _d({...e,keyframes:s,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:s[0]};const r=[];let a=0;for(;!i.done&&a<Jk;)i=n.sample(a),r.push(i.value),a+=zl;return{times:void 0,keyframes:r,duration:a-zl,ease:"linear"}}const Qy={anticipate:Ty,backInOut:Sy,circInOut:Ey};function s2(s){return s in Qy}class Cp extends Hy{constructor(e){super(e);const{name:n,motionValue:i,element:r,keyframes:a}=this.options;this.resolver=new Uy(a,(l,o)=>this.onKeyframesResolved(l,o),n,i,r),this.resolver.scheduleResolve()}initPlayback(e,n){let{duration:i=300,times:r,ease:a,type:l,motionValue:o,name:c,startTime:h}=this.options;if(!o.owner||!o.owner.current)return!1;if(typeof a=="string"&&Cl()&&s2(a)&&(a=Qy[a]),e2(this.options)){const{onComplete:d,onUpdate:u,motionValue:p,element:y,...g}=this.options,v=t2(e,g);e=v.keyframes,e.length===1&&(e[1]=e[0]),i=v.duration,r=v.times,a=v.ease,l="keyframes"}const m=Qk(o.owner.current,c,e,{...this.options,duration:i,times:r,ease:a});return m.startTime=h??this.calcStartTime(),this.pendingTimeline?(xp(m,this.pendingTimeline),this.pendingTimeline=void 0):m.onfinish=()=>{const{onComplete:d}=this.options;o.set(xo(e,this.options,n)),d&&d(),this.cancel(),this.resolveFinishedPromise()},{animation:m,duration:i,times:r,type:l,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return ps(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return ps(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.currentTime=us(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:i}=n;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return Xe;const{animation:i}=n;xp(i,e)}return Xe}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:i,duration:r,type:a,ease:l,times:o}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:h,onUpdate:m,onComplete:d,element:u,...p}=this.options,y=new _d({...p,keyframes:i,duration:r,type:a,ease:l,times:o,isGenerator:!0}),g=us(this.time);h.setWithVelocity(y.sample(g-zl).value,y.sample(g).value,zl)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:i,repeatDelay:r,repeatType:a,damping:l,type:o}=e;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:h}=n.owner.getProps();return Zk()&&i&&Gk.has(i)&&!c&&!h&&!r&&a!=="mirror"&&l!==0&&o!=="inertia"}}const n2={type:"spring",stiffness:500,damping:25,restSpeed:10},i2=s=>({type:"spring",stiffness:550,damping:s===0?2*Math.sqrt(550):30,restSpeed:10}),r2={type:"keyframes",duration:.8},a2={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},l2=(s,{keyframes:e})=>e.length>2?r2:An.has(s)?s.startsWith("scale")?i2(e[1]):n2:a2;function o2({when:s,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:a,repeatType:l,repeatDelay:o,from:c,elapsed:h,...m}){return!!Object.keys(m).length}const bd=(s,e,n,i={},r,a)=>l=>{const o=ld(i,s)||{},c=o.delay||i.delay||0;let{elapsed:h=0}=i;h=h-us(c);let m={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...o,delay:-h,onUpdate:u=>{e.set(u),o.onUpdate&&o.onUpdate(u)},onComplete:()=>{l(),o.onComplete&&o.onComplete()},name:s,motionValue:e,element:a?void 0:r};o2(o)||(m={...m,...l2(s,m)}),m.duration&&(m.duration=us(m.duration)),m.repeatDelay&&(m.repeatDelay=us(m.repeatDelay)),m.from!==void 0&&(m.keyframes[0]=m.from);let d=!1;if((m.type===!1||m.duration===0&&!m.repeatDelay)&&(m.duration=0,m.delay===0&&(d=!0)),d&&!a&&e.get()!==void 0){const u=xo(m.keyframes,o);if(u!==void 0)return q.update(()=>{m.onUpdate(u),m.onComplete()}),new Pb([])}return!a&&Cp.supports(m)?new Cp(m):new _d(m)};function c2({protectedKeys:s,needsAnimating:e},n){const i=s.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function Zy(s,e,{delay:n=0,transitionOverride:i,type:r}={}){var a;let{transition:l=s.getDefaultTransition(),transitionEnd:o,...c}=e;i&&(l=i);const h=[],m=r&&s.animationState&&s.animationState.getState()[r];for(const d in c){const u=s.getValue(d,(a=s.latestValues[d])!==null&&a!==void 0?a:null),p=c[d];if(p===void 0||m&&c2(m,d))continue;const y={delay:n,...ld(l||{},d)};let g=!1;if(window.MotionHandoffAnimation){const f=Ny(s);if(f){const x=window.MotionHandoffAnimation(f,d,q);x!==null&&(y.startTime=x,g=!0)}}gh(s,d),u.start(bd(d,u,p,s.shouldReduceMotion&&vy.has(d)?{type:!1}:y,s,g));const v=u.animation;v&&h.push(v)}return o&&Promise.all(h).then(()=>{q.update(()=>{o&&Ub(s,o)})}),h}function bh(s,e,n={}){var i;const r=fo(s,e,n.type==="exit"?(i=s.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:a=s.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const l=r?()=>Promise.all(Zy(s,r,n)):()=>Promise.resolve(),o=s.variantChildren&&s.variantChildren.size?(h=0)=>{const{delayChildren:m=0,staggerChildren:d,staggerDirection:u}=a;return h2(s,e,m+h,d,u,n)}:()=>Promise.resolve(),{when:c}=a;if(c){const[h,m]=c==="beforeChildren"?[l,o]:[o,l];return h().then(()=>m())}else return Promise.all([l(),o(n.delay)])}function h2(s,e,n=0,i=0,r=1,a){const l=[],o=(s.variantChildren.size-1)*i,c=r===1?(h=0)=>h*i:(h=0)=>o-h*i;return Array.from(s.variantChildren).sort(m2).forEach((h,m)=>{h.notify("AnimationStart",e),l.push(bh(h,e,{...a,delay:n+c(m)}).then(()=>h.notify("AnimationComplete",e)))}),Promise.all(l)}function m2(s,e){return s.sortNodePosition(e)}function d2(s,e,n={}){s.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(a=>bh(s,a,n));i=Promise.all(r)}else if(typeof e=="string")i=bh(s,e,n);else{const r=typeof e=="function"?fo(s,e,n.custom):e;i=Promise.all(Zy(s,r,n))}return i.then(()=>{s.notify("AnimationComplete",e)})}const u2=Ym.length;function Jy(s){if(!s)return;if(!s.isControllingVariants){const n=s.parent?Jy(s.parent)||{}:{};return s.props.initial!==void 0&&(n.initial=s.props.initial),n}const e={};for(let n=0;n<u2;n++){const i=Ym[n],r=s.props[i];(Wr(r)||r===!1)&&(e[i]=r)}return e}const p2=[...Km].reverse(),f2=Km.length;function x2(s){return e=>Promise.all(e.map(({animation:n,options:i})=>d2(s,n,i)))}function g2(s){let e=x2(s),n=Lp(),i=!0;const r=c=>(h,m)=>{var d;const u=fo(s,m,c==="exit"?(d=s.presenceContext)===null||d===void 0?void 0:d.custom:void 0);if(u){const{transition:p,transitionEnd:y,...g}=u;h={...h,...g,...y}}return h};function a(c){e=c(s)}function l(c){const{props:h}=s,m=Jy(s.parent)||{},d=[],u=new Set;let p={},y=1/0;for(let v=0;v<f2;v++){const f=p2[v],x=n[f],j=h[f]!==void 0?h[f]:m[f],w=Wr(j),N=f===c?x.isActive:null;N===!1&&(y=v);let b=j===m[f]&&j!==h[f]&&w;if(b&&i&&s.manuallyAnimateOnMount&&(b=!1),x.protectedKeys={...p},!x.isActive&&N===null||!j&&!x.prevProp||uo(j)||typeof j=="boolean")continue;const S=j2(x.prevProp,j);let k=S||f===c&&x.isActive&&!b&&w||v>y&&w,T=!1;const P=Array.isArray(j)?j:[j];let I=P.reduce(r(f),{});N===!1&&(I={});const{prevResolvedValues:F={}}=x,z={...F,...I},Y=O=>{k=!0,u.has(O)&&(T=!0,u.delete(O)),x.needsAnimating[O]=!0;const E=s.getValue(O);E&&(E.liveStyle=!1)};for(const O in z){const E=I[O],C=F[O];if(p.hasOwnProperty(O))continue;let L=!1;ph(E)&&ph(C)?L=!hy(E,C):L=E!==C,L?E!=null?Y(O):u.add(O):E!==void 0&&u.has(O)?Y(O):x.protectedKeys[O]=!0}x.prevProp=j,x.prevResolvedValues=I,x.isActive&&(p={...p,...I}),i&&s.blockInitialAnimation&&(k=!1),k&&(!(b&&S)||T)&&d.push(...P.map(O=>({animation:O,options:{type:f}})))}if(u.size){const v={};u.forEach(f=>{const x=s.getBaseTarget(f),j=s.getValue(f);j&&(j.liveStyle=!0),v[f]=x??null}),d.push({animation:v})}let g=!!d.length;return i&&(h.initial===!1||h.initial===h.animate)&&!s.manuallyAnimateOnMount&&(g=!1),i=!1,g?e(d):Promise.resolve()}function o(c,h){var m;if(n[c].isActive===h)return Promise.resolve();(m=s.variantChildren)===null||m===void 0||m.forEach(u=>{var p;return(p=u.animationState)===null||p===void 0?void 0:p.setActive(c,h)}),n[c].isActive=h;const d=l(c);for(const u in n)n[u].protectedKeys={};return d}return{animateChanges:l,setActive:o,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Lp(),i=!0}}}function j2(s,e){return typeof e=="string"?e!==s:Array.isArray(e)?!hy(e,s):!1}function nn(s=!1){return{isActive:s,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Lp(){return{animate:nn(!0),whileInView:nn(),whileHover:nn(),whileTap:nn(),whileDrag:nn(),whileFocus:nn(),exit:nn()}}class tn{constructor(e){this.isMounted=!1,this.node=e}update(){}}class y2 extends tn{constructor(e){super(e),e.animationState||(e.animationState=g2(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();uo(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let v2=0;class N2 extends tn{constructor(){super(...arguments),this.id=v2++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const w2={animation:{Feature:y2},exit:{Feature:N2}};function $r(s,e,n,i={passive:!0}){return s.addEventListener(e,n,i),()=>s.removeEventListener(e,n)}function ha(s){return{point:{x:s.pageX,y:s.pageY}}}const _2=s=>e=>hd(e)&&s(e,ha(e));function xr(s,e,n,i){return $r(s,e,_2(n),i)}const Ap=(s,e)=>Math.abs(s-e);function b2(s,e){const n=Ap(s.x,e.x),i=Ap(s.y,e.y);return Math.sqrt(n**2+i**2)}class e0{constructor(e,n,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=tc(this.lastMoveEventInfo,this.history),u=this.startEvent!==null,p=b2(d.offset,{x:0,y:0})>=3;if(!u&&!p)return;const{point:y}=d,{timestamp:g}=ke;this.history.push({...y,timestamp:g});const{onStart:v,onMove:f}=this.handlers;u||(v&&v(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),f&&f(this.lastMoveEvent,d)},this.handlePointerMove=(d,u)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=ec(u,this.transformPagePoint),q.update(this.updatePoint,!0)},this.handlePointerUp=(d,u)=>{this.end();const{onEnd:p,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=tc(d.type==="pointercancel"?this.lastMoveEventInfo:ec(u,this.transformPagePoint),this.history);this.startEvent&&p&&p(d,v),y&&y(d,v)},!hd(e))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=i,this.contextWindow=r||window;const l=ha(e),o=ec(l,this.transformPagePoint),{point:c}=o,{timestamp:h}=ke;this.history=[{...c,timestamp:h}];const{onSessionStart:m}=n;m&&m(e,tc(o,this.history)),this.removeListeners=ca(xr(this.contextWindow,"pointermove",this.handlePointerMove),xr(this.contextWindow,"pointerup",this.handlePointerUp),xr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Bt(this.updatePoint)}}function ec(s,e){return e?{point:e(s.point)}:s}function zp(s,e){return{x:s.x-e.x,y:s.y-e.y}}function tc({point:s},e){return{point:s,delta:zp(s,t0(e)),offset:zp(s,k2(e)),velocity:S2(e,.1)}}function k2(s){return s[0]}function t0(s){return s[s.length-1]}function S2(s,e){if(s.length<2)return{x:0,y:0};let n=s.length-1,i=null;const r=t0(s);for(;n>=0&&(i=s[n],!(r.timestamp-i.timestamp>us(e)));)n--;if(!i)return{x:0,y:0};const a=ps(r.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const l={x:(r.x-i.x)/a,y:(r.y-i.y)/a};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}const s0=1e-4,T2=1-s0,R2=1+s0,n0=.01,E2=0-n0,P2=0+n0;function pt(s){return s.max-s.min}function M2(s,e,n){return Math.abs(s-e)<=n}function Dp(s,e,n,i=.5){s.origin=i,s.originPoint=le(e.min,e.max,s.origin),s.scale=pt(n)/pt(e),s.translate=le(n.min,n.max,s.origin)-s.originPoint,(s.scale>=T2&&s.scale<=R2||isNaN(s.scale))&&(s.scale=1),(s.translate>=E2&&s.translate<=P2||isNaN(s.translate))&&(s.translate=0)}function gr(s,e,n,i){Dp(s.x,e.x,n.x,i?i.originX:void 0),Dp(s.y,e.y,n.y,i?i.originY:void 0)}function Ip(s,e,n){s.min=n.min+e.min,s.max=s.min+pt(e)}function C2(s,e,n){Ip(s.x,e.x,n.x),Ip(s.y,e.y,n.y)}function Op(s,e,n){s.min=e.min-n.min,s.max=s.min+pt(e)}function jr(s,e,n){Op(s.x,e.x,n.x),Op(s.y,e.y,n.y)}function L2(s,{min:e,max:n},i){return e!==void 0&&s<e?s=i?le(e,s,i.min):Math.max(s,e):n!==void 0&&s>n&&(s=i?le(n,s,i.max):Math.min(s,n)),s}function Fp(s,e,n){return{min:e!==void 0?s.min+e:void 0,max:n!==void 0?s.max+n-(s.max-s.min):void 0}}function A2(s,{top:e,left:n,bottom:i,right:r}){return{x:Fp(s.x,n,r),y:Fp(s.y,e,i)}}function Vp(s,e){let n=e.min-s.min,i=e.max-s.max;return e.max-e.min<s.max-s.min&&([n,i]=[i,n]),{min:n,max:i}}function z2(s,e){return{x:Vp(s.x,e.x),y:Vp(s.y,e.y)}}function D2(s,e){let n=.5;const i=pt(s),r=pt(e);return r>i?n=Pn(e.min,e.max-i,s.min):i>r&&(n=Pn(s.min,s.max-r,e.min)),es(0,1,n)}function I2(s,e){const n={};return e.min!==void 0&&(n.min=e.min-s.min),e.max!==void 0&&(n.max=e.max-s.min),n}const kh=.35;function O2(s=kh){return s===!1?s=0:s===!0&&(s=kh),{x:Bp(s,"left","right"),y:Bp(s,"top","bottom")}}function Bp(s,e,n){return{min:Wp(s,e),max:Wp(s,n)}}function Wp(s,e){return typeof s=="number"?s:s[e]||0}const Up=()=>({translate:0,scale:1,origin:0,originPoint:0}),Zn=()=>({x:Up(),y:Up()}),Hp=()=>({min:0,max:0}),xe=()=>({x:Hp(),y:Hp()});function vt(s){return[s("x"),s("y")]}function i0({top:s,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:s,max:i}}}function F2({x:s,y:e}){return{top:e.min,right:s.max,bottom:e.max,left:s.min}}function V2(s,e){if(!e)return s;const n=e({x:s.left,y:s.top}),i=e({x:s.right,y:s.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function sc(s){return s===void 0||s===1}function Sh({scale:s,scaleX:e,scaleY:n}){return!sc(s)||!sc(e)||!sc(n)}function cn(s){return Sh(s)||r0(s)||s.z||s.rotate||s.rotateX||s.rotateY||s.skewX||s.skewY}function r0(s){return $p(s.x)||$p(s.y)}function $p(s){return s&&s!=="0%"}function Dl(s,e,n){const i=s-n,r=e*i;return n+r}function qp(s,e,n,i,r){return r!==void 0&&(s=Dl(s,r,i)),Dl(s,n,i)+e}function Th(s,e=0,n=1,i,r){s.min=qp(s.min,e,n,i,r),s.max=qp(s.max,e,n,i,r)}function a0(s,{x:e,y:n}){Th(s.x,e.translate,e.scale,e.originPoint),Th(s.y,n.translate,n.scale,n.originPoint)}const Xp=.999999999999,Kp=1.0000000000001;function B2(s,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let a,l;for(let o=0;o<r;o++){a=n[o],l=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&ei(s,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,a0(s,l)),i&&cn(a.latestValues)&&ei(s,a.latestValues))}e.x<Kp&&e.x>Xp&&(e.x=1),e.y<Kp&&e.y>Xp&&(e.y=1)}function Jn(s,e){s.min=s.min+e,s.max=s.max+e}function Yp(s,e,n,i,r=.5){const a=le(s.min,s.max,r);Th(s,e,n,a,i)}function ei(s,e){Yp(s.x,e.x,e.scaleX,e.scale,e.originX),Yp(s.y,e.y,e.scaleY,e.scale,e.originY)}function l0(s,e){return i0(V2(s.getBoundingClientRect(),e))}function W2(s,e,n){const i=l0(s,n),{scroll:r}=e;return r&&(Jn(i.x,r.offset.x),Jn(i.y,r.offset.y)),i}const o0=({current:s})=>s?s.ownerDocument.defaultView:null,U2=new WeakMap;class H2{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=xe(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=m=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(ha(m).point)},a=(m,d)=>{const{drag:u,dragPropagation:p,onDragStart:y}=this.getProps();if(u&&!p&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Ob(u),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),vt(v=>{let f=this.getAxisMotionValue(v).get()||0;if(Zt.test(f)){const{projection:x}=this.visualElement;if(x&&x.layout){const j=x.layout.layoutBox[v];j&&(f=pt(j)*(parseFloat(f)/100))}}this.originPoint[v]=f}),y&&q.postRender(()=>y(m,d)),gh(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},l=(m,d)=>{const{dragPropagation:u,dragDirectionLock:p,onDirectionLock:y,onDrag:g}=this.getProps();if(!u&&!this.openDragLock)return;const{offset:v}=d;if(p&&this.currentDirection===null){this.currentDirection=$2(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",d.point,v),this.updateAxis("y",d.point,v),this.visualElement.render(),g&&g(m,d)},o=(m,d)=>this.stop(m,d),c=()=>vt(m=>{var d;return this.getAnimationState(m)==="paused"&&((d=this.getAxisMotionValue(m).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:h}=this.getProps();this.panSession=new e0(e,{onSessionStart:r,onStart:a,onMove:l,onSessionEnd:o,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,contextWindow:o0(this.visualElement)})}stop(e,n){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:a}=this.getProps();a&&q.postRender(()=>a(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Aa(e,r,this.currentDirection))return;const a=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=L2(l,this.constraints[e],this.elastic[e])),a.set(l)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;n&&Gn(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=A2(r.layoutBox,n):this.constraints=!1,this.elastic=O2(i),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&vt(l=>{this.constraints!==!1&&this.getAxisMotionValue(l)&&(this.constraints[l]=I2(r.layoutBox[l],this.constraints[l]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Gn(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=W2(i,r.root,this.visualElement.getTransformPagePoint());let l=z2(r.layout.layoutBox,a);if(n){const o=n(F2(l));this.hasMutatedConstraints=!!o,o&&(l=i0(o))}return l}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:a,dragSnapToOrigin:l,onDragTransitionEnd:o}=this.getProps(),c=this.constraints||{},h=vt(m=>{if(!Aa(m,n,this.currentDirection))return;let d=c&&c[m]||{};l&&(d={min:0,max:0});const u=r?200:1e6,p=r?40:1e7,y={type:"inertia",velocity:i?e[m]:0,bounceStiffness:u,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...a,...d};return this.startAxisValueAnimation(m,y)});return Promise.all(h).then(o)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return gh(this.visualElement,e),i.start(bd(e,i,0,n,this.visualElement,!1))}stopAnimation(){vt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){vt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){vt(n=>{const{drag:i}=this.getProps();if(!Aa(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(n);if(r&&r.layout){const{min:l,max:o}=r.layout.layoutBox[n];a.set(e[n]-le(l,o,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Gn(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};vt(l=>{const o=this.getAxisMotionValue(l);if(o&&this.constraints!==!1){const c=o.get();r[l]=D2({min:c,max:c},this.constraints[l])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),vt(l=>{if(!Aa(l,e,null))return;const o=this.getAxisMotionValue(l),{min:c,max:h}=this.constraints[l];o.set(le(c,h,r[l]))})}addListeners(){if(!this.visualElement.current)return;U2.set(this.visualElement,this);const e=this.visualElement.current,n=xr(e,"pointerdown",c=>{const{drag:h,dragListener:m=!0}=this.getProps();h&&m&&this.start(c)}),i=()=>{const{dragConstraints:c}=this.getProps();Gn(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),q.read(i);const l=$r(window,"resize",()=>this.scalePositionWithinConstraints()),o=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:h})=>{this.isDragging&&h&&(vt(m=>{const d=this.getAxisMotionValue(m);d&&(this.originPoint[m]+=c[m].translate,d.set(d.get()+c[m].translate))}),this.visualElement.render())});return()=>{l(),n(),a(),o&&o()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:l=kh,dragMomentum:o=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:a,dragElastic:l,dragMomentum:o}}}function Aa(s,e,n){return(e===!0||e===s)&&(n===null||n===s)}function $2(s,e=10){let n=null;return Math.abs(s.y)>e?n="y":Math.abs(s.x)>e&&(n="x"),n}class q2 extends tn{constructor(e){super(e),this.removeGroupControls=Xe,this.removeListeners=Xe,this.controls=new H2(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Xe}unmount(){this.removeGroupControls(),this.removeListeners()}}const Gp=s=>(e,n)=>{s&&q.postRender(()=>s(e,n))};class X2 extends tn{constructor(){super(...arguments),this.removePointerDownListener=Xe}onPointerDown(e){this.session=new e0(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:o0(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Gp(e),onStart:Gp(n),onMove:i,onEnd:(a,l)=>{delete this.session,r&&q.postRender(()=>r(a,l))}}}mount(){this.removePointerDownListener=xr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ja={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Qp(s,e){return e.max===e.min?0:s/(e.max-e.min)*100}const qi={correct:(s,e)=>{if(!e.target)return s;if(typeof s=="string")if(D.test(s))s=parseFloat(s);else return s;const n=Qp(s,e.target.x),i=Qp(s,e.target.y);return`${n}% ${i}%`}},K2={correct:(s,{treeScale:e,projectionDelta:n})=>{const i=s,r=Ys.parse(s);if(r.length>5)return i;const a=Ys.createTransformer(s),l=typeof r[0]!="number"?1:0,o=n.x.scale*e.x,c=n.y.scale*e.y;r[0+l]/=o,r[1+l]/=c;const h=le(o,c,.5);return typeof r[2+l]=="number"&&(r[2+l]/=h),typeof r[3+l]=="number"&&(r[3+l]/=h),a(r)}};class Y2 extends _.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:a}=e;yb(G2),a&&(n.group&&n.group.add(a),i&&i.register&&r&&i.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Ja.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:a}=this.props,l=i.projection;return l&&(l.isPresent=a,r||e.layoutDependency!==n||n===void 0?l.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?l.promote():l.relegate()||q.postRender(()=>{const o=l.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Qm.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function c0(s){const[e,n]=Hj(),i=_.useContext($m);return t.jsx(Y2,{...s,layoutGroup:i,switchLayoutGroup:_.useContext(Qj),isPresent:e,safeToRemove:n})}const G2={borderRadius:{...qi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:qi,borderTopRightRadius:qi,borderBottomLeftRadius:qi,borderBottomRightRadius:qi,boxShadow:K2};function Q2(s,e,n){const i=Ve(s)?s:Kt(s);return i.start(bd("",i,e,n)),i.animation}function Z2(s){return s instanceof SVGElement&&s.tagName!=="svg"}const J2=(s,e)=>s.depth-e.depth;class eS{constructor(){this.children=[],this.isDirty=!1}add(e){md(this.children,e),this.isDirty=!0}remove(e){dd(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(J2),this.isDirty=!1,this.children.forEach(e)}}function tS(s,e){const n=Jt.now(),i=({timestamp:r})=>{const a=r-n;a>=e&&(Bt(i),s(a-e))};return q.read(i,!0),()=>Bt(i)}const h0=["TopLeft","TopRight","BottomLeft","BottomRight"],sS=h0.length,Zp=s=>typeof s=="string"?parseFloat(s):s,Jp=s=>typeof s=="number"||D.test(s);function nS(s,e,n,i,r,a){r?(s.opacity=le(0,n.opacity!==void 0?n.opacity:1,iS(i)),s.opacityExit=le(e.opacity!==void 0?e.opacity:1,0,rS(i))):a&&(s.opacity=le(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,i));for(let l=0;l<sS;l++){const o=`border${h0[l]}Radius`;let c=ef(e,o),h=ef(n,o);if(c===void 0&&h===void 0)continue;c||(c=0),h||(h=0),c===0||h===0||Jp(c)===Jp(h)?(s[o]=Math.max(le(Zp(c),Zp(h),i),0),(Zt.test(h)||Zt.test(c))&&(s[o]+="%")):s[o]=h}(e.rotate||n.rotate)&&(s.rotate=le(e.rotate||0,n.rotate||0,i))}function ef(s,e){return s[e]!==void 0?s[e]:s.borderRadius}const iS=m0(0,.5,Ry),rS=m0(.5,.95,Xe);function m0(s,e,n){return i=>i<s?0:i>e?1:n(Pn(s,e,i))}function tf(s,e){s.min=e.min,s.max=e.max}function yt(s,e){tf(s.x,e.x),tf(s.y,e.y)}function sf(s,e){s.translate=e.translate,s.scale=e.scale,s.originPoint=e.originPoint,s.origin=e.origin}function nf(s,e,n,i,r){return s-=e,s=Dl(s,1/n,i),r!==void 0&&(s=Dl(s,1/r,i)),s}function aS(s,e=0,n=1,i=.5,r,a=s,l=s){if(Zt.test(e)&&(e=parseFloat(e),e=le(l.min,l.max,e/100)-l.min),typeof e!="number")return;let o=le(a.min,a.max,i);s===a&&(o-=e),s.min=nf(s.min,e,n,o,r),s.max=nf(s.max,e,n,o,r)}function rf(s,e,[n,i,r],a,l){aS(s,e[n],e[i],e[r],e.scale,a,l)}const lS=["x","scaleX","originX"],oS=["y","scaleY","originY"];function af(s,e,n,i){rf(s.x,e,lS,n?n.x:void 0,i?i.x:void 0),rf(s.y,e,oS,n?n.y:void 0,i?i.y:void 0)}function lf(s){return s.translate===0&&s.scale===1}function d0(s){return lf(s.x)&&lf(s.y)}function of(s,e){return s.min===e.min&&s.max===e.max}function cS(s,e){return of(s.x,e.x)&&of(s.y,e.y)}function cf(s,e){return Math.round(s.min)===Math.round(e.min)&&Math.round(s.max)===Math.round(e.max)}function u0(s,e){return cf(s.x,e.x)&&cf(s.y,e.y)}function hf(s){return pt(s.x)/pt(s.y)}function mf(s,e){return s.translate===e.translate&&s.scale===e.scale&&s.originPoint===e.originPoint}class hS{constructor(){this.members=[]}add(e){md(this.members,e),e.scheduleRender()}remove(e){if(dd(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function mS(s,e,n){let i="";const r=s.x.translate/e.x,a=s.y.translate/e.y,l=(n==null?void 0:n.z)||0;if((r||a||l)&&(i=`translate3d(${r}px, ${a}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:m,rotateX:d,rotateY:u,skewX:p,skewY:y}=n;h&&(i=`perspective(${h}px) ${i}`),m&&(i+=`rotate(${m}deg) `),d&&(i+=`rotateX(${d}deg) `),u&&(i+=`rotateY(${u}deg) `),p&&(i+=`skewX(${p}deg) `),y&&(i+=`skewY(${y}deg) `)}const o=s.x.scale*e.x,c=s.y.scale*e.y;return(o!==1||c!==1)&&(i+=`scale(${o}, ${c})`),i||"none"}const hn={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},tr=typeof window<"u"&&window.MotionDebug!==void 0,nc=["","X","Y","Z"],dS={visibility:"hidden"},df=1e3;let uS=0;function ic(s,e,n,i){const{latestValues:r}=e;r[s]&&(n[s]=r[s],e.setStaticValue(s,0),i&&(i[s]=0))}function p0(s){if(s.hasCheckedOptimisedAppear=!0,s.root===s)return;const{visualElement:e}=s.options;if(!e)return;const n=Ny(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:a}=s.options;window.MotionCancelOptimisedAnimation(n,"transform",q,!(r||a))}const{parent:i}=s;i&&!i.hasCheckedOptimisedAppear&&p0(i)}function f0({attachResizeListener:s,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(l={},o=e==null?void 0:e()){this.id=uS++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,tr&&(hn.totalNodes=hn.resolvedTargetDeltas=hn.recalculatedProjection=0),this.nodes.forEach(xS),this.nodes.forEach(NS),this.nodes.forEach(wS),this.nodes.forEach(gS),tr&&window.MotionDebug.record(hn)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new eS)}addEventListener(l,o){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new ud),this.eventHandlers.get(l).add(o)}notifyListeners(l,...o){const c=this.eventHandlers.get(l);c&&c.notify(...o)}hasListeners(l){return this.eventHandlers.has(l)}mount(l,o=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Z2(l),this.instance=l;const{layoutId:c,layout:h,visualElement:m}=this.options;if(m&&!m.current&&m.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),o&&(h||c)&&(this.isLayoutDirty=!0),s){let d;const u=()=>this.root.updateBlockedByResize=!1;s(l,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=tS(u,250),Ja.hasAnimatedSinceResize&&(Ja.hasAnimatedSinceResize=!1,this.nodes.forEach(pf))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&m&&(c||h)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:u,hasRelativeTargetChanged:p,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||m.getDefaultTransition()||TS,{onLayoutAnimationStart:v,onLayoutAnimationComplete:f}=m.getProps(),x=!this.targetLayout||!u0(this.targetLayout,y)||p,j=!u&&p;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||j||u&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,j);const w={...ld(g,"layout"),onPlay:v,onComplete:f};(m.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w)}else u||pf(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Bt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_S),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&p0(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let m=0;m<this.path.length;m++){const d=this.path[m];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:o,layout:c}=this.options;if(o===void 0&&!c)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(uf);return}this.isUpdating||this.nodes.forEach(yS),this.isUpdating=!1,this.nodes.forEach(vS),this.nodes.forEach(pS),this.nodes.forEach(fS),this.clearAllSnapshots();const o=Jt.now();ke.delta=es(0,1e3/60,o-ke.timestamp),ke.timestamp=o,ke.isProcessing=!0,Ko.update.process(ke),Ko.preRender.process(ke),Ko.render.process(ke),ke.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Qm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(jS),this.sharedNodes.forEach(bS)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,q.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){q.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=xe(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(o=!1),o){const c=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!d0(this.projectionDelta),c=this.getTransformTemplate(),h=c?c(this.latestValues,""):void 0,m=h!==this.prevTransformTemplateValue;l&&(o||cn(this.latestValues)||m)&&(r(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const o=this.measurePageBox();let c=this.removeElementScroll(o);return l&&(c=this.removeTransform(c)),RS(c),{animationId:this.root.animationId,measuredBox:o,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:o}=this.options;if(!o)return xe();const c=o.measureViewportBox();if(!(((l=this.scroll)===null||l===void 0?void 0:l.wasRoot)||this.path.some(ES))){const{scroll:m}=this.root;m&&(Jn(c.x,m.offset.x),Jn(c.y,m.offset.y))}return c}removeElementScroll(l){var o;const c=xe();if(yt(c,l),!((o=this.scroll)===null||o===void 0)&&o.wasRoot)return c;for(let h=0;h<this.path.length;h++){const m=this.path[h],{scroll:d,options:u}=m;m!==this.root&&d&&u.layoutScroll&&(d.wasRoot&&yt(c,l),Jn(c.x,d.offset.x),Jn(c.y,d.offset.y))}return c}applyTransform(l,o=!1){const c=xe();yt(c,l);for(let h=0;h<this.path.length;h++){const m=this.path[h];!o&&m.options.layoutScroll&&m.scroll&&m!==m.root&&ei(c,{x:-m.scroll.offset.x,y:-m.scroll.offset.y}),cn(m.latestValues)&&ei(c,m.latestValues)}return cn(this.latestValues)&&ei(c,this.latestValues),c}removeTransform(l){const o=xe();yt(o,l);for(let c=0;c<this.path.length;c++){const h=this.path[c];if(!h.instance||!cn(h.latestValues))continue;Sh(h.latestValues)&&h.updateSnapshot();const m=xe(),d=h.measurePageBox();yt(m,d),af(o,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,m)}return cn(this.latestValues)&&af(o,this.latestValues),o}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ke.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){var o;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const h=!!this.resumingFrom||this!==c;if(!(l||h&&this.isSharedProjectionDirty||this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:u}=this.options;if(!(!this.layout||!(d||u))){if(this.resolvedRelativeTargetAt=ke.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xe(),this.relativeTargetOrigin=xe(),jr(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),yt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=xe(),this.targetWithTransforms=xe()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),C2(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):yt(this.target,this.layout.layoutBox),a0(this.target,this.targetDelta)):yt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=xe(),this.relativeTargetOrigin=xe(),jr(this.relativeTargetOrigin,this.target,p.target),yt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}tr&&hn.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Sh(this.parent.latestValues)||r0(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var l;const o=this.getLead(),c=!!this.resumingFrom||this!==o;let h=!0;if((this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty)&&(h=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(h=!1),this.resolvedRelativeTargetAt===ke.timestamp&&(h=!1),h)return;const{layout:m,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(m||d))return;yt(this.layoutCorrected,this.layout.layoutBox);const u=this.treeScale.x,p=this.treeScale.y;B2(this.layoutCorrected,this.treeScale,this.path,c),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=xe());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(sf(this.prevProjectionDelta.x,this.projectionDelta.x),sf(this.prevProjectionDelta.y,this.projectionDelta.y)),gr(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==u||this.treeScale.y!==p||!mf(this.projectionDelta.x,this.prevProjectionDelta.x)||!mf(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y)),tr&&hn.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){var o;if((o=this.options.visualElement)===null||o===void 0||o.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Zn(),this.projectionDelta=Zn(),this.projectionDeltaWithTransform=Zn()}setAnimationOrigin(l,o=!1){const c=this.snapshot,h=c?c.latestValues:{},m={...this.latestValues},d=Zn();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const u=xe(),p=c?c.source:void 0,y=this.layout?this.layout.source:void 0,g=p!==y,v=this.getStack(),f=!v||v.members.length<=1,x=!!(g&&!f&&this.options.crossfade===!0&&!this.path.some(SS));this.animationProgress=0;let j;this.mixTargetDelta=w=>{const N=w/1e3;ff(d.x,l.x,N),ff(d.y,l.y,N),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(jr(u,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kS(this.relativeTarget,this.relativeTargetOrigin,u,N),j&&cS(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=xe()),yt(j,this.relativeTarget)),g&&(this.animationValues=m,nS(m,h,this.latestValues,N,x,f)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Bt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=q.update(()=>{Ja.hasAnimatedSinceResize=!0,this.currentAnimation=Q2(0,df,{...l,onUpdate:o=>{this.mixTargetDelta(o),l.onUpdate&&l.onUpdate(o)},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(df),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:o,target:c,layout:h,latestValues:m}=l;if(!(!o||!c||!h)){if(this!==l&&this.layout&&h&&x0(this.options.animationType,this.layout.layoutBox,h.layoutBox)){c=this.target||xe();const d=pt(this.layout.layoutBox.x);c.x.min=l.target.x.min,c.x.max=c.x.min+d;const u=pt(this.layout.layoutBox.y);c.y.min=l.target.y.min,c.y.max=c.y.min+u}yt(o,c),ei(o,m),gr(this.projectionDeltaWithTransform,this.layoutCorrected,o,m)}}registerSharedNode(l,o){this.sharedNodes.has(l)||this.sharedNodes.set(l,new hS),this.sharedNodes.get(l).add(o);const h=o.options.initialPromotionConfig;o.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(o):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){var l;const{layoutId:o}=this.options;return o?((l=this.getStack())===null||l===void 0?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:o}=this.options;return o?(l=this.getStack())===null||l===void 0?void 0:l.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:o,preserveFollowOpacity:c}={}){const h=this.getStack();h&&h.promote(this,c),l&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let o=!1;const{latestValues:c}=l;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(o=!0),!o)return;const h={};c.z&&ic("z",l,h,this.animationValues);for(let m=0;m<nc.length;m++)ic(`rotate${nc[m]}`,l,h,this.animationValues),ic(`skew${nc[m]}`,l,h,this.animationValues);l.render();for(const m in h)l.setStaticValue(m,h[m]),this.animationValues&&(this.animationValues[m]=h[m]);l.scheduleRender()}getProjectionStyles(l){var o,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return dS;const h={visibility:""},m=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,h.opacity="",h.pointerEvents=Qa(l==null?void 0:l.pointerEvents)||"",h.transform=m?m(this.latestValues,""):"none",h;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const g={};return this.options.layoutId&&(g.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,g.pointerEvents=Qa(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!cn(this.latestValues)&&(g.transform=m?m({},""):"none",this.hasProjected=!1),g}const u=d.animationValues||d.latestValues;this.applyTransformsToTarget(),h.transform=mS(this.projectionDeltaWithTransform,this.treeScale,u),m&&(h.transform=m(u,h.transform));const{x:p,y}=this.projectionDelta;h.transformOrigin=`${p.origin*100}% ${y.origin*100}% 0`,d.animationValues?h.opacity=d===this?(c=(o=u.opacity)!==null&&o!==void 0?o:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:h.opacity=d===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const g in Ml){if(u[g]===void 0)continue;const{correct:v,applyTo:f}=Ml[g],x=h.transform==="none"?u[g]:v(u[g],d);if(f){const j=f.length;for(let w=0;w<j;w++)h[f[w]]=x}else h[g]=x}return this.options.layoutId&&(h.pointerEvents=d===this?Qa(l==null?void 0:l.pointerEvents)||"":"none"),h}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>{var o;return(o=l.currentAnimation)===null||o===void 0?void 0:o.stop()}),this.root.nodes.forEach(uf),this.root.sharedNodes.clear()}}}function pS(s){s.updateLayout()}function fS(s){var e;const n=((e=s.resumeFrom)===null||e===void 0?void 0:e.snapshot)||s.snapshot;if(s.isLead()&&s.layout&&n&&s.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=s.layout,{animationType:a}=s.options,l=n.source!==s.layout.source;a==="size"?vt(d=>{const u=l?n.measuredBox[d]:n.layoutBox[d],p=pt(u);u.min=i[d].min,u.max=u.min+p}):x0(a,n.layoutBox,i)&&vt(d=>{const u=l?n.measuredBox[d]:n.layoutBox[d],p=pt(i[d]);u.max=u.min+p,s.relativeTarget&&!s.currentAnimation&&(s.isProjectionDirty=!0,s.relativeTarget[d].max=s.relativeTarget[d].min+p)});const o=Zn();gr(o,i,n.layoutBox);const c=Zn();l?gr(c,s.applyTransform(r,!0),n.measuredBox):gr(c,i,n.layoutBox);const h=!d0(o);let m=!1;if(!s.resumeFrom){const d=s.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:u,layout:p}=d;if(u&&p){const y=xe();jr(y,n.layoutBox,u.layoutBox);const g=xe();jr(g,i,p.layoutBox),u0(y,g)||(m=!0),d.options.layoutRoot&&(s.relativeTarget=g,s.relativeTargetOrigin=y,s.relativeParent=d)}}}s.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:c,layoutDelta:o,hasLayoutChanged:h,hasRelativeTargetChanged:m})}else if(s.isLead()){const{onExitComplete:i}=s.options;i&&i()}s.options.transition=void 0}function xS(s){tr&&hn.totalNodes++,s.parent&&(s.isProjecting()||(s.isProjectionDirty=s.parent.isProjectionDirty),s.isSharedProjectionDirty||(s.isSharedProjectionDirty=!!(s.isProjectionDirty||s.parent.isProjectionDirty||s.parent.isSharedProjectionDirty)),s.isTransformDirty||(s.isTransformDirty=s.parent.isTransformDirty))}function gS(s){s.isProjectionDirty=s.isSharedProjectionDirty=s.isTransformDirty=!1}function jS(s){s.clearSnapshot()}function uf(s){s.clearMeasurements()}function yS(s){s.isLayoutDirty=!1}function vS(s){const{visualElement:e}=s.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),s.resetTransform()}function pf(s){s.finishAnimation(),s.targetDelta=s.relativeTarget=s.target=void 0,s.isProjectionDirty=!0}function NS(s){s.resolveTargetDelta()}function wS(s){s.calcProjection()}function _S(s){s.resetSkewAndRotation()}function bS(s){s.removeLeadSnapshot()}function ff(s,e,n){s.translate=le(e.translate,0,n),s.scale=le(e.scale,1,n),s.origin=e.origin,s.originPoint=e.originPoint}function xf(s,e,n,i){s.min=le(e.min,n.min,i),s.max=le(e.max,n.max,i)}function kS(s,e,n,i){xf(s.x,e.x,n.x,i),xf(s.y,e.y,n.y,i)}function SS(s){return s.animationValues&&s.animationValues.opacityExit!==void 0}const TS={duration:.45,ease:[.4,0,.1,1]},gf=s=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(s),jf=gf("applewebkit/")&&!gf("chrome/")?Math.round:Xe;function yf(s){s.min=jf(s.min),s.max=jf(s.max)}function RS(s){yf(s.x),yf(s.y)}function x0(s,e,n){return s==="position"||s==="preserve-aspect"&&!M2(hf(e),hf(n),.2)}function ES(s){var e;return s!==s.root&&((e=s.scroll)===null||e===void 0?void 0:e.wasRoot)}const PS=f0({attachResizeListener:(s,e)=>$r(s,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rc={current:void 0},g0=f0({measureScroll:s=>({x:s.scrollLeft,y:s.scrollTop}),defaultParent:()=>{if(!rc.current){const s=new PS({});s.mount(window),s.setOptions({layoutScroll:!0}),rc.current=s}return rc.current},resetTransform:(s,e)=>{s.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:s=>window.getComputedStyle(s).position==="fixed"}),MS={pan:{Feature:X2},drag:{Feature:q2,ProjectionNode:g0,MeasureLayout:c0}};function vf(s,e,n){const{props:i}=s;s.animationState&&i.whileHover&&s.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,a=i[r];a&&q.postRender(()=>a(e,ha(e)))}class CS extends tn{mount(){const{current:e}=this.node;e&&(this.unmount=Lb(e,n=>(vf(this.node,n,"Start"),i=>vf(this.node,i,"End"))))}unmount(){}}class LS extends tn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=ca($r(this.node.current,"focus",()=>this.onFocus()),$r(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Nf(s,e,n){const{props:i}=s;s.animationState&&i.whileTap&&s.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),a=i[r];a&&q.postRender(()=>a(e,ha(e)))}class AS extends tn{mount(){const{current:e}=this.node;e&&(this.unmount=Ib(e,n=>(Nf(this.node,n,"Start"),(i,{success:r})=>Nf(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Rh=new WeakMap,ac=new WeakMap,zS=s=>{const e=Rh.get(s.target);e&&e(s)},DS=s=>{s.forEach(zS)};function IS({root:s,...e}){const n=s||document;ac.has(n)||ac.set(n,{});const i=ac.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(DS,{root:s,...e})),i[r]}function OS(s,e,n){const i=IS(e);return Rh.set(s,n),i.observe(s),()=>{Rh.delete(s),i.unobserve(s)}}const FS={some:0,all:1};class VS extends tn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:a}=e,l={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:FS[r]},o=c=>{const{isIntersecting:h}=c;if(this.isInView===h||(this.isInView=h,a&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:m,onViewportLeave:d}=this.node.getProps(),u=h?m:d;u&&u(c)};return OS(this.node.current,l,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(BS(e,n))&&this.startObserver()}unmount(){}}function BS({viewport:s={}},{viewport:e={}}={}){return n=>s[n]!==e[n]}const WS={inView:{Feature:VS},tap:{Feature:AS},focus:{Feature:LS},hover:{Feature:CS}},US={layout:{ProjectionNode:g0,MeasureLayout:c0}},Eh={current:null},j0={current:!1};function HS(){if(j0.current=!0,!!qm)if(window.matchMedia){const s=window.matchMedia("(prefers-reduced-motion)"),e=()=>Eh.current=s.matches;s.addListener(e),e()}else Eh.current=!1}const $S=[...Wy,Ie,Ys],qS=s=>$S.find(By(s)),wf=new WeakMap;function XS(s,e,n){for(const i in e){const r=e[i],a=n[i];if(Ve(r))s.addValue(i,r);else if(Ve(a))s.addValue(i,Kt(r,{owner:s}));else if(a!==r)if(s.hasValue(i)){const l=s.getValue(i);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=s.getStaticValue(i);s.addValue(i,Kt(l!==void 0?l:r,{owner:s}))}}for(const i in n)e[i]===void 0&&s.removeValue(i);return e}const _f=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class KS{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:a,visualState:l},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vd,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=Jt.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,q.render(this.render,!1,!0))};const{latestValues:c,renderState:h,onUpdate:m}=l;this.onUpdate=m,this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=!!a,this.isControllingVariants=po(n),this.isVariantNode=Yj(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...u}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in u){const y=u[p];c[p]!==void 0&&Ve(y)&&y.set(c[p],!1)}}mount(e){this.current=e,wf.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),j0.current||HS(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Eh.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){wf.delete(this.current),this.projection&&this.projection.unmount(),Bt(this.notifyUpdate),Bt(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=An.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&q.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let l;window.MotionCheckAppearSync&&(l=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),a(),l&&l(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in yi){const n=yi[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const a=this.features[e];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):xe()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<_f.length;i++){const r=_f[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a="on"+r,l=e[a];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=XS(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=Kt(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(Fy(r)||Py(r))?r=parseFloat(r):!qS(r)&&Ys.test(n)&&(r=Dy(e,n)),this.setBaseTarget(e,Ve(r)?r.get():r)),Ve(r)?r.get():r}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const l=Jm(this.props,i,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);l&&(r=l[e])}if(i&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Ve(a)?a:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new ud),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class y0 extends KS{constructor(){super(...arguments),this.KeyframeResolver=Uy}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ve(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function YS(s){return window.getComputedStyle(s)}class GS extends y0{constructor(){super(...arguments),this.type="html",this.renderInstance=iy}readValueFromInstance(e,n){if(An.has(n)){const i=yd(n);return i&&i.default||0}else{const i=YS(e),r=(ty(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return l0(e,n)}build(e,n,i){sd(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return ad(e,n,i)}}class QS extends y0{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=xe}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(An.has(n)){const i=yd(n);return i&&i.default||0}return n=ry.has(n)?n:Gm(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return oy(e,n,i)}build(e,n,i){nd(e,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,n,i,r){ay(e,n,i,r)}mount(e){this.isSVGTag=rd(e.tagName),super.mount(e)}}const ZS=(s,e)=>Zm(s)?new QS(e):new GS(e,{allowProjection:s!==_.Fragment}),JS=Rb({...w2,...WS,...MS,...US},ZS),vn=U_(JS);function v0(s,e){let n;const i=()=>{const{currentTime:r}=e,l=(r===null?0:r.value)/100;n!==l&&s(l),n=l};return q.update(i,!0),()=>Bt(i)}const el=new WeakMap;let Ss;function eT(s,e){if(e){const{inlineSize:n,blockSize:i}=e[0];return{width:n,height:i}}else return s instanceof SVGElement&&"getBBox"in s?s.getBBox():{width:s.offsetWidth,height:s.offsetHeight}}function tT({target:s,contentRect:e,borderBoxSize:n}){var i;(i=el.get(s))===null||i===void 0||i.forEach(r=>{r({target:s,contentSize:e,get size(){return eT(s,n)}})})}function sT(s){s.forEach(tT)}function nT(){typeof ResizeObserver>"u"||(Ss=new ResizeObserver(sT))}function iT(s,e){Ss||nT();const n=gy(s);return n.forEach(i=>{let r=el.get(i);r||(r=new Set,el.set(i,r)),r.add(e),Ss==null||Ss.observe(i)}),()=>{n.forEach(i=>{const r=el.get(i);r==null||r.delete(e),r!=null&&r.size||Ss==null||Ss.unobserve(i)})}}const tl=new Set;let yr;function rT(){yr=()=>{const s={width:window.innerWidth,height:window.innerHeight},e={target:window,size:s,contentSize:s};tl.forEach(n=>n(e))},window.addEventListener("resize",yr)}function aT(s){return tl.add(s),yr||rT(),()=>{tl.delete(s),!tl.size&&yr&&(yr=void 0)}}function lT(s,e){return typeof s=="function"?aT(s):iT(s,e)}const oT=50,bf=()=>({current:0,offset:[],progress:0,scrollLength:0,targetOffset:0,targetLength:0,containerLength:0,velocity:0}),cT=()=>({time:0,x:bf(),y:bf()}),hT={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};function kf(s,e,n,i){const r=n[e],{length:a,position:l}=hT[e],o=r.current,c=n.time;r.current=s[`scroll${l}`],r.scrollLength=s[`scroll${a}`]-s[`client${a}`],r.offset.length=0,r.offset[0]=0,r.offset[1]=r.scrollLength,r.progress=Pn(0,r.scrollLength,r.current);const h=i-c;r.velocity=h>oT?0:pd(r.current-o,h)}function mT(s,e,n){kf(s,"x",e,n),kf(s,"y",e,n),e.time=n}function dT(s,e){const n={x:0,y:0};let i=s;for(;i&&i!==e;)if(i instanceof HTMLElement)n.x+=i.offsetLeft,n.y+=i.offsetTop,i=i.offsetParent;else if(i.tagName==="svg"){const r=i.getBoundingClientRect();i=i.parentElement;const a=i.getBoundingClientRect();n.x+=r.left-a.left,n.y+=r.top-a.top}else if(i instanceof SVGGraphicsElement){const{x:r,y:a}=i.getBBox();n.x+=r,n.y+=a;let l=null,o=i.parentNode;for(;!l;)o.tagName==="svg"&&(l=o),o=i.parentNode;i=l}else break;return n}const Ph={start:0,center:.5,end:1};function Sf(s,e,n=0){let i=0;if(s in Ph&&(s=Ph[s]),typeof s=="string"){const r=parseFloat(s);s.endsWith("px")?i=r:s.endsWith("%")?s=r/100:s.endsWith("vw")?i=r/100*document.documentElement.clientWidth:s.endsWith("vh")?i=r/100*document.documentElement.clientHeight:s=r}return typeof s=="number"&&(i=e*s),n+i}const uT=[0,0];function pT(s,e,n,i){let r=Array.isArray(s)?s:uT,a=0,l=0;return typeof s=="number"?r=[s,s]:typeof s=="string"&&(s=s.trim(),s.includes(" ")?r=s.split(" "):r=[s,Ph[s]?s:"0"]),a=Sf(r[0],n,i),l=Sf(r[1],e),a-l}const fT={All:[[0,0],[1,1]]},xT={x:0,y:0};function gT(s){return"getBBox"in s&&s.tagName!=="svg"?s.getBBox():{width:s.clientWidth,height:s.clientHeight}}function jT(s,e,n){const{offset:i=fT.All}=n,{target:r=s,axis:a="y"}=n,l=a==="y"?"height":"width",o=r!==s?dT(r,s):xT,c=r===s?{width:s.scrollWidth,height:s.scrollHeight}:gT(r),h={width:s.clientWidth,height:s.clientHeight};e[a].offset.length=0;let m=!e[a].interpolate;const d=i.length;for(let u=0;u<d;u++){const p=pT(i[u],h[l],c[l],o[a]);!m&&p!==e[a].interpolatorOffsets[u]&&(m=!0),e[a].offset[u]=p}m&&(e[a].interpolate=wd(e[a].offset,Gy(i),{clamp:!1}),e[a].interpolatorOffsets=[...e[a].offset]),e[a].progress=es(0,1,e[a].interpolate(e[a].current))}function yT(s,e=s,n){if(n.x.targetOffset=0,n.y.targetOffset=0,e!==s){let i=e;for(;i&&i!==s;)n.x.targetOffset+=i.offsetLeft,n.y.targetOffset+=i.offsetTop,i=i.offsetParent}n.x.targetLength=e===s?e.scrollWidth:e.clientWidth,n.y.targetLength=e===s?e.scrollHeight:e.clientHeight,n.x.containerLength=s.clientWidth,n.y.containerLength=s.clientHeight}function vT(s,e,n,i={}){return{measure:()=>yT(s,i.target,n),update:r=>{mT(s,n,r),(i.offset||i.target)&&jT(s,n,i)},notify:()=>e(n)}}const Xi=new WeakMap,Tf=new WeakMap,lc=new WeakMap,Rf=s=>s===document.documentElement?window:s;function kd(s,{container:e=document.documentElement,...n}={}){let i=lc.get(e);i||(i=new Set,lc.set(e,i));const r=cT(),a=vT(e,s,r,n);if(i.add(a),!Xi.has(e)){const o=()=>{for(const u of i)u.measure()},c=()=>{for(const u of i)u.update(ke.timestamp)},h=()=>{for(const u of i)u.notify()},m=()=>{q.read(o,!1,!0),q.read(c,!1,!0),q.update(h,!1,!0)};Xi.set(e,m);const d=Rf(e);window.addEventListener("resize",m,{passive:!0}),e!==document.documentElement&&Tf.set(e,lT(e,m)),d.addEventListener("scroll",m,{passive:!0})}const l=Xi.get(e);return q.read(l,!1,!0),()=>{var o;Bt(l);const c=lc.get(e);if(!c||(c.delete(a),c.size))return;const h=Xi.get(e);Xi.delete(e),h&&(Rf(e).removeEventListener("scroll",h),(o=Tf.get(e))===null||o===void 0||o(),window.removeEventListener("resize",h))}}function NT({source:s,container:e,axis:n="y"}){s&&(e=s);const i={value:0},r=kd(a=>{i.value=a[n].progress*100},{container:e,axis:n});return{currentTime:i,cancel:r}}const oc=new Map;function N0({source:s,container:e=document.documentElement,axis:n="y"}={}){s&&(e=s),oc.has(e)||oc.set(e,{});const i=oc.get(e);return i[n]||(i[n]=my()?new ScrollTimeline({source:e,axis:n}):NT({source:e,axis:n})),i[n]}function wT(s){return s.length===2}function w0(s){return s&&(s.target||s.offset)}function _T(s,e){return wT(s)||w0(e)?kd(n=>{s(n[e.axis].progress,n)},e):v0(s,N0(e))}function bT(s,e){if(s.flatten(),w0(e))return s.pause(),kd(n=>{s.time=s.duration*n[e.axis].progress},e);{const n=N0(e);return s.attachTimeline?s.attachTimeline(n,i=>(i.pause(),v0(r=>{i.time=i.duration*r},n))):Xe}}function kT(s,{axis:e="y",...n}={}){const i={axis:e,...n};return typeof s=="function"?_T(s,i):bT(s,i)}function Ef(s,e){z_(!!(!e||e.current))}const ST=()=>({scrollX:Kt(0),scrollY:Kt(0),scrollXProgress:Kt(0),scrollYProgress:Kt(0)});function TT({container:s,target:e,layoutEffect:n=!0,...i}={}){const r=Li(ST);return(n?ho:_.useEffect)(()=>(Ef("target",e),Ef("container",s),kT((l,{x:o,y:c})=>{r.scrollX.set(o.current),r.scrollXProgress.set(o.progress),r.scrollY.set(c.current),r.scrollYProgress.set(c.progress)},{...i,container:(s==null?void 0:s.current)||void 0,target:(e==null?void 0:e.current)||void 0})),[s,e,JSON.stringify(i.offset)]),r}function _0(s){const e=Li(()=>Kt(s)),{isStatic:n}=_.useContext(co);if(n){const[,i]=_.useState(s);_.useEffect(()=>e.on("change",i),[])}return e}function b0(s,e){const n=_0(e()),i=()=>n.set(e());return i(),ho(()=>{const r=()=>q.preRender(i,!1,!0),a=s.map(l=>l.on("change",r));return()=>{a.forEach(l=>l()),Bt(i)}}),n}const RT=s=>s&&typeof s=="object"&&s.mix,ET=s=>RT(s)?s.mix:void 0;function PT(...s){const e=!Array.isArray(s[0]),n=e?0:-1,i=s[0+n],r=s[1+n],a=s[2+n],l=s[3+n],o=wd(r,a,{mixer:ET(a[0]),...l});return e?o(i):o}function MT(s){pr.current=[],s();const e=b0(pr.current,s);return pr.current=void 0,e}function Pf(s,e,n,i){if(typeof s=="function")return MT(s);const r=typeof e=="function"?e:PT(e,n,i);return Array.isArray(s)?Mf(s,r):Mf([s],([a])=>r(a))}function Mf(s,e){const n=Li(()=>[]);return b0(s,()=>{n.length=0;const i=s.length;for(let r=0;r<i;r++)n[r]=s[r].get();return e(n)})}/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=s=>s.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),ma=(s,e)=>{const n=_.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:l,className:o="",children:c,...h},m)=>_.createElement("svg",{ref:m,...CT,width:r,height:r,stroke:i,strokeWidth:l?Number(a)*24/Number(r):a,className:["lucide",`lucide-${LT(s)}`,o].join(" "),...h},[...e.map(([d,u])=>_.createElement(d,u)),...Array.isArray(c)?c:[c]]));return n.displayName=`${s}`,n};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=ma("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=ma("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=ma("Github",[["path",{d:"M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4",key:"tonef"}],["path",{d:"M9 18c-4.51 2-5-2-7-2",key:"9comsn"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=ma("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=ma("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function as(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function k0(s,e){s.prototype=Object.create(e.prototype),s.prototype.constructor=s,s.__proto__=e}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var dt={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ni={duration:.5,overwrite:!1,delay:0},Sd,Le,ie,kt=1e8,Z=1/kt,Mh=Math.PI*2,FT=Mh/4,VT=0,S0=Math.sqrt,BT=Math.cos,WT=Math.sin,Ee=function(e){return typeof e=="string"},fe=function(e){return typeof e=="function"},vs=function(e){return typeof e=="number"},Td=function(e){return typeof e>"u"},ts=function(e){return typeof e=="object"},tt=function(e){return e!==!1},Rd=function(){return typeof window<"u"},za=function(e){return fe(e)||Ee(e)},T0=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Be=Array.isArray,Ch=/(?:-?\.?\d|\.)+/gi,R0=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,ti=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,cc=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,E0=/[+-]=-?[.\d]+/,P0=/[^,'"\[\]\s]+/gi,UT=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ae,$t,Lh,Ed,ft={},Il={},M0,C0=function(e){return(Il=wi(e,ft))&&rt},Pd=function(e,n){return console.warn("Invalid property",e,"set to",n,"Missing plugin? gsap.registerPlugin()")},qr=function(e,n){return!n&&console.warn(e)},L0=function(e,n){return e&&(ft[e]=n)&&Il&&(Il[e]=n)||ft},Xr=function(){return 0},HT={suppressEvents:!0,isStart:!0,kill:!1},sl={suppressEvents:!0,kill:!1},$T={suppressEvents:!0},Md={},$s=[],Ah={},A0,lt={},hc={},Cf=30,nl=[],Cd="",Ld=function(e){var n=e[0],i,r;if(ts(n)||fe(n)||(e=[e]),!(i=(n._gsap||{}).harness)){for(r=nl.length;r--&&!nl[r].targetTest(n););i=nl[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new iv(e[r],i)))||e.splice(r,1);return e},Nn=function(e){return e._gsap||Ld(St(e))[0]._gsap},z0=function(e,n,i){return(i=e[n])&&fe(i)?e[n]():Td(i)&&e.getAttribute&&e.getAttribute(n)||i},st=function(e,n){return(e=e.split(",")).forEach(n)||e},ge=function(e){return Math.round(e*1e5)/1e5||0},ve=function(e){return Math.round(e*1e7)/1e7||0},ci=function(e,n){var i=n.charAt(0),r=parseFloat(n.substr(2));return e=parseFloat(e),i==="+"?e+r:i==="-"?e-r:i==="*"?e*r:e/r},qT=function(e,n){for(var i=n.length,r=0;e.indexOf(n[r])<0&&++r<i;);return r<i},Ol=function(){var e=$s.length,n=$s.slice(0),i,r;for(Ah={},$s.length=0,i=0;i<e;i++)r=n[i],r&&r._lazy&&(r.render(r._lazy[0],r._lazy[1],!0)._lazy=0)},Ad=function(e){return!!(e._initted||e._startAt||e.add)},D0=function(e,n,i,r){$s.length&&!Le&&Ol(),e.render(n,i,!!(Le&&n<0&&Ad(e))),$s.length&&!Le&&Ol()},I0=function(e){var n=parseFloat(e);return(n||n===0)&&(e+"").match(P0).length<2?n:Ee(e)?e.trim():e},O0=function(e){return e},xt=function(e,n){for(var i in n)i in e||(e[i]=n[i]);return e},XT=function(e){return function(n,i){for(var r in i)r in n||r==="duration"&&e||r==="ease"||(n[r]=i[r])}},wi=function(e,n){for(var i in n)e[i]=n[i];return e},Lf=function s(e,n){for(var i in n)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(e[i]=ts(n[i])?s(e[i]||(e[i]={}),n[i]):n[i]);return e},Fl=function(e,n){var i={},r;for(r in e)r in n||(i[r]=e[r]);return i},vr=function(e){var n=e.parent||ae,i=e.keyframes?XT(Be(e.keyframes)):xt;if(tt(e.inherit))for(;n;)i(e,n.vars.defaults),n=n.parent||n._dp;return e},KT=function(e,n){for(var i=e.length,r=i===n.length;r&&i--&&e[i]===n[i];);return i<0},F0=function(e,n,i,r,a){var l=e[r],o;if(a)for(o=n[a];l&&l[a]>o;)l=l._prev;return l?(n._next=l._next,l._next=n):(n._next=e[i],e[i]=n),n._next?n._next._prev=n:e[r]=n,n._prev=l,n.parent=n._dp=e,n},go=function(e,n,i,r){i===void 0&&(i="_first"),r===void 0&&(r="_last");var a=n._prev,l=n._next;a?a._next=l:e[i]===n&&(e[i]=l),l?l._prev=a:e[r]===n&&(e[r]=a),n._next=n._prev=n.parent=null},Gs=function(e,n){e.parent&&(!n||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},wn=function(e,n){if(e&&(!n||n._end>e._dur||n._start<0))for(var i=e;i;)i._dirty=1,i=i.parent;return e},YT=function(e){for(var n=e.parent;n&&n.parent;)n._dirty=1,n.totalDuration(),n=n.parent;return e},zh=function(e,n,i,r){return e._startAt&&(Le?e._startAt.revert(sl):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(n,!0,r))},GT=function s(e){return!e||e._ts&&s(e.parent)},Af=function(e){return e._repeat?_i(e._tTime,e=e.duration()+e._rDelay)*e:0},_i=function(e,n){var i=Math.floor(e=ve(e/n));return e&&i===e?i-1:i},Vl=function(e,n){return(e-n._start)*n._ts+(n._ts>=0?0:n._dirty?n.totalDuration():n._tDur)},jo=function(e){return e._end=ve(e._start+(e._tDur/Math.abs(e._ts||e._rts||Z)||0))},yo=function(e,n){var i=e._dp;return i&&i.smoothChildTiming&&e._ts&&(e._start=ve(i._time-(e._ts>0?n/e._ts:((e._dirty?e.totalDuration():e._tDur)-n)/-e._ts)),jo(e),i._dirty||wn(i,e)),e},V0=function(e,n){var i;if((n._time||!n._dur&&n._initted||n._start<e._time&&(n._dur||!n.add))&&(i=Vl(e.rawTime(),n),(!n._dur||da(0,n.totalDuration(),i)-n._tTime>Z)&&n.render(i,!0)),wn(e,n)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(i=e;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;e._zTime=-Z}},Xt=function(e,n,i,r){return n.parent&&Gs(n),n._start=ve((vs(i)?i:i||e!==ae?Nt(e,i,n):e._time)+n._delay),n._end=ve(n._start+(n.totalDuration()/Math.abs(n.timeScale())||0)),F0(e,n,"_first","_last",e._sort?"_start":0),Dh(n)||(e._recent=n),r||V0(e,n),e._ts<0&&yo(e,e._tTime),e},B0=function(e,n){return(ft.ScrollTrigger||Pd("scrollTrigger",n))&&ft.ScrollTrigger.create(n,e)},W0=function(e,n,i,r,a){if(Dd(e,n,a),!e._initted)return 1;if(!i&&e._pt&&!Le&&(e._dur&&e.vars.lazy!==!1||!e._dur&&e.vars.lazy)&&A0!==ot.frame)return $s.push(e),e._lazy=[a,r],1},QT=function s(e){var n=e.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||s(n))},Dh=function(e){var n=e.data;return n==="isFromStart"||n==="isStart"},ZT=function(e,n,i,r){var a=e.ratio,l=n<0||!n&&(!e._start&&QT(e)&&!(!e._initted&&Dh(e))||(e._ts<0||e._dp._ts<0)&&!Dh(e))?0:1,o=e._rDelay,c=0,h,m,d;if(o&&e._repeat&&(c=da(0,e._tDur,n),m=_i(c,o),e._yoyo&&m&1&&(l=1-l),m!==_i(e._tTime,o)&&(a=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==a||Le||r||e._zTime===Z||!n&&e._zTime){if(!e._initted&&W0(e,n,r,i,c))return;for(d=e._zTime,e._zTime=n||(i?Z:0),i||(i=n&&!d),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=c,h=e._pt;h;)h.r(l,h.d),h=h._next;n<0&&zh(e,n,i,!0),e._onUpdate&&!i&&ht(e,"onUpdate"),c&&e._repeat&&!i&&e.parent&&ht(e,"onRepeat"),(n>=e._tDur||n<0)&&e.ratio===l&&(l&&Gs(e,1),!i&&!Le&&(ht(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=n)},JT=function(e,n,i){var r;if(i>n)for(r=e._first;r&&r._start<=i;){if(r.data==="isPause"&&r._start>n)return r;r=r._next}else for(r=e._last;r&&r._start>=i;){if(r.data==="isPause"&&r._start<n)return r;r=r._prev}},bi=function(e,n,i,r){var a=e._repeat,l=ve(n)||0,o=e._tTime/e._tDur;return o&&!r&&(e._time*=l/e._dur),e._dur=l,e._tDur=a?a<0?1e10:ve(l*(a+1)+e._rDelay*a):l,o>0&&!r&&yo(e,e._tTime=e._tDur*o),e.parent&&jo(e),i||wn(e.parent,e),e},zf=function(e){return e instanceof $e?wn(e):bi(e,e._dur)},e3={_start:0,endTime:Xr,totalDuration:Xr},Nt=function s(e,n,i){var r=e.labels,a=e._recent||e3,l=e.duration()>=kt?a.endTime(!1):e._dur,o,c,h;return Ee(n)&&(isNaN(n)||n in r)?(c=n.charAt(0),h=n.substr(-1)==="%",o=n.indexOf("="),c==="<"||c===">"?(o>=0&&(n=n.replace(/=/,"")),(c==="<"?a._start:a.endTime(a._repeat>=0))+(parseFloat(n.substr(1))||0)*(h?(o<0?a:i).totalDuration()/100:1)):o<0?(n in r||(r[n]=l),r[n]):(c=parseFloat(n.charAt(o-1)+n.substr(o+1)),h&&i&&(c=c/100*(Be(i)?i[0]:i).totalDuration()),o>1?s(e,n.substr(0,o-1),i)+c:l+c)):n==null?l:+n},Nr=function(e,n,i){var r=vs(n[1]),a=(r?2:1)+(e<2?0:1),l=n[a],o,c;if(r&&(l.duration=n[1]),l.parent=i,e){for(o=l,c=i;c&&!("immediateRender"in o);)o=c.vars.defaults||{},c=tt(c.vars.inherit)&&c.parent;l.immediateRender=tt(o.immediateRender),e<2?l.runBackwards=1:l.startAt=n[a-1]}return new ye(n[0],l,n[a+1])},sn=function(e,n){return e||e===0?n(e):n},da=function(e,n,i){return i<e?e:i>n?n:i},Fe=function(e,n){return!Ee(e)||!(n=UT.exec(e))?"":n[1]},t3=function(e,n,i){return sn(i,function(r){return da(e,n,r)})},Ih=[].slice,U0=function(e,n){return e&&ts(e)&&"length"in e&&(!n&&!e.length||e.length-1 in e&&ts(e[0]))&&!e.nodeType&&e!==$t},s3=function(e,n,i){return i===void 0&&(i=[]),e.forEach(function(r){var a;return Ee(r)&&!n||U0(r,1)?(a=i).push.apply(a,St(r)):i.push(r)})||i},St=function(e,n,i){return ie&&!n&&ie.selector?ie.selector(e):Ee(e)&&!i&&(Lh||!ki())?Ih.call((n||Ed).querySelectorAll(e),0):Be(e)?s3(e,i):U0(e)?Ih.call(e,0):e?[e]:[]},Oh=function(e){return e=St(e)[0]||qr("Invalid scope")||{},function(n){var i=e.current||e.nativeElement||e;return St(n,i.querySelectorAll?i:i===e?qr("Invalid scope")||Ed.createElement("div"):e)}},H0=function(e){return e.sort(function(){return .5-Math.random()})},$0=function(e){if(fe(e))return e;var n=ts(e)?e:{each:e},i=_n(n.ease),r=n.from||0,a=parseFloat(n.base)||0,l={},o=r>0&&r<1,c=isNaN(r)||o,h=n.axis,m=r,d=r;return Ee(r)?m=d={center:.5,edges:.5,end:1}[r]||0:!o&&c&&(m=r[0],d=r[1]),function(u,p,y){var g=(y||n).length,v=l[g],f,x,j,w,N,b,S,k,T;if(!v){if(T=n.grid==="auto"?0:(n.grid||[1,kt])[1],!T){for(S=-kt;S<(S=y[T++].getBoundingClientRect().left)&&T<g;);T<g&&T--}for(v=l[g]=[],f=c?Math.min(T,g)*m-.5:r%T,x=T===kt?0:c?g*d/T-.5:r/T|0,S=0,k=kt,b=0;b<g;b++)j=b%T-f,w=x-(b/T|0),v[b]=N=h?Math.abs(h==="y"?w:j):S0(j*j+w*w),N>S&&(S=N),N<k&&(k=N);r==="random"&&H0(v),v.max=S-k,v.min=k,v.v=g=(parseFloat(n.amount)||parseFloat(n.each)*(T>g?g-1:h?h==="y"?g/T:T:Math.max(T,g/T))||0)*(r==="edges"?-1:1),v.b=g<0?a-g:a,v.u=Fe(n.amount||n.each)||0,i=i&&g<0?tv(i):i}return g=(v[u]-v.min)/v.max||0,ve(v.b+(i?i(g):g)*v.v)+v.u}},Fh=function(e){var n=Math.pow(10,((e+"").split(".")[1]||"").length);return function(i){var r=ve(Math.round(parseFloat(i)/e)*e*n);return(r-r%1)/n+(vs(i)?0:Fe(i))}},q0=function(e,n){var i=Be(e),r,a;return!i&&ts(e)&&(r=i=e.radius||kt,e.values?(e=St(e.values),(a=!vs(e[0]))&&(r*=r)):e=Fh(e.increment)),sn(n,i?fe(e)?function(l){return a=e(l),Math.abs(a-l)<=r?a:l}:function(l){for(var o=parseFloat(a?l.x:l),c=parseFloat(a?l.y:0),h=kt,m=0,d=e.length,u,p;d--;)a?(u=e[d].x-o,p=e[d].y-c,u=u*u+p*p):u=Math.abs(e[d]-o),u<h&&(h=u,m=d);return m=!r||h<=r?e[m]:l,a||m===l||vs(l)?m:m+Fe(l)}:Fh(e))},X0=function(e,n,i,r){return sn(Be(e)?!n:i===!0?!!(i=0):!r,function(){return Be(e)?e[~~(Math.random()*e.length)]:(i=i||1e-5)&&(r=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((e-i/2+Math.random()*(n-e+i*.99))/i)*i*r)/r})},n3=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return function(r){return n.reduce(function(a,l){return l(a)},r)}},i3=function(e,n){return function(i){return e(parseFloat(i))+(n||Fe(i))}},r3=function(e,n,i){return Y0(e,n,0,1,i)},K0=function(e,n,i){return sn(i,function(r){return e[~~n(r)]})},a3=function s(e,n,i){var r=n-e;return Be(e)?K0(e,s(0,e.length),n):sn(i,function(a){return(r+(a-e)%r)%r+e})},l3=function s(e,n,i){var r=n-e,a=r*2;return Be(e)?K0(e,s(0,e.length-1),n):sn(i,function(l){return l=(a+(l-e)%a)%a||0,e+(l>r?a-l:l)})},Kr=function(e){for(var n=0,i="",r,a,l,o;~(r=e.indexOf("random(",n));)l=e.indexOf(")",r),o=e.charAt(r+7)==="[",a=e.substr(r+7,l-r-7).match(o?P0:Ch),i+=e.substr(n,r-n)+X0(o?a:+a[0],o?0:+a[1],+a[2]||1e-5),n=l+1;return i+e.substr(n,e.length-n)},Y0=function(e,n,i,r,a){var l=n-e,o=r-i;return sn(a,function(c){return i+((c-e)/l*o||0)})},o3=function s(e,n,i,r){var a=isNaN(e+n)?0:function(p){return(1-p)*e+p*n};if(!a){var l=Ee(e),o={},c,h,m,d,u;if(i===!0&&(r=1)&&(i=null),l)e={p:e},n={p:n};else if(Be(e)&&!Be(n)){for(m=[],d=e.length,u=d-2,h=1;h<d;h++)m.push(s(e[h-1],e[h]));d--,a=function(y){y*=d;var g=Math.min(u,~~y);return m[g](y-g)},i=n}else r||(e=wi(Be(e)?[]:{},e));if(!m){for(c in n)zd.call(o,e,c,"get",n[c]);a=function(y){return Fd(y,o)||(l?e.p:e)}}}return sn(i,a)},Df=function(e,n,i){var r=e.labels,a=kt,l,o,c;for(l in r)o=r[l]-n,o<0==!!i&&o&&a>(o=Math.abs(o))&&(c=l,a=o);return c},ht=function(e,n,i){var r=e.vars,a=r[n],l=ie,o=e._ctx,c,h,m;if(a)return c=r[n+"Params"],h=r.callbackScope||e,i&&$s.length&&Ol(),o&&(ie=o),m=c?a.apply(h,c):a.call(h),ie=l,m},sr=function(e){return Gs(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Le),e.progress()<1&&ht(e,"onInterrupt"),e},si,G0=[],Q0=function(e){if(e)if(e=!e.name&&e.default||e,Rd()||e.headless){var n=e.name,i=fe(e),r=n&&!i&&e.init?function(){this._props=[]}:e,a={init:Xr,render:Fd,add:zd,kill:b3,modifier:_3,rawVars:0},l={targetTest:0,get:0,getSetter:Od,aliases:{},register:0};if(ki(),e!==r){if(lt[n])return;xt(r,xt(Fl(e,a),l)),wi(r.prototype,wi(a,Fl(e,l))),lt[r.prop=n]=r,e.targetTest&&(nl.push(r),Md[n]=1),n=(n==="css"?"CSS":n.charAt(0).toUpperCase()+n.substr(1))+"Plugin"}L0(n,r),e.register&&e.register(rt,r,nt)}else G0.push(e)},Q=255,nr={aqua:[0,Q,Q],lime:[0,Q,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Q],navy:[0,0,128],white:[Q,Q,Q],olive:[128,128,0],yellow:[Q,Q,0],orange:[Q,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Q,0,0],pink:[Q,192,203],cyan:[0,Q,Q],transparent:[Q,Q,Q,0]},mc=function(e,n,i){return e+=e<0?1:e>1?-1:0,(e*6<1?n+(i-n)*e*6:e<.5?i:e*3<2?n+(i-n)*(2/3-e)*6:n)*Q+.5|0},Z0=function(e,n,i){var r=e?vs(e)?[e>>16,e>>8&Q,e&Q]:0:nr.black,a,l,o,c,h,m,d,u,p,y;if(!r){if(e.substr(-1)===","&&(e=e.substr(0,e.length-1)),nr[e])r=nr[e];else if(e.charAt(0)==="#"){if(e.length<6&&(a=e.charAt(1),l=e.charAt(2),o=e.charAt(3),e="#"+a+a+l+l+o+o+(e.length===5?e.charAt(4)+e.charAt(4):"")),e.length===9)return r=parseInt(e.substr(1,6),16),[r>>16,r>>8&Q,r&Q,parseInt(e.substr(7),16)/255];e=parseInt(e.substr(1),16),r=[e>>16,e>>8&Q,e&Q]}else if(e.substr(0,3)==="hsl"){if(r=y=e.match(Ch),!n)c=+r[0]%360/360,h=+r[1]/100,m=+r[2]/100,l=m<=.5?m*(h+1):m+h-m*h,a=m*2-l,r.length>3&&(r[3]*=1),r[0]=mc(c+1/3,a,l),r[1]=mc(c,a,l),r[2]=mc(c-1/3,a,l);else if(~e.indexOf("="))return r=e.match(R0),i&&r.length<4&&(r[3]=1),r}else r=e.match(Ch)||nr.transparent;r=r.map(Number)}return n&&!y&&(a=r[0]/Q,l=r[1]/Q,o=r[2]/Q,d=Math.max(a,l,o),u=Math.min(a,l,o),m=(d+u)/2,d===u?c=h=0:(p=d-u,h=m>.5?p/(2-d-u):p/(d+u),c=d===a?(l-o)/p+(l<o?6:0):d===l?(o-a)/p+2:(a-l)/p+4,c*=60),r[0]=~~(c+.5),r[1]=~~(h*100+.5),r[2]=~~(m*100+.5)),i&&r.length<4&&(r[3]=1),r},J0=function(e){var n=[],i=[],r=-1;return e.split(qs).forEach(function(a){var l=a.match(ti)||[];n.push.apply(n,l),i.push(r+=l.length+1)}),n.c=i,n},If=function(e,n,i){var r="",a=(e+r).match(qs),l=n?"hsla(":"rgba(",o=0,c,h,m,d;if(!a)return e;if(a=a.map(function(u){return(u=Z0(u,n,1))&&l+(n?u[0]+","+u[1]+"%,"+u[2]+"%,"+u[3]:u.join(","))+")"}),i&&(m=J0(e),c=i.c,c.join(r)!==m.c.join(r)))for(h=e.replace(qs,"1").split(ti),d=h.length-1;o<d;o++)r+=h[o]+(~c.indexOf(o)?a.shift()||l+"0,0,0,0)":(m.length?m:a.length?a:i).shift());if(!h)for(h=e.split(qs),d=h.length-1;o<d;o++)r+=h[o]+a[o];return r+h[d]},qs=function(){var s="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",e;for(e in nr)s+="|"+e+"\\b";return new RegExp(s+")","gi")}(),c3=/hsl[a]?\(/,ev=function(e){var n=e.join(" "),i;if(qs.lastIndex=0,qs.test(n))return i=c3.test(n),e[1]=If(e[1],i),e[0]=If(e[0],i,J0(e[1])),!0},Yr,ot=function(){var s=Date.now,e=500,n=33,i=s(),r=i,a=1e3/240,l=a,o=[],c,h,m,d,u,p,y=function g(v){var f=s()-r,x=v===!0,j,w,N,b;if((f>e||f<0)&&(i+=f-n),r+=f,N=r-i,j=N-l,(j>0||x)&&(b=++d.frame,u=N-d.time*1e3,d.time=N=N/1e3,l+=j+(j>=a?4:a-j),w=1),x||(c=h(g)),w)for(p=0;p<o.length;p++)o[p](N,u,b,v)};return d={time:0,frame:0,tick:function(){y(!0)},deltaRatio:function(v){return u/(1e3/(v||60))},wake:function(){M0&&(!Lh&&Rd()&&($t=Lh=window,Ed=$t.document||{},ft.gsap=rt,($t.gsapVersions||($t.gsapVersions=[])).push(rt.version),C0(Il||$t.GreenSockGlobals||!$t.gsap&&$t||{}),G0.forEach(Q0)),m=typeof requestAnimationFrame<"u"&&requestAnimationFrame,c&&d.sleep(),h=m||function(v){return setTimeout(v,l-d.time*1e3+1|0)},Yr=1,y(2))},sleep:function(){(m?cancelAnimationFrame:clearTimeout)(c),Yr=0,h=Xr},lagSmoothing:function(v,f){e=v||1/0,n=Math.min(f||33,e)},fps:function(v){a=1e3/(v||240),l=d.time*1e3+a},add:function(v,f,x){var j=f?function(w,N,b,S){v(w,N,b,S),d.remove(j)}:v;return d.remove(v),o[x?"unshift":"push"](j),ki(),j},remove:function(v,f){~(f=o.indexOf(v))&&o.splice(f,1)&&p>=f&&p--},_listeners:o},d}(),ki=function(){return!Yr&&ot.wake()},W={},h3=/^[\d.\-M][\d.\-,\s]/,m3=/["']/g,d3=function(e){for(var n={},i=e.substr(1,e.length-3).split(":"),r=i[0],a=1,l=i.length,o,c,h;a<l;a++)c=i[a],o=a!==l-1?c.lastIndexOf(","):c.length,h=c.substr(0,o),n[r]=isNaN(h)?h.replace(m3,"").trim():+h,r=c.substr(o+1).trim();return n},u3=function(e){var n=e.indexOf("(")+1,i=e.indexOf(")"),r=e.indexOf("(",n);return e.substring(n,~r&&r<i?e.indexOf(")",i+1):i)},p3=function(e){var n=(e+"").split("("),i=W[n[0]];return i&&n.length>1&&i.config?i.config.apply(null,~e.indexOf("{")?[d3(n[1])]:u3(e).split(",").map(I0)):W._CE&&h3.test(e)?W._CE("",e):i},tv=function(e){return function(n){return 1-e(1-n)}},sv=function s(e,n){for(var i=e._first,r;i;)i instanceof $e?s(i,n):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==n&&(i.timeline?s(i.timeline,n):(r=i._ease,i._ease=i._yEase,i._yEase=r,i._yoyo=n)),i=i._next},_n=function(e,n){return e&&(fe(e)?e:W[e]||p3(e))||n},zn=function(e,n,i,r){i===void 0&&(i=function(c){return 1-n(1-c)}),r===void 0&&(r=function(c){return c<.5?n(c*2)/2:1-n((1-c)*2)/2});var a={easeIn:n,easeOut:i,easeInOut:r},l;return st(e,function(o){W[o]=ft[o]=a,W[l=o.toLowerCase()]=i;for(var c in a)W[l+(c==="easeIn"?".in":c==="easeOut"?".out":".inOut")]=W[o+"."+c]=a[c]}),a},nv=function(e){return function(n){return n<.5?(1-e(1-n*2))/2:.5+e((n-.5)*2)/2}},dc=function s(e,n,i){var r=n>=1?n:1,a=(i||(e?.3:.45))/(n<1?n:1),l=a/Mh*(Math.asin(1/r)||0),o=function(m){return m===1?1:r*Math.pow(2,-10*m)*WT((m-l)*a)+1},c=e==="out"?o:e==="in"?function(h){return 1-o(1-h)}:nv(o);return a=Mh/a,c.config=function(h,m){return s(e,h,m)},c},uc=function s(e,n){n===void 0&&(n=1.70158);var i=function(l){return l?--l*l*((n+1)*l+n)+1:0},r=e==="out"?i:e==="in"?function(a){return 1-i(1-a)}:nv(i);return r.config=function(a){return s(e,a)},r};st("Linear,Quad,Cubic,Quart,Quint,Strong",function(s,e){var n=e<5?e+1:e;zn(s+",Power"+(n-1),e?function(i){return Math.pow(i,n)}:function(i){return i},function(i){return 1-Math.pow(1-i,n)},function(i){return i<.5?Math.pow(i*2,n)/2:1-Math.pow((1-i)*2,n)/2})});W.Linear.easeNone=W.none=W.Linear.easeIn;zn("Elastic",dc("in"),dc("out"),dc());(function(s,e){var n=1/e,i=2*n,r=2.5*n,a=function(o){return o<n?s*o*o:o<i?s*Math.pow(o-1.5/e,2)+.75:o<r?s*(o-=2.25/e)*o+.9375:s*Math.pow(o-2.625/e,2)+.984375};zn("Bounce",function(l){return 1-a(1-l)},a)})(7.5625,2.75);zn("Expo",function(s){return Math.pow(2,10*(s-1))*s+s*s*s*s*s*s*(1-s)});zn("Circ",function(s){return-(S0(1-s*s)-1)});zn("Sine",function(s){return s===1?1:-BT(s*FT)+1});zn("Back",uc("in"),uc("out"),uc());W.SteppedEase=W.steps=ft.SteppedEase={config:function(e,n){e===void 0&&(e=1);var i=1/e,r=e+(n?0:1),a=n?1:0,l=1-Z;return function(o){return((r*da(0,l,o)|0)+a)*i}}};Ni.ease=W["quad.out"];st("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(s){return Cd+=s+","+s+"Params,"});var iv=function(e,n){this.id=VT++,e._gsap=this,this.target=e,this.harness=n,this.get=n?n.get:z0,this.set=n?n.getSetter:Od},Gr=function(){function s(n){this.vars=n,this._delay=+n.delay||0,(this._repeat=n.repeat===1/0?-2:n.repeat||0)&&(this._rDelay=n.repeatDelay||0,this._yoyo=!!n.yoyo||!!n.yoyoEase),this._ts=1,bi(this,+n.duration,1,1),this.data=n.data,ie&&(this._ctx=ie,ie.data.push(this)),Yr||ot.wake()}var e=s.prototype;return e.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},e.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},e.totalDuration=function(i){return arguments.length?(this._dirty=0,bi(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(i,r){if(ki(),!arguments.length)return this._tTime;var a=this._dp;if(a&&a.smoothChildTiming&&this._ts){for(yo(this,i),!a._dp||a.parent||V0(a,this);a&&a.parent;)a.parent._time!==a._start+(a._ts>=0?a._tTime/a._ts:(a.totalDuration()-a._tTime)/-a._ts)&&a.totalTime(a._tTime,!0),a=a.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Xt(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!r||this._initted&&Math.abs(this._zTime)===Z||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),D0(this,i,r)),this},e.time=function(i,r){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+Af(this))%(this._dur+this._rDelay)||(i?this._dur:0),r):this._time},e.totalProgress=function(i,r){return arguments.length?this.totalTime(this.totalDuration()*i,r):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},e.progress=function(i,r){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+Af(this),r):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},e.iteration=function(i,r){var a=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*a,r):this._repeat?_i(this._tTime,a)+1:1},e.timeScale=function(i,r){if(!arguments.length)return this._rts===-Z?0:this._rts;if(this._rts===i)return this;var a=this.parent&&this._ts?Vl(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-Z?0:this._rts,this.totalTime(da(-Math.abs(this._delay),this.totalDuration(),a),r!==!1),jo(this),YT(this)},e.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ki(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==Z&&(this._tTime-=Z)))),this):this._ps},e.startTime=function(i){if(arguments.length){this._start=i;var r=this.parent||this._dp;return r&&(r._sort||!this.parent)&&Xt(r,this,i-this._delay),this}return this._start},e.endTime=function(i){return this._start+(tt(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(i){var r=this.parent||this._dp;return r?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Vl(r.rawTime(i),this):this._tTime:this._tTime},e.revert=function(i){i===void 0&&(i=$T);var r=Le;return Le=i,Ad(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),Le=r,this},e.globalTime=function(i){for(var r=this,a=arguments.length?i:r.rawTime();r;)a=r._start+a/(Math.abs(r._ts)||1),r=r._dp;return!this.parent&&this._sat?this._sat.globalTime(i):a},e.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,zf(this)):this._repeat===-2?1/0:this._repeat},e.repeatDelay=function(i){if(arguments.length){var r=this._time;return this._rDelay=i,zf(this),r?this.time(r):this}return this._rDelay},e.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},e.seek=function(i,r){return this.totalTime(Nt(this,i),tt(r))},e.restart=function(i,r){return this.play().totalTime(i?-this._delay:0,tt(r)),this._dur||(this._zTime=-Z),this},e.play=function(i,r){return i!=null&&this.seek(i,r),this.reversed(!1).paused(!1)},e.reverse=function(i,r){return i!=null&&this.seek(i||this.totalDuration(),r),this.reversed(!0).paused(!1)},e.pause=function(i,r){return i!=null&&this.seek(i,r),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-Z:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-Z,this},e.isActive=function(){var i=this.parent||this._dp,r=this._start,a;return!!(!i||this._ts&&this._initted&&i.isActive()&&(a=i.rawTime(!0))>=r&&a<this.endTime(!0)-Z)},e.eventCallback=function(i,r,a){var l=this.vars;return arguments.length>1?(r?(l[i]=r,a&&(l[i+"Params"]=a),i==="onUpdate"&&(this._onUpdate=r)):delete l[i],this):l[i]},e.then=function(i){var r=this;return new Promise(function(a){var l=fe(i)?i:O0,o=function(){var h=r.then;r.then=null,fe(l)&&(l=l(r))&&(l.then||l===r)&&(r.then=h),a(l),r.then=h};r._initted&&r.totalProgress()===1&&r._ts>=0||!r._tTime&&r._ts<0?o():r._prom=o})},e.kill=function(){sr(this)},s}();xt(Gr.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Z,_prom:0,_ps:!1,_rts:1});var $e=function(s){k0(e,s);function e(i,r){var a;return i===void 0&&(i={}),a=s.call(this,i)||this,a.labels={},a.smoothChildTiming=!!i.smoothChildTiming,a.autoRemoveChildren=!!i.autoRemoveChildren,a._sort=tt(i.sortChildren),ae&&Xt(i.parent||ae,as(a),r),i.reversed&&a.reverse(),i.paused&&a.paused(!0),i.scrollTrigger&&B0(as(a),i.scrollTrigger),a}var n=e.prototype;return n.to=function(r,a,l){return Nr(0,arguments,this),this},n.from=function(r,a,l){return Nr(1,arguments,this),this},n.fromTo=function(r,a,l,o){return Nr(2,arguments,this),this},n.set=function(r,a,l){return a.duration=0,a.parent=this,vr(a).repeatDelay||(a.repeat=0),a.immediateRender=!!a.immediateRender,new ye(r,a,Nt(this,l),1),this},n.call=function(r,a,l){return Xt(this,ye.delayedCall(0,r,a),l)},n.staggerTo=function(r,a,l,o,c,h,m){return l.duration=a,l.stagger=l.stagger||o,l.onComplete=h,l.onCompleteParams=m,l.parent=this,new ye(r,l,Nt(this,c)),this},n.staggerFrom=function(r,a,l,o,c,h,m){return l.runBackwards=1,vr(l).immediateRender=tt(l.immediateRender),this.staggerTo(r,a,l,o,c,h,m)},n.staggerFromTo=function(r,a,l,o,c,h,m,d){return o.startAt=l,vr(o).immediateRender=tt(o.immediateRender),this.staggerTo(r,a,o,c,h,m,d)},n.render=function(r,a,l){var o=this._time,c=this._dirty?this.totalDuration():this._tDur,h=this._dur,m=r<=0?0:ve(r),d=this._zTime<0!=r<0&&(this._initted||!h),u,p,y,g,v,f,x,j,w,N,b,S;if(this!==ae&&m>c&&r>=0&&(m=c),m!==this._tTime||l||d){if(o!==this._time&&h&&(m+=this._time-o,r+=this._time-o),u=m,w=this._start,j=this._ts,f=!j,d&&(h||(o=this._zTime),(r||!a)&&(this._zTime=r)),this._repeat){if(b=this._yoyo,v=h+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(v*100+r,a,l);if(u=ve(m%v),m===c?(g=this._repeat,u=h):(N=ve(m/v),g=~~N,g&&g===N&&(u=h,g--),u>h&&(u=h)),N=_i(this._tTime,v),!o&&this._tTime&&N!==g&&this._tTime-N*v-this._dur<=0&&(N=g),b&&g&1&&(u=h-u,S=1),g!==N&&!this._lock){var k=b&&N&1,T=k===(b&&g&1);if(g<N&&(k=!k),o=k?0:m%h?h:m,this._lock=1,this.render(o||(S?0:ve(g*v)),a,!h)._lock=0,this._tTime=m,!a&&this.parent&&ht(this,"onRepeat"),this.vars.repeatRefresh&&!S&&(this.invalidate()._lock=1),o&&o!==this._time||f!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,c=this._tDur,T&&(this._lock=2,o=k?h:-1e-4,this.render(o,!0),this.vars.repeatRefresh&&!S&&this.invalidate()),this._lock=0,!this._ts&&!f)return this;sv(this,S)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(x=JT(this,ve(o),ve(u)),x&&(m-=u-(u=x._start))),this._tTime=m,this._time=u,this._act=!j,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,o=0),!o&&m&&!a&&!N&&(ht(this,"onStart"),this._tTime!==m))return this;if(u>=o&&r>=0)for(p=this._first;p;){if(y=p._next,(p._act||u>=p._start)&&p._ts&&x!==p){if(p.parent!==this)return this.render(r,a,l);if(p.render(p._ts>0?(u-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(u-p._start)*p._ts,a,l),u!==this._time||!this._ts&&!f){x=0,y&&(m+=this._zTime=-Z);break}}p=y}else{p=this._last;for(var P=r<0?r:u;p;){if(y=p._prev,(p._act||P<=p._end)&&p._ts&&x!==p){if(p.parent!==this)return this.render(r,a,l);if(p.render(p._ts>0?(P-p._start)*p._ts:(p._dirty?p.totalDuration():p._tDur)+(P-p._start)*p._ts,a,l||Le&&Ad(p)),u!==this._time||!this._ts&&!f){x=0,y&&(m+=this._zTime=P?-Z:Z);break}}p=y}}if(x&&!a&&(this.pause(),x.render(u>=o?0:-Z)._zTime=u>=o?1:-1,this._ts))return this._start=w,jo(this),this.render(r,a,l);this._onUpdate&&!a&&ht(this,"onUpdate",!0),(m===c&&this._tTime>=this.totalDuration()||!m&&o)&&(w===this._start||Math.abs(j)!==Math.abs(this._ts))&&(this._lock||((r||!h)&&(m===c&&this._ts>0||!m&&this._ts<0)&&Gs(this,1),!a&&!(r<0&&!o)&&(m||o||!c)&&(ht(this,m===c&&r>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(m<c&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(r,a){var l=this;if(vs(a)||(a=Nt(this,a,r)),!(r instanceof Gr)){if(Be(r))return r.forEach(function(o){return l.add(o,a)}),this;if(Ee(r))return this.addLabel(r,a);if(fe(r))r=ye.delayedCall(0,r);else return this}return this!==r?Xt(this,r,a):this},n.getChildren=function(r,a,l,o){r===void 0&&(r=!0),a===void 0&&(a=!0),l===void 0&&(l=!0),o===void 0&&(o=-kt);for(var c=[],h=this._first;h;)h._start>=o&&(h instanceof ye?a&&c.push(h):(l&&c.push(h),r&&c.push.apply(c,h.getChildren(!0,a,l)))),h=h._next;return c},n.getById=function(r){for(var a=this.getChildren(1,1,1),l=a.length;l--;)if(a[l].vars.id===r)return a[l]},n.remove=function(r){return Ee(r)?this.removeLabel(r):fe(r)?this.killTweensOf(r):(r.parent===this&&go(this,r),r===this._recent&&(this._recent=this._last),wn(this))},n.totalTime=function(r,a){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=ve(ot.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),s.prototype.totalTime.call(this,r,a),this._forcing=0,this):this._tTime},n.addLabel=function(r,a){return this.labels[r]=Nt(this,a),this},n.removeLabel=function(r){return delete this.labels[r],this},n.addPause=function(r,a,l){var o=ye.delayedCall(0,a||Xr,l);return o.data="isPause",this._hasPause=1,Xt(this,o,Nt(this,r))},n.removePause=function(r){var a=this._first;for(r=Nt(this,r);a;)a._start===r&&a.data==="isPause"&&Gs(a),a=a._next},n.killTweensOf=function(r,a,l){for(var o=this.getTweensOf(r,l),c=o.length;c--;)As!==o[c]&&o[c].kill(r,a);return this},n.getTweensOf=function(r,a){for(var l=[],o=St(r),c=this._first,h=vs(a),m;c;)c instanceof ye?qT(c._targets,o)&&(h?(!As||c._initted&&c._ts)&&c.globalTime(0)<=a&&c.globalTime(c.totalDuration())>a:!a||c.isActive())&&l.push(c):(m=c.getTweensOf(o,a)).length&&l.push.apply(l,m),c=c._next;return l},n.tweenTo=function(r,a){a=a||{};var l=this,o=Nt(l,r),c=a,h=c.startAt,m=c.onStart,d=c.onStartParams,u=c.immediateRender,p,y=ye.to(l,xt({ease:a.ease||"none",lazy:!1,immediateRender:!1,time:o,overwrite:"auto",duration:a.duration||Math.abs((o-(h&&"time"in h?h.time:l._time))/l.timeScale())||Z,onStart:function(){if(l.pause(),!p){var v=a.duration||Math.abs((o-(h&&"time"in h?h.time:l._time))/l.timeScale());y._dur!==v&&bi(y,v,0,1).render(y._time,!0,!0),p=1}m&&m.apply(y,d||[])}},a));return u?y.render(0):y},n.tweenFromTo=function(r,a,l){return this.tweenTo(a,xt({startAt:{time:Nt(this,r)}},l))},n.recent=function(){return this._recent},n.nextLabel=function(r){return r===void 0&&(r=this._time),Df(this,Nt(this,r))},n.previousLabel=function(r){return r===void 0&&(r=this._time),Df(this,Nt(this,r),1)},n.currentLabel=function(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Z)},n.shiftChildren=function(r,a,l){l===void 0&&(l=0);for(var o=this._first,c=this.labels,h;o;)o._start>=l&&(o._start+=r,o._end+=r),o=o._next;if(a)for(h in c)c[h]>=l&&(c[h]+=r);return wn(this)},n.invalidate=function(r){var a=this._first;for(this._lock=0;a;)a.invalidate(r),a=a._next;return s.prototype.invalidate.call(this,r)},n.clear=function(r){r===void 0&&(r=!0);for(var a=this._first,l;a;)l=a._next,this.remove(a),a=l;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),wn(this)},n.totalDuration=function(r){var a=0,l=this,o=l._last,c=kt,h,m,d;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-r:r));if(l._dirty){for(d=l.parent;o;)h=o._prev,o._dirty&&o.totalDuration(),m=o._start,m>c&&l._sort&&o._ts&&!l._lock?(l._lock=1,Xt(l,o,m-o._delay,1)._lock=0):c=m,m<0&&o._ts&&(a-=m,(!d&&!l._dp||d&&d.smoothChildTiming)&&(l._start+=m/l._ts,l._time-=m,l._tTime-=m),l.shiftChildren(-m,!1,-1/0),c=0),o._end>a&&o._ts&&(a=o._end),o=h;bi(l,l===ae&&l._time>a?l._time:a,1,1),l._dirty=0}return l._tDur},e.updateRoot=function(r){if(ae._ts&&(D0(ae,Vl(r,ae)),A0=ot.frame),ot.frame>=Cf){Cf+=dt.autoSleep||120;var a=ae._first;if((!a||!a._ts)&&dt.autoSleep&&ot._listeners.length<2){for(;a&&!a._ts;)a=a._next;a||ot.sleep()}}},e}(Gr);xt($e.prototype,{_lock:0,_hasPause:0,_forcing:0});var f3=function(e,n,i,r,a,l,o){var c=new nt(this._pt,e,n,0,1,hv,null,a),h=0,m=0,d,u,p,y,g,v,f,x;for(c.b=i,c.e=r,i+="",r+="",(f=~r.indexOf("random("))&&(r=Kr(r)),l&&(x=[i,r],l(x,e,n),i=x[0],r=x[1]),u=i.match(cc)||[];d=cc.exec(r);)y=d[0],g=r.substring(h,d.index),p?p=(p+1)%5:g.substr(-5)==="rgba("&&(p=1),y!==u[m++]&&(v=parseFloat(u[m-1])||0,c._pt={_next:c._pt,p:g||m===1?g:",",s:v,c:y.charAt(1)==="="?ci(v,y)-v:parseFloat(y)-v,m:p&&p<4?Math.round:0},h=cc.lastIndex);return c.c=h<r.length?r.substring(h,r.length):"",c.fp=o,(E0.test(r)||f)&&(c.e=0),this._pt=c,c},zd=function(e,n,i,r,a,l,o,c,h,m){fe(r)&&(r=r(a||0,e,l));var d=e[n],u=i!=="get"?i:fe(d)?h?e[n.indexOf("set")||!fe(e["get"+n.substr(3)])?n:"get"+n.substr(3)](h):e[n]():d,p=fe(d)?h?v3:ov:Id,y;if(Ee(r)&&(~r.indexOf("random(")&&(r=Kr(r)),r.charAt(1)==="="&&(y=ci(u,r)+(Fe(u)||0),(y||y===0)&&(r=y))),!m||u!==r||Vh)return!isNaN(u*r)&&r!==""?(y=new nt(this._pt,e,n,+u||0,r-(u||0),typeof d=="boolean"?w3:cv,0,p),h&&(y.fp=h),o&&y.modifier(o,this,e),this._pt=y):(!d&&!(n in e)&&Pd(n,r),f3.call(this,e,n,u,r,p,c||dt.stringFilter,h))},x3=function(e,n,i,r,a){if(fe(e)&&(e=wr(e,a,n,i,r)),!ts(e)||e.style&&e.nodeType||Be(e)||T0(e))return Ee(e)?wr(e,a,n,i,r):e;var l={},o;for(o in e)l[o]=wr(e[o],a,n,i,r);return l},rv=function(e,n,i,r,a,l){var o,c,h,m;if(lt[e]&&(o=new lt[e]).init(a,o.rawVars?n[e]:x3(n[e],r,a,l,i),i,r,l)!==!1&&(i._pt=c=new nt(i._pt,a,e,0,1,o.render,o,0,o.priority),i!==si))for(h=i._ptLookup[i._targets.indexOf(a)],m=o._props.length;m--;)h[o._props[m]]=c;return o},As,Vh,Dd=function s(e,n,i){var r=e.vars,a=r.ease,l=r.startAt,o=r.immediateRender,c=r.lazy,h=r.onUpdate,m=r.runBackwards,d=r.yoyoEase,u=r.keyframes,p=r.autoRevert,y=e._dur,g=e._startAt,v=e._targets,f=e.parent,x=f&&f.data==="nested"?f.vars.targets:v,j=e._overwrite==="auto"&&!Sd,w=e.timeline,N,b,S,k,T,P,I,F,z,Y,X,U,O;if(w&&(!u||!a)&&(a="none"),e._ease=_n(a,Ni.ease),e._yEase=d?tv(_n(d===!0?a:d,Ni.ease)):0,d&&e._yoyo&&!e._repeat&&(d=e._yEase,e._yEase=e._ease,e._ease=d),e._from=!w&&!!r.runBackwards,!w||u&&!r.stagger){if(F=v[0]?Nn(v[0]).harness:0,U=F&&r[F.prop],N=Fl(r,Md),g&&(g._zTime<0&&g.progress(1),n<0&&m&&o&&!p?g.render(-1,!0):g.revert(m&&y?sl:HT),g._lazy=0),l){if(Gs(e._startAt=ye.set(v,xt({data:"isStart",overwrite:!1,parent:f,immediateRender:!0,lazy:!g&&tt(c),startAt:null,delay:0,onUpdate:h&&function(){return ht(e,"onUpdate")},stagger:0},l))),e._startAt._dp=0,e._startAt._sat=e,n<0&&(Le||!o&&!p)&&e._startAt.revert(sl),o&&y&&n<=0&&i<=0){n&&(e._zTime=n);return}}else if(m&&y&&!g){if(n&&(o=!1),S=xt({overwrite:!1,data:"isFromStart",lazy:o&&!g&&tt(c),immediateRender:o,stagger:0,parent:f},N),U&&(S[F.prop]=U),Gs(e._startAt=ye.set(v,S)),e._startAt._dp=0,e._startAt._sat=e,n<0&&(Le?e._startAt.revert(sl):e._startAt.render(-1,!0)),e._zTime=n,!o)s(e._startAt,Z,Z);else if(!n)return}for(e._pt=e._ptCache=0,c=y&&tt(c)||c&&!y,b=0;b<v.length;b++){if(T=v[b],I=T._gsap||Ld(v)[b]._gsap,e._ptLookup[b]=Y={},Ah[I.id]&&$s.length&&Ol(),X=x===v?b:x.indexOf(T),F&&(z=new F).init(T,U||N,e,X,x)!==!1&&(e._pt=k=new nt(e._pt,T,z.name,0,1,z.render,z,0,z.priority),z._props.forEach(function(E){Y[E]=k}),z.priority&&(P=1)),!F||U)for(S in N)lt[S]&&(z=rv(S,N,e,X,T,x))?z.priority&&(P=1):Y[S]=k=zd.call(e,T,S,"get",N[S],X,x,0,r.stringFilter);e._op&&e._op[b]&&e.kill(T,e._op[b]),j&&e._pt&&(As=e,ae.killTweensOf(T,Y,e.globalTime(n)),O=!e.parent,As=0),e._pt&&c&&(Ah[I.id]=1)}P&&mv(e),e._onInit&&e._onInit(e)}e._onUpdate=h,e._initted=(!e._op||e._pt)&&!O,u&&n<=0&&w.render(kt,!0,!0)},g3=function(e,n,i,r,a,l,o,c){var h=(e._pt&&e._ptCache||(e._ptCache={}))[n],m,d,u,p;if(!h)for(h=e._ptCache[n]=[],u=e._ptLookup,p=e._targets.length;p--;){if(m=u[p][n],m&&m.d&&m.d._pt)for(m=m.d._pt;m&&m.p!==n&&m.fp!==n;)m=m._next;if(!m)return Vh=1,e.vars[n]="+=0",Dd(e,o),Vh=0,c?qr(n+" not eligible for reset"):1;h.push(m)}for(p=h.length;p--;)d=h[p],m=d._pt||d,m.s=(r||r===0)&&!a?r:m.s+(r||0)+l*m.c,m.c=i-m.s,d.e&&(d.e=ge(i)+Fe(d.e)),d.b&&(d.b=m.s+Fe(d.b))},j3=function(e,n){var i=e[0]?Nn(e[0]).harness:0,r=i&&i.aliases,a,l,o,c;if(!r)return n;a=wi({},n);for(l in r)if(l in a)for(c=r[l].split(","),o=c.length;o--;)a[c[o]]=a[l];return a},y3=function(e,n,i,r){var a=n.ease||r||"power1.inOut",l,o;if(Be(n))o=i[e]||(i[e]=[]),n.forEach(function(c,h){return o.push({t:h/(n.length-1)*100,v:c,e:a})});else for(l in n)o=i[l]||(i[l]=[]),l==="ease"||o.push({t:parseFloat(e),v:n[l],e:a})},wr=function(e,n,i,r,a){return fe(e)?e.call(n,i,r,a):Ee(e)&&~e.indexOf("random(")?Kr(e):e},av=Cd+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",lv={};st(av+",id,stagger,delay,duration,paused,scrollTrigger",function(s){return lv[s]=1});var ye=function(s){k0(e,s);function e(i,r,a,l){var o;typeof r=="number"&&(a.duration=r,r=a,a=null),o=s.call(this,l?r:vr(r))||this;var c=o.vars,h=c.duration,m=c.delay,d=c.immediateRender,u=c.stagger,p=c.overwrite,y=c.keyframes,g=c.defaults,v=c.scrollTrigger,f=c.yoyoEase,x=r.parent||ae,j=(Be(i)||T0(i)?vs(i[0]):"length"in r)?[i]:St(i),w,N,b,S,k,T,P,I;if(o._targets=j.length?Ld(j):qr("GSAP target "+i+" not found. https://gsap.com",!dt.nullTargetWarn)||[],o._ptLookup=[],o._overwrite=p,y||u||za(h)||za(m)){if(r=o.vars,w=o.timeline=new $e({data:"nested",defaults:g||{},targets:x&&x.data==="nested"?x.vars.targets:j}),w.kill(),w.parent=w._dp=as(o),w._start=0,u||za(h)||za(m)){if(S=j.length,P=u&&$0(u),ts(u))for(k in u)~av.indexOf(k)&&(I||(I={}),I[k]=u[k]);for(N=0;N<S;N++)b=Fl(r,lv),b.stagger=0,f&&(b.yoyoEase=f),I&&wi(b,I),T=j[N],b.duration=+wr(h,as(o),N,T,j),b.delay=(+wr(m,as(o),N,T,j)||0)-o._delay,!u&&S===1&&b.delay&&(o._delay=m=b.delay,o._start+=m,b.delay=0),w.to(T,b,P?P(N,T,j):0),w._ease=W.none;w.duration()?h=m=0:o.timeline=0}else if(y){vr(xt(w.vars.defaults,{ease:"none"})),w._ease=_n(y.ease||r.ease||"none");var F=0,z,Y,X;if(Be(y))y.forEach(function(U){return w.to(j,U,">")}),w.duration();else{b={};for(k in y)k==="ease"||k==="easeEach"||y3(k,y[k],b,y.easeEach);for(k in b)for(z=b[k].sort(function(U,O){return U.t-O.t}),F=0,N=0;N<z.length;N++)Y=z[N],X={ease:Y.e,duration:(Y.t-(N?z[N-1].t:0))/100*h},X[k]=Y.v,w.to(j,X,F),F+=X.duration;w.duration()<h&&w.to({},{duration:h-w.duration()})}}h||o.duration(h=w.duration())}else o.timeline=0;return p===!0&&!Sd&&(As=as(o),ae.killTweensOf(j),As=0),Xt(x,as(o),a),r.reversed&&o.reverse(),r.paused&&o.paused(!0),(d||!h&&!y&&o._start===ve(x._time)&&tt(d)&&GT(as(o))&&x.data!=="nested")&&(o._tTime=-Z,o.render(Math.max(0,-m)||0)),v&&B0(as(o),v),o}var n=e.prototype;return n.render=function(r,a,l){var o=this._time,c=this._tDur,h=this._dur,m=r<0,d=r>c-Z&&!m?c:r<Z?0:r,u,p,y,g,v,f,x,j,w;if(!h)ZT(this,r,a,l);else if(d!==this._tTime||!r||l||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m||this._lazy){if(u=d,j=this.timeline,this._repeat){if(g=h+this._rDelay,this._repeat<-1&&m)return this.totalTime(g*100+r,a,l);if(u=ve(d%g),d===c?(y=this._repeat,u=h):(v=ve(d/g),y=~~v,y&&y===v?(u=h,y--):u>h&&(u=h)),f=this._yoyo&&y&1,f&&(w=this._yEase,u=h-u),v=_i(this._tTime,g),u===o&&!l&&this._initted&&y===v)return this._tTime=d,this;y!==v&&(j&&this._yEase&&sv(j,f),this.vars.repeatRefresh&&!f&&!this._lock&&u!==g&&this._initted&&(this._lock=l=1,this.render(ve(g*y),!0).invalidate()._lock=0))}if(!this._initted){if(W0(this,m?r:u,l,a,d))return this._tTime=0,this;if(o!==this._time&&!(l&&this.vars.repeatRefresh&&y!==v))return this;if(h!==this._dur)return this.render(r,a,l)}if(this._tTime=d,this._time=u,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=x=(w||this._ease)(u/h),this._from&&(this.ratio=x=1-x),!o&&d&&!a&&!v&&(ht(this,"onStart"),this._tTime!==d))return this;for(p=this._pt;p;)p.r(x,p.d),p=p._next;j&&j.render(r<0?r:j._dur*j._ease(u/this._dur),a,l)||this._startAt&&(this._zTime=r),this._onUpdate&&!a&&(m&&zh(this,r,a,l),ht(this,"onUpdate")),this._repeat&&y!==v&&this.vars.onRepeat&&!a&&this.parent&&ht(this,"onRepeat"),(d===this._tDur||!d)&&this._tTime===d&&(m&&!this._onUpdate&&zh(this,r,!0,!0),(r||!h)&&(d===this._tDur&&this._ts>0||!d&&this._ts<0)&&Gs(this,1),!a&&!(m&&!o)&&(d||o||f)&&(ht(this,d===c?"onComplete":"onReverseComplete",!0),this._prom&&!(d<c&&this.timeScale()>0)&&this._prom()))}return this},n.targets=function(){return this._targets},n.invalidate=function(r){return(!r||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(r),s.prototype.invalidate.call(this,r)},n.resetTo=function(r,a,l,o,c){Yr||ot.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),m;return this._initted||Dd(this,h),m=this._ease(h/this._dur),g3(this,r,a,l,o,m,h,c)?this.resetTo(r,a,l,o,1):(yo(this,0),this.parent||F0(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(r,a){if(a===void 0&&(a="all"),!r&&(!a||a==="all"))return this._lazy=this._pt=0,this.parent?sr(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Le),this;if(this.timeline){var l=this.timeline.totalDuration();return this.timeline.killTweensOf(r,a,As&&As.vars.overwrite!==!0)._first||sr(this),this.parent&&l!==this.timeline.totalDuration()&&bi(this,this._dur*this.timeline._tDur/l,0,1),this}var o=this._targets,c=r?St(r):o,h=this._ptLookup,m=this._pt,d,u,p,y,g,v,f;if((!a||a==="all")&&KT(o,c))return a==="all"&&(this._pt=0),sr(this);for(d=this._op=this._op||[],a!=="all"&&(Ee(a)&&(g={},st(a,function(x){return g[x]=1}),a=g),a=j3(o,a)),f=o.length;f--;)if(~c.indexOf(o[f])){u=h[f],a==="all"?(d[f]=a,y=u,p={}):(p=d[f]=d[f]||{},y=a);for(g in y)v=u&&u[g],v&&((!("kill"in v.d)||v.d.kill(g)===!0)&&go(this,v,"_pt"),delete u[g]),p!=="all"&&(p[g]=1)}return this._initted&&!this._pt&&m&&sr(this),this},e.to=function(r,a){return new e(r,a,arguments[2])},e.from=function(r,a){return Nr(1,arguments)},e.delayedCall=function(r,a,l,o){return new e(a,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:a,onReverseComplete:a,onCompleteParams:l,onReverseCompleteParams:l,callbackScope:o})},e.fromTo=function(r,a,l){return Nr(2,arguments)},e.set=function(r,a){return a.duration=0,a.repeatDelay||(a.repeat=0),new e(r,a)},e.killTweensOf=function(r,a,l){return ae.killTweensOf(r,a,l)},e}(Gr);xt(ye.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});st("staggerTo,staggerFrom,staggerFromTo",function(s){ye[s]=function(){var e=new $e,n=Ih.call(arguments,0);return n.splice(s==="staggerFromTo"?5:4,0,0),e[s].apply(e,n)}});var Id=function(e,n,i){return e[n]=i},ov=function(e,n,i){return e[n](i)},v3=function(e,n,i,r){return e[n](r.fp,i)},N3=function(e,n,i){return e.setAttribute(n,i)},Od=function(e,n){return fe(e[n])?ov:Td(e[n])&&e.setAttribute?N3:Id},cv=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e6)/1e6,n)},w3=function(e,n){return n.set(n.t,n.p,!!(n.s+n.c*e),n)},hv=function(e,n){var i=n._pt,r="";if(!e&&n.b)r=n.b;else if(e===1&&n.e)r=n.e;else{for(;i;)r=i.p+(i.m?i.m(i.s+i.c*e):Math.round((i.s+i.c*e)*1e4)/1e4)+r,i=i._next;r+=n.c}n.set(n.t,n.p,r,n)},Fd=function(e,n){for(var i=n._pt;i;)i.r(e,i.d),i=i._next},_3=function(e,n,i,r){for(var a=this._pt,l;a;)l=a._next,a.p===r&&a.modifier(e,n,i),a=l},b3=function(e){for(var n=this._pt,i,r;n;)r=n._next,n.p===e&&!n.op||n.op===e?go(this,n,"_pt"):n.dep||(i=1),n=r;return!i},k3=function(e,n,i,r){r.mSet(e,n,r.m.call(r.tween,i,r.mt),r)},mv=function(e){for(var n=e._pt,i,r,a,l;n;){for(i=n._next,r=a;r&&r.pr>n.pr;)r=r._next;(n._prev=r?r._prev:l)?n._prev._next=n:a=n,(n._next=r)?r._prev=n:l=n,n=i}e._pt=a},nt=function(){function s(n,i,r,a,l,o,c,h,m){this.t=i,this.s=a,this.c=l,this.p=r,this.r=o||cv,this.d=c||this,this.set=h||Id,this.pr=m||0,this._next=n,n&&(n._prev=this)}var e=s.prototype;return e.modifier=function(i,r,a){this.mSet=this.mSet||this.set,this.set=k3,this.m=i,this.mt=a,this.tween=r},s}();st(Cd+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(s){return Md[s]=1});ft.TweenMax=ft.TweenLite=ye;ft.TimelineLite=ft.TimelineMax=$e;ae=new $e({sortChildren:!1,defaults:Ni,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});dt.stringFilter=ev;var bn=[],il={},S3=[],Of=0,T3=0,pc=function(e){return(il[e]||S3).map(function(n){return n()})},Bh=function(){var e=Date.now(),n=[];e-Of>2&&(pc("matchMediaInit"),bn.forEach(function(i){var r=i.queries,a=i.conditions,l,o,c,h;for(o in r)l=$t.matchMedia(r[o]).matches,l&&(c=1),l!==a[o]&&(a[o]=l,h=1);h&&(i.revert(),c&&n.push(i))}),pc("matchMediaRevert"),n.forEach(function(i){return i.onMatch(i,function(r){return i.add(null,r)})}),Of=e,pc("matchMedia"))},dv=function(){function s(n,i){this.selector=i&&Oh(i),this.data=[],this._r=[],this.isReverted=!1,this.id=T3++,n&&this.add(n)}var e=s.prototype;return e.add=function(i,r,a){fe(i)&&(a=r,r=i,i=fe);var l=this,o=function(){var h=ie,m=l.selector,d;return h&&h!==l&&h.data.push(l),a&&(l.selector=Oh(a)),ie=l,d=r.apply(l,arguments),fe(d)&&l._r.push(d),ie=h,l.selector=m,l.isReverted=!1,d};return l.last=o,i===fe?o(l,function(c){return l.add(null,c)}):i?l[i]=o:o},e.ignore=function(i){var r=ie;ie=null,i(this),ie=r},e.getTweens=function(){var i=[];return this.data.forEach(function(r){return r instanceof s?i.push.apply(i,r.getTweens()):r instanceof ye&&!(r.parent&&r.parent.data==="nested")&&i.push(r)}),i},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(i,r){var a=this;if(i?function(){for(var o=a.getTweens(),c=a.data.length,h;c--;)h=a.data[c],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(m){return o.splice(o.indexOf(m),1)}));for(o.map(function(m){return{g:m._dur||m._delay||m._sat&&!m._sat.vars.immediateRender?m.globalTime(0):-1/0,t:m}}).sort(function(m,d){return d.g-m.g||-1/0}).forEach(function(m){return m.t.revert(i)}),c=a.data.length;c--;)h=a.data[c],h instanceof $e?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof ye)&&h.revert&&h.revert(i);a._r.forEach(function(m){return m(i,a)}),a.isReverted=!0}():this.data.forEach(function(o){return o.kill&&o.kill()}),this.clear(),r)for(var l=bn.length;l--;)bn[l].id===this.id&&bn.splice(l,1)},e.revert=function(i){this.kill(i||{})},s}(),R3=function(){function s(n){this.contexts=[],this.scope=n,ie&&ie.data.push(this)}var e=s.prototype;return e.add=function(i,r,a){ts(i)||(i={matches:i});var l=new dv(0,a||this.scope),o=l.conditions={},c,h,m;ie&&!l.selector&&(l.selector=ie.selector),this.contexts.push(l),r=l.add("onMatch",r),l.queries=i;for(h in i)h==="all"?m=1:(c=$t.matchMedia(i[h]),c&&(bn.indexOf(l)<0&&bn.push(l),(o[h]=c.matches)&&(m=1),c.addListener?c.addListener(Bh):c.addEventListener("change",Bh)));return m&&r(l,function(d){return l.add(null,d)}),this},e.revert=function(i){this.kill(i||{})},e.kill=function(i){this.contexts.forEach(function(r){return r.kill(i,!0)})},s}(),Bl={registerPlugin:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach(function(r){return Q0(r)})},timeline:function(e){return new $e(e)},getTweensOf:function(e,n){return ae.getTweensOf(e,n)},getProperty:function(e,n,i,r){Ee(e)&&(e=St(e)[0]);var a=Nn(e||{}).get,l=i?O0:I0;return i==="native"&&(i=""),e&&(n?l((lt[n]&&lt[n].get||a)(e,n,i,r)):function(o,c,h){return l((lt[o]&&lt[o].get||a)(e,o,c,h))})},quickSetter:function(e,n,i){if(e=St(e),e.length>1){var r=e.map(function(m){return rt.quickSetter(m,n,i)}),a=r.length;return function(m){for(var d=a;d--;)r[d](m)}}e=e[0]||{};var l=lt[n],o=Nn(e),c=o.harness&&(o.harness.aliases||{})[n]||n,h=l?function(m){var d=new l;si._pt=0,d.init(e,i?m+i:m,si,0,[e]),d.render(1,d),si._pt&&Fd(1,si)}:o.set(e,c);return l?h:function(m){return h(e,c,i?m+i:m,o,1)}},quickTo:function(e,n,i){var r,a=rt.to(e,xt((r={},r[n]="+=0.1",r.paused=!0,r.stagger=0,r),i||{})),l=function(c,h,m){return a.resetTo(n,c,h,m)};return l.tween=a,l},isTweening:function(e){return ae.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=_n(e.ease,Ni.ease)),Lf(Ni,e||{})},config:function(e){return Lf(dt,e||{})},registerEffect:function(e){var n=e.name,i=e.effect,r=e.plugins,a=e.defaults,l=e.extendTimeline;(r||"").split(",").forEach(function(o){return o&&!lt[o]&&!ft[o]&&qr(n+" effect requires "+o+" plugin.")}),hc[n]=function(o,c,h){return i(St(o),xt(c||{},a),h)},l&&($e.prototype[n]=function(o,c,h){return this.add(hc[n](o,ts(c)?c:(h=c)&&{},this),h)})},registerEase:function(e,n){W[e]=_n(n)},parseEase:function(e,n){return arguments.length?_n(e,n):W},getById:function(e){return ae.getById(e)},exportRoot:function(e,n){e===void 0&&(e={});var i=new $e(e),r,a;for(i.smoothChildTiming=tt(e.smoothChildTiming),ae.remove(i),i._dp=0,i._time=i._tTime=ae._time,r=ae._first;r;)a=r._next,(n||!(!r._dur&&r instanceof ye&&r.vars.onComplete===r._targets[0]))&&Xt(i,r,r._start-r._delay),r=a;return Xt(ae,i,0),i},context:function(e,n){return e?new dv(e,n):ie},matchMedia:function(e){return new R3(e)},matchMediaRefresh:function(){return bn.forEach(function(e){var n=e.conditions,i,r;for(r in n)n[r]&&(n[r]=!1,i=1);i&&e.revert()})||Bh()},addEventListener:function(e,n){var i=il[e]||(il[e]=[]);~i.indexOf(n)||i.push(n)},removeEventListener:function(e,n){var i=il[e],r=i&&i.indexOf(n);r>=0&&i.splice(r,1)},utils:{wrap:a3,wrapYoyo:l3,distribute:$0,random:X0,snap:q0,normalize:r3,getUnit:Fe,clamp:t3,splitColor:Z0,toArray:St,selector:Oh,mapRange:Y0,pipe:n3,unitize:i3,interpolate:o3,shuffle:H0},install:C0,effects:hc,ticker:ot,updateRoot:$e.updateRoot,plugins:lt,globalTimeline:ae,core:{PropTween:nt,globals:L0,Tween:ye,Timeline:$e,Animation:Gr,getCache:Nn,_removeLinkedListItem:go,reverting:function(){return Le},context:function(e){return e&&ie&&(ie.data.push(e),e._ctx=ie),ie},suppressOverwrites:function(e){return Sd=e}}};st("to,from,fromTo,delayedCall,set,killTweensOf",function(s){return Bl[s]=ye[s]});ot.add($e.updateRoot);si=Bl.to({},{duration:0});var E3=function(e,n){for(var i=e._pt;i&&i.p!==n&&i.op!==n&&i.fp!==n;)i=i._next;return i},P3=function(e,n){var i=e._targets,r,a,l;for(r in n)for(a=i.length;a--;)l=e._ptLookup[a][r],l&&(l=l.d)&&(l._pt&&(l=E3(l,r)),l&&l.modifier&&l.modifier(n[r],e,i[a],r))},fc=function(e,n){return{name:e,headless:1,rawVars:1,init:function(r,a,l){l._onInit=function(o){var c,h;if(Ee(a)&&(c={},st(a,function(m){return c[m]=1}),a=c),n){c={};for(h in a)c[h]=n(a[h]);a=c}P3(o,a)}}}},rt=Bl.registerPlugin({name:"attr",init:function(e,n,i,r,a){var l,o,c;this.tween=i;for(l in n)c=e.getAttribute(l)||"",o=this.add(e,"setAttribute",(c||0)+"",n[l],r,a,0,0,l),o.op=l,o.b=c,this._props.push(l)},render:function(e,n){for(var i=n._pt;i;)Le?i.set(i.t,i.p,i.b,i):i.r(e,i.d),i=i._next}},{name:"endArray",headless:1,init:function(e,n){for(var i=n.length;i--;)this.add(e,i,e[i]||0,n[i],0,0,0,0,0,1)}},fc("roundProps",Fh),fc("modifiers"),fc("snap",q0))||Bl;ye.version=$e.version=rt.version="3.13.0";M0=1;Rd()&&ki();W.Power0;W.Power1;W.Power2;W.Power3;W.Power4;W.Linear;W.Quad;W.Cubic;W.Quart;W.Quint;W.Strong;W.Elastic;W.Back;W.SteppedEase;W.Bounce;W.Sine;W.Expo;W.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var Ff,zs,hi,Vd,xn,Vf,Bd,M3=function(){return typeof window<"u"},Ns={},mn=180/Math.PI,mi=Math.PI/180,In=Math.atan2,Bf=1e8,Wd=/([A-Z])/g,C3=/(left|right|width|margin|padding|x)/i,L3=/[\s,\(]\S/,Yt={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Wh=function(e,n){return n.set(n.t,n.p,Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},A3=function(e,n){return n.set(n.t,n.p,e===1?n.e:Math.round((n.s+n.c*e)*1e4)/1e4+n.u,n)},z3=function(e,n){return n.set(n.t,n.p,e?Math.round((n.s+n.c*e)*1e4)/1e4+n.u:n.b,n)},D3=function(e,n){var i=n.s+n.c*e;n.set(n.t,n.p,~~(i+(i<0?-.5:.5))+n.u,n)},uv=function(e,n){return n.set(n.t,n.p,e?n.e:n.b,n)},pv=function(e,n){return n.set(n.t,n.p,e!==1?n.b:n.e,n)},I3=function(e,n,i){return e.style[n]=i},O3=function(e,n,i){return e.style.setProperty(n,i)},F3=function(e,n,i){return e._gsap[n]=i},V3=function(e,n,i){return e._gsap.scaleX=e._gsap.scaleY=i},B3=function(e,n,i,r,a){var l=e._gsap;l.scaleX=l.scaleY=i,l.renderTransform(a,l)},W3=function(e,n,i,r,a){var l=e._gsap;l[n]=i,l.renderTransform(a,l)},oe="transform",it=oe+"Origin",U3=function s(e,n){var i=this,r=this.target,a=r.style,l=r._gsap;if(e in Ns&&a){if(this.tfm=this.tfm||{},e!=="transform")e=Yt[e]||e,~e.indexOf(",")?e.split(",").forEach(function(o){return i.tfm[o]=os(r,o)}):this.tfm[e]=l.x?l[e]:os(r,e),e===it&&(this.tfm.zOrigin=l.zOrigin);else return Yt.transform.split(",").forEach(function(o){return s.call(i,o,n)});if(this.props.indexOf(oe)>=0)return;l.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(it,n,"")),e=oe}(a||n)&&this.props.push(e,n,a[e])},fv=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},H3=function(){var e=this.props,n=this.target,i=n.style,r=n._gsap,a,l;for(a=0;a<e.length;a+=3)e[a+1]?e[a+1]===2?n[e[a]](e[a+2]):n[e[a]]=e[a+2]:e[a+2]?i[e[a]]=e[a+2]:i.removeProperty(e[a].substr(0,2)==="--"?e[a]:e[a].replace(Wd,"-$1").toLowerCase());if(this.tfm){for(l in this.tfm)r[l]=this.tfm[l];r.svg&&(r.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),a=Bd(),(!a||!a.isStart)&&!i[oe]&&(fv(i),r.zOrigin&&i[it]&&(i[it]+=" "+r.zOrigin+"px",r.zOrigin=0,r.renderTransform()),r.uncache=1)}},xv=function(e,n){var i={target:e,props:[],revert:H3,save:U3};return e._gsap||rt.core.getCache(e),n&&e.style&&e.nodeType&&n.split(",").forEach(function(r){return i.save(r)}),i},gv,Uh=function(e,n){var i=zs.createElementNS?zs.createElementNS((n||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):zs.createElement(e);return i&&i.style?i:zs.createElement(e)},Tt=function s(e,n,i){var r=getComputedStyle(e);return r[n]||r.getPropertyValue(n.replace(Wd,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&s(e,Si(n)||n,1)||""},Wf="O,Moz,ms,Ms,Webkit".split(","),Si=function(e,n,i){var r=n||xn,a=r.style,l=5;if(e in a&&!i)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);l--&&!(Wf[l]+e in a););return l<0?null:(l===3?"ms":l>=0?Wf[l]:"")+e},Hh=function(){M3()&&window.document&&(Ff=window,zs=Ff.document,hi=zs.documentElement,xn=Uh("div")||{style:{}},Uh("div"),oe=Si(oe),it=oe+"Origin",xn.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",gv=!!Si("perspective"),Bd=rt.core.reverting,Vd=1)},Uf=function(e){var n=e.ownerSVGElement,i=Uh("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0),a;r.style.display="block",i.appendChild(r),hi.appendChild(i);try{a=r.getBBox()}catch{}return i.removeChild(r),hi.removeChild(i),a},Hf=function(e,n){for(var i=n.length;i--;)if(e.hasAttribute(n[i]))return e.getAttribute(n[i])},jv=function(e){var n,i;try{n=e.getBBox()}catch{n=Uf(e),i=1}return n&&(n.width||n.height)||i||(n=Uf(e)),n&&!n.width&&!n.x&&!n.y?{x:+Hf(e,["x","cx","x1"])||0,y:+Hf(e,["y","cy","y1"])||0,width:0,height:0}:n},yv=function(e){return!!(e.getCTM&&(!e.parentNode||e.ownerSVGElement)&&jv(e))},Mn=function(e,n){if(n){var i=e.style,r;n in Ns&&n!==it&&(n=oe),i.removeProperty?(r=n.substr(0,2),(r==="ms"||n.substr(0,6)==="webkit")&&(n="-"+n),i.removeProperty(r==="--"?n:n.replace(Wd,"-$1").toLowerCase())):i.removeAttribute(n)}},Ds=function(e,n,i,r,a,l){var o=new nt(e._pt,n,i,0,1,l?pv:uv);return e._pt=o,o.b=r,o.e=a,e._props.push(i),o},$f={deg:1,rad:1,turn:1},$3={grid:1,flex:1},Qs=function s(e,n,i,r){var a=parseFloat(i)||0,l=(i+"").trim().substr((a+"").length)||"px",o=xn.style,c=C3.test(n),h=e.tagName.toLowerCase()==="svg",m=(h?"client":"offset")+(c?"Width":"Height"),d=100,u=r==="px",p=r==="%",y,g,v,f;if(r===l||!a||$f[r]||$f[l])return a;if(l!=="px"&&!u&&(a=s(e,n,i,"px")),f=e.getCTM&&yv(e),(p||l==="%")&&(Ns[n]||~n.indexOf("adius")))return y=f?e.getBBox()[c?"width":"height"]:e[m],ge(p?a/y*d:a/100*y);if(o[c?"width":"height"]=d+(u?l:r),g=r!=="rem"&&~n.indexOf("adius")||r==="em"&&e.appendChild&&!h?e:e.parentNode,f&&(g=(e.ownerSVGElement||{}).parentNode),(!g||g===zs||!g.appendChild)&&(g=zs.body),v=g._gsap,v&&p&&v.width&&c&&v.time===ot.time&&!v.uncache)return ge(a/v.width*d);if(p&&(n==="height"||n==="width")){var x=e.style[n];e.style[n]=d+r,y=e[m],x?e.style[n]=x:Mn(e,n)}else(p||l==="%")&&!$3[Tt(g,"display")]&&(o.position=Tt(e,"position")),g===e&&(o.position="static"),g.appendChild(xn),y=xn[m],g.removeChild(xn),o.position="absolute";return c&&p&&(v=Nn(g),v.time=ot.time,v.width=g[m]),ge(u?y*a/d:y&&a?d/y*a:0)},os=function(e,n,i,r){var a;return Vd||Hh(),n in Yt&&n!=="transform"&&(n=Yt[n],~n.indexOf(",")&&(n=n.split(",")[0])),Ns[n]&&n!=="transform"?(a=Zr(e,r),a=n!=="transformOrigin"?a[n]:a.svg?a.origin:Ul(Tt(e,it))+" "+a.zOrigin+"px"):(a=e.style[n],(!a||a==="auto"||r||~(a+"").indexOf("calc("))&&(a=Wl[n]&&Wl[n](e,n,i)||Tt(e,n)||z0(e,n)||(n==="opacity"?1:0))),i&&!~(a+"").trim().indexOf(" ")?Qs(e,n,a,i)+i:a},q3=function(e,n,i,r){if(!i||i==="none"){var a=Si(n,e,1),l=a&&Tt(e,a,1);l&&l!==i?(n=a,i=l):n==="borderColor"&&(i=Tt(e,"borderTopColor"))}var o=new nt(this._pt,e.style,n,0,1,hv),c=0,h=0,m,d,u,p,y,g,v,f,x,j,w,N;if(o.b=i,o.e=r,i+="",r+="",r.substring(0,6)==="var(--"&&(r=Tt(e,r.substring(4,r.indexOf(")")))),r==="auto"&&(g=e.style[n],e.style[n]=r,r=Tt(e,n)||r,g?e.style[n]=g:Mn(e,n)),m=[i,r],ev(m),i=m[0],r=m[1],u=i.match(ti)||[],N=r.match(ti)||[],N.length){for(;d=ti.exec(r);)v=d[0],x=r.substring(c,d.index),y?y=(y+1)%5:(x.substr(-5)==="rgba("||x.substr(-5)==="hsla(")&&(y=1),v!==(g=u[h++]||"")&&(p=parseFloat(g)||0,w=g.substr((p+"").length),v.charAt(1)==="="&&(v=ci(p,v)+w),f=parseFloat(v),j=v.substr((f+"").length),c=ti.lastIndex-j.length,j||(j=j||dt.units[n]||w,c===r.length&&(r+=j,o.e+=j)),w!==j&&(p=Qs(e,n,g,j)||0),o._pt={_next:o._pt,p:x||h===1?x:",",s:p,c:f-p,m:y&&y<4||n==="zIndex"?Math.round:0});o.c=c<r.length?r.substring(c,r.length):""}else o.r=n==="display"&&r==="none"?pv:uv;return E0.test(r)&&(o.e=0),this._pt=o,o},qf={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},X3=function(e){var n=e.split(" "),i=n[0],r=n[1]||"50%";return(i==="top"||i==="bottom"||r==="left"||r==="right")&&(e=i,i=r,r=e),n[0]=qf[i]||i,n[1]=qf[r]||r,n.join(" ")},K3=function(e,n){if(n.tween&&n.tween._time===n.tween._dur){var i=n.t,r=i.style,a=n.u,l=i._gsap,o,c,h;if(a==="all"||a===!0)r.cssText="",c=1;else for(a=a.split(","),h=a.length;--h>-1;)o=a[h],Ns[o]&&(c=1,o=o==="transformOrigin"?it:oe),Mn(i,o);c&&(Mn(i,oe),l&&(l.svg&&i.removeAttribute("transform"),r.scale=r.rotate=r.translate="none",Zr(i,1),l.uncache=1,fv(r)))}},Wl={clearProps:function(e,n,i,r,a){if(a.data!=="isFromStart"){var l=e._pt=new nt(e._pt,n,i,0,0,K3);return l.u=r,l.pr=-10,l.tween=a,e._props.push(i),1}}},Qr=[1,0,0,1,0,0],vv={},Nv=function(e){return e==="matrix(1, 0, 0, 1, 0, 0)"||e==="none"||!e},Xf=function(e){var n=Tt(e,oe);return Nv(n)?Qr:n.substr(7).match(R0).map(ge)},Ud=function(e,n){var i=e._gsap||Nn(e),r=e.style,a=Xf(e),l,o,c,h;return i.svg&&e.getAttribute("transform")?(c=e.transform.baseVal.consolidate().matrix,a=[c.a,c.b,c.c,c.d,c.e,c.f],a.join(",")==="1,0,0,1,0,0"?Qr:a):(a===Qr&&!e.offsetParent&&e!==hi&&!i.svg&&(c=r.display,r.display="block",l=e.parentNode,(!l||!e.offsetParent&&!e.getBoundingClientRect().width)&&(h=1,o=e.nextElementSibling,hi.appendChild(e)),a=Xf(e),c?r.display=c:Mn(e,"display"),h&&(o?l.insertBefore(e,o):l?l.appendChild(e):hi.removeChild(e))),n&&a.length>6?[a[0],a[1],a[4],a[5],a[12],a[13]]:a)},$h=function(e,n,i,r,a,l){var o=e._gsap,c=a||Ud(e,!0),h=o.xOrigin||0,m=o.yOrigin||0,d=o.xOffset||0,u=o.yOffset||0,p=c[0],y=c[1],g=c[2],v=c[3],f=c[4],x=c[5],j=n.split(" "),w=parseFloat(j[0])||0,N=parseFloat(j[1])||0,b,S,k,T;i?c!==Qr&&(S=p*v-y*g)&&(k=w*(v/S)+N*(-g/S)+(g*x-v*f)/S,T=w*(-y/S)+N*(p/S)-(p*x-y*f)/S,w=k,N=T):(b=jv(e),w=b.x+(~j[0].indexOf("%")?w/100*b.width:w),N=b.y+(~(j[1]||j[0]).indexOf("%")?N/100*b.height:N)),r||r!==!1&&o.smooth?(f=w-h,x=N-m,o.xOffset=d+(f*p+x*g)-f,o.yOffset=u+(f*y+x*v)-x):o.xOffset=o.yOffset=0,o.xOrigin=w,o.yOrigin=N,o.smooth=!!r,o.origin=n,o.originIsAbsolute=!!i,e.style[it]="0px 0px",l&&(Ds(l,o,"xOrigin",h,w),Ds(l,o,"yOrigin",m,N),Ds(l,o,"xOffset",d,o.xOffset),Ds(l,o,"yOffset",u,o.yOffset)),e.setAttribute("data-svg-origin",w+" "+N)},Zr=function(e,n){var i=e._gsap||new iv(e);if("x"in i&&!n&&!i.uncache)return i;var r=e.style,a=i.scaleX<0,l="px",o="deg",c=getComputedStyle(e),h=Tt(e,it)||"0",m,d,u,p,y,g,v,f,x,j,w,N,b,S,k,T,P,I,F,z,Y,X,U,O,E,C,L,H,K,Ct,de,Pe;return m=d=u=g=v=f=x=j=w=0,p=y=1,i.svg=!!(e.getCTM&&yv(e)),c.translate&&((c.translate!=="none"||c.scale!=="none"||c.rotate!=="none")&&(r[oe]=(c.translate!=="none"?"translate3d("+(c.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(c.rotate!=="none"?"rotate("+c.rotate+") ":"")+(c.scale!=="none"?"scale("+c.scale.split(" ").join(",")+") ":"")+(c[oe]!=="none"?c[oe]:"")),r.scale=r.rotate=r.translate="none"),S=Ud(e,i.svg),i.svg&&(i.uncache?(E=e.getBBox(),h=i.xOrigin-E.x+"px "+(i.yOrigin-E.y)+"px",O=""):O=!n&&e.getAttribute("data-svg-origin"),$h(e,O||h,!!O||i.originIsAbsolute,i.smooth!==!1,S)),N=i.xOrigin||0,b=i.yOrigin||0,S!==Qr&&(I=S[0],F=S[1],z=S[2],Y=S[3],m=X=S[4],d=U=S[5],S.length===6?(p=Math.sqrt(I*I+F*F),y=Math.sqrt(Y*Y+z*z),g=I||F?In(F,I)*mn:0,x=z||Y?In(z,Y)*mn+g:0,x&&(y*=Math.abs(Math.cos(x*mi))),i.svg&&(m-=N-(N*I+b*z),d-=b-(N*F+b*Y))):(Pe=S[6],Ct=S[7],L=S[8],H=S[9],K=S[10],de=S[11],m=S[12],d=S[13],u=S[14],k=In(Pe,K),v=k*mn,k&&(T=Math.cos(-k),P=Math.sin(-k),O=X*T+L*P,E=U*T+H*P,C=Pe*T+K*P,L=X*-P+L*T,H=U*-P+H*T,K=Pe*-P+K*T,de=Ct*-P+de*T,X=O,U=E,Pe=C),k=In(-z,K),f=k*mn,k&&(T=Math.cos(-k),P=Math.sin(-k),O=I*T-L*P,E=F*T-H*P,C=z*T-K*P,de=Y*P+de*T,I=O,F=E,z=C),k=In(F,I),g=k*mn,k&&(T=Math.cos(k),P=Math.sin(k),O=I*T+F*P,E=X*T+U*P,F=F*T-I*P,U=U*T-X*P,I=O,X=E),v&&Math.abs(v)+Math.abs(g)>359.9&&(v=g=0,f=180-f),p=ge(Math.sqrt(I*I+F*F+z*z)),y=ge(Math.sqrt(U*U+Pe*Pe)),k=In(X,U),x=Math.abs(k)>2e-4?k*mn:0,w=de?1/(de<0?-de:de):0),i.svg&&(O=e.getAttribute("transform"),i.forceCSS=e.setAttribute("transform","")||!Nv(Tt(e,oe)),O&&e.setAttribute("transform",O))),Math.abs(x)>90&&Math.abs(x)<270&&(a?(p*=-1,x+=g<=0?180:-180,g+=g<=0?180:-180):(y*=-1,x+=x<=0?180:-180)),n=n||i.uncache,i.x=m-((i.xPercent=m&&(!n&&i.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-m)?-50:0)))?e.offsetWidth*i.xPercent/100:0)+l,i.y=d-((i.yPercent=d&&(!n&&i.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-d)?-50:0)))?e.offsetHeight*i.yPercent/100:0)+l,i.z=u+l,i.scaleX=ge(p),i.scaleY=ge(y),i.rotation=ge(g)+o,i.rotationX=ge(v)+o,i.rotationY=ge(f)+o,i.skewX=x+o,i.skewY=j+o,i.transformPerspective=w+l,(i.zOrigin=parseFloat(h.split(" ")[2])||!n&&i.zOrigin||0)&&(r[it]=Ul(h)),i.xOffset=i.yOffset=0,i.force3D=dt.force3D,i.renderTransform=i.svg?G3:gv?wv:Y3,i.uncache=0,i},Ul=function(e){return(e=e.split(" "))[0]+" "+e[1]},xc=function(e,n,i){var r=Fe(n);return ge(parseFloat(n)+parseFloat(Qs(e,"x",i+"px",r)))+r},Y3=function(e,n){n.z="0px",n.rotationY=n.rotationX="0deg",n.force3D=0,wv(e,n)},rn="0deg",Ki="0px",an=") ",wv=function(e,n){var i=n||this,r=i.xPercent,a=i.yPercent,l=i.x,o=i.y,c=i.z,h=i.rotation,m=i.rotationY,d=i.rotationX,u=i.skewX,p=i.skewY,y=i.scaleX,g=i.scaleY,v=i.transformPerspective,f=i.force3D,x=i.target,j=i.zOrigin,w="",N=f==="auto"&&e&&e!==1||f===!0;if(j&&(d!==rn||m!==rn)){var b=parseFloat(m)*mi,S=Math.sin(b),k=Math.cos(b),T;b=parseFloat(d)*mi,T=Math.cos(b),l=xc(x,l,S*T*-j),o=xc(x,o,-Math.sin(b)*-j),c=xc(x,c,k*T*-j+j)}v!==Ki&&(w+="perspective("+v+an),(r||a)&&(w+="translate("+r+"%, "+a+"%) "),(N||l!==Ki||o!==Ki||c!==Ki)&&(w+=c!==Ki||N?"translate3d("+l+", "+o+", "+c+") ":"translate("+l+", "+o+an),h!==rn&&(w+="rotate("+h+an),m!==rn&&(w+="rotateY("+m+an),d!==rn&&(w+="rotateX("+d+an),(u!==rn||p!==rn)&&(w+="skew("+u+", "+p+an),(y!==1||g!==1)&&(w+="scale("+y+", "+g+an),x.style[oe]=w||"translate(0, 0)"},G3=function(e,n){var i=n||this,r=i.xPercent,a=i.yPercent,l=i.x,o=i.y,c=i.rotation,h=i.skewX,m=i.skewY,d=i.scaleX,u=i.scaleY,p=i.target,y=i.xOrigin,g=i.yOrigin,v=i.xOffset,f=i.yOffset,x=i.forceCSS,j=parseFloat(l),w=parseFloat(o),N,b,S,k,T;c=parseFloat(c),h=parseFloat(h),m=parseFloat(m),m&&(m=parseFloat(m),h+=m,c+=m),c||h?(c*=mi,h*=mi,N=Math.cos(c)*d,b=Math.sin(c)*d,S=Math.sin(c-h)*-u,k=Math.cos(c-h)*u,h&&(m*=mi,T=Math.tan(h-m),T=Math.sqrt(1+T*T),S*=T,k*=T,m&&(T=Math.tan(m),T=Math.sqrt(1+T*T),N*=T,b*=T)),N=ge(N),b=ge(b),S=ge(S),k=ge(k)):(N=d,k=u,b=S=0),(j&&!~(l+"").indexOf("px")||w&&!~(o+"").indexOf("px"))&&(j=Qs(p,"x",l,"px"),w=Qs(p,"y",o,"px")),(y||g||v||f)&&(j=ge(j+y-(y*N+g*S)+v),w=ge(w+g-(y*b+g*k)+f)),(r||a)&&(T=p.getBBox(),j=ge(j+r/100*T.width),w=ge(w+a/100*T.height)),T="matrix("+N+","+b+","+S+","+k+","+j+","+w+")",p.setAttribute("transform",T),x&&(p.style[oe]=T)},Q3=function(e,n,i,r,a){var l=360,o=Ee(a),c=parseFloat(a)*(o&&~a.indexOf("rad")?mn:1),h=c-r,m=r+h+"deg",d,u;return o&&(d=a.split("_")[1],d==="short"&&(h%=l,h!==h%(l/2)&&(h+=h<0?l:-l)),d==="cw"&&h<0?h=(h+l*Bf)%l-~~(h/l)*l:d==="ccw"&&h>0&&(h=(h-l*Bf)%l-~~(h/l)*l)),e._pt=u=new nt(e._pt,n,i,r,h,A3),u.e=m,u.u="deg",e._props.push(i),u},Kf=function(e,n){for(var i in n)e[i]=n[i];return e},Z3=function(e,n,i){var r=Kf({},i._gsap),a="perspective,force3D,transformOrigin,svgOrigin",l=i.style,o,c,h,m,d,u,p,y;r.svg?(h=i.getAttribute("transform"),i.setAttribute("transform",""),l[oe]=n,o=Zr(i,1),Mn(i,oe),i.setAttribute("transform",h)):(h=getComputedStyle(i)[oe],l[oe]=n,o=Zr(i,1),l[oe]=h);for(c in Ns)h=r[c],m=o[c],h!==m&&a.indexOf(c)<0&&(p=Fe(h),y=Fe(m),d=p!==y?Qs(i,c,h,y):parseFloat(h),u=parseFloat(m),e._pt=new nt(e._pt,o,c,d,u-d,Wh),e._pt.u=y||0,e._props.push(c));Kf(o,r)};st("padding,margin,Width,Radius",function(s,e){var n="Top",i="Right",r="Bottom",a="Left",l=(e<3?[n,i,r,a]:[n+a,n+i,r+i,r+a]).map(function(o){return e<2?s+o:"border"+o+s});Wl[e>1?"border"+s:s]=function(o,c,h,m,d){var u,p;if(arguments.length<4)return u=l.map(function(y){return os(o,y,h)}),p=u.join(" "),p.split(u[0]).length===5?u[0]:p;u=(m+"").split(" "),p={},l.forEach(function(y,g){return p[y]=u[g]=u[g]||u[(g-1)/2|0]}),o.init(c,p,d)}});var _v={name:"css",register:Hh,targetTest:function(e){return e.style&&e.nodeType},init:function(e,n,i,r,a){var l=this._props,o=e.style,c=i.vars.startAt,h,m,d,u,p,y,g,v,f,x,j,w,N,b,S,k;Vd||Hh(),this.styles=this.styles||xv(e),k=this.styles.props,this.tween=i;for(g in n)if(g!=="autoRound"&&(m=n[g],!(lt[g]&&rv(g,n,i,r,e,a)))){if(p=typeof m,y=Wl[g],p==="function"&&(m=m.call(i,r,e,a),p=typeof m),p==="string"&&~m.indexOf("random(")&&(m=Kr(m)),y)y(this,e,g,m,i)&&(S=1);else if(g.substr(0,2)==="--")h=(getComputedStyle(e).getPropertyValue(g)+"").trim(),m+="",qs.lastIndex=0,qs.test(h)||(v=Fe(h),f=Fe(m)),f?v!==f&&(h=Qs(e,g,h,f)+f):v&&(m+=v),this.add(o,"setProperty",h,m,r,a,0,0,g),l.push(g),k.push(g,0,o[g]);else if(p!=="undefined"){if(c&&g in c?(h=typeof c[g]=="function"?c[g].call(i,r,e,a):c[g],Ee(h)&&~h.indexOf("random(")&&(h=Kr(h)),Fe(h+"")||h==="auto"||(h+=dt.units[g]||Fe(os(e,g))||""),(h+"").charAt(1)==="="&&(h=os(e,g))):h=os(e,g),u=parseFloat(h),x=p==="string"&&m.charAt(1)==="="&&m.substr(0,2),x&&(m=m.substr(2)),d=parseFloat(m),g in Yt&&(g==="autoAlpha"&&(u===1&&os(e,"visibility")==="hidden"&&d&&(u=0),k.push("visibility",0,o.visibility),Ds(this,o,"visibility",u?"inherit":"hidden",d?"inherit":"hidden",!d)),g!=="scale"&&g!=="transform"&&(g=Yt[g],~g.indexOf(",")&&(g=g.split(",")[0]))),j=g in Ns,j){if(this.styles.save(g),p==="string"&&m.substring(0,6)==="var(--"&&(m=Tt(e,m.substring(4,m.indexOf(")"))),d=parseFloat(m)),w||(N=e._gsap,N.renderTransform&&!n.parseTransform||Zr(e,n.parseTransform),b=n.smoothOrigin!==!1&&N.smooth,w=this._pt=new nt(this._pt,o,oe,0,1,N.renderTransform,N,0,-1),w.dep=1),g==="scale")this._pt=new nt(this._pt,N,"scaleY",N.scaleY,(x?ci(N.scaleY,x+d):d)-N.scaleY||0,Wh),this._pt.u=0,l.push("scaleY",g),g+="X";else if(g==="transformOrigin"){k.push(it,0,o[it]),m=X3(m),N.svg?$h(e,m,0,b,0,this):(f=parseFloat(m.split(" ")[2])||0,f!==N.zOrigin&&Ds(this,N,"zOrigin",N.zOrigin,f),Ds(this,o,g,Ul(h),Ul(m)));continue}else if(g==="svgOrigin"){$h(e,m,1,b,0,this);continue}else if(g in vv){Q3(this,N,g,u,x?ci(u,x+m):m);continue}else if(g==="smoothOrigin"){Ds(this,N,"smooth",N.smooth,m);continue}else if(g==="force3D"){N[g]=m;continue}else if(g==="transform"){Z3(this,m,e);continue}}else g in o||(g=Si(g)||g);if(j||(d||d===0)&&(u||u===0)&&!L3.test(m)&&g in o)v=(h+"").substr((u+"").length),d||(d=0),f=Fe(m)||(g in dt.units?dt.units[g]:v),v!==f&&(u=Qs(e,g,h,f)),this._pt=new nt(this._pt,j?N:o,g,u,(x?ci(u,x+d):d)-u,!j&&(f==="px"||g==="zIndex")&&n.autoRound!==!1?D3:Wh),this._pt.u=f||0,v!==f&&f!=="%"&&(this._pt.b=h,this._pt.r=z3);else if(g in o)q3.call(this,e,g,h,x?x+m:m);else if(g in e)this.add(e,g,h||e[g],x?x+m:m,r,a);else if(g!=="parseTransform"){Pd(g,m);continue}j||(g in o?k.push(g,0,o[g]):typeof e[g]=="function"?k.push(g,2,e[g]()):k.push(g,1,h||e[g])),l.push(g)}}S&&mv(this)},render:function(e,n){if(n.tween._time||!Bd())for(var i=n._pt;i;)i.r(e,i.d),i=i._next;else n.styles.revert()},get:os,aliases:Yt,getSetter:function(e,n,i){var r=Yt[n];return r&&r.indexOf(",")<0&&(n=r),n in Ns&&n!==it&&(e._gsap.x||os(e,"x"))?i&&Vf===i?n==="scale"?V3:F3:(Vf=i||{})&&(n==="scale"?B3:W3):e.style&&!Td(e.style[n])?I3:~n.indexOf("-")?O3:Od(e,n)},core:{_removeProperty:Mn,_getMatrix:Ud}};rt.utils.checkPrefix=Si;rt.core.getStyleSaver=xv;(function(s,e,n,i){var r=st(s+","+e+","+n,function(a){Ns[a]=1});st(e,function(a){dt.units[a]="deg",vv[a]=1}),Yt[r[13]]=s+","+e,st(i,function(a){var l=a.split(":");Yt[l[1]]=r[l[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");st("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(s){dt.units[s]="px"});rt.registerPlugin(_v);var B=rt.registerPlugin(_v)||rt;B.core.Tween;/*!
 * @gsap/react 2.1.2
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/let Yf=typeof document<"u"?_.useLayoutEffect:_.useEffect,Gf=s=>s&&!Array.isArray(s)&&typeof s=="object",Da=[],J3={},bv=B;const Hd=(s,e=Da)=>{let n=J3;Gf(s)?(n=s,s=null,e="dependencies"in n?n.dependencies:Da):Gf(e)&&(n=e,e="dependencies"in n?n.dependencies:Da),s&&typeof s!="function"&&console.warn("First parameter must be a function or config object");const{scope:i,revertOnUpdate:r}=n,a=_.useRef(!1),l=_.useRef(bv.context(()=>{},i)),o=_.useRef(h=>l.current.add(null,h)),c=e&&e.length&&!r;return c&&Yf(()=>(a.current=!0,()=>l.current.revert()),Da),Yf(()=>{if(s&&l.current.add(s,i),!c||!a.current)return()=>l.current.revert()},e),{context:l.current,contextSafe:o.current}};Hd.register=s=>{bv=s};Hd.headless=!0;const eR={},tR=_r.createContext(eR);function ee(s){const e=_r.useContext(tR);return _r.useMemo(function(){return{...e,...s}},[e,s])}const sR={title:"WHAT IS AXIOMATIC?",category:"AXIOMATIC",date:"2025.11.22",excerpt:"WHAT IS THIS BLOG ABOUT, REALLY?"},nR="3 MIN";function Qf(s){const e={p:"p",...ee(),...s.components};return t.jsxs(t.Fragment,{children:[t.jsx(e.p,{children:`i'm really glad you were curious enough to end up on my little corner of the internet, well, at least that mostly depends on who you are. anyway, you're probably curious about why i named this blog "axiomatic". i'll give you the reason why. you see, i fundamentally value trying to understand the world through the process of scientific inquiry. i think the first thing any agent or form of intelligence would do when it's randomly thrown into an environment it doesn't understand (as is the case with us) is to inquire and probe things, and i find it rather peculiar when others don't feel the same type of curiosity.`}),`
`,t.jsx(e.p,{children:"in that process of inquiry, one usually begins by establishing these things called axioms, or assumptions that are unquestionable and solid enough to build arguments and reason from. without the correct axioms, inquiry is nothing but a waste of time."}),`
`,t.jsx(e.p,{children:"that's the heart of it. here on axiomatic, i'll be diving into whatever intrigues me enough to inquire about in science, engineering, philosophy, and yeah, even some personal reflections and lessons from my own life. science for me isn't just a bunch of facts stacked up, it's more of an existential imperative for me to figure out how the universe ticks, like the weird stuff in quantum mechanics where particles seem to know what each other are doing from miles away, or the way evolution shapes everything from bugs to brains."}),`
`,t.jsx(e.p,{children:"engineering is where the rubber meets the road, taking those wild ideas and turning them into stuff that actually works, think ai that learns like we do or bridges that can withstand earthquakes without breaking a sweat. philosophy ties it all together, making me question the big stuff: what's real knowledge? how do we make ethical choices in a world full of tech? which questions do we even ask? and why do we even bother searching for meaning in all this chaos?"}),`
`,t.jsx(e.p,{children:"i'll mix in stories from my own experiences too, but forgive me if i'm a little vague in some parts. this isn't an outlet of absolutely everything in my life. in a world drowning in hasty, ragebait-ish takes and endless scrolls, this blog is my shot at slowing down, starting from solid ground, and maybe sparking some curiosity in you too."}),`
`,t.jsx(e.p,{children:"if that sounds like your thing, stick around, and lmk what you think of everything (also did you see my 3d model in the about section? shit's cool af)"})]})}function iR(s={}){const{wrapper:e}={...ee(),...s.components};return e?t.jsx(e,{...s,children:t.jsx(Qf,{...s})}):Qf(s)}const Te=({id:s,title:e="YouTube Video"})=>t.jsxs("div",{className:"my-8 w-full",children:[t.jsxs("div",{className:"relative w-full aspect-video border border-cyber-border/50 bg-cyber-black overflow-hidden group",children:[t.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-cyber-text/30"}),t.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 border-t border-r border-cyber-text/30"}),t.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 border-b border-l border-cyber-text/30"}),t.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 border-b border-r border-cyber-text/30"}),t.jsx("div",{className:"absolute inset-0 bg-[url('/scanlines.png')] opacity-10 pointer-events-none z-10"}),t.jsx("iframe",{className:"absolute top-0 left-0 w-full h-full",src:`https://www.youtube-nocookie.com/embed/${s}`,title:e,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})]}),t.jsxs("div",{className:"mt-2 flex justify-between items-center text-[10px] font-mono text-cyber-text/50 uppercase tracking-wider",children:[t.jsx("span",{children:"// VIDEO_FEED_ESTABLISHED"}),t.jsxs("span",{children:["ID: ",s]})]})]}),rR={title:"BIG RIPPLES",category:"SCIENCE",date:"2025.08.19",excerpt:"BREAKTHROUGHS RESHAPE THE WORLD NOT BY ARRIVING SUDDENLY, BUT BY MAKING THE IMPOSSIBLE FEEL ORDINARY."},aR="5 MIN";function Zf(s){const e={p:"p",...ee(),...s.components};return t.jsxs(t.Fragment,{children:[t.jsx(e.p,{children:"Science rarely feels dramatic in the moment. Most breakthroughs begin as small curiosities that stubborn researchers refuse to ignore, and only over time do they reveal how deeply they shift our collective trajectory. When we look back across modern history, a few scientific moments stand out not because they were flashy, but because they permanently widened the space of the possible. They changed how long we live, how far we travel, how safely we raise children, how we store knowledge, and even how we imagine ourselves. The biggest transformations tend to come disguised as lab problems, minor anomalies or strange results that only later prove decisive."}),`
`,t.jsx(e.p,{children:"One example is the discovery of penicillin in 1928. It began with a contaminated petri dish, a forgotten setup, and a scientist observant enough to see significance where others might see a spoiled sample."}),`
`,t.jsx(Te,{id:"CNbnLgetqHs",title:"The Discovery of Penicillin (User Provided)"}),`
`,t.jsx(e.p,{children:"That single insight eventually made once-deadly infections routine to treat and changed how hospitals functioned and how societies planned for disease. It also reset global mortality curves in ways no policy had ever achieved. Something similar happened when Rosalind Franklins diffraction images and Watson and Cricks model clarified the structure of DNA in 1953. Biology suddenly shifted from descriptive fieldwork into a programmable discipline where heredity, evolution and cellular machinery could be manipulated with intent rather than merely observed. Everything from genetic engineering to modern biotechnology quietly traces back to that moment."}),`
`,t.jsx(e.p,{children:"Earlier still, electrification and the rise of computing created a scaffolding for almost everything else. The move from local, mechanical power to distributed electrical grids expanded what cities could support and how industries could scale. Later, the leap from vacuum tubes to transistors to microprocessors made information the most flexible commodity humans have ever produced. Entire cultures of communication, coordination and decision-making emerged because sending a signal across the planet became cheaper than delivering a letter across a town. Even sanitation and germ theory, which feel mundane compared to genetic engineering or computing, fundamentally reshaped civilisation by making public health a predictable, controllable affair. Clean water and controlled disease may not sound glamorous, but they changed average life expectancy more than any single high-tech breakthrough in the 20th century."}),`
`,t.jsx(e.p,{children:"Looking forward, the next set of breakthroughs is already forming around us, although they often receive less attention than they deserve. Fusion energy, for instance, is slowly moving from an aspirational idea to a constrained engineering project. Recent ignition results demonstrated that the physics is viable; the remaining effort is to scale and stabilise it rather than to prove it possible."}),`
`,t.jsx(Te,{id:"rcOFV4y5z8c",title:"Fusion Energy Explained  Future or Failure? (Kurzgesagt)"}),`
`,t.jsx(e.p,{children:"If fusion becomes affordable and reliable, almost every downstream sector that depends on energy becomes easier to redesign. It is not just a cleaner energy source. It is a different civilisational baseline."}),`
`,t.jsx(e.p,{children:"Quantum computing is another quietly transformative area. Early demonstrations showed that certain narrow tasks can be solved faster with quantum devices than with classical machines. The real impact, however, lies in eventual error-corrected systems that can model materials, molecular interactions and optimisation landscapes that ordinary computers cannot meaningfully simulate."}),`
`,t.jsx(Te,{id:"g_IaVepNDT4",title:"How Quantum Computers Work and Why They Change Everything (Veritasium)"}),`
`,t.jsx(e.p,{children:"A world where chemists can inverse-design catalysts, batteries or superconductors directly from the physics would be a world that innovates more like mathematics than like tinkering."}),`
`,t.jsx(e.p,{children:"Artificial intelligence is also entering a new phase where models stop being passive tools and instead become interactive collaborators. Multimodal systems that understand text, images, code and natural language simultaneously already influence how researchers prototype ideas, analyse data and coordinate work. The shift is less about replacing humans and more about amplifying what small teams can attempt. It subtly changes the economics of discovery and brings once-exclusive capabilities within reach of individuals or small labs."}),`
`,t.jsx(e.p,{children:"Meanwhile, other breakthroughs sit just over the horizon but receive far less attention. Negative-emissions technology, for example, may feel unglamorous, yet scaling it would simplify global climate policy by turning carbon management into a material-science challenge instead of a geopolitical negotiation. Precision synthetic biology promises to replace entire categories of manufacturing by teaching microbes to produce new polymers, adhesives and enzymes on demand. Even quantum sensors and precision measurement networks could quietly revolutionise navigation, geology, environmental monitoring and fundamental physics by giving us levels of accuracy we have never had before."}),`
`,t.jsx(e.p,{children:"What ties all of these developments together is that they shift what becomes cheap and predictable. Civilisation evolves not simply because humans gain new knowledge, but because the cost of certain operations drops to the point where everyone can use them. When energy, computation or materials become abundant, new cultural norms and new industries naturally emerge. Scientific progress therefore plays a dual role. It is both a generator of practical capability and a generator of new uncertainty. Every advance expands what individuals and institutions can do, and every expansion forces us to adapt our politics, ethics and social expectations."}),`
`,t.jsx(e.p,{children:"This is why cross-disciplinary collaboration matters so much. The breakthroughs of the coming decades will not arrive from isolated fields. They will surface where materials science meets biology, where computer science meets energy engineering, and where policy meets systems design. To make that overlap easier, Ive been building a tool called The Quartet, a framework meant to help researchers from very different domains talk to each other, coordinate, and work from a shared language. If the next scientific century depends on collaboration rather than solitary insight, then we need structures that help people translate across disciplines without losing meaning."}),`
`,t.jsx(e.p,{children:"Ultimately, science is the practice of turning curiosity into reliable skill, and civilisation is the long story of what we choose to do with that skill. The breakthroughs behind us were shaped by patient minds and unexpected questions. The breakthroughs ahead of us will come from the same mix, except this time the conversation spans more domains, more cultures and more kinds of intelligence than ever before."})]})}function lR(s={}){const{wrapper:e}={...ee(),...s.components};return e?t.jsx(e,{...s,children:t.jsx(Zf,{...s})}):Zf(s)}const oR={title:"FEATURE-SCALE CO-ATTENTION",category:"ENGINEERING",date:"2025.11.24",excerpt:"A PROPOSAL FOR DYNAMIC TEMPORAL ROUTING IN HETEROGENEOUS TIME SERIES."},cR="6 MIN";function Jf(s){const e={annotation:"annotation",code:"code",em:"em",h3:"h3",h4:"h4",li:"li",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mover:"mover",mrow:"mrow",msqrt:"msqrt",msub:"msub",msubsup:"msubsup",msup:"msup",mtext:"mtext",munderover:"munderover",ol:"ol",p:"p",path:"path",pre:"pre",semantics:"semantics",span:"span",strong:"strong",svg:"svg",ul:"ul",...ee(),...s.components};return t.jsxs(t.Fragment,{children:[t.jsx(e.p,{children:"In high-dimensional time series forecastingwhether we are modeling limit order books, multi-sensor telemetry in IoT, or patient vitals in an ICUwe face a persistent structural problem. Signals naturally evolve at different velocities. A price crash might happen in seconds (microstructure), while a volume trend builds over hours (liquidity), and a sentiment shift plays out over days (macro)."}),`
`,t.jsx(e.p,{children:'Current State-of-the-Art (SOTA) models, particularly Transformer variants like Informer or Autoformer, tend to force all features through a single temporal lens. They tokenize time steps uniformly. While some recent architectures introduce "patches" or hierarchical pooling, they apply these scales globally across all features. This blurs the signal: to capture the high-frequency noise of Feature A, we are forced to over-sample the low-frequency trend of Feature B.'}),`
`,t.jsxs(e.p,{children:["I have been working on a formalism to solve this called ",t.jsx(e.strong,{children:"Feature-Scale Co-Attention (FSCA)"}),'. It is a mechanism designed to decouple the temporal resolution of individual features, using a two-stage routing attention mechanism to dynamically "zoom" in or out on specific signals depending on the context of the query.']}),`
`,t.jsx(e.p,{children:"What follows is the motivation, the mathematical formalism, and the anticipated algorithmic implementation."}),`
`,t.jsx(e.h3,{children:'The Motivation: The "Blurring" Problem'}),`
`,t.jsxs(e.p,{children:["Standard self-attention mechanisms operate on a matrix ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"X"}),t.jsx(e.mo,{children:""}),t.jsxs(e.msup,{children:[t.jsx(e.mi,{mathvariant:"double-struck",children:"R"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"T"}),t.jsx(e.mo,{children:""}),t.jsx(e.mi,{children:"F"})]})]})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"X \\in \\mathbb{R}^{T \\times F}"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.7224em",verticalAlign:"-0.0391em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8413em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathbb",children:"R"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.8413em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.13889em"},children:"T"}),t.jsx(e.span,{className:"mbin mtight",children:""}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.13889em"},children:"F"})]})})]})})})})})]})]})]})]}),", where ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"T"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"T"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6833em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"})]})})]})," is time and ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"F"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"F"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6833em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"F"})]})})]}),' is features. Even in "patch-based" approaches, the patch size ',t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"P"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"P"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6833em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"})]})})]})," is a hyperparameter fixed for the whole model."]}),`
`,t.jsx(e.p,{children:"If you are interested in how traditional Transformers handle this (and where they fail in multi-scale contexts), this deep dive into the Time Series Transformer landscape is essential context:"}),`
`,t.jsx(Te,{id:"LNydD9ZemZ8",title:"Time Series Transformers Explained"}),`
`,t.jsxs(e.p,{children:['FSCA proposes that we treat the "scale" of a feature not as a hyperparameter, but as a learnable, context-dependent latent variable. The model should be able to decide, at step ',t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"t"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"t"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6151em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"t"})]})})]}),", that it needs to look at the last 5 minutes of ",t.jsx(e.em,{children:"Price"})," but the last 24 hours of ",t.jsx(e.em,{children:"Volume"}),"."]}),`
`,t.jsx(e.h3,{children:"Mathematical Formalism"}),`
`,t.jsxs(e.p,{children:["Let us define our input at time ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"t"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"t"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6151em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"t"})]})})]})," not as a vector, but as a collection of multi-scale representations."]}),`
`,t.jsxs(e.p,{children:["For each feature ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{children:""}),t.jsx(e.mo,{stretchy:"false",children:"{"}),t.jsx(e.mn,{children:"1"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{mathvariant:"normal",children:"."}),t.jsx(e.mi,{mathvariant:"normal",children:"."}),t.jsx(e.mi,{mathvariant:"normal",children:"."}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{children:"F"}),t.jsx(e.mo,{stretchy:"false",children:"}"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"f \\in \\{1, ..., F\\}"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mopen",children:"{"}),t.jsx(e.span,{className:"mord",children:"1"}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord",children:"..."}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"F"}),t.jsx(e.span,{className:"mclose",children:"}"})]})]})]}),", we pre-compute (or learn via strided convolutions) a set of ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"K"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"K"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6833em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"K"})]})})]})," scale representations ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"S"}),t.jsx(e.mi,{children:"f"})]}),t.jsx(e.mo,{children:"="}),t.jsx(e.mo,{stretchy:"false",children:"{"}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"s"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mn,{children:"1"})]})]}),t.jsx(e.mo,{separator:"true",children:","}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"s"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mn,{children:"2"})]})]}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{mathvariant:"normal",children:"."}),t.jsx(e.mi,{mathvariant:"normal",children:"."}),t.jsx(e.mi,{mathvariant:"normal",children:"."}),t.jsx(e.mo,{separator:"true",children:","}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"s"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{children:"K"})]})]}),t.jsx(e.mo,{stretchy:"false",children:"}"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"S_f = \\{s_{f,1}, s_{f,2}, ..., s_{f,K}\\}"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.9694em",verticalAlign:"-0.2861em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0576em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1.0361em",verticalAlign:"-0.2861em"}}),t.jsx(e.span,{className:"mopen",children:"{"}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"s"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mpunct mtight",children:","}),t.jsx(e.span,{className:"mord mtight",children:"1"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"s"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mpunct mtight",children:","}),t.jsx(e.span,{className:"mord mtight",children:"2"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord",children:"..."}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"s"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mpunct mtight",children:","}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.07153em"},children:"K"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mclose",children:"}"})]})]})]}),"."]}),`
`,t.jsxs(e.ul,{children:[`
`,t.jsxs(e.li,{children:[t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"s"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mn,{children:"1"})]})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"s_{f,1}"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.7167em",verticalAlign:"-0.2861em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"s"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mpunct mtight",children:","}),t.jsx(e.span,{className:"mord mtight",children:"1"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]})]})})]})," might be the raw input (1-step resolution)."]}),`
`,t.jsxs(e.li,{children:[t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"s"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{children:"k"})]})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"s_{f,k}"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.7167em",verticalAlign:"-0.2861em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"s"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mpunct mtight",children:","}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]})]})})]})," is a downsampled or aggregated representation (e.g., a 1-hour average)."]}),`
`]}),`
`,t.jsxs(e.p,{children:["We define a ",t.jsx(e.strong,{children:"Query"})," vector ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"q"}),t.jsx(e.mi,{children:"t"})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"q_t"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})]})})]})," (the current hidden state of the forecaster). The FSCA operation computes the context vector ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"c"}),t.jsx(e.mi,{children:"t"})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"c_t"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.5806em",verticalAlign:"-0.15em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"c"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})]})})]})," in two distinct routing stages."]}),`
`,t.jsx(e.h4,{children:'Stage 1: Intra-Feature Scale Routing (The "Zoom")'}),`
`,t.jsxs(e.p,{children:["First, for every feature ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"f"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"f"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"})]})})]}),", we must determine which time-scale is most relevant to the query ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"q"}),t.jsx(e.mi,{children:"t"})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"q_t"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})]})})]}),". We compute an attention score ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:""}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{children:"k"})]})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\alpha_{f,k}"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.7167em",verticalAlign:"-0.2861em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.0037em"},children:""}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0037em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mpunct mtight",children:","}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]})]})})]})," over the scales ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"k"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"k"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6944em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"})]})})]}),"."]}),`
`,t.jsx(e.span,{className:"katex-display",children:t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"e"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{children:"k"})]})]}),t.jsx(e.mo,{children:"="}),t.jsxs(e.mfrac,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"q"}),t.jsx(e.mi,{children:"t"})]}),t.jsxs(e.msubsup,{children:[t.jsx(e.mi,{children:"W"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"s"}),t.jsx(e.mi,{children:"c"}),t.jsx(e.mi,{children:"a"}),t.jsx(e.mi,{children:"l"}),t.jsx(e.mi,{children:"e"})]}),t.jsx(e.mi,{children:"Q"})]}),t.jsx(e.mo,{children:""}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"s"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{children:"k"})]})]}),t.jsxs(e.msubsup,{children:[t.jsx(e.mi,{children:"W"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"s"}),t.jsx(e.mi,{children:"c"}),t.jsx(e.mi,{children:"a"}),t.jsx(e.mi,{children:"l"}),t.jsx(e.mi,{children:"e"})]}),t.jsx(e.mi,{children:"K"})]}),t.jsxs(e.msup,{children:[t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mi,{children:"T"})]})]}),t.jsx(e.msqrt,{children:t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"d"}),t.jsx(e.mi,{children:"m"})]}),t.jsx(e.mi,{children:"o"}),t.jsx(e.mi,{children:"d"}),t.jsx(e.mi,{children:"e"}),t.jsx(e.mi,{children:"l"})]})})]})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"e_{f,k} = \\frac{q_t W^Q_{scale} \\cdot (s_{f,k} W^K_{scale})^T}{\\sqrt{d_model}}"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.7167em",verticalAlign:"-0.2861em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"e"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mpunct mtight",children:","}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"2.5805em",verticalAlign:"-0.93em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mopen nulldelimiter"}),t.jsx(e.span,{className:"mfrac",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"1.6505em"},children:[t.jsxs(e.span,{style:{top:"-2.2528em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"mord",children:t.jsx(e.span,{className:"mord sqrt",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"0.8572em"},children:[t.jsxs(e.span,{className:"svg-align",style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsxs(e.span,{className:"mord",style:{paddingLeft:"0.833em"},children:[t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"d"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.1514em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"m"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mord mathnormal",children:"o"}),t.jsx(e.span,{className:"mord mathnormal",children:"d"}),t.jsx(e.span,{className:"mord mathnormal",children:"e"}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"})]})]}),t.jsxs(e.span,{style:{top:"-2.8172em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"hide-tail",style:{minWidth:"0.853em",height:"1.08em"},children:t.jsx(e.svg,{xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"1.08em",viewBox:"0 0 400000 1080",preserveAspectRatio:"xMinYMin slice",children:t.jsx(e.path,{d:`M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z`})})})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.1828em"},children:t.jsx(e.span,{})})})]})})})]}),t.jsxs(e.span,{style:{top:"-3.23em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),t.jsxs(e.span,{style:{top:"-3.6913em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"W"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"0.9592em"},children:[t.jsxs(e.span,{style:{top:"-2.3987em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",children:"sc"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"a"}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.01968em"},children:"l"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"e"})]})})]}),t.jsxs(e.span,{style:{top:"-3.1809em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"Q"})})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.3013em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),t.jsx(e.span,{className:"mbin",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"s"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mpunct mtight",children:","}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"W"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"0.8413em"},children:[t.jsxs(e.span,{style:{top:"-2.4169em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",children:"sc"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"a"}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.01968em"},children:"l"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"e"})]})})]}),t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.07153em"},children:"K"})})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2831em"},children:t.jsx(e.span,{})})})]})})]}),t.jsxs(e.span,{className:"mclose",children:[t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.8413em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.13889em"},children:"T"})})]})})})})})]})]})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.93em"},children:t.jsx(e.span,{})})})]})}),t.jsx(e.span,{className:"mclose nulldelimiter"})]})]})]})]})}),`
`,t.jsx(e.span,{className:"katex-display",children:t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:""}),t.jsx(e.mi,{children:"f"})]}),t.jsx(e.mo,{children:"="}),t.jsx(e.mtext,{children:"softmax"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mo,{stretchy:"false",children:"["}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"e"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mn,{children:"1"})]})]}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{mathvariant:"normal",children:"."}),t.jsx(e.mi,{mathvariant:"normal",children:"."}),t.jsx(e.mi,{mathvariant:"normal",children:"."}),t.jsx(e.mo,{separator:"true",children:","}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"e"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{children:"K"})]})]}),t.jsx(e.mo,{stretchy:"false",children:"]"}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\alpha_{f} = \\text{softmax}([e_{f,1}, ..., e_{f,K}])"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.7167em",verticalAlign:"-0.2861em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.0037em"},children:""}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0037em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"})})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1.0361em",verticalAlign:"-0.2861em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"softmax"})}),t.jsx(e.span,{className:"mopen",children:"(["}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"e"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mpunct mtight",children:","}),t.jsx(e.span,{className:"mord mtight",children:"1"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord",children:"..."}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"e"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mpunct mtight",children:","}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.07153em"},children:"K"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mclose",children:"])"})]})]})]})}),`
`,t.jsxs(e.p,{children:["We then collapse the scales into a single, dynamic representation ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsxs(e.mover,{accent:"true",children:[t.jsx(e.mi,{children:"z"}),t.jsx(e.mo,{children:"^"})]}),t.jsx(e.mi,{children:"f"})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\hat{z}_f"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.9805em",verticalAlign:"-0.2861em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord accent",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsxs(e.span,{className:"vlist",style:{height:"0.6944em"},children:[t.jsxs(e.span,{style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.04398em"},children:"z"})]}),t.jsxs(e.span,{style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"accent-body",style:{left:"-0.1944em"},children:t.jsx(e.span,{className:"mord",children:"^"})})]})]})})})}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.044em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]})]})})]})," for that feature:"]}),`
`,t.jsx(e.span,{className:"katex-display",children:t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsxs(e.mover,{accent:"true",children:[t.jsx(e.mi,{children:"z"}),t.jsx(e.mo,{children:"^"})]}),t.jsx(e.mi,{children:"f"})]}),t.jsx(e.mo,{children:"="}),t.jsxs(e.munderover,{children:[t.jsx(e.mo,{children:""}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"k"}),t.jsx(e.mo,{children:"="}),t.jsx(e.mn,{children:"1"})]}),t.jsx(e.mi,{children:"K"})]}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:""}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{children:"k"})]})]}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"s"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{children:"k"})]})]})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\hat{z}_f = \\sum_{k=1}^{K} \\alpha_{f,k} s_{f,k}"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.9805em",verticalAlign:"-0.2861em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord accent",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsxs(e.span,{className:"vlist",style:{height:"0.6944em"},children:[t.jsxs(e.span,{style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.04398em"},children:"z"})]}),t.jsxs(e.span,{style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"accent-body",style:{left:"-0.1944em"},children:t.jsx(e.span,{className:"mord",children:"^"})})]})]})})})}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.044em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"3.1304em",verticalAlign:"-1.3021em"}}),t.jsx(e.span,{className:"mop op-limits",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"1.8283em"},children:[t.jsxs(e.span,{style:{top:"-1.8479em",marginLeft:"0em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3.05em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"}),t.jsx(e.span,{className:"mrel mtight",children:"="}),t.jsx(e.span,{className:"mord mtight",children:"1"})]})})]}),t.jsxs(e.span,{style:{top:"-3.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3.05em"}}),t.jsx(e.span,{children:t.jsx(e.span,{className:"mop op-symbol large-op",children:""})})]}),t.jsxs(e.span,{style:{top:"-4.3em",marginLeft:"0em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3.05em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.07153em"},children:"K"})})})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"1.3021em"},children:t.jsx(e.span,{})})})]})}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.0037em"},children:""}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0037em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mpunct mtight",children:","}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"s"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mpunct mtight",children:","}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]})]})]})]})}),`
`,t.jsxs(e.p,{children:["This is conceptually similar to how Mixture of Experts (MoE) routes tokens to different feed-forward networks, but here we are routing the query to different ",t.jsx(e.em,{children:"time horizons"}),"."]}),`
`,t.jsx(Te,{id:"sYDlVVyJYn4",title:"Mixture of Experts Deep Learning Explained"}),`
`,t.jsx(e.h4,{children:'Stage 2: Inter-Feature Co-Attention (The "Mix")'}),`
`,t.jsxs(e.p,{children:["Now that we have the optimal scale representation ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsxs(e.mover,{accent:"true",children:[t.jsx(e.mi,{children:"z"}),t.jsx(e.mo,{children:"^"})]}),t.jsx(e.mi,{children:"f"})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\hat{z}_f"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.9805em",verticalAlign:"-0.2861em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord accent",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsxs(e.span,{className:"vlist",style:{height:"0.6944em"},children:[t.jsxs(e.span,{style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.04398em"},children:"z"})]}),t.jsxs(e.span,{style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"accent-body",style:{left:"-0.1944em"},children:t.jsx(e.span,{className:"mord",children:"^"})})]})]})})})}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.044em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]})]})})]})," for each feature, we perform a second attention pass to determine which ",t.jsx(e.em,{children:"features"})," are relevant."]}),`
`,t.jsx(e.span,{className:"katex-display",children:t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"u"}),t.jsx(e.mi,{children:"f"})]}),t.jsx(e.mo,{children:"="}),t.jsxs(e.mfrac,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"q"}),t.jsx(e.mi,{children:"t"})]}),t.jsxs(e.msubsup,{children:[t.jsx(e.mi,{children:"W"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mi,{children:"e"}),t.jsx(e.mi,{children:"a"}),t.jsx(e.mi,{children:"t"})]}),t.jsx(e.mi,{children:"Q"})]}),t.jsx(e.mo,{children:""}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsxs(e.msub,{children:[t.jsxs(e.mover,{accent:"true",children:[t.jsx(e.mi,{children:"z"}),t.jsx(e.mo,{children:"^"})]}),t.jsx(e.mi,{children:"f"})]}),t.jsxs(e.msubsup,{children:[t.jsx(e.mi,{children:"W"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mi,{children:"e"}),t.jsx(e.mi,{children:"a"}),t.jsx(e.mi,{children:"t"})]}),t.jsx(e.mi,{children:"K"})]}),t.jsxs(e.msup,{children:[t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mi,{children:"T"})]})]}),t.jsx(e.msqrt,{children:t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"d"}),t.jsx(e.mi,{children:"m"})]}),t.jsx(e.mi,{children:"o"}),t.jsx(e.mi,{children:"d"}),t.jsx(e.mi,{children:"e"}),t.jsx(e.mi,{children:"l"})]})})]})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"u_f = \\frac{q_t W^Q_{feat} \\cdot (\\hat{z}_f W^K_{feat})^T}{\\sqrt{d_model}}"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.7167em",verticalAlign:"-0.2861em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"u"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"2.7167em",verticalAlign:"-0.93em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mopen nulldelimiter"}),t.jsx(e.span,{className:"mfrac",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"1.7867em"},children:[t.jsxs(e.span,{style:{top:"-2.2528em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"mord",children:t.jsx(e.span,{className:"mord sqrt",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"0.8572em"},children:[t.jsxs(e.span,{className:"svg-align",style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsxs(e.span,{className:"mord",style:{paddingLeft:"0.833em"},children:[t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"d"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.1514em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"m"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mord mathnormal",children:"o"}),t.jsx(e.span,{className:"mord mathnormal",children:"d"}),t.jsx(e.span,{className:"mord mathnormal",children:"e"}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.01968em"},children:"l"})]})]}),t.jsxs(e.span,{style:{top:"-2.8172em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"hide-tail",style:{minWidth:"0.853em",height:"1.08em"},children:t.jsx(e.svg,{xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"1.08em",viewBox:"0 0 400000 1080",preserveAspectRatio:"xMinYMin slice",children:t.jsx(e.path,{d:`M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z`})})})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.1828em"},children:t.jsx(e.span,{})})})]})})})]}),t.jsxs(e.span,{style:{top:"-3.23em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),t.jsxs(e.span,{style:{top:"-3.8274em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"W"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"0.9592em"},children:[t.jsxs(e.span,{style:{top:"-2.3987em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"e"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"a"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})]})})]}),t.jsxs(e.span,{style:{top:"-3.1809em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"Q"})})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.4374em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),t.jsx(e.span,{className:"mbin",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord accent",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsxs(e.span,{className:"vlist",style:{height:"0.6944em"},children:[t.jsxs(e.span,{style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.04398em"},children:"z"})]}),t.jsxs(e.span,{style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"accent-body",style:{left:"-0.1944em"},children:t.jsx(e.span,{className:"mord",children:"^"})})]})]})})})}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.044em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"W"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"0.8413em"},children:[t.jsxs(e.span,{style:{top:"-2.4169em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"e"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"a"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})]})})]}),t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.07153em"},children:"K"})})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.4192em"},children:t.jsx(e.span,{})})})]})})]}),t.jsxs(e.span,{className:"mclose",children:[t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.8413em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.13889em"},children:"T"})})]})})})})})]})]})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.93em"},children:t.jsx(e.span,{})})})]})}),t.jsx(e.span,{className:"mclose nulldelimiter"})]})]})]})]})}),`
`,t.jsx(e.span,{className:"katex-display",children:t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:""}),t.jsx(e.mo,{children:"="}),t.jsx(e.mtext,{children:"softmax"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mo,{stretchy:"false",children:"["}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"u"}),t.jsx(e.mn,{children:"1"})]}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{mathvariant:"normal",children:"."}),t.jsx(e.mi,{mathvariant:"normal",children:"."}),t.jsx(e.mi,{mathvariant:"normal",children:"."}),t.jsx(e.mo,{separator:"true",children:","}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"u"}),t.jsx(e.mi,{children:"F"})]}),t.jsx(e.mo,{stretchy:"false",children:"]"}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\beta = \\text{softmax}([u_1, ..., u_F])"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05278em"},children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"softmax"})}),t.jsx(e.span,{className:"mopen",children:"(["}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"u"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3011em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:"1"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord",children:"..."}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"u"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3283em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.13889em"},children:"F"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mclose",children:"])"})]})]})]})}),`
`,t.jsxs(e.p,{children:["The final context vector ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"c"}),t.jsx(e.mi,{children:"t"})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"c_t"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.5806em",verticalAlign:"-0.15em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"c"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})]})})]})," is the weighted sum of the dynamically scaled features:"]}),`
`,t.jsx(e.span,{className:"katex-display",children:t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"c"}),t.jsx(e.mi,{children:"t"})]}),t.jsx(e.mo,{children:"="}),t.jsxs(e.munderover,{children:[t.jsx(e.mo,{children:""}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{children:"="}),t.jsx(e.mn,{children:"1"})]}),t.jsx(e.mi,{children:"F"})]}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:""}),t.jsx(e.mi,{children:"f"})]}),t.jsxs(e.msub,{children:[t.jsxs(e.mover,{accent:"true",children:[t.jsx(e.mi,{children:"z"}),t.jsx(e.mo,{children:"^"})]}),t.jsx(e.mi,{children:"f"})]})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"c_t = \\sum_{f=1}^{F} \\beta_f \\hat{z}_f"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.5806em",verticalAlign:"-0.15em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"c"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"3.2666em",verticalAlign:"-1.4382em"}}),t.jsx(e.span,{className:"mop op-limits",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"1.8283em"},children:[t.jsxs(e.span,{style:{top:"-1.8479em",marginLeft:"0em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3.05em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mrel mtight",children:"="}),t.jsx(e.span,{className:"mord mtight",children:"1"})]})})]}),t.jsxs(e.span,{style:{top:"-3.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3.05em"}}),t.jsx(e.span,{children:t.jsx(e.span,{className:"mop op-symbol large-op",children:""})})]}),t.jsxs(e.span,{style:{top:"-4.3em",marginLeft:"0em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3.05em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.13889em"},children:"F"})})})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"1.4382em"},children:t.jsx(e.span,{})})})]})}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05278em"},children:""}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0528em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord accent",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsxs(e.span,{className:"vlist",style:{height:"0.6944em"},children:[t.jsxs(e.span,{style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.04398em"},children:"z"})]}),t.jsxs(e.span,{style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"accent-body",style:{left:"-0.1944em"},children:t.jsx(e.span,{className:"mord",children:"^"})})]})]})})})}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.044em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10764em"},children:"f"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]})]})]})]})}),`
`,t.jsx(e.h3,{children:"Algorithmic Implementation Strategy"}),`
`,t.jsx(e.p,{children:"While I have not yet implemented the full CUDA kernels for optimized routing, the PyTorch implementation logic is straightforward. The complexity lies in efficiently managing the memory pointers for the different scales so we don't explode VRAM."}),`
`,t.jsx(e.p,{children:"Here is how I anticipate the forward pass looking in code:"}),`
`,t.jsx(e.pre,{children:t.jsxs(e.code,{className:"hljs language-python",children:[t.jsx(e.span,{className:"hljs-keyword",children:"class"})," ",t.jsx(e.span,{className:"hljs-title class_",children:"FeatureScaleCoAttention"}),`(nn.Module):
    `,t.jsx(e.span,{className:"hljs-keyword",children:"def"})," ",t.jsx(e.span,{className:"hljs-title function_",children:"__init__"}),"(",t.jsx(e.span,{className:"hljs-params",children:"self, d_model, num_features, num_scales"}),`):
        `,t.jsx(e.span,{className:"hljs-built_in",children:"super"}),`().__init__()
        `,t.jsx(e.span,{className:"hljs-comment",children:"# Projections for Stage 1 (Scale Selection)"}),`
        `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.w_q_scale = nn.Linear(d_model, d_model)
        `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.w_k_scale = nn.Linear(d_model, d_model)
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# Projections for Stage 2 (Feature Selection)"}),`
        `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.w_q_feat = nn.Linear(d_model, d_model)
        `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.w_k_feat = nn.Linear(d_model, d_model)

    `,t.jsx(e.span,{className:"hljs-keyword",children:"def"})," ",t.jsx(e.span,{className:"hljs-title function_",children:"forward"}),"(",t.jsx(e.span,{className:"hljs-params",children:"self, query, multi_scale_inputs"}),`):
        `,t.jsx(e.span,{className:"hljs-string",children:`"""
        query: [Batch, d_model]
        multi_scale_inputs: [Batch, Features, Scales, d_model]
        """`}),`
        B, F, S, D = multi_scale_inputs.shape
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# --- STAGE 1: Scale Routing ---"}),`
        `,t.jsx(e.span,{className:"hljs-comment",children:"# Which time-resolution matters for each feature?"}),`
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# Q: [B, 1, 1, D] -> broadcast across features/scales"}),`
        Q_s = `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),".w_q_scale(query).view(B, ",t.jsx(e.span,{className:"hljs-number",children:"1"}),", ",t.jsx(e.span,{className:"hljs-number",children:"1"}),`, D) 
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# K: [B, F, S, D]"}),`
        K_s = `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.w_k_scale(multi_scale_inputs)
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# Attention scores over the 'Scales' dimension (dim=2)"}),`
        scale_scores = torch.matmul(Q_s, K_s.transpose(-`,t.jsx(e.span,{className:"hljs-number",children:"1"}),", -",t.jsx(e.span,{className:"hljs-number",children:"2"}),")) / (D**",t.jsx(e.span,{className:"hljs-number",children:"0.5"}),`)
        scale_weights = torch.softmax(scale_scores, dim=`,t.jsx(e.span,{className:"hljs-number",children:"2"}),") ",t.jsx(e.span,{className:"hljs-comment",children:"# [B, F, S, 1]"}),`
        
        `,t.jsx(e.span,{className:"hljs-comment",children:'# Weighted sum to get "Best Scale Representation" for each feature'}),`
        `,t.jsx(e.span,{className:"hljs-comment",children:"# z_hat: [B, F, D]"}),`
        z_hat = (scale_weights * multi_scale_inputs).`,t.jsx(e.span,{className:"hljs-built_in",children:"sum"}),"(dim=",t.jsx(e.span,{className:"hljs-number",children:"2"}),`)
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# --- STAGE 2: Feature Routing ---"}),`
        `,t.jsx(e.span,{className:"hljs-comment",children:"# Which feature matters for this query?"}),`
        
        Q_f = `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),".w_q_feat(query).unsqueeze(",t.jsx(e.span,{className:"hljs-number",children:"1"}),") ",t.jsx(e.span,{className:"hljs-comment",children:"# [B, 1, D]"}),`
        K_f = `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),".w_k_feat(z_hat)              ",t.jsx(e.span,{className:"hljs-comment",children:"# [B, F, D]"}),`
        
        feat_scores = torch.matmul(Q_f, K_f.transpose(-`,t.jsx(e.span,{className:"hljs-number",children:"1"}),", -",t.jsx(e.span,{className:"hljs-number",children:"2"}),")) / (D**",t.jsx(e.span,{className:"hljs-number",children:"0.5"}),`)
        feat_weights = torch.softmax(feat_scores, dim=`,t.jsx(e.span,{className:"hljs-number",children:"2"}),") ",t.jsx(e.span,{className:"hljs-comment",children:"# [B, 1, F]"}),`
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# Final Context"}),`
        context = torch.matmul(feat_weights, z_hat).squeeze(`,t.jsx(e.span,{className:"hljs-number",children:"1"}),") ",t.jsx(e.span,{className:"hljs-comment",children:"# [B, D]"}),`
        
        `,t.jsx(e.span,{className:"hljs-keyword",children:"return"}),` context, scale_weights, feat_weights
`]})}),`
`,t.jsx(e.h3,{children:"Why This Is Promising (IMO)"}),`
`,t.jsx(e.p,{children:"The primary criticism of attention mechanisms in time series is their quadratic complexity and their tendency to overfit to noise. FSCA addresses both:"}),`
`,t.jsxs(e.ol,{children:[`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Sparsity as a Prior:"}),' By explicitly separating scales, we force the model to be sparse in the frequency domain. It cannot easily "smear" a high-frequency signal over a low-frequency dependency.']}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Interpretability:"})," The weights ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:""})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\alpha"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.4306em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.0037em"},children:""})]})})]})," and ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:""})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\beta"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05278em"},children:""})]})})]}),' provide an explicit audit trail. We can inspect the model and see, for example, that during high-volatility regimes, the model shifts its attention to the finest-grained scales of the "Price" feature, while ignoring the fine-grained scales of "Sentiment."']}),`
`]}),`
`,t.jsx(e.p,{children:"To understand the mathematical underpinnings of why multi-scale attention is necessary for capturing long-range dependencies, this lecture on the theory of attention is highly relevant:"}),`
`,t.jsx(Te,{id:"AIiwuClvH6k",title:"Attention Mechanisms and Memory in Deep Learning (DeepMind)"}),`
`,t.jsx(e.h3,{children:"Next Steps and Open Questions"}),`
`,t.jsxs(e.p,{children:["The immediate challenge in building this is ",t.jsx(e.strong,{children:"causality"}),". When pre-computing scales (e.g., a 1-hour aggregation), we must be rigorously careful that the aggregation at time ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"t"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"t"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6151em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"t"})]})})]})," does not leak information from ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"t"}),t.jsx(e.mo,{children:"+"}),t.jsx(e.mn,{children:"1"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"t+1"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6984em",verticalAlign:"-0.0833em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"t"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),t.jsx(e.span,{className:"mbin",children:"+"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6444em"}}),t.jsx(e.span,{className:"mord",children:"1"})]})]})]}),". The scales must be computed using strictly causal convolutions or right-aligned rolling windows."]}),`
`,t.jsxs(e.p,{children:['Furthermore, I anticipate that optimizing the "Scale Routing" stage will require a custom CUDA kernel if the number of scales ',t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"S"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"S"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6833em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"})]})})]})," becomes large (>10), otherwise, the memory overhead of materializing the tensor ",t.jsx(e.code,{children:"[Batch, Features, Scales, d_model]"})," will be prohibitive."]}),`
`,t.jsx(e.p,{children:'I plan to begin prototyping this on the "Weather" and "Exchange Rate" datasets from the standard Informer benchmarks. If the hypothesis holds, we should see a lower MSE specifically in scenarios where the driver of the target variable shifts frequencies over time.'})]})}function hR(s={}){const{wrapper:e}={...ee(),...s.components};return e?t.jsx(e,{...s,children:t.jsx(Jf,{...s})}):Jf(s)}const mR={title:"THE QUARTET",category:"SCIENCE",date:"2025.11.22",excerpt:"AN EFFECTFUL ARCHITECTURE FOR PROGRAMMABLE DISCOVERY."},dR="6 MIN";function ex(s){const e={annotation:"annotation",code:"code",em:"em",h3:"h3",h4:"h4",hr:"hr",li:"li",math:"math",mi:"mi",mo:"mo",mrow:"mrow",mspace:"mspace",msub:"msub",msup:"msup",mtext:"mtext",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...ee(),...s.components};return t.jsxs(t.Fragment,{children:[t.jsx(e.h3,{children:t.jsx(e.strong,{children:"Abstract"})}),`
`,t.jsxs(e.p,{children:["We present a toolkit for systematizing computational inquiry: a ",t.jsx(e.strong,{children:"modular, type-safe effect system"})," of four servicesTyped Inverse Design Grammar (TIDG), Functorial Scientific Computing (FSC), Rosetta Calculus (RC), and Universal Operator Algebra (UOA)whose Active Inference handler makes falsification first-class and paradigm shifts structurally explicit, providing a blueprint for verifiable scientific computation."]}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h3,{children:t.jsx(e.strong,{children:"1. Introduction: The Compositionality Crisis in Scientific Computing"})}),`
`,t.jsx(e.p,{children:"Modern computational science suffers a paradox: individual toolsdeep learning surrogates, geometric feature extractors, symbolic integratorsare more powerful than ever, yet their integration remains artisanal. Pipelines are brittle, irreproducibility is endemic, and there is no formal algebra for failure. When a simulation diverges or a feature extractor encounters a singular manifold, the failure is external to the system, logged in a notebook rather than reflected in the architecture."}),`
`,t.jsxs(e.p,{children:["Scientific inquiry is an ",t.jsx(e.strong,{children:"effectful computation"}),": it reads and writes state (prior knowledge), samples from distributions (hypothesis generation), and throws exceptions (falsification). To automate discovery, we need an ",t.jsx(e.strong,{children:"effect system"})," that makes these phenomena ",t.jsx(e.strong,{children:"type-safe, composable, and computable"}),"."]}),`
`,t.jsxs(e.p,{children:["We introduce the Quartet as a concrete effect signature and show how its handler formalizes the scientific loop as variational free energy minimization, where paradigm shifts are not bugs but ",t.jsx(e.strong,{children:"phase transitions in the handler's interpretation"}),"."]}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h3,{children:t.jsxs(e.strong,{children:["2. The Base Category: ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{mathvariant:"bold",children:"S"}),t.jsx(e.mi,{mathvariant:"bold",children:"c"}),t.jsx(e.mi,{mathvariant:"bold",children:"i"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\mathbf{Sci}"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6944em"}}),t.jsx(e.span,{className:"mord",children:t.jsx(e.span,{className:"mord mathbf",children:"Sci"})})]})})]})," as a Type System"]})}),`
`,t.jsxs(e.p,{children:["Objects in ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{mathvariant:"bold",children:"S"}),t.jsx(e.mi,{mathvariant:"bold",children:"c"}),t.jsx(e.mi,{mathvariant:"bold",children:"i"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\mathbf{Sci}"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6944em"}}),t.jsx(e.span,{className:"mord",children:t.jsx(e.span,{className:"mord mathbf",children:"Sci"})})]})})]})," are ",t.jsx(e.strong,{children:"type spaces"}),": ",t.jsx(e.code,{children:"Spec"})," (design intents), ",t.jsx(e.code,{children:"Program"})," (generative code), ",t.jsx(e.code,{children:"Data"})," (simulation outputs), ",t.jsx(e.code,{children:"Feature"})," (invariant sheaves), ",t.jsx(e.code,{children:"Law"})," (dynamical operators). Morphisms are deterministic, well-typed transformations (e.g., ",t.jsx(e.code,{children:"compile: Program  Data"}),"). ",t.jsxs(e.strong,{children:["Crucially, ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{mathvariant:"bold",children:"S"}),t.jsx(e.mi,{mathvariant:"bold",children:"c"}),t.jsx(e.mi,{mathvariant:"bold",children:"i"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\mathbf{Sci}"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6944em"}}),t.jsx(e.span,{className:"mord",children:t.jsx(e.span,{className:"mord mathbf",children:"Sci"})})]})})]})," contains no effects."]})," All side-channel communicationlogging, uncertainty, failureflows through an explicit effect signature."]}),`
`,t.jsx(e.p,{children:"This separation of concerns ensures that domain logic (physics, geometry) is independent of execution strategy (parallel, stochastic, retried), enabling modular verification."}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h3,{children:t.jsx(e.strong,{children:"3. The Quartet as Effectful Services"})}),`
`,t.jsxs(e.p,{children:["Each component of the Quartet is a ",t.jsx(e.strong,{children:"Kleisli morphism"})," ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"A"}),t.jsx(e.mo,{children:""}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"M"}),t.jsx(e.mi,{mathvariant:"normal",children:""})]}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"B"}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"A \\to M_\\Sigma(B)"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6833em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"A"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3283em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.109em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:""})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05017em"},children:"B"}),t.jsx(e.span,{className:"mclose",children:")"})]})]})]}),", where ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"M"}),t.jsx(e.mi,{mathvariant:"normal",children:""})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"M_\\Sigma"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3283em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.109em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:""})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})]})})]})," carries a row-polymorphic effect signature ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{mathvariant:"normal",children:""}),t.jsx(e.mo,{children:"="}),t.jsx(e.mo,{stretchy:"false",children:""}),t.jsx(e.mtext,{children:"State"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mtext,{children:"Prob"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mtext,{children:"Except"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mtext,{children:"Trace"}),t.jsx(e.mo,{stretchy:"false",children:""})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\Sigma = \\langle \\text{State}, \\text{Prob}, \\text{Except}, \\text{Trace} \\rangle"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6833em"}}),t.jsx(e.span,{className:"mord",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mopen",children:""}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"State"})}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"Prob"})}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"Except"})}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"Trace"})}),t.jsx(e.span,{className:"mclose",children:""})]})]})]}),"."]}),`
`,t.jsx(e.h4,{children:t.jsx(e.strong,{children:"3.1 TIDG: The Generative Effect"})}),`
`,t.jsx(e.pre,{children:t.jsx(e.code,{children:`TIDG: Spec  M_{_g}(Program)
where _g = State(Knowledge), Prob(Prior), Except(TypeError), Trace(Proposals)
`})}),`
`,t.jsxs(e.p,{children:["TIDG returns a ",t.jsx(e.strong,{children:"probability distribution over well-typed programs"}),", constrained by physical laws encoded as type refinements. The ",t.jsx(e.code,{children:"Except"})," effect handles ",t.jsx(e.strong,{children:"formal falsification at generation time"}),": if a program violates a conservation law, it returns ",t.jsx(e.code,{children:"TypeError"}),", short-circuiting the workflow. The ",t.jsx(e.code,{children:"Trace"})," effect logs ",t.jsx(e.em,{children:"why"})," a proposal failed, providing gradient information for the next iteration."]}),`
`,t.jsxs(e.p,{children:[t.jsx(e.em,{children:"Example"}),": ",t.jsx(e.code,{children:'TIDG("cathode material")'})," yields a distribution over crystal structures, down-weighting those whose space groups previously led to spectral instabilities in UOA."]}),`
`,t.jsx(e.h4,{children:t.jsx(e.strong,{children:"3.2 FSC: The Evaluation Effect"})}),`
`,t.jsx(e.pre,{children:t.jsx(e.code,{children:`FSC: Program  M_{_e}(Data)
where _e = State(Resources), Prob(Noise), Except(ConvergenceError), Trace(Metrics)
`})}),`
`,t.jsxs(e.p,{children:["FSC compiles and runs the program. The ",t.jsx(e.code,{children:"Prob"})," effect models ",t.jsx(e.strong,{children:"aleatoric uncertainty"}),": numerical errors, chaotic divergence, stochastic initial conditions. ",t.jsx(e.code,{children:"Except"})," catches non-convergence, and ",t.jsx(e.code,{children:"Trace"})," records computational costcritical for Bayesian optimization."]}),`
`,t.jsxs(e.p,{children:[t.jsx(e.em,{children:"Example"}),": ",t.jsx(e.code,{children:"FSC(program)"})," returns an ensemble of trajectories, not a single run. The handler can retry with refined tolerances if variance is too high."]}),`
`,t.jsx(e.h4,{children:t.jsx(e.strong,{children:"3.3 RC: The Perception Effect"})}),`
`,t.jsx(e.pre,{children:t.jsx(e.code,{children:`RC: Data  M_{_p}(Feature)
where _p = State(Observables), Prob(Likelihood), Except(StructureMismatch), Trace(Invariants)
`})}),`
`,t.jsxs(e.p,{children:["RC lifts data into invariant features. The ",t.jsx(e.code,{children:"Except"})," effect triggers if the data manifold violates the topos axioms (e.g., unexpected singularities), signaling that the ",t.jsx(e.strong,{children:"observational framework itself must change"}),"a mini paradigm shift."]}),`
`,t.jsxs(e.p,{children:[t.jsx(e.em,{children:"Example"}),": ",t.jsx(e.code,{children:"RC(sim_data)"})," might return ",t.jsx(e.code,{children:"StructureMismatch"})," if the data is not a smooth manifold, prompting TIDG to propose programs that generate cleaner topologies."]}),`
`,t.jsx(e.h4,{children:t.jsx(e.strong,{children:"3.4 UOA: The Inference Effect"})}),`
`,t.jsx(e.pre,{children:t.jsx(e.code,{children:`UOA: Feature  M_{_i}(Law)
where _i = State(Operators), Prob(Posterior), Except(SpectralInstability), Trace(Eigenmodes)
`})}),`
`,t.jsxs(e.p,{children:["UOA extracts dynamical laws via operator regression. ",t.jsx(e.code,{children:"Prob"})," captures ",t.jsx(e.strong,{children:"epistemic uncertainty"})," in the operator's spectrum. ",t.jsx(e.code,{children:"Except"})," flags spectral instabilities that indicate inadequate features, feeding back to RC."]}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h3,{children:t.jsx(e.strong,{children:"4. The Effect Handler: Active Inference as a Control Loop"})}),`
`,t.jsxs(e.p,{children:['The "scientific loop" is not a monadic law but a ',t.jsx(e.strong,{children:"handler"})," that interprets the effect signature:"]}),`
`,t.jsx(e.span,{className:"katex-display",children:t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mtext,{children:"Handler"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"A"}),t.jsx(e.mi,{children:"I"})]})]}),t.jsx(e.mo,{children:":"}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"M"}),t.jsx(e.mi,{mathvariant:"normal",children:""})]}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"X"}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mo,{children:""}),t.jsx(e.mtext,{children:"FreeEnergy"}),t.jsx(e.mo,{children:""}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"X"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mtext,{children:"Knowledge"}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\text{Handler}_{AI}: M_\\Sigma(X) \\times \\text{FreeEnergy} \\to (X, \\text{Knowledge})"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8444em",verticalAlign:"-0.15em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"Handler"})}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3283em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",children:"A"}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.07847em"},children:"I"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:":"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3283em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.109em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:""})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),t.jsx(e.span,{className:"mbin",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"FreeEnergy"})}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"Knowledge"})}),t.jsx(e.span,{className:"mclose",children:")"})]})]})]})}),`
`,t.jsx(e.p,{children:"The handler:"}),`
`,t.jsxs(e.ol,{children:[`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Executes"})," the Kleisli chain ",t.jsx(e.code,{children:"TIDG = FSC = RC = UOA"}),"."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Accumulates"})," effects into a shared ",t.jsx(e.code,{children:"Knowledge"})," store."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Computes"})," variational free energy ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"F"}),t.jsx(e.mo,{children:"="}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"D"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"K"}),t.jsx(e.mi,{children:"L"})]})]}),t.jsx(e.mo,{stretchy:"false",children:"["}),t.jsx(e.mi,{children:"q"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mtext,{children:"Law"}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mo,{children:""}),t.jsx(e.mi,{children:"p"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mtext,{children:"Law"}),t.jsx(e.mo,{children:""}),t.jsx(e.mtext,{children:"Data"}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mo,{stretchy:"false",children:"]"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"F = D_{KL}[q(\\text{Law}) \\parallel p(\\text{Law} \\mid \\text{Data})]"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6833em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"F"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"D"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3283em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0278em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.07153em"},children:"K"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"L"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mopen",children:"["}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"Law"})}),t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"p"}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"Law"})}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"Data"})}),t.jsx(e.span,{className:"mclose",children:")]"})]})]})]}),"."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Updates"})," the generative prior in TIDG to minimize ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"F"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"F"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6833em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"F"})]})})]}),"."]}),`
`]}),`
`,t.jsxs(e.p,{children:[t.jsx(e.strong,{children:"Key architectural feature"}),": The handler can ",t.jsx(e.strong,{children:"swap effect interpretations"})," based on phase. During ",t.jsx(e.strong,{children:"normal science"}),", ",t.jsx(e.code,{children:"Except"})," is caught and logged. During ",t.jsx(e.strong,{children:"crisis"}),", ",t.jsx(e.code,{children:"Except(StructureMismatch)"})," triggers a ",t.jsx(e.strong,{children:"phase transition"}),": the handler loads a new effect row ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msup,{children:[t.jsx(e.mi,{mathvariant:"normal",children:""}),t.jsx(e.mo,{mathvariant:"normal",lspace:"0em",rspace:"0em",children:""})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\Sigma'"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.7519em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord",children:""}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.7519em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:t.jsx(e.span,{className:"mord mtight",children:""})})})]})})})})})]})]})})]}),", effectively changing the type system itself (e.g., from Euclidean to Lorentzian geometry). This formalizes Kuhn: paradigm shifts are ",t.jsx(e.strong,{children:"handlers being replaced"}),"."]}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h3,{children:t.jsx(e.strong,{children:"5. Non-Associativity and the Algebra of Revolution"})}),`
`,t.jsxs(e.p,{children:["Associativity is a law of ",t.jsx(e.strong,{children:"modular science"})," within a phase:"]}),`
`,t.jsx(e.span,{className:"katex-display",children:t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"g"}),t.jsx(e.mo,{children:""}),t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mo,{children:""}),t.jsx(e.mi,{children:"h"}),t.jsx(e.mo,{children:"="}),t.jsx(e.mi,{children:"g"}),t.jsx(e.mo,{children:""}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{children:""}),t.jsx(e.mi,{children:"h"}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mspace,{width:"1em"}),t.jsx(e.mtext,{children:"(sametypesystem)"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"(g \\circ f) \\circ h = g \\circ (f \\circ h) \\quad \\text{(same type system)}"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),t.jsx(e.span,{className:"mbin",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),t.jsx(e.span,{className:"mbin",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6944em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"h"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6389em",verticalAlign:"-0.1944em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"g"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),t.jsx(e.span,{className:"mbin",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),t.jsx(e.span,{className:"mbin",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"h"}),t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"1em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"(sametypesystem)"})})]})]})]})}),`
`,t.jsxs(e.p,{children:["But it ",t.jsx(e.strong,{children:"fails across phase boundaries"}),". Revolutionary science is ",t.jsx(e.strong,{children:"non-associative"}),": the meaning of ",t.jsx(e.code,{children:"g"})," changes after ",t.jsx(e.code,{children:"f"})," redefines the observables. The architecture handles this by ",t.jsx(e.strong,{children:"reifying phases as first-class objects"})," in ",t.jsx(e.code,{children:"Knowledge"}),". A workflow is not a single arrow but a ",t.jsx(e.strong,{children:"span"})," across phases. The handler ensures ",t.jsx(e.strong,{children:"coherence"}),", not associativity, at phase boundaries."]}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h3,{children:t.jsx(e.strong,{children:"6. Computational Reality: Approximation and Tractability"})}),`
`,t.jsxs(e.p,{children:["The full Giry monad is uncomputable. In practice, the ",t.jsx(e.code,{children:"Prob"})," effect is ",t.jsx(e.strong,{children:"approximated"})," via particle filters, variational inference, and ensemble Kalman methods. The handler's contract is ",t.jsx(e.strong,{children:"asymptotic"}),": guarantees hold in the limit of infinite compute, but the architecture is designed to ",t.jsx(e.strong,{children:"bound approximation error"})," at each step. The ",t.jsx(e.code,{children:"Trace"})," effect logs ",t.jsx(e.strong,{children:"empirical KL divergences"}),", exposing where approximations break downcrucial for debugging scientific computation."]}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h3,{children:t.jsx(e.strong,{children:"7. Implementation Sketch: A Handler in Pseudo-Code"})}),`
`,t.jsx(e.pre,{children:t.jsx(e.code,{children:`-- Effect signature row (polymorphic)
type SciEffects r = (State Knowledge, Prob, Except Error, Trace) | r

-- Kleisli workflow: pure composition, no explicit effect handling
workflow :: Spec -> M (SciEffects r) Law
workflow spec = do
    prog <- TIDG spec          -- can throw TypeError
    data <- FSC prog           -- can throw ConvergenceError
    feat <- RC data            -- can throw StructureMismatch
    law <- UOA feat            -- can throw SpectralInstability
    return law

-- Handler: interprets effects, updates knowledge, manages phases
runDiscovery :: Knowledge -> Spec -> (Knowledge, Either Error Law)
runDiscovery initialK spec = loop initialK 0
  where
    loop k iter = do
      let (effs, result) = runM workflow spec
          k' = updateKnowledge k effs          -- marginalize, log traces
          fe = computeFreeEnergy k' result     -- variational bound
      case checkPhaseTransition k' fe of
        Just newPhase -> runDiscovery (switchPhase k' newPhase) spec
        Nothing
          | converged fe -> (k', result)
          | iter > maxIter -> (k', Left "Max iterations")
          | otherwise -> loop (adjustPrior k' fe) (iter+1)
`})}),`
`,t.jsxs(e.p,{children:["The scientist writes ",t.jsx(e.code,{children:"workflow"}),"; the architecture handles the rest. The ",t.jsx(e.code,{children:"Trace"})," effect provides an ",t.jsx(e.strong,{children:"audit log"})," for reproducibility."]}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h3,{children:t.jsx(e.strong,{children:"8. Conclusion: Towards a Platform for Programmable Discovery"})}),`
`,t.jsxs(e.p,{children:["The Quartet is not a theorem to be proven but an ",t.jsx(e.strong,{children:"effect system to be implemented"}),". Its value lies in ",t.jsx(e.strong,{children:"architectural guarantees"}),":"]}),`
`,t.jsxs(e.ul,{children:[`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Falsifiability"}),": ",t.jsx(e.code,{children:"Except"})," makes failure a structural update."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Uncertainty"}),": ",t.jsx(e.code,{children:"Prob"})," makes Bayesian reasoning executable."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Modularity"}),": Row polymorphism lets teams improve RC without breaking UOA."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Revolution"}),": Phase transitions make paradigm shifts explicit and programmable."]}),`
`]}),`
`,t.jsxs(e.p,{children:["By treating discovery as a type-and-effect problem, we move from speculative formalism to a ",t.jsx(e.strong,{children:"concrete blueprint"})," for scientific software. The goal is not to automate discovery as a law, but to ",t.jsx(e.strong,{children:"build the algebra on which discovery can run"}),"type-safe, verifiable, and ready for the age of automated science."]})]})}function uR(s={}){const{wrapper:e}={...ee(),...s.components};return e?t.jsx(e,{...s,children:t.jsx(ex,{...s})}):ex(s)}const pR={title:"POST-DARWINIAN FRUSTRATIONS",category:"PHILOSOPHY",date:"2025.10.14",excerpt:"NATURAL SELECTION GAVE US NEEDLESS SUFFERING, AND WE HAVE THE RESPONSIBILITY TO REDESIGN WHAT IT LEFT BEHIND."},fR="8 MIN";function tx(s){const e={p:"p",...ee(),...s.components};return t.jsxs(t.Fragment,{children:[t.jsx(e.p,{children:"Post-Darwinian Frustrations, with David Pearce in the Room"}),`
`,t.jsx(e.p,{children:"I keep circling back to the same discomfort. Evolution explains a lot about how we move and think, but it explains almost nothing about what we ought to aim for. Natural selection is an account of survival and reproductive success, not an account of justice, dignity, or how to arrange a world worth living in. The fact that we treat that mismatch as normal feels like a moral failure to me, and that failure is the starting point for the argument I want to make."}),`
`,t.jsx(e.p,{children:"If you want a clear and uncompromising diagnosis of the problem, read David Pearce. He is the British philosopher who made the case publicly for what he calls the Hedonistic Imperative."}),`
`,t.jsx(Te,{id:"v07VZIQyoMc",title:"The Hedonistic Imperative"}),`
`,t.jsx(e.p,{children:"The basic claim is straightforward and radical at the same time. Pain, suffering, and negative affect are features of the nervous systems evolution produced. They are not sacred necessities. With the tools of biotechnology, neuropharmacology, and genetic engineering we can change the architecture that gives rise to suffering. Pearce calls for a sustained moral project to do exactly that, aiming ultimately to remove involuntary suffering wherever feasible. He frames this as an engineering challenge and an ethical obligation."}),`
`,t.jsx(e.p,{children:"I find Pearce persuasive in a way that is uncomfortable and energizing. I am not attracted to technological novelty for its own sake. What draws me is the ethical clarity. If suffering is something we can reduce without violating other fundamental values, then refusing to try is itself a moral choice. The world we inherit is full of moral blind spots that flow directly from our evolutionary history. Those blind spots are not small or incidental. They shape institutions, markets, and everyday interactions in ways that systematically disadvantage some people and reward others for arbitrary biological luck."}),`
`,t.jsx(e.p,{children:"Look at how we treat each other. Taller people, more conventionally attractive people, those with faces and bodies that scream reproductive fitness, tend to be taken more seriously. They get better hiring callbacks, higher status in social settings, more positive assumptions made about their competence. Shorter people, people with nonconforming bodies, those whose faces do not match a narrow ideal, are often overlooked or underestimated. These are not minor social preferences. They cascade into educational opportunities, career paths, and life outcomes. Underneath a lot of what we call merit there is a fog of biological signaling. That fog biases our institutions in ways that reproduce inequality."}),`
`,t.jsx(e.p,{children:"Sexual selection amplifies this. Traits that are sexually attractive can become conflated with moral worth, or with leadership credence, or with cultural capital. Social hierarchies form around cues that evolved for mating advantage, not fairness. That skew is quietly powerful. It shapes who gets to be heard, who gets resources, and who gets to set norms. Add to that the brutal facts of predation in the nonhuman world. Predators and prey create systems where suffering is routine and often prolonged. Wild ecosystems are not designed with human moral intuitions in mind. They are the result of blind processes that do not care about pain beyond what affects fitness."}),`
`,t.jsx(e.p,{children:"Putting these observations together leads me to a clear moral intuition. If the distribution of dignity, respect, and welfare is significantly influenced by arbitrary biological luck, then we have an obligation to change those structures. That obligation comes in two overlapping registers. One is technological. We should pursue biomedical tools that reduce or remove involuntary suffering. That might look like safer and more targeted pain treatments, neurointerventions that reduce chronic negative affect, or genetic approaches that reduce susceptibility to certain forms of trauma. It might also eventually look like large scale modification of affective systems in ways Pearce sketches, always with strict ethical safeguards."}),`
`,t.jsx(e.p,{children:"The other register is social and political. We need to decouple the allocation of respect, resources, and opportunity from crude biological signals. Policies can be rethought so that caregiving, long-term stewardship, and social contribution are rewarded regardless of the biology someone happens to carry. Institutions can be redesigned to account for bias against particular physical characteristics. Cultural practices that unduly weight attractiveness or dominance can be challenged by alternative norms and by structural incentives. In other words, technological interventions and institutional reforms should go together."}),`
`,t.jsx(e.p,{children:"This does not mean utopian complacency or an abdication to risk. Pearce himself insists on caution, on the importance of consent, and on the hard ethical work of deciding ends as well as means. I agree with those cautions. Altering hedonic systems will change motivation, tastes, aesthetics, personality structures, and political psychology. There will be winners and losers in different senses, and many of the winners and losers will not be obvious in advance. That demands democratic deliberation, transparency, and robust protections for vulnerable groups. It also demands humility. We should expect mistakes and be ready to correct course."}),`
`,t.jsx(e.p,{children:"At the same time, the argument that we should do nothing because we might err is a poor moral excuse for allowing needless suffering to persist. Failure to act is itself a choice with moral consequences. If we can reduce the most intense kinds of suffering in ways that preserve agency and pluralism, then the status quo becomes harder to justify. We should design institutions that minimize coercion and respect individual autonomy, while still aiming at wide distribution of the benefits of any successful interventions."}),`
`,t.jsx(e.p,{children:"There is another conclusion I want to state plainly. Once you look closely at nature, the idea that a loving deity is running a moral universe becomes less plausible. Predation, parasites, congenital suffering, and the casual cruelty baked into natural selection do not look like lessons from a benevolent tutor. They look like blind process. Saying this is not an argument for despair. It is an argument for responsibility. If no benevolent hand is steering outcomes, then the burden of care falls to us. That is a heavy burden, and also a clarifying one. It tells us where moral energy should be directed."}),`
`,t.jsx(e.p,{children:"I know some readers will find this frightening. Altering minds and bodies sounds like hubris to many. Others will worry about a loss of authenticity or about new forms of inequality. These concerns are real and must be taken seriously. That is why the ethical framework matters as much as the technical possibility. We must insist on democratic governance, on rigorous safety standards, on equitable access, and on a commitment to pluralism about what forms of flourishing people choose. We should also keep a critical eye on motivations. Technology used to entrench privilege or to coerce conformity is a moral disaster. Technology used to expand agency, reduce suffering, and broaden the range of meaningful lives is a moral project I can endorse."}),`
`,t.jsx(e.p,{children:"Finally, I want to push back on a subtle but powerful objection: that suffering is somehow morally productive, that it refines character, that hardship yields meaning in ways that technology could inadvertently erase. I take that seriously. The claim that suffering is sometimes connected to meaning does not mean suffering is necessary for meaning. We can imagine and construct forms of challenge, risk, and growth that do not rely on chronic pain or crushing despair. We can preserve narratives of resilience that are not rooted in avoidable harm. This is not an either or. It is about expanding the design space of human life so that meaning and dignity are not purchased with avoidable suffering."}),`
`,t.jsx(e.p,{children:"So here is the posture I want to adopt. Treat evolution as history, not moral authority. Read David Pearce and take seriously the Hedonistic Imperative as a spur, not as a dogma. Combine technological ambition with political prudence and ethical humility. Aim to reduce involuntary suffering, and reform our institutions so that biological luck has less sway over who gets dignity and who gets voice. Recognize that nature is not the same thing as the good, and then take responsibility for building something better."}),`
`,t.jsx(e.p,{children:"I am not offering a map with a single route. The terrain is complex and contested. I am offering a direction and an insistence. If suffering is, in large part, a historical artifact of blind process, then making it optional is one of the clearest moral tasks available to us. That task requires courage, care, and a willingness to confront uncomfortable truths about who we are and where we came from. It also offers a horizon where dignity is not limited by genetic luck, where the default of life is not suffering, and where our place in the cosmos is one of stewardship rather than resignation."})]})}function xR(s={}){const{wrapper:e}={...ee(),...s.components};return e?t.jsx(e,{...s,children:t.jsx(tx,{...s})}):tx(s)}const gR={title:"QUANTUM DETERMINISM",category:"PHILOSOPHY",date:"2025.11.02",excerpt:"JUST RECONCILING QUANTUM MECHANICS AND HARD DETERMINISM."},jR="5 MIN";function sx(s){const e={li:"li",ol:"ol",p:"p",...ee(),...s.components};return t.jsxs(t.Fragment,{children:[t.jsx(e.p,{children:"You know, Ive been thinking about where quantum mechanics and hard determinism even meet, and how messy that handshake can be. Below Ill sketch three main reconciliation paths, what each buys you, what it costs you, and where current debates sit. Ill keep it casual but not fluffy, and Ill flag recent work so you can follow up."}),`
`,t.jsxs(e.ol,{children:[`
`,t.jsx(e.li,{children:`Push determinism down into the physics: hidden variables and pilot waves
The simplest move if you are a hard determinist is to suppose quantum randomness is only apparent. Bohmian mechanics is the canonical example. It keeps the wavefunction evolving by Schrdingers equation while adding particle positions that follow deterministic trajectories. Observers see Born-rule statistics because of the distribution of initial conditions. This gives a clean, physical sort of determinism at the micro level, but it pays for that with explicit nonlocality and an ontology that some find inelegant. Recent expositions and technical treatments keep this approach alive and being refined. ([Stanford Encyclopedia of Philosophy][1])`}),`
`]}),`
`,t.jsx(e.p,{children:`Why this matters to hard determinism
If you accept Bohmian-style accounts, the world literally evolves by deterministic laws and so free will, moral responsibility, or whatever you want to hang on determinism can in principle be compatible with the physics. The rub is that you need to swallow nonlocal causal structure and accept that the wavefunction plays an odd, physically real role. ([PhilPapers][2])`}),`
`,t.jsxs(e.ol,{start:"2",children:[`
`,t.jsx(e.li,{children:`Keep unitary quantum mechanics but expand ontology: Everett and the determinism of branching worlds
Another natural route is Everettian or many-worlds thinking. The universal wavefunction evolves unitarily and deterministically. Measurement outcomes are not single, random events; they are branchings into many quasi-classical histories. Decoherence explains why branches look classical to us, but the conceptual sticky point is probability. If every outcome happens in some branch, why do we get the Born rule probabilities we do? Modern work focuses on decoherence, self-locating uncertainty, and decision-theoretic moves to derive Born-like behavior, and there are active 20242025 papers extending these arguments to more realistic, mixed-state settings. ([SpringerLink][3])`}),`
`]}),`
`,t.jsx(e.p,{children:`What this buys a hard determinist
It gives you determinism without adding hidden variables or explicit nonlocal signals. The universe is deterministic, but your lived experience is one branch among many. The cost is interpretive. You must accept a vast multiplicity of real outcomes, and you still need a convincing bridge from mathematical branch weights to subjective probabilities.`}),`
`,t.jsxs(e.ol,{start:"3",children:[`
`,t.jsx(e.li,{children:`Deny experimental independence: superdeterminism and conspiratorial initial conditions
A less popular but intellectually honest option is to say the usual statistical assumptions built into Bell tests are false. Superdeterminism claims the apparent randomness of measurement settings can be correlated with hidden properties of systems in a lawlike way, so Bell inequalities do not force indeterminism. Proponents have tried to make versions of this idea non-conspiratorial and lawlike recently. Critics push back that superdeterminism risks making science unfalsifiable or implausibly conspiratorial unless you supply a clear mechanism. There has been renewed technical and philosophical discussion in 20242025 about whether viable, non-fine-tuned superdeterministic models can exist. ([ResearchGate][4])`}),`
`]}),`
`,t.jsx(e.p,{children:`Why this is uncomfortable for many
It effectively trades probabilistic freedom for pre-established correlations. That can save hard determinism, but it also undermines the methodological assumptions that make experiments informative unless the superdeterministic theory gives positive, testable structure.`}),`
`,t.jsx(e.p,{children:`Some middle grounds and conceptual clarifications
 Compatibilist readings. You can separate physical determinism from moral or practical notions of freedom. Even if microphysics were indeterministic, some philosophical positions say free agency is compatible with either case.
 Epistemic randomness. Another tack is to treat quantum probabilities as epistemic, reflecting ignorance of deeper variables or coarse-graining. That moves the debate into the philosophy of probability.
 Emergence and effective determinism. Decoherence and thermodynamic limits can produce emergent classical trajectories that behave deterministically for all practical purposes even if the fundamental microphysics is indeterministic.`}),`
`,t.jsx(e.p,{children:`Where the disputes stand in the most recent work
The technical frontiers are not about whether one can invent deterministic models. Those exist. The hard parts are making those models natural, falsifiable, and explanatorily economical. For Everettian accounts the battleground is probability and the Born rule. For superdeterminism the battleground is non-conspiratorial construction and empirical content. For Bohmian programs the debates revolve around relativistic extensions, ontology, and whether nonlocality is acceptable. Recent papers in 2024 and 2025 push on each of these fronts rather than resolving them. ([arXiv][5])`}),`
`,t.jsx(e.p,{children:`A few intuitive metaphors to keep in mind
 Bohmian mechanics is like a river and labeled boats. The river, the wavefunction, guides boats, the particles, deterministically, even if from shore the boats look to arrive unpredictably.
 Everett is like a huge branching tree where every pruning produces another consistent story. The branching is deterministic, but your experience picks out a single path.
 Superdeterminism is like a traffic system where the traffic lights and drivers were coordinated from the initial design so accidents that violate certain rules never appear. It can work, but you need to explain the coordination without calling it magic.`}),`
`,t.jsx(e.p,{children:`Final personal reflection
I find none of these routes wholly satisfying in isolation. Bohmian mechanics gives determinism but forces you to accept nonlocal structure. Many-worlds preserves unitary determinism but leaves probability as an interpretive work in progress. Superdeterminism can save determinism at the price of very heavy assumptions about initial conditions or correlations. Maybe the most honest position is to acknowledge that physics offers multiple, viable conceptual packages that connect quantum formalism and determinism in different ways. What you prefer depends on what you are willing to sacrifice: locality, uniqueness of outcome, or methodological simplicity.`})]})}function yR(s={}){const{wrapper:e}={...ee(),...s.components};return e?t.jsx(e,{...s,children:t.jsx(sx,{...s})}):sx(s)}const vR={title:"WHAT IS SACRED?",category:"PHILOSOPHY",date:"2025.07.23",excerpt:"THE CLOSER WE GET TO THE EDGE OF WHAT PHYSICS CAN REVEAL, THE MORE IT FEELS AS THOUGH THE UNIVERSE IS INVITING US INTO A WORDLESS REVERENCE."},NR="10 MIN";function nx(s){const e={a:"a",h2:"h2",li:"li",ol:"ol",p:"p",...ee(),...s.components};return t.jsxs(t.Fragment,{children:[t.jsx(e.p,{children:"What is sacred, really? Sacredness is slippery, and that slipperiness is part of its power. It names the things we cannot (or will not) treat as mere means. It names what rearranges our identity when we violate it, what stills us with awe, what refuses to be priced, and what orients life in ways that ordinary preferences never quite do."}),`
`,t.jsx(e.p,{children:"Start there and you have most of the map. But the map needs landmarks. This inquiry suggests three useful moves. First, distinguish kinds of sacredness. Second, ask a practical litmus test for what survives being labeled sacred. Third, follow the psychological logic to a place where, for a naturalist, the only candidate that still feels religion-like is the frontier of physics and the knowledge of the cosmos. I will trace those moves, place ancient and modern thinkers along the way, and then try to explain, with as much clarity and feeling as I can muster, why the unfolding laws and edges of the physical universe can feel sacred at the deepest, existential level."}),`
`,t.jsx(e.h2,{children:"Two kinds of sacredness"}),`
`,t.jsx(e.p,{children:"One way to begin is to notice that the word sacred is doing two different jobs at once. On one hand it names declared sacredness, the objects of institutions. These are things that communities set apart by ritual, text and law. On the other hand it names experienced sacredness, those moments or phenomena that stop a single human being in her tracks. The distinction matters. Institutional sacredness is powerful because of collective practical effects. Monuments, scriptures, rituals anchor groups and coordinate behavior. Experienced sacredness is powerful because it bypasses permission; it arrives as personal conviction, a refusal to be casual about certain things."}),`
`,t.jsxs(e.p,{children:["Sociology, phenomenology and theology have all tried to capture this twofold shape. Durkheim famously analyzed religion as a social mechanism that distinguishes the sacred from the profane, and he treated sacred things as those that bind collective life and moral feeling. Mircea Eliade emphasized hierophany, moments in which the sacred manifests and breaks the ordinariness of time and space. William James took the other tack, examining the lived, often ineffable experience of the religious, the way certain states of consciousness instantiate a sense of absolute reality. Each account is partial, but together they show that sacredness sits at the intersection of social sanction, individual experience and phenomenological depth. (",t.jsx(e.a,{href:"https://durkheim.uchicago.edu/Summaries/forms.html?utm_source=chatgpt.com",title:"The Elementary Forms of the Religious Life (1912)",children:"durkheim.uchicago.edu"}),")"]}),`
`,t.jsx(e.p,{children:"Paul Tillichs phrase ultimate concern is particularly helpful here. Tillich argues that something becomes religious, or sacred, when it commands unconditional commitment. That helps to explain why not all values are sacred. A sandwich can be dearly liked; something like a promise, a life, or an instance of truth-telling can become ultimate in the sense that you would not trade it without feeling that you had betrayed yourself. Tillich recasts sacredness away from supernatural metaphysics and toward existential devotion."}),`
`,t.jsx(Te,{id:"NSXvXizcfJs",title:"Paul Tillich's Dynamics of Faith"}),`
`,t.jsx(e.h2,{children:"A practical test: what resists being used"}),`
`,t.jsx(e.p,{children:"From this perspective we get a test worth keeping in your pocket. Ask whether the thing in question can be treated as mere means. If the answer is yes, the thing is probably profane. If the answer is no, then you are in contact with something close to sacred. The test is phenomenological. Try describing what it feels like to marketize, instrumentalize or commodify the object. The queasy resistance you feel is diagnostic. That is the territory of sacredness. It explains why we instinctively bracket certain human gestures, rites and artworks against mere exchange."}),`
`,t.jsx(e.h2,{children:"Philosophical lineages that flirt with secular sacredness"}),`
`,t.jsx(e.p,{children:"There is a modern, modest lineage of thinkers who treat sacredness without invoking deities. Emerson and the Romantic tradition felt an immanent holiness in nature. Spinoza, in a very different register, converted reverence into a rationalized pantheism where God and Nature overlap. Twentieth century thinkers pushed this further. Tillich, as noted, secularized religious concern into an existential category. William James emphasized personal experience and pragmatic consequences. Eliade and Durkheim gave us social and phenomenological patterns to make sense of how sacredness is produced and sustained. These thinkers show that the sacred need not be otherworldly to be real. It can be an orientation, an attitude and a set of practices that surround certain facts of life with reverence."}),`
`,t.jsx(Te,{id:"HKDvwMe5fe4",title:"William James  Varieties of Religious Experience"}),`
`,t.jsx(e.h2,{children:"The secular sacral: consciousness, beauty and truth"}),`
`,t.jsx(e.p,{children:"If you remove supernatural claims, certain candidates recur across cultures and personal narratives. Consciousness, especially first-person awareness, often feels sacred because it is the locus of value. Beauty has a way of arresting us and inviting devotion. The fidelity of truth-telling, the presence of genuine connection, the rites around birth and death, and the split-second of awe before a vast vista all qualify. These are not mere preferences. They are, for many people, axioms in the moral geometry of living."}),`
`,t.jsx(e.h2,{children:"Why physics looks and feels like a religious frontier"}),`
`,t.jsx(e.p,{children:"Now for the pivot I promised. Suppose you accept the secular patterns I just sketched. Suppose you are a naturalist in the sense that you do not accept supernatural explanations but you do accept that there are things that demand reverence. For me and for many others the nearest thing to a religious-looking sacred is the frontier of physics, the ever-receding line of what we know about the universe and the deep laws that lie behind experience. I want to make that claim vivid and substantive, not sentimental."}),`
`,t.jsx(e.p,{children:"First, scale and contingency. Physics reveals a cosmos of staggering size and unfathomable timescales. It shows us that our existence is a tiny locus in a vast, mostly inhospitable universe, and yet that the material conditions for complexity and life are astonishingly delicate. That juxtaposition, of cosmic indifference and improbable local flourishing, creates a moral horizon. It amplifies awe. It creates a sense of fragility that is nearly sacred because it demands stewardship. Carl Sagans reflections on the Pale Blue Dot capture this emotional register like nothing else. If you have not felt the particular mix of humility and responsibility that follows seeing Earth as an island of life in a dark sea, the short reading of Sagans essay is essential viewing."}),`
`,t.jsx(Te,{id:"GO5FwsblpT8",title:"Carl Sagan's Pale Blue Dot"}),`
`,t.jsx(e.p,{children:"Second, the depth and the mystery. Physics does not merely enumerate facts; it reveals structures that are counterintuitive and beautiful. Quantum mechanics, general relativity, the cosmic microwave background, the standard model, dark matter and dark energy are discoveries that change the architecture of our imagination. When a theory reconfigures what we think is possible, it creates a kind of sacred epistemic moment. Philosophers from the Kantian tradition understood that the experience of the sublime, that mixture of terror and expansion when confronted by greatness, is a moral and cognitive event as powerful as any religious ritual. The frontier of physics repeatedly produces such moments, and those moments orient life toward humility and wonder."}),`
`,t.jsx(e.p,{children:"Third, the moral consequences of knowledge. The deeper our scientific understanding, the more moral responsibility we accrue. Discoveries create power to act, to alter, and to harm. That coupling of knowledge and agency gives science a sacramental weight. To study the cosmos is to enter an economy of stewardship. The sacredness here is not metaphysical. It is ethical and existential. Knowing something that, if ignored, dooms future flourishing, creates an imperative that looks very much like a religious duty."}),`
`,t.jsx(e.p,{children:"Fourth, coherence and truth as sacred goods. Many religious traditions hold truth as sacred. Science is a discipline devoted to uncompromising truth-seeking, practiced in public, corrigible, and cumulatively self-correcting. For a naturalist this method can become a form of devotion. The uncovering of blind spots, the correction of error, and the expansion of what we can reliably say about reality all register as acts of reverence toward the world as it is. Sean Carrolls public conversations about why there is something rather than nothing are an example of how modern physics can evoke the deepest metaphysical questions without appealing to supernatural explanations. If you want to feel why the question itself can be experienced as sacred, Carrolls talks are a clear invitation."}),`
`,t.jsx(Te,{id:"c-QkJUxcGt8",title:"Sean Carroll - Why There is Something rather than Nothing"}),`
`,t.jsx(e.p,{children:"Fifth, the narrative of participation. Science is not merely spectatorship. When you learn physics you join a conversation that links you to past explorers, to instruments that extend your senses, and to future agents who will use the ideas for good or ill. That participatory arc invites something like liturgy: careful experiment, peer critique, replication, and public argument. The rituals are secular, but the effect is the same. You belong to a discipline that reveres truth and refuses to accept comforting fictions at the cost of reality."}),`
`,t.jsx(e.h2,{children:"Putting it together: why the physical frontier is sacred to me"}),`
`,t.jsx(e.p,{children:"Here is the argument in compressed, existential terms."}),`
`,t.jsxs(e.ol,{children:[`
`,t.jsxs(e.li,{children:[`
`,t.jsx(e.p,{children:"The cosmos shows that our existence is contingent and rare in ways that call for humility. That humility follows naturally from knowing scale and probability, and it feels like reverence because it reorders what matters."}),`
`]}),`
`,t.jsxs(e.li,{children:[`
`,t.jsx(e.p,{children:"The methods of physics deliver knowledge that is both correctable and cumulative, and that epistemic reliability is itself reverential. To treat truth as an unconditional value is to enact a secular form of worship."}),`
`]}),`
`,t.jsxs(e.li,{children:[`
`,t.jsx(e.p,{children:"The frontier of physics confronts us with mystery and the sublime. Those experiences reconfigure identity and moral imagination in ways comparable to traditional sacrality. The emotional architecture is similar even if the metaphysical commitments are different."}),`
`]}),`
`,t.jsxs(e.li,{children:[`
`,t.jsx(e.p,{children:"Because knowledge yields power, knowledge creates duty. This duty looks like stewardship, which is a kind of moral religion grounded in reality rather than myth."}),`
`]}),`
`,t.jsxs(e.li,{children:[`
`,t.jsx(e.p,{children:"Finally, the pursuit of the frontier is an act of love for the world. It is love understood as disciplined attention, as patient curiosity, and as the willingness to accept constraint. That orientation is what makes the physical frontier feel sacred at the deepest level."}),`
`]}),`
`]}),`
`,t.jsx(e.h2,{children:"Practical and ethical consequences"}),`
`,t.jsx(e.p,{children:"If the frontier of physics functions as your sacred, then certain practical things follow. You will want robust public institutions that sustain open inquiry. You will want broad civic literacy so that political decisions can be informed by reliable facts. You will want humility in deploying technologies that arise from physics, because misapplied power can extinguish the very conditions you hold sacred. And you will want to cultivate forms of cultural reverence that respect evidence without collapsing into scientistic certainty or moral complacency."}),`
`,t.jsx(e.h2,{children:"Two videos to watch if you want to feel this"}),`
`,t.jsx(e.p,{children:"If you want to feel the tone I am describing, start with Carl Sagans Pale Blue Dot reading or clip, because it is the modern, poetic articulation of cosmic perspective that often converts factual scale into moral feeling."}),`
`,t.jsx(Te,{id:"GO5FwsblpT8",title:"Carl Sagan's Pale Blue Dot"}),`
`,t.jsx(e.p,{children:"Then watch Sean Carrolls reflections on why there is something rather than nothing, because it shows how contemporary physics can ask quasi-religious questions while keeping the answers within the domain of natural explanation."}),`
`,t.jsx(Te,{id:"c-QkJUxcGt8",title:"Sean Carroll - Why There is Something rather than Nothing"}),`
`,t.jsx(e.h2,{children:"A closing, practical devotion"}),`
`,t.jsx(e.p,{children:"Sacredness is ultimately practical. Declaring the frontier of physics sacred should not be a rhetorical flourish. It should shape how you vote, how you educate, how you steward ecological and technological power, and how you live with uncertainty. Reverence without practice is only sentiment. The authentic secular sacred requires ritual-like practices: reading carefully, reserving judgment, insisting on evidence, protecting institutions of inquiry, and learning to feel humble before scales that exceed your life."}),`
`,t.jsx(e.p,{children:"To call the frontier of physics sacred is not to replace prayer with equations. It is to redirect devotion toward the processes that reveal what is really there, and to let that revelation discipline our moral imagination. If that sounds austere, it is because true reverence often is. It asks us to hold what is fragile and rare with care, not with doctrinal certainty, and to recognize that the deep meaning we crave can arise when knowledge, humility and love meet at the edge of what we can know."})]})}function wR(s={}){const{wrapper:e}={...ee(),...s.components};return e?t.jsx(e,{...s,children:t.jsx(nx,{...s})}):nx(s)}const _R={title:"LOW-ENTROPY GRADIENTS",category:"PHILOSOPHY",date:"2025.11.23",excerpt:"A POWER THESIS ROOTED IN THE SECOND LAW OF THERMODYNAMICS."},bR="10 MIN";function ix(s){const e={h1:"h1",p:"p",...ee(),...s.components};return t.jsxs(t.Fragment,{children:[t.jsx(e.p,{children:"The universe tends toward higher entropy, toward a flattening of gradients. Wherever persistent differences in energy, matter, or information exist, there is opportunity. Power, I want to suggest, is simply the capacity to capture those opportunities and to direct the flow from disorder into organized, durable outcomes. That is the thermodynamic heart of political economy, technology and life itself."}),`
`,t.jsx(e.h1,{children:"Entropy gradients as the fundamental fuel"}),`
`,t.jsx(e.p,{children:"An entropy gradient is a difference in order or usable energy between two places or states. Those gradients are the economy. A hot stove beside cold air, a mountain lake above a plain, a concentrated vein of uranium, a field of unharvested grain, a clean dataset sitting beside noise, a trusted narrative sitting beside confusion: all are gradients. The second law says these differences will dissipate unless something channels their dissipation. Power is the skill, the mechanism or the institution that positions itself to channel that dissipation in a chosen direction rather than letting it bleed away as random heat."}),`
`,t.jsx(e.p,{children:"This is not a metaphor alone. The same calculus applies whether the gradient is thermal, chemical, informational or ecological. The value of a gradient is how much organized work can be extracted from its attempted flattening. What we call wealth, or influence, or capability, is in large part a claim on that potential difference."}),`
`,t.jsx(e.h1,{children:"Control is the decisive element"}),`
`,t.jsx(e.p,{children:"Presence near a gradient does not equal power. What matters is control. Control has three dimensions."}),`
`,t.jsx(e.p,{children:"Exclusivity. Power requires the ability to deny others access. A dam gates water, a patent gates a technique, property rights gate land. Exclusion creates scarcity and concentrates the capacity to convert a gradient."}),`
`,t.jsx(e.p,{children:"Directionality. Control means choosing what the dissipated order becomes. A river can be left to erode a valley or can be channeled through turbines to produce electricity, or can be impounded to create an irrigated plain. The shape you impose on dissipation determines who benefits and what forms of order emerge."}),`
`,t.jsx(e.p,{children:"Efficiency. Real leverage comes from converting more of the gradient into durable order and less into waste. Technological improvements are precisely gains in conversion efficiency. Better engines, better algorithms, better farming practices all squeeze more usable work, structure or information out of the same gradient."}),`
`,t.jsx(e.h1,{children:"Four domains of converted order, expanded"}),`
`,t.jsx(e.p,{children:"Here I expand the four ways captured gradients reappear as things we care about: work, structure, information and life. Each domain is distinct but tightly coupled to the others."}),`
`,t.jsx(e.p,{children:"Work. This is the immediate extraction of usable energy. Engines, muscles, turbines, metabolic pathways and chemical reactions are work machines. When you burn coal to spin a turbine you convert a thermal gradient into mechanical motion and then into light or computation. Work is the most straightforward metric of power: watts and joules are concrete and convertible. Philosophically, work is the proximate cause of material change. Whoever controls the primary work sources controls the pace of material transformation in a society."}),`
`,t.jsx(e.p,{children:"Structure. This is organized matter held in place. Buildings, machines, bureaucracies, legal codes, supply chains and urban form are structures produced by channeling gradients into persistent arrangements. Structure is negentropy made durable. A city stores solar gradients harvested by agriculture, industry and logistics; an archival system stores informational gradients; a corporation institutionalizes flows of value. Structure is how short-term conversions become long-term platforms for further extraction or flourishing."}),`
`,t.jsx(e.p,{children:"Information. Information is the pattern that reduces uncertainty. A sequence of base pairs encodes a living program, a sensor reading reduces ignorance about an environment, a novel insight collapses probabilistic futures into a predictable action. Information is measured in bits, in predictive accuracy and in bandwidth. In modern economies, information can be more valuable than raw energy because it multiplies the efficiency of conversion. A good model lets you extract more work from the same resource. Ethically, control of information gradients raises acute questions about consent, privacy and epistemic justice."}),`
`,t.jsx(e.p,{children:"Life. Life is self-perpetuating, adaptive order. It captures gradients and organizes matter into replicating systems that remodel the environment to sustain themselves. Photosynthesis converts solar gradients into biomass. Agriculture domesticated ecosystems to magnify human control over ecological gradients. Contemporary biotechnology is pushing toward intentional design of living systems that can capture, store and redirect gradients in novel ways. Life is both a domain of converted order and the most complex engine for producing further gradients."}),`
`,t.jsx(e.p,{children:"A clarification about trophic exchange and predation is important here. When organisms feed on one another they are harvesting stored gradients. A prey animal concentrates solar and chemical gradients into flesh, fat and carbohydrate. A predator or scavenger taps that concentrated store of low entropy and converts it into motion, heat, reproduction and new structured order. More precisely, trophic interactions are the circulation of chemical negentropy through ecosystems: producers lock solar gradients into molecules, consumers and decomposers unlock those molecules and re-channel the liberated order into fresh living work. That thermodynamic description sits beneath the familiar food chain and explains why predation is not cruelty for its own sake but a way that natural systems move and recycle order."}),`
`,t.jsx(e.h1,{children:"Power dynamics: scale, rivalry, efficiency and depletion"}),`
`,t.jsx(e.p,{children:"Scale tracks gradient magnitude. Whoever controls ancient, concentrated gradients such as fossil fuels or large aquifers wields more immediate power than those with only small, local gradients. Control of global information flows confers systemic leverage unlike any earlier era."}),`
`,t.jsx(e.p,{children:"Rivalry is inherent because gradients are rivalrous. If I consume the resource upstream, you cannot use the same portion downstream. The institutional rules that create and defend exclusion determine who gets access and who is left outside."}),`
`,t.jsx(e.p,{children:"Efficiency is multiplier power. Two actors sitting on the same gradient diverge quickly if one has superior conversion technology. That is why technological superiority compounds political advantage."}),`
`,t.jsx(e.p,{children:"Depletion is the sobering constraint. Gradients are finite unless renewed. Extractive models that do not invest in regeneration burn through the wellspring of future order. Sustainable power is the ability to not just capture gradients but to cultivate them. Solar energy and education are paradigmatic examples: the first rebuilds energy potential daily, the second rebuilds informational gradients in people who can then regenerate social and technological capacity."}),`
`,t.jsx(e.h1,{children:"Implications for familiar categories"}),`
`,t.jsx(e.p,{children:"Wealth is a claim on future gradient control. Billionaires do not simply hold money; they hold levers that determine who will capture future entropy differentials: stakes in infrastructure, IP that amplifies conversion efficiency, land and water rights that gate ecological gradients."}),`
`,t.jsx(e.p,{children:"Technology is a gradient amplifier. Tools reveal or concentrate gradients and improve conversion. A microscope expands the informational gradient available to a researcher. An algorithm amplifies pattern extraction from messy data. The ethical design of technology therefore shapes who benefits from the underlying thermodynamic opportunities."}),`
`,t.jsx(e.p,{children:"Political power is collective gradient control. Laws, norms and public goods organize human attention, labor and materials into large, coordinated conversions. A state that controls ports and communication networks is a state that controls major avenues of dissipation. Voting is one mechanism for regulating collective allocation of conversion capacity, but the thermodynamic view highlights the deep material levers that lie behind simple political accounts."}),`
`,t.jsx(e.p,{children:"War is a naked thermodynamic contest. Destroying an opponent's energy infrastructure or seizing supply chains is an attack on their capacity to capture and re-emit order. Cyberattacks that sever informational gradients are thermodynamically consequential because they degrade the predictability that enables coordinated work."}),`
`,t.jsx(e.h1,{children:"Social and psychological gradients"}),`
`,t.jsx(e.p,{children:"Human attention, trust and narrative clarity are gradients too. A charismatic leader simplifies uncertainty; followers surrender cognitive entropy in exchange for order. That conversion of attention into coordinated action is real power. Social movements that concentrate attention can redirect material flows. Protecting pluralism and guarding against manipulative concentration of attention are therefore ethical priorities."}),`
`,t.jsx(e.h1,{children:"Surprising and slightly comic examples of gradient capture"}),`
`,t.jsx(e.p,{children:"To make the idea vivid, here are some more playful and unexpected places where low-entropy gradients are exploited. These are all small acts of gradient management, and some are amusing precisely because they make the same thermodynamic game look mundane."}),`
`,t.jsx(e.p,{children:"A coffee shop is a tiny power plant of social gradients. The barista converts heat and chemical gradients into aroma and caffeine, then converts the customers renewed alertness into productive labor downstream. The shop also captures an attention gradient. The right music and lighting create a cognitive low entropy that keeps people lingering and spending. Micro-entropy arbitrage with latte art."}),`
`,t.jsx(e.p,{children:"An ice cream truck works a simple auditory information gradient. A single jingle transforms a confused afternoon into a clear signal of sweet opportunity. That collapse of uncertainty channels a swarm of small bodies toward a finite stock of frozen treats. Thermodynamics plus tune equals demand."}),`
`,t.jsx(e.p,{children:"High frequency trading firms are modern gradient hunters. They find minuscule price differences across exchanges and convert tiny informational and temporal gradients into profit. Their server racks are engines that flatten microgradients before the market can re-equilibrate."}),`
`,t.jsx(e.p,{children:"Meme virality is gradient work. A clever image or phrase creates an informational spike that reduces uncertainty about what to feel and share. Platforms act like turbines, funnelling attention into hotspots. Influencers might be described, slightly grimly, as professional gatekeepers of attention gradients."}),`
`,t.jsx(e.p,{children:"Biology gives stranger and darker examples. Parasitic fungi that hijack ant behaviour are literally redirecting a host's energetic flows so the fungus can exploit them more effectively. Vampire bats and leeches are specialists in engineering blood gradients. Decomposers are the ultimate recyclers, harvesting chemical gradients from death and returning the liberated order to the biosphere. None of these acts is inherently moral or immoral in isolation. They are thermodynamic strategies that sustain networks of life."}),`
`,t.jsx(e.p,{children:"Architecture and urban design are gradient management at scale. A transit hub concentrates human motion and attention. A well-placed plaza channels the flow into social exchange. Heat islands aggregate thermal gradients that planners either exploit or try to ameliorate. Cities are complex systems for capturing solar, labour and information gradients and turning them into infrastructure, culture and new possibilities."}),`
`,t.jsx(e.p,{children:"For a mildly absurd image, think of a pickpocket as an improvised gradient manager. They locate a small asymmetry in attention, exploit it, and convert a pocketful of coins into immediate consumption. The ethics are different, but the thermodynamic anatomy is similar: find an exploit, deny access to others, and redirect a stored potential."}),`
`,t.jsx(e.p,{children:"These examples are meant to be both illustrative and disarming. The thermodynamic lens is not only a physics lecture. It is a diagnostic tool that illuminates markets, cafes, cities, social media, the stomach of a gull and the server room of a trading firm as places where the same basic game is played."}),`
`,t.jsx(e.h1,{children:"Normative reflection: cultivation versus extraction"}),`
`,t.jsx(e.p,{children:"This framework is not neutral. It highlights two alternative moral stances. One is extractive: grab the largest gradients, convert them as fast as possible, privatize returns and ignore renewal. The other is cultivative: invest in renewable gradients, distribute access to conversion capabilities, design institutions that rebuild order rather than merely consume it."}),`
`,t.jsx(e.p,{children:"Extractive power is short lived and often corrosive. Cultivative power is slower to accumulate but more durable and more compatible with flourishing. The ethical demand implicit in a thermodynamic view is to align power with practices that sustain gradients for broader constituencies. Solar farms, public education, ecological restoration and open scientific infrastructure are examples of investments that cultivate future gradients."}),`
`,t.jsx(e.h1,{children:"Closing thought"}),`
`,t.jsx(e.p,{children:"Seeing power as the gatekeeping of entropy gradients clarifies both diagnosis and responsibility. It strips away rhetorical mystique and replaces it with a concrete, cross-domain account of what it means to influence the world. That clarity is morally useful. If you know what you are capturing, you can ask who benefits, who is excluded, and whether the process renews or destroys the wells of order future generations will need. True power is not merely the capacity to turn difference into order. True power is the capacity to do so in a way that leaves the world richer in potential differences than you found it."})]})}function kR(s={}){const{wrapper:e}={...ee(),...s.components};return e?t.jsx(e,{...s,children:t.jsx(ix,{...s})}):ix(s)}const SR={title:"I LUV COMPUTATIONAL GRAPHS",category:"ENGINEERING",date:"2025.09.08",excerpt:"FLEXIBLE SCAFFOLDS FOR MODELING THE WORLD."},TR="6 MIN";function rx(s){const e={annotation:"annotation",h2:"h2",hr:"hr",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",mspace:"mspace",msub:"msub",ol:"ol",p:"p",semantics:"semantics",span:"span",...ee(),...s.components};return t.jsxs(t.Fragment,{children:[t.jsx(e.p,{children:"Neural networks are the unromantic name for something deeply, wildly useful. At their heart they are computational graphs  little diagrams that say how numbers flow, get squashed, get mixed, and finally turn into predictions or actions. That simple idea is quietly revolutionary because it is horizontal. It works on images and on genomes, on physics simulations and on financial time series, on speech and on chemical structures. Once you accept that many problems are really about finding a function that maps inputs to outputs, computational graphs give you a programmable, differentiable toolkit to search for those functions automatically."}),`
`,t.jsx(e.p,{children:"Below I will tell a tidy story: a quick history, an intuitive primer with the math you need, why the universal approximation idea matters, and a short detour into Demis Hassabis way of thinking about AI as a pattern hunter for nature itself."}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h2,{children:"A short history in one breath"}),`
`,t.jsx(e.p,{children:"The idea of modeling intelligence with networks of simple units goes back a long way. The 1940s saw McCulloch and Pitts propose a mathematical neuron. The perceptron, developed in the 1950s by Frank Rosenblatt, brought the first learning rule and public excitement. Progress slowed after criticisms in the 1960s that single-layer models could not solve problems like XOR. The second act began when researchers rediscovered and popularized backpropagation in the 1980s, which let multi-layer networks learn by propagating error gradients backward through a computational graph. The deep renaissance arrived in earnest when GPUs and large datasets made training big convolutional networks practical, capped by AlexNets breakthrough on ImageNet in 2012 that helped kick off the modern deep learning boom."}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h2,{children:"What a neural network is, simply"}),`
`,t.jsxs(e.p,{children:["Imagine you have an input vector ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"x"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"x"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.4306em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"x"})]})})]}),"  it might be pixel intensities, a snapshot of a molecule, or a vector describing the current state of a market. A neural network composes simple functions in a graph. One canonical building block is a fully connected layer:"]}),`
`,t.jsx(e.span,{className:"katex-display",children:t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"z"}),t.jsx(e.mo,{children:"="}),t.jsx(e.mi,{children:"W"}),t.jsx(e.mi,{children:"x"}),t.jsx(e.mo,{children:"+"}),t.jsx(e.mi,{children:"b"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mspace,{width:"2em"}),t.jsx(e.mi,{children:"a"}),t.jsx(e.mo,{children:"="}),t.jsx(e.mi,{children:""}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"z"}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mi,{mathvariant:"normal",children:"."})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"z = W x + b,\\qquad a = \\sigma(z)."})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.4306em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.04398em"},children:"z"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.7667em",verticalAlign:"-0.0833em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"W"}),t.jsx(e.span,{className:"mord mathnormal",children:"x"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),t.jsx(e.span,{className:"mbin",children:"+"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"b"}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"2em"}}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"a"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:""}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.04398em"},children:"z"}),t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"mord",children:"."})]})]})]})}),`
`,t.jsxs(e.p,{children:["Here ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"W"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"W"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6833em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"W"})]})})]})," is a matrix of weights, ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"b"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"b"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6944em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"b"})]})})]})," is a bias vector, and ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:""})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\sigma"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.4306em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:""})]})})]})," is a nonlinear activation function such as ReLU or sigmoid. The output ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"a"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"a"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.4306em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"a"})]})})]})," becomes the input to the next block. A deep network stacks these blocks so the overall function is a composition"]}),`
`,t.jsx(e.span,{className:"katex-display",children:t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"x"}),t.jsx(e.mo,{separator:"true",children:";"}),t.jsx(e.mi,{children:""}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mo,{children:"="}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mi,{children:"L"})]}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mo,{children:""}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mn,{children:"2"})]}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"f"}),t.jsx(e.mn,{children:"1"})]}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"x"}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mi,{mathvariant:"normal",children:"."})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"f(x; \\theta) = f_L(\\dots f_2(f_1(x))) ."})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",children:"x"}),t.jsx(e.span,{className:"mpunct",children:";"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:""}),t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3283em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1076em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"L"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"minner",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3011em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1076em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:"2"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3011em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1076em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:"1"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",children:"x"}),t.jsx(e.span,{className:"mclose",children:")))"}),t.jsx(e.span,{className:"mord",children:"."})]})]})]})}),`
`,t.jsxs(e.p,{children:["Writing the model as a computational graph makes the dependencies explicit. Each node computes a small differentiable operation. That differentiability is the magic key. It allows us to compute gradients of a loss function ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"L"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"x"}),t.jsx(e.mo,{separator:"true",children:";"}),t.jsx(e.mi,{children:""}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{children:"y"}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"L(f(x; \\theta), y)"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"L"}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",children:"x"}),t.jsx(e.span,{className:"mpunct",children:";"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:""}),t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),t.jsx(e.span,{className:"mclose",children:")"})]})})]})," with respect to every parameter ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:""})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\theta"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6944em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:""})]})})]})," using the chain rule, which is the algorithmic core of backpropagation."]}),`
`,t.jsx(Te,{id:"aircAruvnKk",title:"But what is a Neural Network? - 3Blue1Brown"}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h2,{children:"How they learn, in three steps"}),`
`,t.jsxs(e.ol,{children:[`
`,t.jsxs(e.li,{children:["Pick a loss ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"L"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"L"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6833em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"L"})]})})]}),", for example mean squared error for regression or cross entropy for classification."]}),`
`,t.jsx(e.li,{children:"Compute the forward pass through the computational graph to get predictions."}),`
`,t.jsxs(e.li,{children:["Compute gradients ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{mathvariant:"normal",children:""}),t.jsx(e.mi,{children:""})]}),t.jsx(e.mi,{children:"L"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\nabla_\\theta L"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord",children:""}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:""})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mord mathnormal",children:"L"})]})})]})," by backpropagating error through the graph, then update parameters ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:""}),t.jsx(e.mo,{children:""}),t.jsx(e.mi,{children:""}),t.jsx(e.mo,{children:""}),t.jsx(e.mi,{children:""}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{mathvariant:"normal",children:""}),t.jsx(e.mi,{children:""})]}),t.jsx(e.mi,{children:"L"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\theta \\leftarrow \\theta - \\eta \\nabla_\\theta L"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6944em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.7778em",verticalAlign:"-0.0833em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),t.jsx(e.span,{className:"mbin",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:""}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord",children:""}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:""})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mord mathnormal",children:"L"})]})]})]})," with a gradient-based optimizer such as stochastic gradient descent or Adam."]}),`
`]}),`
`,t.jsx(e.p,{children:"This is gradient descent on a high dimensional, nonconvex landscape. In practice the landscapes are weird but often forgiving: networks trained with simple recipes generalize surprisingly well."}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h2,{children:"Why this is a horizontal enabler"}),`
`,t.jsx(e.p,{children:"A computational graph is domain agnostic. The same architecture concept can be adapted to images with convolutions, to sequences with recurrence or attention, to graphs with message passing, and to continuous control with policy networks. The heavy lifting is the same: choose an inductive bias appropriate to the structure of your data, encode it into the graph, and optimize. Because this pattern repeats across disciplines, neural nets have become a universal toolbox engineers and scientists can adapt instead of inventing a new algorithm from scratch for each domain."}),`
`,t.jsx(e.p,{children:"This is not hand-waving. The mathematical underpinnings show why neural networks have immense representational power. The universal approximation theorems tell us that reasonably simple network architectures can approximate a wide class of functions arbitrarily well, given enough capacity. That gives a formal reason to believe neural networks can represent the laws you need to discover in data."}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h2,{children:"Demis Hassabis and the idea that AI finds patterns in nature"}),`
`,t.jsx(e.p,{children:"Demis Hassabis, leader of DeepMind, often frames progress in AI as giving us tools that can discover patterns and models in the world that humans may not see directly. The intuition is this: if natural phenomena are generated by regularities, then powerful function approximators and world models built from data can uncover those regularities and turn them into predictive or generative models. In several talks he has argued that building general world models is exactly what will let AI accelerate scientific discovery, because once you can model the underlying structure you can simulate, reason, and search for interventions. That perspective sits naturally with the universality idea: neural networks are flexible pattern approximators, and if the world is structured, networks can learn that structure and exploit it."}),`
`,t.jsx(Te,{id:"AU6HuhrC65k",title:"Dr Demis Hassabis: Using AI to Accelerate Scientific Discovery"}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h2,{children:"A quick caution"}),`
`,t.jsx(e.p,{children:"Universality is an existence theorem not a recipe. Saying a network can approximate any function does not tell you how many parameters you need, how to train it, or how to guarantee the learned model captures causal mechanisms rather than spurious correlations. For science we often want models that are interpretable and that respect invariances and symmetries. Computational graphs are flexible enough to encode these constraints explicitly, but doing so requires care and domain knowledge."}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h2,{children:"Why I love computational graphs"}),`
`,t.jsx(e.p,{children:"They give us a lingua franca for learning. They turn modeling into engineering and optimization. They are compositional: small, differentiable modules can be connected to build larger, more capable systems. They are practical: you can prototype a hypothesis as a graph and let data and gradients test that hypothesis. And they scale: better compute, more data, and smarter architectures unlock qualitatively new capabilities. For anyone who likes building, experimenting, and discovering structure, computational graphs are a powerful hammer that fits many nails."}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.p,{children:"Computational graphs are not a single answer to everything. They are a clean, programmable language for learning. If you are curious about math, try writing down a tiny graph, compute gradients by hand, and watch how learning moves the parameters. If you are curious about science, look for the symmetries in your domain and think how they might be built into a graph. The most exciting part is this: the same simple idea scales from a classroom notebook example to models that predict protein folding, translate languages, or play superhuman games. That is why I say, plainly and without irony,"}),`
`,t.jsx(e.p,{children:"I <3 computational graphs."})]})}function RR(s={}){const{wrapper:e}={...ee(),...s.components};return e?t.jsx(e,{...s,children:t.jsx(rx,{...s})}):rx(s)}const ER={title:"FOR A BOUNDLESS HUMANITY",date:"2025-08-08",category:"PERSONAL",excerpt:"THE FUTURE IS A PROJECT, NOT A PROPHECY"},PR="3 MIN";function ax(s){const e={p:"p",...ee(),...s.components};return t.jsxs(t.Fragment,{children:[t.jsx(e.p,{children:"In our infancy, we looked to the stars and told stories to survive the night. Myth was our first shelter, a cradle for a fragile mind awakening in an indifferent cosmos. We were not foolishmerely young. But within those tales, a tool was forged: reason. With it, we proved the world a sphere, set Earth in motion around the sun, and traced our ancestry not to divine whim but to the patient chemistry of life itself."}),`
`,t.jsx(e.p,{children:"This has been our trajectory: from taming fire to beseeching atoms, from the wheels first turn to the neural web that now binds our thoughts across the globe. We have turned plagues into footnotes, stretched the human lifespan, and folded distances that once devoured lifetimes into mere hours. The arc of our knowledge bends toward liberationtoward a horizon where suffering is a memory and the limits of flesh become choices, not prisons."}),`
`,t.jsx(e.p,{children:"Yet, on this threshold, we hesitate. Many still worship the questions our ancestors could not answer, mistaking the map for the territory, the echo for the voice. They mistake humility for submission, believing that to be small in the cosmos is to be insignificant. This is not reverenceit is resignation."}),`
`,t.jsx(e.p,{children:"We once placed ourselves at the center of creation. Copernicus nudged us aside. Darwin dissolved our specialness into the stream of all living things. These were not insults but invitations: to see ourselves not as the universes purpose, but as its awakened witnesses. The cosmos does not bend to our whims, but we can bend toward understanding it. That is not hubris; it is our noblest calling."}),`
`,t.jsx(e.p,{children:'Now we face a choice. One path retreats into nostalgia, mistaking fear for wisdom. The other ascendsrequires us to wield intelligence not as a weapon of conquest, but as a tool of compassion and creation. This future is not guaranteed; it is earned with every experiment, every questioned assumption, every act of courage to say, "I do not know, but I will find out."'}),`
`,t.jsx(e.p,{children:"We are not mere machinery, but we are not magic either. We are self-aware stardust, our choices shaped by biology, history, and chanceyet capable of reflecting on those very forces. To deny our materiality is to deny our agency; to deny our agency is to surrender our future. True freedom lies not in escaping causation, but in understanding it deeply enough to rewrite its cruelest codes."}),`
`,t.jsx(e.p,{children:"This is not a call to abandon wonder. It is a call to aim it correctly. The same impulse that built cathedrals can build telescopes; the same reverence that hallows a mountain can hallow a mitochondrion. The difference is this: one asks us to bow, the other asks us to build."}),`
`,t.jsx(e.p,{children:"The wreckage of willful ignorance is written in our history: witch trials, dogmatic wars, preventable deathsall monuments to the cost of believing too hard. But where we have dared to doubt, we have flourished. The evidence is in our vaccines, our democracies, our art. Uncertainty is not a weakness; it is the discipline that keeps us honest."}),`
`,t.jsx(e.p,{children:"So let us be the generation that looks forward without forgetting what we owe the past. Let us honor our ancestors not by living in their world, but by using the tools they forged to build a better one. Let us approach the unknown not as masters, but as students with hammersready to dismantle injustice, disease, and needless suffering, stone by stone."}),`
`,t.jsx(e.p,{children:"The stars do not wait."}),`
`,t.jsx(e.p,{children:"We need not wait for permission."}),`
`,t.jsx(e.p,{children:"The future is a project, not a prophecy."}),`
`,t.jsx(e.p,{children:"Lets begin."})]})}function MR(s={}){const{wrapper:e}={...ee(),...s.components};return e?t.jsx(e,{...s,children:t.jsx(ax,{...s})}):ax(s)}const CR=()=>(_.useEffect(()=>{const s=document.createElement("script");return s.src="https://platform.twitter.com/widgets.js",s.async=!0,s.charset="utf-8",document.body.appendChild(s),()=>{document.body.removeChild(s)}},[]),t.jsx("div",{className:"flex justify-center my-8",children:t.jsxs("blockquote",{className:"twitter-tweet","data-theme":"dark",children:[t.jsx("p",{lang:"en",dir:"ltr",children:"There is power without virtue, but there is no virtue without power."})," Okuhle Madondo (@OkuhleMadondo)"," ",t.jsx("a",{href:"https://twitter.com/OkuhleMadondo/status/1992156811550695736?ref_src=twsrc%5Etfw",children:"November 22, 2025"})]})})),LR={title:"POWER REALLY IS A VIRTUE",category:"PHILOSOPHY",date:"2025.06.24",excerpt:"TYRANTS THRIVE WITHOUT VIRTUE, BUT THE MEEK INHERIT ONLY WHAT THE POWERFUL LEAVE BEHIND."},AR="7 MIN";function lx(s){const e={em:"em",h2:"h2",p:"p",strong:"strong",...ee(),...s.components};return t.jsxs(t.Fragment,{children:[t.jsx(e.p,{children:"The aphorism landed like a challenge (excuse the covert self-glazing):"}),`
`,t.jsx(CR,{}),`
`,t.jsx(e.p,{children:"At first glance it feels wrong, even dangerous. In our cultural moment, power itself is suspect. We have built elaborate social mechanisms to shame those who hold it, as if power were its own moral indictment. But what if this reflexive suspicion is not virtue speaking, but its absence?"}),`
`,t.jsx(e.h2,{children:"The Two Halves of a Hard Truth"}),`
`,t.jsx(e.p,{children:"The first clause is easy to verify. History offers unlimited examples of power untethered from any moral anchor. The tyrant, the corporation that extracts while it pollutes, the manipulative partner who leverages emotional control: these demonstrate that power can exist as pure capacity, devoid of concern for justice or human flourishing. Power, in itself, is neutral. It is the ability to make things happen, to shape outcomes, to bend reality toward your will. It does not arrive with a conscience installed."}),`
`,t.jsx(e.p,{children:"The second clause stings because it attacks our cherished separation between goodness and strength. But think about what virtue actually requires: the mother who needs to protect her child must have the power to do so, whether through legal knowledge, physical strength, or social support. The activist who would dismantle an unjust system needs more than righteous anger; they need strategy, funding, institutional savvy, and the power to endure retaliation. Even the simple act of keeping a promise demands power over your own impulses and circumstances. Virtue without the capacity to act remains trapped in intention, unable to touch the world. It is a seed without soil."}),`
`,t.jsx(e.p,{children:"This creates an uncomfortable asymmetry. Power does not need virtue, but virtue desperately needs power. The implication is clear: if you care about goodness, you cannot afford to be indifferent to power. You must cultivate it, understand it, and refuse to surrender it to those who lack your scruples."}),`
`,t.jsx(e.h2,{children:"Nietzsche's Ghost in the Machine"}),`
`,t.jsxs(e.p,{children:["Friedrich Nietzsche saw this dynamic with terrible clarity. He distinguished between ",t.jsx(e.em,{children:"master morality"})," and ",t.jsx(e.em,{children:"slave morality"}),'. Master morality, arising from the powerful, judged actions as good or bad based on their life-affirming qualities: nobility, strength, creativity. Slave morality, born from the ressentiment of the powerless, performed an ingenious inversion: it declared that the virtues of the strong were actually vices, and that meekness, humility, and self-denial were the true goods. The Biblical declaration "blessed are the meek" became not just consolation but a moral framework that sanctified powerlessness itself.']}),`
`,t.jsx(e.p,{children:'We live with the inheritance of slave morality. Our contemporary memeplexes, those self-replicating clusters of ideas that spread through culture, often treat power as original sin. The phrase "check your privilege" can be a call to awareness, but it frequently functions as a conversation-ending condemnation. The assumption that all billionaires are automatically unethical, or that leadership itself is oppressive, or that success must be stolen: these are not arguments but antibodies, designed to attack any concentration of power regardless of its character.'}),`
`,t.jsxs(e.p,{children:["Nietzsche's concept of the ",t.jsx(e.em,{children:"bermensch"}),', the "overman," is often misunderstood as a call for domination. It is better read as a call for self-overcoming. The bermensch is not the tyrant but the individual who creates his own values through rigorous self-mastery and offers them to the world. This requires immense power, not over others but over oneself: the power to transcend inherited morality, to bear the weight of freedom, to sculpt a life rather than merely endure it. The bermensch does not reject power; he integrates it with creativity and discipline. He is the antidote to both ruthless ambition and impotent virtue.']}),`
`,t.jsx(e.h2,{children:"The Memeplex That Devours Its Own"}),`
`,t.jsx(e.p,{children:"I should admit I once embodied this memeplex myself. For years, I reflexively equated power with corruption and weakness with purity. I saw any ambition for influence as moral compromise, which felt like principle but functioned as surrender. This mindset did not make me virtuous; it made me irrelevant, leaving influence to those with fewer scruples about wielding it."}),`
`,t.jsx(e.p,{children:"The problem with shaming power as such is that it does not eliminate power. It simply ensures that power will be held by those who are immune to shame. When good people are taught that seeking influence is corrupting, they abdicate the field. The result is not equality but a vacuum, filled by the shameless: the sociopath, the warlord, the algorithm that optimizes for engagement without a flicker of conscience."}),`
`,t.jsxs(e.p,{children:["This memeplex is particularly seductive because it feels like justice. It offers a simple heuristic: power bad, weakness virtuous. But this is a philosophical mirror trick. It confuses ",t.jsx(e.em,{children:"power over others"})," with ",t.jsx(e.em,{children:"capacity for good"}),', and in doing so, it strands virtue in a state of permanent helplessness. The activist who refuses to build institutions because institutions are "hierarchical" leaves the existing hierarchies untouched. The moralist who condemns all wealth while offering no path to sustainable abundance entrenches poverty. The progressive who attacks competence as "elitist" ensures that incompetence will rule.']}),`
`,t.jsx(e.p,{children:"Slave morality does not liberate. It reconciles the powerless to their condition by sanctifying it. It turns impotence into a virtue, which is perhaps the cruelest trick any ideology can play on those who seek change."}),`
`,t.jsx(e.h2,{children:"Reclaiming Power for the Sake of Virtue"}),`
`,t.jsxs(e.p,{children:["If we accept that virtue requires power, then the ethical imperative shifts. It is no longer enough to be pure; one must become capable. This demands what we might call ",t.jsx(e.em,{children:"power literacy"}),": understanding systems, building institutions, mastering oneself, and learning to lead. It means refusing the comfortable story that the world is divided into victims and villains, and instead asking a harder question: how do we build structures where power flows toward those who serve the common good?"]}),`
`,t.jsx(e.p,{children:"This is not a call to abandon critique. Unaccountable power remains dangerous. But critique must be paired with construction. Shame must be directed not at power itself but at its abuse. We need a new memeplex, one that recognizes that the most dangerous person in any room is not the one with power, but the one with power who has been taught that power is evil. That person will hide their influence, deny its existence, and use it without moral reflection."}),`
`,t.jsx(e.h2,{children:"Toward an Integrated Ethic"}),`
`,t.jsx(e.p,{children:"The path forward is neither the ruthless will-to-power of the tyrant nor the self-canceling piety of the power-averse. It is the difficult middle: the cultivation of strength in service of something beyond the self. This is what Nietzsche was reaching for, however imperfectly. It is what every effective moral movement has understood, however quietly."}),`
`,t.jsx(e.p,{children:"Your virtue is not measured by your distance from power but by what you do when you touch it. The question is not whether you have power, but whether you have the courage to admit it, the wisdom to wield it, and the humility to remain its servant."}),`
`,t.jsx(e.h2,{children:"Further Exploration"}),`
`,t.jsx(e.p,{children:"For those wanting to dig deeper into these ideas, a few starting points:"}),`
`,t.jsx(e.p,{children:t.jsx(e.strong,{children:"1. On Nietzsche's Master and Slave Morality"})}),`
`,t.jsx(e.p,{children:"The School of Life offers a clear five-minute overview that unpacks the psychology of ressentiment and how it shapes our moral instincts."}),`
`,t.jsx(Te,{id:"eWqO-V02IzQ",title:"Nietzsche: Master and Slaves"}),`
`,t.jsx(e.p,{children:t.jsx(e.strong,{children:"2. Nietzsche Returns with a Hammer"})}),`
`,t.jsx(e.p,{children:`Philosophize This! revisits Nietzsche in Episode #211, exploring the "Last Man," the death of God, and the urgent necessity of creating one's own values in a nihilistic age.`}),`
`,t.jsx(Te,{id:"tJQac_T_rPo",title:"Philosophize This! Nietzsche returns with a hammer!"}),`
`,t.jsx(e.p,{children:t.jsx(e.strong,{children:"3. Reality, Meaning & Self-Development"})}),`
`,t.jsx(e.p,{children:"Daniel Schmachtenberger joins the Modern Wisdom podcast to discuss why sense-making and wisdom are existential necessities in an age of exponential power."}),`
`,t.jsx(Te,{id:"7vkCJ7dfX2I",title:"Daniel Schmachtenberger | Modern Wisdom Podcast 179"}),`
`,t.jsx(e.p,{children:"The aphorism, in the end, is a call to grow up. It asks us to stop pretending that goodness can float free of consequence, and to stop pretending that power can be shamed out of existence. It asks us to become dangerous enough to be kind, strong enough to be just, and powerful enough to protect what we love."})]})}function zR(s={}){const{wrapper:e}={...ee(),...s.components};return e?t.jsx(e,{...s,children:t.jsx(lx,{...s})}):lx(s)}const DR={title:"HIERARCHICAL SOURCE ATTENTION",category:"ENGINEERING",date:"2025.11.24",excerpt:"SCALING MODULAR INTELLIGENCE VIA DYNAMIC ROUTING."},IR="5 MIN";function ox(s){const e={annotation:"annotation",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mover:"mover",mrow:"mrow",msqrt:"msqrt",msub:"msub",msubsup:"msubsup",msup:"msup",mtext:"mtext",ol:"ol",p:"p",path:"path",pre:"pre",semantics:"semantics",span:"span",strong:"strong",svg:"svg",ul:"ul",...ee(),...s.components};return t.jsxs(t.Fragment,{children:[t.jsxs(e.p,{children:["The trajectory of modern Large Language Models (LLMs) is currently defined by a brute-force approach to context: make the window larger. We have moved from 4k tokens to 128k, and now to 1M+. The prevailing architectural assumption is that the model should attend to ",t.jsx(e.em,{children:"everything, everywhere, all at once"}),"."]}),`
`,t.jsx(e.p,{children:'However, this "dense attention" assumption is hitting diminishing returns. As context grows, the "lost in the middle" phenomenon worsens, and inference costs scale quadratically or linearly with heavy overhead. More importantly, biological systems do not work this way. When you answer a question about history, you do not simultaneously activate your visual cortex and your motor control neurons. You route your attention to the relevant "module" of memory.'}),`
`,t.jsxs(e.p,{children:[t.jsx(e.strong,{children:"Hierarchical Source Attention (HSA)"})," is a proposal to embed this modularity directly into the Transformer block. It replaces the monolithic Context Matrix with a dynamic registry of ",t.jsx(e.strong,{children:"Sources"}),". By introducing a lightweight routing step before attention, HSA enables models to select ",t.jsx(e.em,{children:"where"})," to look before deciding ",t.jsx(e.em,{children:"what"})," to read."]}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h2,{children:'The Problem: The "Context Soup"'}),`
`,t.jsxs(e.p,{children:["In a standard Transformer, we concatenate all inputssystem prompts, user queries, retrieved documents, tool outputs, and chat historyinto a single sequence ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"X"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"X"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6833em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"})]})})]}),". The Self-Attention mechanism computes a query ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"Q"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"Q"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"Q"})]})})]})," and attends to ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"X"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"X"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6833em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"})]})})]})," indiscriminately."]}),`
`,t.jsx(e.p,{children:"This creates three structural failures:"}),`
`,t.jsxs(e.ol,{children:[`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Noise Ratio"}),": Useful signals (e.g., a specific fact in a retrieved doc) are drowned out by irrelevant tokens (e.g., chat history)."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Compute Waste"}),": We spend FLOPs computing attention scores between the users current query and irrelevant system instructions from 100 turns ago."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Mode Collapse"}),': The model struggles to distinguish between "internal knowledge" and "external context," leading to hallucinations.']}),`
`]}),`
`,t.jsxs(e.p,{children:[t.jsx(e.strong,{children:"HSAs Proposition:"})," Attention should be a two-step decision process. First, select the ",t.jsx(e.strong,{children:"Source"})," (Router). Second, select the ",t.jsx(e.strong,{children:"Content"})," (Attention)."]}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h2,{children:"The Formalism: Two-Stage Differentiable Selection"}),`
`,t.jsxs(e.p,{children:["Let us assume the model has access to ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"M"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"M"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6833em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"M"})]})})]})," distinct information sources ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{mathvariant:"script",children:"S"}),t.jsx(e.mo,{children:"="}),t.jsx(e.mo,{stretchy:"false",children:"{"}),t.jsxs(e.msup,{children:[t.jsx(e.mi,{children:"S"}),t.jsxs(e.mrow,{children:[t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mn,{children:"1"}),t.jsx(e.mo,{stretchy:"false",children:")"})]})]}),t.jsx(e.mo,{separator:"true",children:","}),t.jsxs(e.msup,{children:[t.jsx(e.mi,{children:"S"}),t.jsxs(e.mrow,{children:[t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mn,{children:"2"}),t.jsx(e.mo,{stretchy:"false",children:")"})]})]}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mo,{children:""}),t.jsx(e.mo,{separator:"true",children:","}),t.jsxs(e.msup,{children:[t.jsx(e.mi,{children:"S"}),t.jsxs(e.mrow,{children:[t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"M"}),t.jsx(e.mo,{stretchy:"false",children:")"})]})]}),t.jsx(e.mo,{stretchy:"false",children:"}"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\mathcal{S} = \\{S^{(1)}, S^{(2)}, \\dots, S^{(M)}\\}"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6833em"}}),t.jsx(e.span,{className:"mord mathcal",style:{marginRight:"0.075em"},children:"S"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1.138em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mopen",children:"{"}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.888em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mopen mtight",children:"("}),t.jsx(e.span,{className:"mord mtight",children:"1"}),t.jsx(e.span,{className:"mclose mtight",children:")"})]})})]})})})})})]}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.888em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mopen mtight",children:"("}),t.jsx(e.span,{className:"mord mtight",children:"2"}),t.jsx(e.span,{className:"mclose mtight",children:")"})]})})]})})})})})]}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"minner",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.888em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mopen mtight",children:"("}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10903em"},children:"M"}),t.jsx(e.span,{className:"mclose mtight",children:")"})]})})]})})})})})]}),t.jsx(e.span,{className:"mclose",children:"}"})]})]})]}),"."]}),`
`,t.jsxs(e.ul,{children:[`
`,t.jsxs(e.li,{children:[t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msup,{children:[t.jsx(e.mi,{children:"S"}),t.jsxs(e.mrow,{children:[t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mn,{children:"1"}),t.jsx(e.mo,{stretchy:"false",children:")"})]})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"S^{(1)}"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.888em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.888em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mopen mtight",children:"("}),t.jsx(e.span,{className:"mord mtight",children:"1"}),t.jsx(e.span,{className:"mclose mtight",children:")"})]})})]})})})})})]})]})})]}),": The local context (current conversation)."]}),`
`,t.jsxs(e.li,{children:[t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msup,{children:[t.jsx(e.mi,{children:"S"}),t.jsxs(e.mrow,{children:[t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mn,{children:"2"}),t.jsx(e.mo,{stretchy:"false",children:")"})]})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"S^{(2)}"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.888em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.888em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mopen mtight",children:"("}),t.jsx(e.span,{className:"mord mtight",children:"2"}),t.jsx(e.span,{className:"mclose mtight",children:")"})]})})]})})})})})]})]})})]}),": A read-only memory bank (RAG retrieval)."]}),`
`,t.jsxs(e.li,{children:[t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msup,{children:[t.jsx(e.mi,{children:"S"}),t.jsxs(e.mrow,{children:[t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mn,{children:"3"}),t.jsx(e.mo,{stretchy:"false",children:")"})]})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"S^{(3)}"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.888em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.888em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mopen mtight",children:"("}),t.jsx(e.span,{className:"mord mtight",children:"3"}),t.jsx(e.span,{className:"mclose mtight",children:")"})]})})]})})})})})]})]})})]}),": A visual encoder output."]}),`
`]}),`
`,t.jsxs(e.p,{children:["At timestep ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"t"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"t"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6151em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"t"})]})})]}),", with a hidden state (query) ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"q"}),t.jsx(e.mi,{children:"t"})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"q_t"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})]})})]}),", HSA performs the following operations:"]}),`
`,t.jsx(e.h3,{children:"Stage 1: The Source Router"}),`
`,t.jsxs(e.p,{children:["We project the query ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"q"}),t.jsx(e.mi,{children:"t"})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"q_t"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})]})})]}),' and a "summary vector" for each source ',t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msup,{children:[t.jsx(e.mi,{children:"S"}),t.jsxs(e.mrow,{children:[t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"m"}),t.jsx(e.mo,{stretchy:"false",children:")"})]})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"S^{(m)}"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.888em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.888em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mopen mtight",children:"("}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"m"}),t.jsx(e.span,{className:"mclose mtight",children:")"})]})})]})})})})})]})]})})]})," (e.g., its mean-pooled representation or a learned CLS token) into a routing latent space."]}),`
`,t.jsx(e.span,{className:"katex-display",children:t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mtext,{children:"logit"}),t.jsx(e.mi,{children:"m"})]}),t.jsx(e.mo,{children:"="}),t.jsxs(e.mfrac,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"q"}),t.jsx(e.mi,{children:"t"})]}),t.jsxs(e.msubsup,{children:[t.jsx(e.mi,{children:"W"}),t.jsx(e.mi,{children:"Q"}),t.jsx(e.mi,{children:"R"})]}),t.jsx(e.mo,{children:""}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsxs(e.msubsup,{children:[t.jsx(e.mi,{children:"S"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"s"}),t.jsx(e.mi,{children:"u"}),t.jsx(e.mi,{children:"m"}),t.jsx(e.mi,{children:"m"}),t.jsx(e.mi,{children:"a"}),t.jsx(e.mi,{children:"r"}),t.jsx(e.mi,{children:"y"})]}),t.jsxs(e.mrow,{children:[t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"m"}),t.jsx(e.mo,{stretchy:"false",children:")"})]})]}),t.jsxs(e.msubsup,{children:[t.jsx(e.mi,{children:"W"}),t.jsx(e.mi,{children:"K"}),t.jsx(e.mi,{children:"S"})]}),t.jsxs(e.msup,{children:[t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mi,{mathvariant:"normal",children:""})]})]}),t.jsx(e.msqrt,{children:t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"d"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"r"}),t.jsx(e.mi,{children:"o"}),t.jsx(e.mi,{children:"u"}),t.jsx(e.mi,{children:"t"}),t.jsx(e.mi,{children:"e"})]})]})})]})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\text{logit}_m = \\frac{q_t W_Q^R \\cdot (S^{(m)}_{summary} W_K^S)^\\top}{\\sqrt{d_{route}}}"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.9386em",verticalAlign:"-0.2441em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"logit"})}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.0573em"},children:t.jsxs(e.span,{style:{top:"-2.4559em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"m"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2441em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"2.7762em",verticalAlign:"-0.93em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mopen nulldelimiter"}),t.jsx(e.span,{className:"mfrac",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"1.8462em"},children:[t.jsxs(e.span,{style:{top:"-2.2976em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3.0448em"}}),t.jsx(e.span,{className:"mord",children:t.jsx(e.span,{className:"mord sqrt",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"0.8572em"},children:[t.jsxs(e.span,{className:"svg-align",style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"mord",style:{paddingLeft:"0.833em"},children:t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"d"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",children:"ro"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"u"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"e"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})})]}),t.jsxs(e.span,{style:{top:"-2.8172em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"hide-tail",style:{minWidth:"0.853em",height:"1.08em"},children:t.jsx(e.svg,{xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"1.08em",viewBox:"0 0 400000 1080",preserveAspectRatio:"xMinYMin slice",children:t.jsx(e.path,{d:`M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z`})})})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.1828em"},children:t.jsx(e.span,{})})})]})})})]}),t.jsxs(e.span,{style:{top:"-3.2748em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3.0448em"}}),t.jsx(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),t.jsxs(e.span,{style:{top:"-3.8462em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3.0448em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"W"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"0.8413em"},children:[t.jsxs(e.span,{style:{top:"-2.4247em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"Q"})})]}),t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.00773em"},children:"R"})})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.4114em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),t.jsx(e.span,{className:"mbin",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.05764em"},children:"S"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"1.0448em"},children:[t.jsxs(e.span,{style:{top:"-2.5834em",marginLeft:"-0.0576em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",children:"s"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"u"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"mma"}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03588em"},children:"ry"})]})})]}),t.jsxs(e.span,{style:{top:"-3.2198em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mopen mtight",children:"("}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"m"}),t.jsx(e.span,{className:"mclose mtight",children:")"})]})})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2527em"},children:t.jsx(e.span,{})})})]})})]}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"W"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"0.8413em"},children:[t.jsxs(e.span,{style:{top:"-2.4247em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.07153em"},children:"K"})})]}),t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.05764em"},children:"S"})})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2753em"},children:t.jsx(e.span,{})})})]})})]}),t.jsxs(e.span,{className:"mclose",children:[t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.8491em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:""})})]})})})})})]})]})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.93em"},children:t.jsx(e.span,{})})})]})}),t.jsx(e.span,{className:"mclose nulldelimiter"})]})]})]})]})}),`
`,t.jsxs(e.p,{children:["We compute the routing weights ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:""}),t.jsx(e.mo,{children:""}),t.jsxs(e.msup,{children:[t.jsx(e.mi,{mathvariant:"double-struck",children:"R"}),t.jsx(e.mi,{children:"M"})]})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\alpha \\in \\mathbb{R}^M"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.5782em",verticalAlign:"-0.0391em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.0037em"},children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8413em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathbb",children:"R"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.8413em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10903em"},children:"M"})})]})})})})})]})]})]})]})," via Softmax (or Top-K for sparsity):"]}),`
`,t.jsx(e.span,{className:"katex-display",children:t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:""}),t.jsx(e.mo,{children:"="}),t.jsx(e.mtext,{children:"softmax"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mo,{stretchy:"false",children:"["}),t.jsxs(e.msub,{children:[t.jsx(e.mtext,{children:"logit"}),t.jsx(e.mn,{children:"1"})]}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mo,{children:""}),t.jsx(e.mo,{separator:"true",children:","}),t.jsxs(e.msub,{children:[t.jsx(e.mtext,{children:"logit"}),t.jsx(e.mi,{children:"M"})]}),t.jsx(e.mo,{stretchy:"false",children:"]"}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\alpha = \\text{softmax}([\\text{logit}_1, \\dots, \\text{logit}_M])"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.4306em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.0037em"},children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"softmax"})}),t.jsx(e.span,{className:"mopen",children:"(["}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"logit"})}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.207em"},children:t.jsxs(e.span,{style:{top:"-2.4559em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:"1"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2441em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"minner",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"logit"})}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2342em"},children:t.jsxs(e.span,{style:{top:"-2.4559em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.10903em"},children:"M"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2441em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mclose",children:"])"})]})]})]})}),`
`,t.jsxs(e.p,{children:["We then construct a ",t.jsx(e.strong,{children:"Virtual Context"})," ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsxs(e.mover,{accent:"true",children:[t.jsx(e.mi,{children:"C"}),t.jsx(e.mo,{children:"~"})]}),t.jsx(e.mi,{children:"t"})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\tilde{C}_t"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1.0702em",verticalAlign:"-0.15em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord accent",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsxs(e.span,{className:"vlist",style:{height:"0.9202em"},children:[t.jsxs(e.span,{style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"})]}),t.jsxs(e.span,{style:{top:"-3.6023em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"accent-body",style:{left:"-0.1667em"},children:t.jsx(e.span,{className:"mord",children:"~"})})]})]})})})}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})]})})]}),". In a dense variant, this is a weighted sum. In a sparse variant (which we target for production), we slice only the top-",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"k"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"k"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6944em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03148em"},children:"k"})]})})]})," sources:"]}),`
`,t.jsx(e.span,{className:"katex-display",children:t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsxs(e.mover,{accent:"true",children:[t.jsx(e.mi,{children:"C"}),t.jsx(e.mo,{children:"~"})]}),t.jsx(e.mi,{children:"t"})]}),t.jsx(e.mo,{children:"="}),t.jsx(e.mtext,{children:"Concat"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsxs(e.msub,{children:[t.jsx(e.mtext,{children:"Top"}),t.jsx(e.mi,{children:"k"})]}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:""}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{mathvariant:"script",children:"S"}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\tilde{C}_t = \\text{Concat}(\\text{Top}_k(\\alpha, \\mathcal{S}))"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1.0702em",verticalAlign:"-0.15em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord accent",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsxs(e.span,{className:"vlist",style:{height:"0.9202em"},children:[t.jsxs(e.span,{style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"})]}),t.jsxs(e.span,{style:{top:"-3.6023em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"accent-body",style:{left:"-0.1667em"},children:t.jsx(e.span,{className:"mord",children:"~"})})]})]})})})}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"Concat"})}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"Top"})}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.242em"},children:t.jsxs(e.span,{style:{top:"-2.4559em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2441em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.0037em"},children:""}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord mathcal",style:{marginRight:"0.075em"},children:"S"}),t.jsx(e.span,{className:"mclose",children:"))"})]})]})]})}),`
`,t.jsx(e.h3,{children:"Stage 2: The Content Attention"}),`
`,t.jsxs(e.p,{children:["Now, standard Multi-Head Attention is applied, but ",t.jsx(e.em,{children:"only"})," on the filtered Virtual Context ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsxs(e.mover,{accent:"true",children:[t.jsx(e.mi,{children:"C"}),t.jsx(e.mo,{children:"~"})]}),t.jsx(e.mi,{children:"t"})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\tilde{C}_t"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1.0702em",verticalAlign:"-0.15em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord accent",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsxs(e.span,{className:"vlist",style:{height:"0.9202em"},children:[t.jsxs(e.span,{style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"})]}),t.jsxs(e.span,{style:{top:"-3.6023em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"accent-body",style:{left:"-0.1667em"},children:t.jsx(e.span,{className:"mord",children:"~"})})]})]})})})}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})]})})]}),", not the global context."]}),`
`,t.jsx(e.span,{className:"katex-display",children:t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"y"}),t.jsx(e.mi,{children:"t"})]}),t.jsx(e.mo,{children:"="}),t.jsx(e.mtext,{children:"Attention"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"Q"}),t.jsx(e.mo,{children:"="}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"q"}),t.jsx(e.mi,{children:"t"})]}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{children:"K"}),t.jsx(e.mo,{children:"="}),t.jsxs(e.msub,{children:[t.jsxs(e.mover,{accent:"true",children:[t.jsx(e.mi,{children:"C"}),t.jsx(e.mo,{children:"~"})]}),t.jsx(e.mi,{children:"t"})]}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mi,{children:"V"}),t.jsx(e.mo,{children:"="}),t.jsxs(e.msub,{children:[t.jsxs(e.mover,{accent:"true",children:[t.jsx(e.mi,{children:"C"}),t.jsx(e.mo,{children:"~"})]}),t.jsx(e.mi,{children:"t"})]}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"y_t = \\text{Attention}(Q=q_t, K=\\tilde{C}_t, V=\\tilde{C}_t)"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"Attention"})}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",children:"Q"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"K"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1.1146em",verticalAlign:"-0.1944em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord accent",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsxs(e.span,{className:"vlist",style:{height:"0.9202em"},children:[t.jsxs(e.span,{style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"})]}),t.jsxs(e.span,{style:{top:"-3.6023em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"accent-body",style:{left:"-0.1667em"},children:t.jsx(e.span,{className:"mord",children:"~"})})]})]})})})}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"V"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1.1702em",verticalAlign:"-0.25em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord accent",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsxs(e.span,{className:"vlist",style:{height:"0.9202em"},children:[t.jsxs(e.span,{style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07153em"},children:"C"})]}),t.jsxs(e.span,{style:{top:"-3.6023em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"accent-body",style:{left:"-0.1667em"},children:t.jsx(e.span,{className:"mord",children:"~"})})]})]})})})}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0715em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mclose",children:")"})]})]})]})}),`
`,t.jsxs(e.p,{children:["This reduces the complexity from ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"O"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsxs(e.msubsup,{children:[t.jsx(e.mi,{children:"T"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"t"}),t.jsx(e.mi,{children:"o"}),t.jsx(e.mi,{children:"t"}),t.jsx(e.mi,{children:"a"}),t.jsx(e.mi,{children:"l"})]}),t.jsx(e.mn,{children:"2"})]}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"O(T_{total}^2)"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1.0972em",verticalAlign:"-0.2831em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"0.8141em"},children:[t.jsxs(e.span,{style:{top:"-2.4169em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"o"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"a"}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.01968em"},children:"l"})]})})]}),t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:"2"})})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2831em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mclose",children:")"})]})})]})," to ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"O"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsxs(e.msubsup,{children:[t.jsx(e.mi,{children:"T"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"s"}),t.jsx(e.mi,{children:"o"}),t.jsx(e.mi,{children:"u"}),t.jsx(e.mi,{children:"r"}),t.jsx(e.mi,{children:"c"}),t.jsx(e.mi,{children:"e"})]}),t.jsx(e.mn,{children:"2"})]}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"O(T_{source}^2)"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1.0641em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"0.8141em"},children:[t.jsxs(e.span,{style:{top:"-2.453em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",children:"so"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"u"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"rce"})]})})]}),t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:"2"})})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.247em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mclose",children:")"})]})})]}),", where ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"T"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"s"}),t.jsx(e.mi,{children:"o"}),t.jsx(e.mi,{children:"u"}),t.jsx(e.mi,{children:"r"}),t.jsx(e.mi,{children:"c"}),t.jsx(e.mi,{children:"e"})]})]}),t.jsx(e.mo,{children:""}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"T"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"t"}),t.jsx(e.mi,{children:"o"}),t.jsx(e.mi,{children:"t"}),t.jsx(e.mi,{children:"a"}),t.jsx(e.mi,{children:"l"})]})]})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"T_{source} \\ll T_{total}"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.1514em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",children:"so"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"u"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"rce"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"T"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"o"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"a"}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.01968em"},children:"l"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})]})]})]}),"."]}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h2,{children:"Implementation Strategy & Algorithm"}),`
`,t.jsxs(e.p,{children:["To make this efficient, we cannot physically move data around in GPU memory at every step. The implementation requires ",t.jsx(e.strong,{children:"Block-Sparse Kernels"})," (similar to those used in Triton or specialized MoE implementations)."]}),`
`,t.jsx(e.p,{children:"Here is the PyTorch-style logic for the forward pass:"}),`
`,t.jsx(e.pre,{children:t.jsxs(e.code,{className:"hljs language-python",children:[t.jsx(e.span,{className:"hljs-keyword",children:"import"}),` torch
`,t.jsx(e.span,{className:"hljs-keyword",children:"import"})," torch.nn ",t.jsx(e.span,{className:"hljs-keyword",children:"as"}),` nn
`,t.jsx(e.span,{className:"hljs-keyword",children:"import"})," torch.nn.functional ",t.jsx(e.span,{className:"hljs-keyword",children:"as"}),` F

`,t.jsx(e.span,{className:"hljs-keyword",children:"class"})," ",t.jsx(e.span,{className:"hljs-title class_",children:"HierarchicalSourceAttention"}),`(nn.Module):
    `,t.jsx(e.span,{className:"hljs-keyword",children:"def"})," ",t.jsx(e.span,{className:"hljs-title function_",children:"__init__"}),"(",t.jsxs(e.span,{className:"hljs-params",children:["self, d_model, num_heads, num_sources, top_k=",t.jsx(e.span,{className:"hljs-number",children:"2"})]}),`):
        `,t.jsx(e.span,{className:"hljs-built_in",children:"super"}),`().__init__()
        `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.d_model = d_model
        `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.top_k = top_k
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# 1. Routing Projections"}),`
        `,t.jsx(e.span,{className:"hljs-comment",children:"# We assume each source has a 'signature' vector of size d_model"}),`
        `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.w_router_q = nn.Linear(d_model, d_model)
        `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.w_router_k = nn.Linear(d_model, d_model)
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# 2. Standard Attention"}),`
        `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.attention = nn.MultiheadAttention(d_model, num_heads)

    `,t.jsx(e.span,{className:"hljs-keyword",children:"def"})," ",t.jsx(e.span,{className:"hljs-title function_",children:"forward"}),"(",t.jsx(e.span,{className:"hljs-params",children:"self, query, source_banks, source_signatures"}),`):
        `,t.jsx(e.span,{className:"hljs-string",children:`"""
        query: [Batch, 1, d_model] - Current token
        source_banks: List of M tensors, each [Batch, Seq_Len_m, d_model]
        source_signatures: [Batch, M, d_model] - Summary vector for each source
        """`}),`
        B = query.size(`,t.jsx(e.span,{className:"hljs-number",children:"0"}),`)
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# --- STAGE 1: ROUTING ---"}),`
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# Project Query and Signatures"}),`
        `,t.jsx(e.span,{className:"hljs-comment",children:"# r_q: [B, 1, D]"}),`
        r_q = `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.w_router_q(query) 
        `,t.jsx(e.span,{className:"hljs-comment",children:"# r_k: [B, M, D]"}),`
        r_k = `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.w_router_k(source_signatures) 
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# Calculate Routing Logits"}),`
        `,t.jsx(e.span,{className:"hljs-comment",children:"# logits: [B, 1, M]"}),`
        logits = torch.matmul(r_q, r_k.transpose(-`,t.jsx(e.span,{className:"hljs-number",children:"1"}),", -",t.jsx(e.span,{className:"hljs-number",children:"2"}),`))
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# Select Top-K Sources"}),`
        `,t.jsx(e.span,{className:"hljs-comment",children:"# indices: [B, 1, k]"}),`
        weights, indices = torch.topk(logits, k=`,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),".top_k, dim=-",t.jsx(e.span,{className:"hljs-number",children:"1"}),`)
        weights = F.softmax(weights, dim=-`,t.jsx(e.span,{className:"hljs-number",children:"1"}),`)
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# --- STAGE 2: GATHER & ATTEND ---"}),`
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# In a real kernel, we wouldn't cat; we'd read indices directly."}),`
        `,t.jsx(e.span,{className:"hljs-comment",children:"# For python prototyping, we gather the selected banks."}),`
        
        selected_keys = []
        selected_values = []
        
        `,t.jsxs(e.span,{className:"hljs-comment",children:["# ",t.jsx(e.span,{className:"hljs-doctag",children:"NOTE:"})," This loop is the bottleneck in Python; "]}),`
        `,t.jsx(e.span,{className:"hljs-comment",children:"# needs custom CUDA kernel for gathering jagged tensors."}),`
        `,t.jsx(e.span,{className:"hljs-keyword",children:"for"})," b ",t.jsx(e.span,{className:"hljs-keyword",children:"in"})," ",t.jsx(e.span,{className:"hljs-built_in",children:"range"}),`(B):
            batch_k = []
            `,t.jsx(e.span,{className:"hljs-keyword",children:"for"})," idx ",t.jsx(e.span,{className:"hljs-keyword",children:"in"})," indices[b, ",t.jsx(e.span,{className:"hljs-number",children:"0"}),`]:
                batch_k.append(source_banks[idx.item()][b])
            selected_keys.append(torch.cat(batch_k, dim=`,t.jsx(e.span,{className:"hljs-number",children:"0"}),`))
            
        `,t.jsx(e.span,{className:"hljs-comment",children:"# Stack implies equal length for simplicity here, "}),`
        `,t.jsx(e.span,{className:"hljs-comment",children:"# normally requires padding or nested tensors."}),`
        virtual_context = torch.stack(selected_keys) `,t.jsx(e.span,{className:"hljs-comment",children:"# [B, K*Seq_Len, D]"}),`
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# --- STAGE 3: ATTENTION ---"}),`
        
        attn_out, _ = `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.attention(query, virtual_context, virtual_context)
        
        `,t.jsx(e.span,{className:"hljs-keyword",children:"return"}),` attn_out, indices
`]})}),`
`,t.jsx(e.h3,{children:"Challenges to Address"}),`
`,t.jsxs(e.ol,{children:[`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"The Cold Start Problem"}),': At the beginning of training, the router is random. If it never selects a specific source (e.g., the "Vision Encoder"), that source receives no gradients and never learns. We will need ',t.jsx(e.strong,{children:"load balancing auxiliary losses"}),", similar to Switch Transformers, to ensure all sources are sampled adequately."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Jagged Tensors"}),': Different sources have different sequence lengths. A "Tool Output" might be 50 tokens; a "Long-Term Memory" chunk might be 512. Batching this efficiently requires heavy use of ',t.jsx(e.code,{children:"torch.nested"})," or FlashAttention with variable sequence length support."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Source Signature Learning"}),": How do we represent a source before we attend to it? A learnable ",t.jsx(e.code,{children:"[CLS]"})," token for each source bank is the most likely candidate, updated via backpropagation through the router."]}),`
`]}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h2,{children:"Why This Matters"}),`
`,t.jsxs(e.p,{children:["HSA represents a shift from ",t.jsx(e.strong,{children:"Passive Context"})," to ",t.jsx(e.strong,{children:"Active Inquiry"}),"."]}),`
`,t.jsxs(e.p,{children:["In current architectures, the model is a passive recipient of a massive context window. In an HSA architecture, the model becomes an active agent that ",t.jsx(e.em,{children:"queries"}),' its environment. It asks: "Do I need visual information now?" or "Do I need to check the encyclopedia?"']}),`
`,t.jsxs(e.p,{children:['If successful, this allows us to decouple "Total Knowledge" from "Inference Cost." We could theoretically have a model with access to 100GB of source banks, but because it only routes to the top-2 relevant banks per token, the inference latency remains as fast as a small 7B model. This is the path toward ',t.jsx(e.strong,{children:"Infinite Memory"})," without infinite compute."]})]})}function OR(s={}){const{wrapper:e}={...ee(),...s.components};return e?t.jsx(e,{...s,children:t.jsx(ox,{...s})}):ox(s)}const FR={title:"ROUTING AS DIFFERENTIABLE PROGRAM INDUCTION",category:"ENGINEERING",date:"2025.11.24",excerpt:"A DYNAMIC SWITCH THAT SELECTS THE CORRECT OPERATION."},VR="5 MIN";function cx(s){const e={annotation:"annotation",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",math:"math",mfrac:"mfrac",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",msqrt:"msqrt",msub:"msub",msup:"msup",mtext:"mtext",munderover:"munderover",ol:"ol",p:"p",path:"path",pre:"pre",semantics:"semantics",span:"span",strong:"strong",svg:"svg",ul:"ul",...ee(),...s.components};return t.jsxs(t.Fragment,{children:[t.jsx(e.p,{children:"The Transformer is a powerful pattern matcher, but a poor algorithmist. It struggles with tasks that are trivial for a Python script: sorting a list, counting specific tokens, or performing exact arithmetic. This is because the core operation of the TransformerDot-Product Attentionis fixed. No matter the task, the model attempts to solve it by averaging value vectors based on query-key similarity."}),`
`,t.jsx(e.p,{children:"We force the model to simulate algorithms using a mechanism designed for fuzzy retrieval. This is inefficient and brittle."}),`
`,t.jsxs(e.p,{children:[t.jsx(e.strong,{children:"Routing as Differentiable Program Induction (RDPI)"})," proposes a paradigm shift. Instead of a fixed Attention mechanism, we provide the model with a library of ",t.jsx(e.strong,{children:"Differentiable Primitives"})," (Attention, Convolution, Sorting, Identity, Linear Projection). At every step, the model does not just attend to data; it ",t.jsx(e.strong,{children:"compiles a program"})," by routing the input state to the optimal computational primitive."]}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h2,{children:'The Problem: The "Hammer" of Attention'}),`
`,t.jsx(e.p,{children:"Currently, we treat Self-Attention as a universal solvent."}),`
`,t.jsxs(e.ul,{children:[`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Task:"}),' "Find the noun." -> ',t.jsx(e.strong,{children:"Mechanism:"})," Attention."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Task:"}),' "Sort these numbers." -> ',t.jsx(e.strong,{children:"Mechanism:"})," Attention."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Task:"}),' "Copy this exact string." -> ',t.jsx(e.strong,{children:"Mechanism:"})," Attention."]}),`
`]}),`
`,t.jsxs(e.p,{children:['To "sort" numbers, a Transformer must learn a complex, high-dimensional attention pattern that approximates a sorting operation. This wastes parameter capacity. A dedicated "Sort" primitive would be ',t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"O"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"N"}),t.jsx(e.mi,{children:"log"}),t.jsx(e.mo,{children:""}),t.jsx(e.mi,{children:"N"}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"O(N \\log N)"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsxs(e.span,{className:"mop",children:["lo",t.jsx(e.span,{style:{marginRight:"0.01389em"},children:"g"})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),t.jsx(e.span,{className:"mclose",children:")"})]})})]})," or even ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"O"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"N"}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"O(N)"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),t.jsx(e.span,{className:"mclose",children:")"})]})})]})," in a differentiable relaxation, whereas simulating it via attention is often ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"O"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsxs(e.msup,{children:[t.jsx(e.mi,{children:"N"}),t.jsx(e.mn,{children:"2"})]}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"O(N^2)"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1.0641em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.8141em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:"2"})})]})})})})})]}),t.jsx(e.span,{className:"mclose",children:")"})]})})]})," and approximate."]}),`
`,t.jsxs(e.p,{children:[t.jsx(e.strong,{children:"RDPIs Proposition:"})," The layer should not be a static block of math. It should be a dynamic switch that selects the correct operation for the data distribution at hand."]}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h2,{children:"The Formalism: The Dynamic Operator"}),`
`,t.jsxs(e.p,{children:["Let ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{mathvariant:"script",children:"X"}),t.jsx(e.mo,{children:""}),t.jsxs(e.msup,{children:[t.jsx(e.mi,{mathvariant:"double-struck",children:"R"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"T"}),t.jsx(e.mo,{children:""}),t.jsx(e.mi,{children:"D"})]})]})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\mathcal{X} \\in \\mathbb{R}^{T \\times D}"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.7224em",verticalAlign:"-0.0391em"}}),t.jsx(e.span,{className:"mord mathcal",style:{marginRight:"0.14643em"},children:"X"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8413em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathbb",children:"R"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.8413em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.13889em"},children:"T"}),t.jsx(e.span,{className:"mbin mtight",children:""}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"D"})]})})]})})})})})]})]})]})]}),` be the input sequence.
Let `,t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{mathvariant:"double-struck",children:"P"}),t.jsx(e.mo,{children:"="}),t.jsx(e.mo,{stretchy:"false",children:"{"}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"P"}),t.jsx(e.mn,{children:"1"})]}),t.jsx(e.mo,{separator:"true",children:","}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"P"}),t.jsx(e.mn,{children:"2"})]}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mo,{children:""}),t.jsx(e.mo,{separator:"true",children:","}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"P"}),t.jsx(e.mi,{children:"K"})]}),t.jsx(e.mo,{stretchy:"false",children:"}"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\mathbb{P} = \\{P_1, P_2, \\dots, P_K\\}"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6889em"}}),t.jsx(e.span,{className:"mord mathbb",children:"P"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mopen",children:"{"}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3011em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:"1"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3011em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:"2"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"minner",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3283em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.07153em"},children:"K"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mclose",children:"}"})]})]})]})," be a set of ",t.jsx(e.strong,{children:"Differentiable Primitives"}),"."]}),`
`,t.jsxs(e.p,{children:["Each primitive ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"P"}),t.jsx(e.mi,{children:"k"})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"P_k"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})]})})]})," is a function ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"P"}),t.jsx(e.mi,{children:"k"})]}),t.jsx(e.mo,{children:":"}),t.jsxs(e.msup,{children:[t.jsx(e.mi,{mathvariant:"double-struck",children:"R"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"T"}),t.jsx(e.mo,{children:""}),t.jsx(e.mi,{children:"D"})]})]}),t.jsx(e.mo,{children:""}),t.jsxs(e.msup,{children:[t.jsx(e.mi,{mathvariant:"double-struck",children:"R"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"T"}),t.jsx(e.mo,{children:""}),t.jsx(e.mi,{children:"D"})]})]})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"P_k: \\mathbb{R}^{T \\times D} \\to \\mathbb{R}^{T \\times D}"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:":"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8413em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathbb",children:"R"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.8413em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.13889em"},children:"T"}),t.jsx(e.span,{className:"mbin mtight",children:""}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"D"})]})})]})})})})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8413em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathbb",children:"R"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.8413em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.13889em"},children:"T"}),t.jsx(e.span,{className:"mbin mtight",children:""}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"D"})]})})]})})})})})]})]})]})]}),`.
Examples of Primitives:`]}),`
`,t.jsxs(e.ol,{children:[`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Semantic Retrieval"}),": ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"P"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"a"}),t.jsx(e.mi,{children:"t"}),t.jsx(e.mi,{children:"t"}),t.jsx(e.mi,{children:"n"})]})]}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"X"}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mo,{children:"="}),t.jsx(e.mtext,{children:"Softmax"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"X"}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"W"}),t.jsx(e.mi,{children:"Q"})]}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"X"}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"W"}),t.jsx(e.mi,{children:"K"})]}),t.jsxs(e.msup,{children:[t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mi,{children:"T"})]}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mi,{children:"X"}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"W"}),t.jsx(e.mi,{children:"V"})]})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"P_{attn}(X) = \\text{Softmax}(XW_Q (XW_K)^T) XW_V"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",children:"a"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"tt"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"n"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1.1274em",verticalAlign:"-0.2861em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"Softmax"})}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"W"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3283em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"Q"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.2861em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"W"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3283em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.07153em"},children:"K"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsxs(e.span,{className:"mclose",children:[t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.8413em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.13889em"},children:"T"})})]})})})})})]}),t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"W"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3283em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.22222em"},children:"V"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})]})]})]})]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Local Mixing"}),": ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"P"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"c"}),t.jsx(e.mi,{children:"o"}),t.jsx(e.mi,{children:"n"}),t.jsx(e.mi,{children:"v"})]})]}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"X"}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mo,{children:"="}),t.jsx(e.mtext,{children:"Conv1D"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"X"}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"P_{conv}(X) = \\text{Conv1D}(X)"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.1514em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",children:"co"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"n"}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03588em"},children:"v"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"Conv1D"})}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),t.jsx(e.span,{className:"mclose",children:")"})]})]})]})]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"No-Op (Memory)"}),": ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"P"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"i"}),t.jsx(e.mi,{children:"d"})]})]}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"X"}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mo,{children:"="}),t.jsx(e.mi,{children:"X"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"P_{id}(X) = X"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",children:"i"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"d"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6833em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"})]})]})]})]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Permutation (Sort)"}),": ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"P"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"s"}),t.jsx(e.mi,{children:"o"}),t.jsx(e.mi,{children:"r"}),t.jsx(e.mi,{children:"t"})]})]}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"X"}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mo,{children:"="}),t.jsx(e.mtext,{children:"DifferentiableSort"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"X"}),t.jsx(e.mo,{separator:"true",children:","}),t.jsx(e.mtext,{children:"key"}),t.jsx(e.mo,{children:"="}),t.jsx(e.mi,{children:"f"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"X"}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"P_{sort}(X) = \\text{DifferentiableSort}(X, \\text{key}=f(X))"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"sor"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"DifferentiableSort"})}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),t.jsx(e.span,{className:"mpunct",children:","}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"key"})}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10764em"},children:"f"}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),t.jsx(e.span,{className:"mclose",children:"))"})]})]})]})]}),`
`]}),`
`,t.jsxs(e.p,{children:["At timestep ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:"t"})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"t"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.6151em"}}),t.jsx(e.span,{className:"mord mathnormal",children:"t"})]})})]}),", for a query vector ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"q"}),t.jsx(e.mi,{children:"t"})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"q_t"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})]})})]}),", RDPI computes a routing distribution ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:""})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\pi"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.4306em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:""})]})})]})," over the primitives:"]}),`
`,t.jsx(e.span,{className:"katex-display",children:t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:""}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"q"}),t.jsx(e.mi,{children:"t"})]}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mo,{children:"="}),t.jsx(e.mtext,{children:"Softmax"}),t.jsxs(e.mrow,{children:[t.jsx(e.mo,{fence:"true",children:"("}),t.jsxs(e.mfrac,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"q"}),t.jsx(e.mi,{children:"t"})]}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"W"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"r"}),t.jsx(e.mi,{children:"o"}),t.jsx(e.mi,{children:"u"}),t.jsx(e.mi,{children:"t"}),t.jsx(e.mi,{children:"e"}),t.jsx(e.mi,{children:"r"})]})]})]}),t.jsx(e.msqrt,{children:t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"d"}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"m"}),t.jsx(e.mi,{children:"o"}),t.jsx(e.mi,{children:"d"}),t.jsx(e.mi,{children:"e"}),t.jsx(e.mi,{children:"l"})]})]})})]}),t.jsx(e.mo,{fence:"true",children:")"})]}),t.jsx(e.mo,{children:""}),t.jsxs(e.msup,{children:[t.jsx(e.mi,{mathvariant:"double-struck",children:"R"}),t.jsx(e.mi,{children:"K"})]})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\pi(q_t) = \\text{Softmax}\\left(\\frac{q_t W_{router}}{\\sqrt{d_{model}}}\\right) \\in \\mathbb{R}^K"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:""}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"2.4em",verticalAlign:"-0.95em"}}),t.jsx(e.span,{className:"mord text",children:t.jsx(e.span,{className:"mord",children:"Softmax"})}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsxs(e.span,{className:"minner",children:[t.jsx(e.span,{className:"mopen delimcenter",style:{top:"0em"},children:t.jsx(e.span,{className:"delimsizing size3",children:"("})}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mopen nulldelimiter"}),t.jsx(e.span,{className:"mfrac",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"1.3603em"},children:[t.jsxs(e.span,{style:{top:"-2.2528em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"mord",children:t.jsx(e.span,{className:"mord sqrt",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"0.8572em"},children:[t.jsxs(e.span,{className:"svg-align",style:{top:"-3em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"mord",style:{paddingLeft:"0.833em"},children:t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",children:"d"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",children:"m"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"o"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"d"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"e"}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.01968em"},children:"l"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})})]}),t.jsxs(e.span,{style:{top:"-2.8172em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"hide-tail",style:{minWidth:"0.853em",height:"1.08em"},children:t.jsx(e.svg,{xmlns:"http://www.w3.org/2000/svg",width:"400em",height:"1.08em",viewBox:"0 0 400000 1080",preserveAspectRatio:"xMinYMin slice",children:t.jsx(e.path,{d:`M95,702
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l0 -0
c5.3,-9.3,12,-14,20,-14
H400000v40H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M834 80h400000v40h-400000z`})})})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.1828em"},children:t.jsx(e.span,{})})})]})})})]}),t.jsxs(e.span,{style:{top:"-3.23em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsx(e.span,{className:"frac-line",style:{borderBottomWidth:"0.04em"}})]}),t.jsxs(e.span,{style:{top:"-3.677em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"W"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",children:"ro"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"u"}),t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"}),t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.02778em"},children:"er"})]})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})]})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.93em"},children:t.jsx(e.span,{})})})]})}),t.jsx(e.span,{className:"mclose nulldelimiter"})]}),t.jsx(e.span,{className:"mclose delimcenter",style:{top:"0em"},children:t.jsx(e.span,{className:"delimsizing size3",children:")"})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.8913em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathbb",children:"R"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.8913em"},children:t.jsxs(e.span,{style:{top:"-3.113em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.07153em"},children:"K"})})]})})})})})]})]})]})]})}),`
`,t.jsxs(e.p,{children:["The output ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"y"}),t.jsx(e.mi,{children:"t"})]})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"y_t"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]})]})})]})," is the weighted execution of the selected primitives:"]}),`
`,t.jsx(e.span,{className:"katex-display",children:t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",display:"block",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"y"}),t.jsx(e.mi,{children:"t"})]}),t.jsx(e.mo,{children:"="}),t.jsxs(e.munderover,{children:[t.jsx(e.mo,{children:""}),t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"k"}),t.jsx(e.mo,{children:"="}),t.jsx(e.mn,{children:"1"})]}),t.jsx(e.mi,{children:"K"})]}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:""}),t.jsx(e.mi,{children:"k"})]}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"q"}),t.jsx(e.mi,{children:"t"})]}),t.jsx(e.mo,{stretchy:"false",children:")"}),t.jsx(e.mo,{children:""}),t.jsxs(e.msub,{children:[t.jsx(e.mi,{children:"P"}),t.jsx(e.mi,{children:"k"})]}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"X"}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"y_t = \\sum_{k=1}^{K} \\pi_k(q_t) \\cdot P_k(X)"})]})})}),t.jsxs(e.span,{className:"katex-html","aria-hidden":"true",children:[t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.625em",verticalAlign:"-0.1944em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}}),t.jsx(e.span,{className:"mrel",children:"="}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"3.1304em",verticalAlign:"-1.3021em"}}),t.jsx(e.span,{className:"mop op-limits",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsxs(e.span,{className:"vlist",style:{height:"1.8283em"},children:[t.jsxs(e.span,{style:{top:"-1.8479em",marginLeft:"0em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3.05em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsxs(e.span,{className:"mord mtight",children:[t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"}),t.jsx(e.span,{className:"mrel mtight",children:"="}),t.jsx(e.span,{className:"mord mtight",children:"1"})]})})]}),t.jsxs(e.span,{style:{top:"-3.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3.05em"}}),t.jsx(e.span,{children:t.jsx(e.span,{className:"mop op-symbol large-op",children:""})})]}),t.jsxs(e.span,{style:{top:"-4.3em",marginLeft:"0em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"3.05em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.07153em"},children:"K"})})})]})]}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"1.3021em"},children:t.jsx(e.span,{})})})]})}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.1667em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:""}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"q"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.2806em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.0359em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",children:"t"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mclose",children:")"}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}}),t.jsx(e.span,{className:"mbin",children:""}),t.jsx(e.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.13889em"},children:"P"}),t.jsx(e.span,{className:"msupsub",children:t.jsxs(e.span,{className:"vlist-t vlist-t2",children:[t.jsxs(e.span,{className:"vlist-r",children:[t.jsx(e.span,{className:"vlist",style:{height:"0.3361em"},children:t.jsxs(e.span,{style:{top:"-2.55em",marginLeft:"-0.1389em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mathnormal mtight",style:{marginRight:"0.03148em"},children:"k"})})]})}),t.jsx(e.span,{className:"vlist-s",children:""})]}),t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.15em"},children:t.jsx(e.span,{})})})]})})]}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.07847em"},children:"X"}),t.jsx(e.span,{className:"mclose",children:")"})]})]})]})}),`
`,t.jsxs(e.p,{children:["In a ",t.jsx(e.strong,{children:"Hard Routing"})," limit (which we aim for via annealing or Gumbel-Softmax), ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsx(e.mrow,{children:t.jsx(e.mi,{children:""})}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"\\pi"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"0.4306em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:""})]})})]})," becomes a one-hot vector. The model effectively says: ",t.jsxs(e.em,{children:['"For this token, I will run the ',t.jsx(e.strong,{children:"Convolution"}),' primitive."']})]}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h2,{children:"The Algorithm: Differentiable Instruction Set"}),`
`,t.jsxs(e.p,{children:["The implementation requires defining the primitives as ",t.jsx(e.code,{children:"nn.Module"})," blocks and routing through them. A crucial innovation here is that different primitives have different computational complexities."]}),`
`,t.jsx(e.pre,{children:t.jsxs(e.code,{className:"hljs language-python",children:[t.jsx(e.span,{className:"hljs-keyword",children:"import"}),` torch
`,t.jsx(e.span,{className:"hljs-keyword",children:"import"})," torch.nn ",t.jsx(e.span,{className:"hljs-keyword",children:"as"}),` nn
`,t.jsx(e.span,{className:"hljs-keyword",children:"import"})," torch.nn.functional ",t.jsx(e.span,{className:"hljs-keyword",children:"as"}),` F

`,t.jsx(e.span,{className:"hljs-keyword",children:"class"})," ",t.jsx(e.span,{className:"hljs-title class_",children:"RDPIBlock"}),`(nn.Module):
    `,t.jsx(e.span,{className:"hljs-keyword",children:"def"})," ",t.jsx(e.span,{className:"hljs-title function_",children:"__init__"}),"(",t.jsxs(e.span,{className:"hljs-params",children:["self, d_model, primitives=[",t.jsx(e.span,{className:"hljs-string",children:"'attention'"}),", ",t.jsx(e.span,{className:"hljs-string",children:"'conv'"}),", ",t.jsx(e.span,{className:"hljs-string",children:"'identity'"}),"]"]}),`):
        `,t.jsx(e.span,{className:"hljs-built_in",children:"super"}),`().__init__()
        `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.d_model = d_model
        `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.primitives = nn.ModuleList()
        `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.primitive_names = primitives
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# Initialize Primitives"}),`
        `,t.jsx(e.span,{className:"hljs-keyword",children:"for"})," p ",t.jsx(e.span,{className:"hljs-keyword",children:"in"}),` primitives:
            `,t.jsx(e.span,{className:"hljs-keyword",children:"if"})," p == ",t.jsx(e.span,{className:"hljs-string",children:"'attention'"}),`:
                `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),".primitives.append(nn.MultiheadAttention(d_model, num_heads=",t.jsx(e.span,{className:"hljs-number",children:"4"}),`))
            `,t.jsx(e.span,{className:"hljs-keyword",children:"elif"})," p == ",t.jsx(e.span,{className:"hljs-string",children:"'conv'"}),`:
                `,t.jsx(e.span,{className:"hljs-comment",children:"# Causal Convolution for local patterns"}),`
                `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.primitives.append(nn.Sequential(
                    nn.Conv1d(d_model, d_model, kernel_size=`,t.jsx(e.span,{className:"hljs-number",children:"3"}),", padding=",t.jsx(e.span,{className:"hljs-number",children:"1"}),`),
                    nn.ReLU()
                ))
            `,t.jsx(e.span,{className:"hljs-keyword",children:"elif"})," p == ",t.jsx(e.span,{className:"hljs-string",children:"'identity'"}),`:
                `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.primitives.append(nn.Identity())
                
        `,t.jsx(e.span,{className:"hljs-comment",children:"# The Instruction Router"}),`
        `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),".router = nn.Linear(d_model, ",t.jsx(e.span,{className:"hljs-built_in",children:"len"}),`(primitives))

    `,t.jsx(e.span,{className:"hljs-keyword",children:"def"})," ",t.jsx(e.span,{className:"hljs-title function_",children:"forward"}),"(",t.jsx(e.span,{className:"hljs-params",children:"self, x"}),`):
        `,t.jsx(e.span,{className:"hljs-comment",children:"# x: [Seq, Batch, D]"}),`
        seq_len, batch_size, d = x.shape
        
        `,t.jsx(e.span,{className:"hljs-comment",children:'# 1. Compute Routing Decision (The "Program")'}),`
        `,t.jsx(e.span,{className:"hljs-comment",children:"# We route based on the input content at each token"}),`
        `,t.jsx(e.span,{className:"hljs-comment",children:"# logits: [Seq, Batch, Num_Primitives]"}),`
        router_logits = `,t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.router(x) 
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# Gumbel-Softmax allows differentiable discrete selection"}),`
        `,t.jsx(e.span,{className:"hljs-comment",children:"# During training, this is soft; during inference, it's hard selection."}),`
        `,t.jsx(e.span,{className:"hljs-keyword",children:"if"})," ",t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.training:
            weights = F.gumbel_softmax(router_logits, tau=`,t.jsx(e.span,{className:"hljs-number",children:"1.0"}),", hard=",t.jsx(e.span,{className:"hljs-literal",children:"False"}),", dim=-",t.jsx(e.span,{className:"hljs-number",children:"1"}),`)
        `,t.jsx(e.span,{className:"hljs-keyword",children:"else"}),`:
            weights = F.softmax(router_logits, dim=-`,t.jsx(e.span,{className:"hljs-number",children:"1"}),") ",t.jsx(e.span,{className:"hljs-comment",children:"# Or argmax"}),`
            
        `,t.jsx(e.span,{className:"hljs-comment",children:"# 2. Execute Primitives"}),`
        outputs = []
        `,t.jsx(e.span,{className:"hljs-keyword",children:"for"})," i, primitive ",t.jsx(e.span,{className:"hljs-keyword",children:"in"})," ",t.jsx(e.span,{className:"hljs-built_in",children:"enumerate"}),"(",t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),`.primitives):
            `,t.jsx(e.span,{className:"hljs-keyword",children:"if"})," ",t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),".primitive_names[i] == ",t.jsx(e.span,{className:"hljs-string",children:"'attention'"}),`:
                `,t.jsx(e.span,{className:"hljs-comment",children:"# Attention needs Q,K,V (here self-attention)"}),`
                out, _ = primitive(x, x, x)
                outputs.append(out)
            `,t.jsx(e.span,{className:"hljs-keyword",children:"elif"})," ",t.jsx(e.span,{className:"hljs-variable language_",children:"self"}),".primitive_names[i] == ",t.jsx(e.span,{className:"hljs-string",children:"'conv'"}),`:
                `,t.jsx(e.span,{className:"hljs-comment",children:"# Conv expects [Batch, D, Seq]"}),`
                out = primitive(x.permute(`,t.jsx(e.span,{className:"hljs-number",children:"1"}),", ",t.jsx(e.span,{className:"hljs-number",children:"2"}),", ",t.jsx(e.span,{className:"hljs-number",children:"0"}),")).permute(",t.jsx(e.span,{className:"hljs-number",children:"2"}),", ",t.jsx(e.span,{className:"hljs-number",children:"0"}),", ",t.jsx(e.span,{className:"hljs-number",children:"1"}),`)
                outputs.append(out)
            `,t.jsx(e.span,{className:"hljs-keyword",children:"else"}),`:
                outputs.append(primitive(x))
                
        `,t.jsx(e.span,{className:"hljs-comment",children:"# Stack: [Seq, Batch, Num_Prims, D]"}),`
        stacked_outputs = torch.stack(outputs, dim=`,t.jsx(e.span,{className:"hljs-number",children:"2"}),`)
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# 3. Aggregate results based on weights"}),`
        `,t.jsx(e.span,{className:"hljs-comment",children:"# weights: [Seq, Batch, Num_Prims, 1]"}),`
        weights = weights.unsqueeze(-`,t.jsx(e.span,{className:"hljs-number",children:"1"}),`)
        
        `,t.jsx(e.span,{className:"hljs-comment",children:"# Weighted Sum (Differentiable Execution)"}),`
        final_output = (stacked_outputs * weights).`,t.jsx(e.span,{className:"hljs-built_in",children:"sum"}),"(dim=",t.jsx(e.span,{className:"hljs-number",children:"2"}),`)
        
        `,t.jsx(e.span,{className:"hljs-keyword",children:"return"}),` final_output, weights
`]})}),`
`,t.jsx(e.h3,{children:"Why This Is Promising (IMO)"}),`
`,t.jsxs(e.ol,{children:[`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Inductive Bias"}),': We are currently hoping Transformers "discover" convolution and sorting from scratch. RDPI gives them the inductive bias to do so efficiently.']}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Interpretability"}),": This is a game-changer for debugging. We can look at a trace of the model and see:",`
`,t.jsxs(e.ul,{children:[`
`,t.jsxs(e.li,{children:[t.jsx(e.em,{children:"Layer 1, Token 5:"}),' "Used ',t.jsx(e.strong,{children:"Convolution"}),'" (Processing local syntax).']}),`
`,t.jsxs(e.li,{children:[t.jsx(e.em,{children:"Layer 2, Token 5:"}),' "Used ',t.jsx(e.strong,{children:"Attention"}),'" (Linking to previous subject).']}),`
`,t.jsxs(e.li,{children:[t.jsx(e.em,{children:"Layer 3, Token 5:"}),' "Used ',t.jsx(e.strong,{children:"Identity"}),`" (Preserving information).
This looks like a stack trace, not a heat map.`]}),`
`]}),`
`]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Efficiency"}),": If 50% of tokens only require a ",t.jsx(e.code,{children:"Conv1D"})," or ",t.jsx(e.code,{children:"Identity"})," operation (which are ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"O"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsx(e.mi,{children:"N"}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"O(N)"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),t.jsx(e.span,{className:"mclose",children:")"})]})})]}),"), and we use sparse hard-routing, we can bypass the expensive ",t.jsxs(e.span,{className:"katex",children:[t.jsx(e.span,{className:"katex-mathml",children:t.jsx(e.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:t.jsxs(e.semantics,{children:[t.jsxs(e.mrow,{children:[t.jsx(e.mi,{children:"O"}),t.jsx(e.mo,{stretchy:"false",children:"("}),t.jsxs(e.msup,{children:[t.jsx(e.mi,{children:"N"}),t.jsx(e.mn,{children:"2"})]}),t.jsx(e.mo,{stretchy:"false",children:")"})]}),t.jsx(e.annotation,{encoding:"application/x-tex",children:"O(N^2)"})]})})}),t.jsx(e.span,{className:"katex-html","aria-hidden":"true",children:t.jsxs(e.span,{className:"base",children:[t.jsx(e.span,{className:"strut",style:{height:"1.0641em",verticalAlign:"-0.25em"}}),t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.02778em"},children:"O"}),t.jsx(e.span,{className:"mopen",children:"("}),t.jsxs(e.span,{className:"mord",children:[t.jsx(e.span,{className:"mord mathnormal",style:{marginRight:"0.10903em"},children:"N"}),t.jsx(e.span,{className:"msupsub",children:t.jsx(e.span,{className:"vlist-t",children:t.jsx(e.span,{className:"vlist-r",children:t.jsx(e.span,{className:"vlist",style:{height:"0.8141em"},children:t.jsxs(e.span,{style:{top:"-3.063em",marginRight:"0.05em"},children:[t.jsx(e.span,{className:"pstrut",style:{height:"2.7em"}}),t.jsx(e.span,{className:"sizing reset-size6 size3 mtight",children:t.jsx(e.span,{className:"mord mtight",children:"2"})})]})})})})})]}),t.jsx(e.span,{className:"mclose",children:")"})]})})]})," Attention matrix for half the network."]}),`
`]}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h2,{children:"Challenges to Address"}),`
`,t.jsxs(e.ol,{children:[`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Differentiable Primitives"}),": Some desired primitives (like strict sorting or stack manipulation) are non-differentiable. We must use relaxations (e.g., SoftSort) or reinforcement learning (REINFORCE) to train the router through discrete operations."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Primitive Collapse"}),': The model might find that "Attention" is generally "good enough" and ignore the other primitives, collapsing back into a standard Transformer. We need ',t.jsx(e.strong,{children:"entropy regularization"})," on the router to force it to explore the toolset."]}),`
`,t.jsxs(e.li,{children:[t.jsx(e.strong,{children:"Hardware Heterogeneity"}),': Running Convolutions and Attention in parallel branches is annoying for GPU kernels. A fused kernel that handles "Branch Divergence" efficiently will be required for production speed.']}),`
`]}),`
`,t.jsx(e.hr,{}),`
`,t.jsx(e.h2,{children:"Conclusion"}),`
`,t.jsxs(e.p,{children:["RDPI envisions a future where Neural Networks are not just static graphs of matrix multiplications, but ",t.jsx(e.strong,{children:"Dynamic Interpreters"}),' that write their own execution traces on the fly. It moves us from "Artificial Intuition" (pattern matching) toward "Artificial Reasoning" (algorithmic execution).']}),`
`,t.jsx(e.hr,{})]})}function BR(s={}){const{wrapper:e}={...ee(),...s.components};return e?t.jsx(e,{...s,children:t.jsx(cx,{...s})}):cx(s)}const WR=[{id:0,...sR,readTime:nR,component:iR,slug:"what-is-axiomatic",pinned:!0},{id:1,...rR,readTime:aR,component:lR,slug:"big-ripples"},{id:2,...oR,readTime:cR,component:hR,slug:"feature-scale-co-attention"},{id:3,...mR,readTime:dR,component:uR,slug:"quartet"},{id:4,...pR,readTime:fR,component:xR,slug:"post-darwinian-frustrations"},{id:5,...gR,readTime:jR,component:yR,slug:"quantum-determinism"},{id:6,...vR,readTime:NR,component:wR,slug:"what-is-sacred"},{id:7,..._R,readTime:bR,component:kR,slug:"low-entropy-gradients"},{id:8,...SR,readTime:TR,component:RR,slug:"i-luv-computational-graphs"},{id:9,...ER,readTime:PR,component:MR,slug:"boundless-humanity"},{id:10,...LR,readTime:AR,component:zR,slug:"power-really-is-a-virtue"},{id:11,...DR,readTime:IR,component:OR,slug:"hierarchical-source-attention"},{id:12,...FR,readTime:VR,component:BR,slug:"routing-as-differentiable-program-induction"}],UR=({isOpen:s,onClose:e})=>{const[n,i]=_.useState(null);_r.useEffect(()=>{s&&i(null)},[s]);const r=h=>{i(n===h?null:h)},a=[{id:"SCIENCE",label:"SCIENCE",path:"/science",color:"text-cyan-400"},{id:"ENGINEERING",label:"ENGINEERING",path:"/engineering",color:"text-amber-400"},{id:"PHILOSOPHY",label:"PHILOSOPHY",path:"/philosophy",color:"text-violet-400"},{id:"PERSONAL",label:"PERSONAL",path:"/personal",color:"text-red-500"}],l=h=>WR.filter(m=>m.category===h),o={closed:{x:"100%",transition:{type:"spring",stiffness:300,damping:30}},open:{x:0,transition:{type:"spring",stiffness:300,damping:30}}},c={closed:{opacity:0},open:{opacity:1}};return t.jsx(uh,{children:s&&t.jsxs(t.Fragment,{children:[t.jsx(vn.div,{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-[60]",initial:"closed",animate:"open",exit:"closed",variants:c,onClick:e}),t.jsxs(vn.div,{className:"fixed top-0 right-0 h-full w-full md:w-[400px] bg-cyber-black border-l border-cyber-border z-[70] flex flex-col shadow-2xl shadow-cyan-900/20",initial:"closed",animate:"open",exit:"closed",variants:o,children:[t.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-cyber-border",children:[t.jsx("span",{className:"font-mono text-sm tracking-widest text-cyber-text",children:"NAVIGATION // SYSTEM"}),t.jsx("button",{onClick:e,className:"text-cyber-white hover:text-cyan-400 transition-colors",children:t.jsx(OT,{size:24})})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-2",children:[t.jsxs(Ls,{to:"/",className:"block py-4 text-xl font-mono font-bold text-cyber-white hover:text-cyan-400 transition-colors border-b border-cyber-border/50",onClick:e,children:[">"," HOME"]}),a.map(h=>{const m=l(h.id),d=n===h.id;return t.jsxs("div",{className:"border-b border-cyber-border/50",children:[t.jsxs("button",{onClick:()=>r(h.id),className:`w-full flex items-center justify-between py-4 text-left group ${d?h.color:"text-cyber-text hover:text-cyber-white"}`,children:[t.jsxs("span",{className:"font-mono text-lg tracking-wider flex items-center gap-3",children:[d?"> ":""," ",h.label]}),d?t.jsx(AT,{size:16}):t.jsx(zT,{size:16})]}),t.jsx(uh,{children:d&&t.jsx(vn.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:t.jsxs("div",{className:"pl-6 pb-4 space-y-3",children:[t.jsxs(Ls,{to:h.path,className:`block font-mono text-xs ${h.color} opacity-70 hover:opacity-100 transition-opacity uppercase tracking-widest mb-4`,onClick:e,children:["[VIEW ALL ",h.label,"]"]}),m.length>0?m.map(u=>t.jsx("div",{className:"group/post cursor-pointer",children:t.jsx(Ls,{to:`${h.path}?post=${u.id}`,onClick:e,className:"block",children:t.jsx("div",{className:"font-sans text-sm text-cyber-text group-hover/post:text-cyber-white transition-colors line-clamp-1",children:u.title})})},u.id)):t.jsx("div",{className:"font-mono text-xs text-cyber-text/40 italic",children:"// NO_DATA_FOUND"})]})})})]},h.id)})]}),t.jsxs("div",{className:"p-6 border-t border-cyber-border flex flex-col gap-4",children:[t.jsxs(Ls,{to:"/about",className:"font-mono text-sm text-cyber-text hover:text-cyber-white transition-colors tracking-widest flex items-center gap-2",onClick:e,children:[t.jsx("span",{children:"[?]"})," ABOUT_OPERATOR"]}),t.jsx("div",{className:"font-mono text-xs text-cyber-text/60 text-center pt-4 border-t border-cyber-border/30",children:"SYSTEM_STATUS: ONLINE"})]})]})]})})},HR="/assets/logo_v2-v873k6Bf.png",$R=({size:s=40})=>t.jsx("div",{className:"relative rounded-full overflow-hidden border border-cyber-white/20",style:{width:s,height:s},children:t.jsx("img",{src:HR,alt:"Axiomatic Logo",className:"w-full h-full object-cover scale-110"})}),qR=()=>{const{scrollY:s}=TT(),[e,n]=_.useState(!1),[i,r]=_.useState(!1),a=is(),l=_.useRef(null),o=Pf(s,[0,600],[1,0]),c=Pf(s,u=>u>600?"none":"auto");_0(s).on("change",u=>{n(u>50)}),Hd(()=>{B.to(l.current,{rotation:360,duration:20,repeat:-1,ease:"linear"})},{scope:l});const h=[{name:"SCIENCE",path:"/science",label:"[SCI]",color:"text-cyan-400"},{name:"ENGINEERING",path:"/engineering",label:"[ENG]",color:"text-amber-400"},{name:"PHILOSOPHY",path:"/philosophy",label:"[PHI]",color:"text-violet-400"}],d=(()=>{const u=h.find(p=>a.pathname===p.path);return u?u.color:a.pathname==="/personal"?"text-red-500":"text-cyber-white"})();return t.jsxs(t.Fragment,{children:[t.jsx(vn.nav,{className:`fixed top-0 left-0 right-0 z-50 px-6 py-4 transition-all duration-300 border-b ${e?"bg-cyber-black/90 border-cyber-border backdrop-blur-sm":"bg-transparent border-transparent"}`,initial:{y:-100},animate:{y:0},transition:{duration:.5,ease:"circOut"},children:t.jsxs("div",{className:"max-w-7xl mx-auto flex justify-between items-center relative",children:[t.jsxs(Ls,{to:"/",className:`flex items-center gap-3 cursor-pointer hover:opacity-80 transition-opacity ${d}`,children:[t.jsx("div",{ref:l,children:t.jsx($R,{size:40})}),t.jsx("span",{className:"font-mono font-bold text-lg tracking-tighter",children:"AXIOMATIC"})]}),t.jsx(vn.div,{style:{opacity:o,pointerEvents:c},className:"hidden md:flex gap-8 font-mono text-xs tracking-widest text-cyber-text absolute left-1/2 -translate-x-1/2",children:h.map(u=>t.jsx(Ls,{to:u.path,className:`hover:text-cyber-white transition-colors uppercase ${a.pathname===u.path?`${u.color} font-bold underline underline-offset-4`:""}`,children:u.label},u.name))}),t.jsx("button",{className:"p-2 hover:bg-cyber-white/10 rounded-none border border-transparent hover:border-cyber-border transition-all","aria-label":"Menu",onClick:()=>r(!0),children:t.jsx(IT,{className:`w-5 h-5 ${d}`})})]})}),t.jsx(UR,{isOpen:i,onClose:()=>r(!1)})]})},XR=({className:s})=>t.jsx("svg",{viewBox:"0 0 24 24","aria-hidden":"true",className:s,fill:"currentColor",children:t.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),KR=()=>{const s=new Date().getFullYear();return t.jsx("footer",{className:"w-full py-8 bg-cyber-black border-t border-cyber-border/30 relative z-10",children:t.jsxs("div",{className:"max-w-7xl mx-auto px-6 flex flex-col md:flex-row justify-between items-center gap-6",children:[t.jsxs("div",{className:"flex flex-col items-center md:items-start gap-2",children:[t.jsx("div",{className:"font-mono font-bold text-xl text-cyber-white tracking-tighter",children:"AXIOMATIC"}),t.jsxs("div",{className:"font-mono text-[10px] text-cyber-text/60 tracking-widest",children:[" ",s," // ALL_RIGHTS_RESERVED"]})]}),t.jsxs("div",{className:"flex items-center gap-6",children:[t.jsx("a",{href:"https://github.com/okuhlemadondo",target:"_blank",rel:"noopener noreferrer",className:"text-cyber-text hover:text-cyber-white transition-colors duration-300 group","aria-label":"GitHub",children:t.jsx(DT,{className:"w-5 h-5"})}),t.jsx("a",{href:"https://x.com/okuhlemadondo",target:"_blank",rel:"noopener noreferrer",className:"text-cyber-text hover:text-cyber-white transition-colors duration-300 group","aria-label":"X (Twitter)",children:t.jsx(XR,{className:"w-4 h-4 fill-current"})}),t.jsx("a",{href:"https://instagram.com/okuhlemadondo",target:"_blank",rel:"noopener noreferrer",className:"text-cyber-text hover:text-cyber-white transition-colors duration-300 group","aria-label":"Instagram",children:t.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5",children:[t.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),t.jsx("path",{d:"M2 12c0-5.523 4.477-10 10-10s10 4.477 10 10-4.477 10-10 10S2 17.523 2 12z",opacity:"0"}),t.jsx("path",{d:"M7 2h10a5 5 0 0 1 5 5v10a5 5 0 0 1-5 5H7a5 5 0 0 1-5-5V7a5 5 0 0 1 5-5z"}),t.jsx("line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5"})]})})]}),t.jsxs("div",{className:"hidden md:flex items-center gap-2 font-mono text-[10px] text-cyber-text/40 tracking-widest",children:[t.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-pulse"}),"SYSTEM_ONLINE"]})]})})},YR=()=>t.jsxs("div",{className:"fixed -top-1/2 -left-1/2 w-[200%] h-[200%] z-50 pointer-events-none opacity-[0.15] mix-blend-screen",children:[t.jsxs("svg",{className:"w-full h-full",children:[t.jsxs("filter",{id:"noiseFilter",children:[t.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.4",numOctaves:"3",stitchTiles:"stitch"}),t.jsx("feColorMatrix",{type:"saturate",values:"0"}),t.jsx("feComponentTransfer",{children:t.jsx("feFuncA",{type:"table",tableValues:"0 0.5 0"})})]}),t.jsx("rect",{width:"100%",height:"100%",filter:"url(#noiseFilter)"})]}),t.jsx("style",{jsx:!0,children:`
                @keyframes noise-animation {
                    0% { transform: translate(0, 0); }
                    10% { transform: translate(-5%, -5%); }
                    20% { transform: translate(-10%, 5%); }
                    30% { transform: translate(5%, -10%); }
                    40% { transform: translate(-5%, 15%); }
                    50% { transform: translate(-10%, 5%); }
                    60% { transform: translate(15%, 0); }
                    70% { transform: translate(0, 10%); }
                    80% { transform: translate(-15%, 0); }
                    90% { transform: translate(10%, 5%); }
                    100% { transform: translate(5%, 0); }
                }
                rect {
                    animation: noise-animation 2s steps(10) infinite;
                }
            `})]}),GR=({targetSelector:s=".cursor-target",spinDuration:e=2,hideDefaultCursor:n=!0,hoverDuration:i=.2,parallaxOn:r=!0})=>{const a=_.useRef(null),l=_.useRef(null),o=_.useRef(null),c=_.useRef(null),h=_.useRef(!1),m=_.useRef(null),d=_.useRef(null),u=_.useRef(0),p=_.useMemo(()=>{const v="ontouchstart"in window||navigator.maxTouchPoints>0,f=window.innerWidth<=768,x=navigator.userAgent||navigator.vendor||window.opera,w=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(x.toLowerCase());return v&&f||w},[]),y=_.useMemo(()=>({borderWidth:3,cornerSize:12}),[]),g=_.useCallback((v,f)=>{a.current&&B.to(a.current,{x:v,y:f,duration:.1,ease:"power3.out"})},[]);return _.useEffect(()=>{if(p||!a.current)return;const v=document.body.style.cursor;n&&(document.body.style.cursor="none");const f=a.current;l.current=f.querySelectorAll(".target-cursor-corner");let x=null,j=null,w=null;const N=z=>{j&&z.removeEventListener("mouseleave",j),j=null};B.set(f,{xPercent:-50,yPercent:-50,x:window.innerWidth/2,y:window.innerHeight/2}),(()=>{o.current&&o.current.kill(),o.current=B.timeline({repeat:-1}).to(f,{rotation:"+=360",duration:e,ease:"none"})})();const S=()=>{if(!m.current||!a.current||!l.current)return;const z=u.current;if(z===0)return;if(x&&!x.isConnected){j&&j();return}const Y=B.getProperty(a.current,"x"),X=B.getProperty(a.current,"y");Array.from(l.current).forEach((O,E)=>{const C=B.getProperty(O,"x"),L=B.getProperty(O,"y"),H=m.current[E].x-Y,K=m.current[E].y-X,Ct=C+(H-C)*z,de=L+(K-L)*z,Pe=z>=.99?r?.2:0:.05;B.to(O,{x:Ct,y:de,duration:Pe,ease:Pe===0?"none":"power1.out",overwrite:"auto"})})};d.current=S;const k=z=>g(z.clientX,z.clientY);window.addEventListener("mousemove",k);const T=()=>{if(!x||!a.current)return;const z=B.getProperty(a.current,"x"),Y=B.getProperty(a.current,"y"),X=document.elementFromPoint(z,Y);X&&(X===x||X.closest(s)===x)||j&&j()};window.addEventListener("scroll",T,{passive:!0});const P=()=>{c.current&&(B.to(c.current,{scale:.7,duration:.3}),B.to(a.current,{scale:.9,duration:.2}))},I=()=>{c.current&&(B.to(c.current,{scale:1,duration:.3}),B.to(a.current,{scale:1,duration:.2}))};window.addEventListener("mousedown",P),window.addEventListener("mouseup",I);const F=z=>{var Pe;const Y=z.target,X=[];let U=Y;for(;U&&U!==document.body;)U.matches(s)&&X.push(U),U=U.parentElement;const O=X[0]||null;if(!O||!a.current||!l.current||x===O)return;x&&N(x),w&&(clearTimeout(w),w=null),x=O;const E=Array.from(l.current);E.forEach(Ue=>B.killTweensOf(Ue)),B.killTweensOf(a.current,"rotation"),(Pe=o.current)==null||Pe.pause(),B.set(a.current,{rotation:0});const C=O.getBoundingClientRect(),{borderWidth:L,cornerSize:H}=y,K=B.getProperty(a.current,"x"),Ct=B.getProperty(a.current,"y");m.current=[{x:C.left-L,y:C.top-L},{x:C.right+L-H,y:C.top-L},{x:C.right+L-H,y:C.bottom+L-H},{x:C.left-L,y:C.bottom+L-H}],h.current=!0,B.ticker.add(d.current),B.to(u,{current:1,duration:i,ease:"power2.out"}),E.forEach((Ue,we)=>{B.to(Ue,{x:m.current[we].x-K,y:m.current[we].y-Ct,duration:.2,ease:"power2.out"})});const de=()=>{if(B.ticker.remove(d.current),h.current=!1,m.current=null,B.set(u,{current:0,overwrite:!0}),x=null,l.current){const Ue=Array.from(l.current);B.killTweensOf(Ue);const{cornerSize:we}=y,Di=[{x:-we*1.5,y:-we*1.5},{x:we*.5,y:-we*1.5},{x:we*.5,y:we*.5},{x:-we*1.5,y:we*.5}],Rv=B.timeline();Ue.forEach((Ev,$d)=>{Rv.to(Ev,{x:Di[$d].x,y:Di[$d].y,duration:.3,ease:"power3.out"},0)})}w=setTimeout(()=>{if(!x&&a.current&&o.current){const we=B.getProperty(a.current,"rotation")%360;o.current.kill(),o.current=B.timeline({repeat:-1}).to(a.current,{rotation:"+=360",duration:e,ease:"none"}),B.to(a.current,{rotation:we+360,duration:e*(1-we/360),ease:"none",onComplete:()=>{var Di;(Di=o.current)==null||Di.restart()}})}w=null},50),N(O)};j=de,O.addEventListener("mouseleave",de)};return window.addEventListener("mouseover",F,{passive:!0}),()=>{var z;d.current&&B.ticker.remove(d.current),window.removeEventListener("mousemove",k),window.removeEventListener("mouseover",F),window.removeEventListener("scroll",T),window.removeEventListener("mousedown",P),window.removeEventListener("mouseup",I),x&&N(x),(z=o.current)==null||z.kill(),document.body.style.cursor=v,h.current=!1,m.current=null,u.current=0}},[s,e,g,y,n,p,i,r]),_.useEffect(()=>{p||!a.current||!o.current||o.current.isActive()&&(o.current.kill(),o.current=B.timeline({repeat:-1}).to(a.current,{rotation:"+=360",duration:e,ease:"none"}))},[e,p]),p?null:t.jsxs("div",{ref:a,className:"target-cursor-wrapper",children:[t.jsx("div",{ref:c,className:"target-cursor-dot"}),t.jsx("div",{className:"target-cursor-corner corner-tl"}),t.jsx("div",{className:"target-cursor-corner corner-tr"}),t.jsx("div",{className:"target-cursor-corner corner-br"}),t.jsx("div",{className:"target-cursor-corner corner-bl"})]})};class ir{constructor(e,n){this.x=e,this.y=n}static random(e,n){return e+Math.random()*(n-e)}}class kv{constructor(e,n,i){this.x=e,this.y=n,this.z=i}static random(e,n){return e+Math.random()*(n-e)}}class QR{constructor(e,n){this.angle=Math.random()*Math.PI*2,this.distance=30*Math.random()+15,this.rotationDirection=Math.random()>.5?1:-1,this.expansionRate=1.2+Math.random()*.8,this.finalScale=.7+Math.random()*.6,this.dx=this.distance*Math.cos(this.angle),this.dy=this.distance*Math.sin(this.angle),this.spiralLocation=(1-Math.pow(1-Math.random(),3))/1.3,this.z=ir.random(.5*e,n+e);const i=(r,a,l)=>r*(1-l)+a*l;this.z=i(this.z,n/2,.3*this.spiralLocation),this.strokeWeightFactor=Math.pow(Math.random(),2)}render(e,n){const i=n.spiralPath(this.spiralLocation),r=e-this.spiralLocation;if(r>0){const a=n.constrain(4*r,0,1),l=a,o=n.easeOutElastic(a),c=Math.pow(a,2);let h;if(a<.3)h=n.lerp(l,c,a/.3);else if(a<.7){const f=(a-.3)/.4;h=n.lerp(c,o,f)}else h=o;let m,d;if(a<.3)m=n.lerp(i.x,i.x+this.dx*.3,h/.3),d=n.lerp(i.y,i.y+this.dy*.3,h/.3);else if(a<.7){const f=(a-.3)/.4,x=Math.sin(f*Math.PI)*this.rotationDirection*1.5,j=i.x+this.dx*.3,w=i.y+this.dy*.3,N=i.x+this.dx*.7,b=i.y+this.dy*.7,S=-this.dy*.4*x,k=this.dx*.4*x;m=n.lerp(j,N,f)+S*f,d=n.lerp(w,b,f)+k*f}else{const f=(a-.7)/.3,x=i.x+this.dx*.7,j=i.y+this.dy*.7,w=this.distance*this.expansionRate*1.5,N=1.2*this.rotationDirection,b=this.angle+N*f*Math.PI,S=i.x+w*Math.cos(b),k=i.y+w*Math.sin(b);m=n.lerp(x,S,f),d=n.lerp(j,k,f)}const u=(this.z-n.cameraZ)*m/n.viewZoom,p=(this.z-n.cameraZ)*d/n.viewZoom,y=new kv(u,p,this.z);let g=1;if(a<.6)g=1+a*.2;else{const f=(a-.6)/.4;g=1.2*(1-f)+this.finalScale*f}const v=8.5*this.strokeWeightFactor*g;n.showProjectedDot(y,v)}}}class ZR{constructor(e,n,i,r){this.canvas=e,this.ctx=n,this.dpr=i,this.size=r,this.timeline=B.timeline({repeat:-1}),this.time=0,this.stars=[],this.changeEventTime=.32,this.cameraZ=-400,this.cameraTravelDistance=3400,this.startDotYOffset=28,this.viewZoom=100,this.numberOfStars=5e3,this.trailLength=80,this.setupRandomGenerator(),this.createStars(),this.setupTimeline()}setupRandomGenerator(){const e=Math.random;Math.random=(()=>{let i=1234;return()=>(i=(i*9301+49297)%233280,i/233280)})(),this.createStars(),Math.random=e}createStars(){this.stars=[];for(let e=0;e<this.numberOfStars;e++)this.stars.push(new QR(this.cameraZ,this.cameraTravelDistance))}setupTimeline(){this.timeline.to(this,{time:1,duration:15,repeat:-1,ease:"none",onUpdate:()=>this.render()})}ease(e,n){return e<.5?.5*Math.pow(2*e,n):1-.5*Math.pow(2*(1-e),n)}easeOutElastic(e){const n=2*Math.PI/4.5;return e<=0?0:e>=1?1:Math.pow(2,-8*e)*Math.sin((e*8-.75)*n)+1}map(e,n,i,r,a){return r+(a-r)*((e-n)/(i-n))}constrain(e,n,i){return Math.min(Math.max(e,n),i)}lerp(e,n,i){return e*(1-i)+n*i}spiralPath(e){e=this.constrain(1.2*e,0,1),e=this.ease(e,1.8);const i=2*Math.PI*6*Math.sqrt(e),r=170*Math.sqrt(e);return new ir(r*Math.cos(i),r*Math.sin(i)+this.startDotYOffset)}rotate(e,n,i,r){const a=new ir((e.x+n.x)/2,(e.y+n.y)/2),l=e.x-a.x,o=e.y-a.y,c=Math.atan2(o,l),h=r?-1:1,m=Math.sqrt(l*l+o*o),d=Math.sin(i*Math.PI)*.05*(1-i);return new ir(a.x+m*(1+d)*Math.cos(c+h*Math.PI*this.easeOutElastic(i)),a.y+m*(1+d)*Math.sin(c+h*Math.PI*this.easeOutElastic(i)))}showProjectedDot(e,n){const i=this.constrain(this.map(this.time,this.changeEventTime,1,0,1),0,1),r=this.cameraZ+this.ease(Math.pow(i,1.2),1.8)*this.cameraTravelDistance;if(e.z>r){const a=e.z-r,l=this.viewZoom*e.x/a,o=this.viewZoom*e.y/a,c=400*n/a;this.ctx.lineWidth=c,this.ctx.beginPath(),this.ctx.arc(l,o,.5,0,Math.PI*2),this.ctx.fill()}}drawStartDot(){if(this.time>this.changeEventTime){const e=this.cameraZ*this.startDotYOffset/this.viewZoom,n=new kv(0,e,this.cameraTravelDistance);this.showProjectedDot(n,2.5)}}render(){const e=this.ctx;if(!e)return;e.fillStyle="black",e.fillRect(0,0,this.size,this.size),e.save(),e.translate(this.size/2,this.size/2);const n=this.constrain(this.map(this.time,0,this.changeEventTime+.25,0,1),0,1),i=this.constrain(this.map(this.time,this.changeEventTime,1,0,1),0,1);e.rotate(-Math.PI*this.ease(i,2.7)),this.drawTrail(n),e.fillStyle="white";for(const r of this.stars)r.render(n,this);this.drawStartDot(),e.restore()}drawTrail(e){for(let n=0;n<this.trailLength;n++){const i=this.map(n,0,this.trailLength,1.1,.1),r=(1.3*(1-e)+3*Math.sin(Math.PI*e))*i;this.ctx.fillStyle="white",this.ctx.lineWidth=r;const a=e-15e-5*n,l=this.spiralPath(a),o=l,c=new ir(l.x+5,l.y+5),h=this.rotate(o,c,Math.sin(this.time*Math.PI*2)*.5+.5,n%2===0);this.ctx.beginPath(),this.ctx.arc(h.x,h.y,r/2,0,Math.PI*2),this.ctx.fill()}}destroy(){this.timeline.kill()}}const JR=()=>{const s=_.useRef(null),e=_.useRef(null),[n,i]=_.useState({width:window.innerWidth,height:window.innerHeight});return _.useEffect(()=>{const r=()=>{i({width:window.innerWidth,height:window.innerHeight})};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),_.useEffect(()=>{const r=s.current;if(!r)return;const a=r.getContext("2d");if(!a)return;const l=window.devicePixelRatio||1,o=Math.max(n.width,n.height);return r.width=o*l,r.height=o*l,r.style.width=`${n.width}px`,r.style.height=`${n.height}px`,a.scale(l,l),e.current=new ZR(r,a,l,o),()=>{e.current&&(e.current.destroy(),e.current=null)}},[n]),t.jsx("div",{className:"relative w-full h-full bg-black",children:t.jsx("canvas",{ref:s,className:"absolute inset-0 w-full h-full"})})},eE=({onComplete:s})=>{const[e,n]=_.useState(!1);return _.useEffect(()=>{const i=setTimeout(()=>{n(!0)},2e3);return()=>clearTimeout(i)},[]),t.jsxs(vn.div,{className:"fixed inset-0 z-[100] bg-black",initial:{opacity:1},exit:{opacity:0,transition:{duration:1.5,ease:"easeInOut"}},children:[t.jsx("div",{className:"absolute inset-0",children:t.jsx(JR,{})}),t.jsx("div",{className:"absolute inset-0 flex items-center justify-center z-10 pointer-events-none",children:t.jsxs(vn.button,{onClick:s,initial:{opacity:0,y:20},animate:{opacity:e?1:0,y:e?0:20},transition:{duration:1,ease:"easeOut"},className:"pointer-events-auto group relative px-6 py-3 md:px-8 md:py-4 overflow-hidden max-w-[80vw] md:max-w-none",children:[t.jsx("span",{className:"relative z-10 font-mono text-[10px] md:text-xs font-bold tracking-[0.3em] md:tracking-[0.5em] text-cyber-white group-hover:text-black transition-colors duration-500 whitespace-nowrap",children:"AXIOMATIC // INITIALIZE"}),t.jsx("div",{className:"absolute inset-0 bg-cyber-white transform scale-x-0 group-hover:scale-x-100 transition-transform duration-500 origin-left"}),t.jsx("div",{className:"absolute inset-0 border border-cyber-white/30 group-hover:border-transparent transition-colors duration-500"})]})})]})};var tE="1.3.15";function Sv(s,e,n){return Math.max(s,Math.min(e,n))}function sE(s,e,n){return(1-n)*s+n*e}function nE(s,e,n,i){return sE(s,e,1-Math.exp(-n*i))}function iE(s,e){return(s%e+e)%e}var rE=class{constructor(){A(this,"isRunning",!1);A(this,"value",0);A(this,"from",0);A(this,"to",0);A(this,"currentTime",0);A(this,"lerp");A(this,"duration");A(this,"easing");A(this,"onUpdate")}advance(s){var n;if(!this.isRunning)return;let e=!1;if(this.duration&&this.easing){this.currentTime+=s;const i=Sv(0,this.currentTime/this.duration,1);e=i>=1;const r=e?1:this.easing(i);this.value=this.from+(this.to-this.from)*r}else this.lerp?(this.value=nE(this.value,this.to,this.lerp*60,s),Math.round(this.value)===this.to&&(this.value=this.to,e=!0)):(this.value=this.to,e=!0);e&&this.stop(),(n=this.onUpdate)==null||n.call(this,this.value,e)}stop(){this.isRunning=!1}fromTo(s,e,{lerp:n,duration:i,easing:r,onStart:a,onUpdate:l}){this.from=this.value=s,this.to=e,this.lerp=n,this.duration=i,this.easing=r,this.currentTime=0,this.isRunning=!0,a==null||a(),this.onUpdate=l}};function aE(s,e){let n;return function(...i){let r=this;clearTimeout(n),n=setTimeout(()=>{n=void 0,s.apply(r,i)},e)}}var lE=class{constructor(s,e,{autoResize:n=!0,debounce:i=250}={}){A(this,"width",0);A(this,"height",0);A(this,"scrollHeight",0);A(this,"scrollWidth",0);A(this,"debouncedResize");A(this,"wrapperResizeObserver");A(this,"contentResizeObserver");A(this,"resize",()=>{this.onWrapperResize(),this.onContentResize()});A(this,"onWrapperResize",()=>{this.wrapper instanceof Window?(this.width=window.innerWidth,this.height=window.innerHeight):(this.width=this.wrapper.clientWidth,this.height=this.wrapper.clientHeight)});A(this,"onContentResize",()=>{this.wrapper instanceof Window?(this.scrollHeight=this.content.scrollHeight,this.scrollWidth=this.content.scrollWidth):(this.scrollHeight=this.wrapper.scrollHeight,this.scrollWidth=this.wrapper.scrollWidth)});this.wrapper=s,this.content=e,n&&(this.debouncedResize=aE(this.resize,i),this.wrapper instanceof Window?window.addEventListener("resize",this.debouncedResize,!1):(this.wrapperResizeObserver=new ResizeObserver(this.debouncedResize),this.wrapperResizeObserver.observe(this.wrapper)),this.contentResizeObserver=new ResizeObserver(this.debouncedResize),this.contentResizeObserver.observe(this.content)),this.resize()}destroy(){var s,e;(s=this.wrapperResizeObserver)==null||s.disconnect(),(e=this.contentResizeObserver)==null||e.disconnect(),this.wrapper===window&&this.debouncedResize&&window.removeEventListener("resize",this.debouncedResize,!1)}get limit(){return{x:this.scrollWidth-this.width,y:this.scrollHeight-this.height}}},Tv=class{constructor(){A(this,"events",{})}emit(s,...e){var i;let n=this.events[s]||[];for(let r=0,a=n.length;r<a;r++)(i=n[r])==null||i.call(n,...e)}on(s,e){var n;return(n=this.events[s])!=null&&n.push(e)||(this.events[s]=[e]),()=>{var i;this.events[s]=(i=this.events[s])==null?void 0:i.filter(r=>e!==r)}}off(s,e){var n;this.events[s]=(n=this.events[s])==null?void 0:n.filter(i=>e!==i)}destroy(){this.events={}}},hx=100/6,bs={passive:!1},oE=class{constructor(s,e={wheelMultiplier:1,touchMultiplier:1}){A(this,"touchStart",{x:0,y:0});A(this,"lastDelta",{x:0,y:0});A(this,"window",{width:0,height:0});A(this,"emitter",new Tv);A(this,"onTouchStart",s=>{const{clientX:e,clientY:n}=s.targetTouches?s.targetTouches[0]:s;this.touchStart.x=e,this.touchStart.y=n,this.lastDelta={x:0,y:0},this.emitter.emit("scroll",{deltaX:0,deltaY:0,event:s})});A(this,"onTouchMove",s=>{const{clientX:e,clientY:n}=s.targetTouches?s.targetTouches[0]:s,i=-(e-this.touchStart.x)*this.options.touchMultiplier,r=-(n-this.touchStart.y)*this.options.touchMultiplier;this.touchStart.x=e,this.touchStart.y=n,this.lastDelta={x:i,y:r},this.emitter.emit("scroll",{deltaX:i,deltaY:r,event:s})});A(this,"onTouchEnd",s=>{this.emitter.emit("scroll",{deltaX:this.lastDelta.x,deltaY:this.lastDelta.y,event:s})});A(this,"onWheel",s=>{let{deltaX:e,deltaY:n,deltaMode:i}=s;const r=i===1?hx:i===2?this.window.width:1,a=i===1?hx:i===2?this.window.height:1;e*=r,n*=a,e*=this.options.wheelMultiplier,n*=this.options.wheelMultiplier,this.emitter.emit("scroll",{deltaX:e,deltaY:n,event:s})});A(this,"onWindowResize",()=>{this.window={width:window.innerWidth,height:window.innerHeight}});this.element=s,this.options=e,window.addEventListener("resize",this.onWindowResize,!1),this.onWindowResize(),this.element.addEventListener("wheel",this.onWheel,bs),this.element.addEventListener("touchstart",this.onTouchStart,bs),this.element.addEventListener("touchmove",this.onTouchMove,bs),this.element.addEventListener("touchend",this.onTouchEnd,bs)}on(s,e){return this.emitter.on(s,e)}destroy(){this.emitter.destroy(),window.removeEventListener("resize",this.onWindowResize,!1),this.element.removeEventListener("wheel",this.onWheel,bs),this.element.removeEventListener("touchstart",this.onTouchStart,bs),this.element.removeEventListener("touchmove",this.onTouchMove,bs),this.element.removeEventListener("touchend",this.onTouchEnd,bs)}},mx=s=>Math.min(1,1.001-Math.pow(2,-10*s)),cE=class{constructor({wrapper:s=window,content:e=document.documentElement,eventsTarget:n=s,smoothWheel:i=!0,syncTouch:r=!1,syncTouchLerp:a=.075,touchInertiaExponent:l=1.7,duration:o,easing:c,lerp:h=.1,infinite:m=!1,orientation:d="vertical",gestureOrientation:u=d==="horizontal"?"both":"vertical",touchMultiplier:p=1,wheelMultiplier:y=1,autoResize:g=!0,prevent:v,virtualScroll:f,overscroll:x=!0,autoRaf:j=!1,anchors:w=!1,autoToggle:N=!1,allowNestedScroll:b=!1,__experimental__naiveDimensions:S=!1}={}){A(this,"_isScrolling",!1);A(this,"_isStopped",!1);A(this,"_isLocked",!1);A(this,"_preventNextNativeScrollEvent",!1);A(this,"_resetVelocityTimeout",null);A(this,"__rafID",null);A(this,"isTouching");A(this,"time",0);A(this,"userData",{});A(this,"lastVelocity",0);A(this,"velocity",0);A(this,"direction",0);A(this,"options");A(this,"targetScroll");A(this,"animatedScroll");A(this,"animate",new rE);A(this,"emitter",new Tv);A(this,"dimensions");A(this,"virtualScroll");A(this,"onScrollEnd",s=>{s instanceof CustomEvent||(this.isScrolling==="smooth"||this.isScrolling===!1)&&s.stopPropagation()});A(this,"dispatchScrollendEvent",()=>{this.options.wrapper.dispatchEvent(new CustomEvent("scrollend",{bubbles:this.options.wrapper===window,detail:{lenisScrollEnd:!0}}))});A(this,"onTransitionEnd",s=>{if(s.propertyName.includes("overflow")){const e=this.isHorizontal?"overflow-x":"overflow-y",n=getComputedStyle(this.rootElement)[e];["hidden","clip"].includes(n)?this.internalStop():this.internalStart()}});A(this,"onClick",s=>{const n=s.composedPath().find(i=>{var r;return i instanceof HTMLAnchorElement&&((r=i.getAttribute("href"))==null?void 0:r.includes("#"))});if(n){const i=n.getAttribute("href");if(i){const r=typeof this.options.anchors=="object"&&this.options.anchors?this.options.anchors:void 0,a=`#${i.split("#")[1]}`;this.scrollTo(a,r)}}});A(this,"onPointerDown",s=>{s.button===1&&this.reset()});A(this,"onVirtualScroll",s=>{if(typeof this.options.virtualScroll=="function"&&this.options.virtualScroll(s)===!1)return;const{deltaX:e,deltaY:n,event:i}=s;if(this.emitter.emit("virtual-scroll",{deltaX:e,deltaY:n,event:i}),i.ctrlKey||i.lenisStopPropagation)return;const r=i.type.includes("touch"),a=i.type.includes("wheel");this.isTouching=i.type==="touchstart"||i.type==="touchmove";const l=e===0&&n===0;if(this.options.syncTouch&&r&&i.type==="touchstart"&&l&&!this.isStopped&&!this.isLocked){this.reset();return}const c=this.options.gestureOrientation==="vertical"&&n===0||this.options.gestureOrientation==="horizontal"&&e===0;if(l||c)return;let h=i.composedPath();h=h.slice(0,h.indexOf(this.rootElement));const m=this.options.prevent;if(h.find(v=>{var f,x,j;return v instanceof HTMLElement&&(typeof m=="function"&&(m==null?void 0:m(v))||((f=v.hasAttribute)==null?void 0:f.call(v,"data-lenis-prevent"))||r&&((x=v.hasAttribute)==null?void 0:x.call(v,"data-lenis-prevent-touch"))||a&&((j=v.hasAttribute)==null?void 0:j.call(v,"data-lenis-prevent-wheel"))||this.options.allowNestedScroll&&this.checkNestedScroll(v,{deltaX:e,deltaY:n}))}))return;if(this.isStopped||this.isLocked){i.cancelable&&i.preventDefault();return}if(!(this.options.syncTouch&&r||this.options.smoothWheel&&a)){this.isScrolling="native",this.animate.stop(),i.lenisStopPropagation=!0;return}let u=n;this.options.gestureOrientation==="both"?u=Math.abs(n)>Math.abs(e)?n:e:this.options.gestureOrientation==="horizontal"&&(u=e),(!this.options.overscroll||this.options.infinite||this.options.wrapper!==window&&this.limit>0&&(this.animatedScroll>0&&this.animatedScroll<this.limit||this.animatedScroll===0&&n>0||this.animatedScroll===this.limit&&n<0))&&(i.lenisStopPropagation=!0),i.cancelable&&i.preventDefault();const p=r&&this.options.syncTouch,g=r&&i.type==="touchend";g&&(u=Math.sign(this.velocity)*Math.pow(Math.abs(this.velocity),this.options.touchInertiaExponent)),this.scrollTo(this.targetScroll+u,{programmatic:!1,...p?{lerp:g?this.options.syncTouchLerp:1}:{lerp:this.options.lerp,duration:this.options.duration,easing:this.options.easing}})});A(this,"onNativeScroll",()=>{if(this._resetVelocityTimeout!==null&&(clearTimeout(this._resetVelocityTimeout),this._resetVelocityTimeout=null),this._preventNextNativeScrollEvent){this._preventNextNativeScrollEvent=!1;return}if(this.isScrolling===!1||this.isScrolling==="native"){const s=this.animatedScroll;this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity,this.velocity=this.animatedScroll-s,this.direction=Math.sign(this.animatedScroll-s),this.isStopped||(this.isScrolling="native"),this.emit(),this.velocity!==0&&(this._resetVelocityTimeout=setTimeout(()=>{this.lastVelocity=this.velocity,this.velocity=0,this.isScrolling=!1,this.emit()},400))}});A(this,"raf",s=>{const e=s-(this.time||s);this.time=s,this.animate.advance(e*.001),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))});window.lenisVersion=tE,(!s||s===document.documentElement)&&(s=window),typeof o=="number"&&typeof c!="function"?c=mx:typeof c=="function"&&typeof o!="number"&&(o=1),this.options={wrapper:s,content:e,eventsTarget:n,smoothWheel:i,syncTouch:r,syncTouchLerp:a,touchInertiaExponent:l,duration:o,easing:c,lerp:h,infinite:m,gestureOrientation:u,orientation:d,touchMultiplier:p,wheelMultiplier:y,autoResize:g,prevent:v,virtualScroll:f,overscroll:x,autoRaf:j,anchors:w,autoToggle:N,allowNestedScroll:b,__experimental__naiveDimensions:S},this.dimensions=new lE(s,e,{autoResize:g}),this.updateClassName(),this.targetScroll=this.animatedScroll=this.actualScroll,this.options.wrapper.addEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.addEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.addEventListener("click",this.onClick,!1),this.options.wrapper.addEventListener("pointerdown",this.onPointerDown,!1),this.virtualScroll=new oE(n,{touchMultiplier:p,wheelMultiplier:y}),this.virtualScroll.on("scroll",this.onVirtualScroll),this.options.autoToggle&&this.rootElement.addEventListener("transitionend",this.onTransitionEnd,{passive:!0}),this.options.autoRaf&&(this.__rafID=requestAnimationFrame(this.raf))}destroy(){this.emitter.destroy(),this.options.wrapper.removeEventListener("scroll",this.onNativeScroll,!1),this.options.wrapper.removeEventListener("scrollend",this.onScrollEnd,{capture:!0}),this.options.wrapper.removeEventListener("pointerdown",this.onPointerDown,!1),this.options.anchors&&this.options.wrapper===window&&this.options.wrapper.removeEventListener("click",this.onClick,!1),this.virtualScroll.destroy(),this.dimensions.destroy(),this.cleanUpClassName(),this.__rafID&&cancelAnimationFrame(this.__rafID)}on(s,e){return this.emitter.on(s,e)}off(s,e){return this.emitter.off(s,e)}setScroll(s){this.isHorizontal?this.options.wrapper.scrollTo({left:s,behavior:"instant"}):this.options.wrapper.scrollTo({top:s,behavior:"instant"})}resize(){this.dimensions.resize(),this.animatedScroll=this.targetScroll=this.actualScroll,this.emit()}emit(){this.emitter.emit("scroll",this)}reset(){this.isLocked=!1,this.isScrolling=!1,this.animatedScroll=this.targetScroll=this.actualScroll,this.lastVelocity=this.velocity=0,this.animate.stop()}start(){if(this.isStopped){if(this.options.autoToggle){this.rootElement.style.removeProperty("overflow");return}this.internalStart()}}internalStart(){this.isStopped&&(this.reset(),this.isStopped=!1,this.emit())}stop(){if(!this.isStopped){if(this.options.autoToggle){this.rootElement.style.setProperty("overflow","clip");return}this.internalStop()}}internalStop(){this.isStopped||(this.reset(),this.isStopped=!0,this.emit())}scrollTo(s,{offset:e=0,immediate:n=!1,lock:i=!1,duration:r=this.options.duration,easing:a=this.options.easing,lerp:l=this.options.lerp,onStart:o,onComplete:c,force:h=!1,programmatic:m=!0,userData:d}={}){if(!((this.isStopped||this.isLocked)&&!h)){if(typeof s=="string"&&["top","left","start","#"].includes(s))s=0;else if(typeof s=="string"&&["bottom","right","end"].includes(s))s=this.limit;else{let u;if(typeof s=="string"?(u=document.querySelector(s),u||(s==="#top"?s=0:console.warn("Lenis: Target not found",s))):s instanceof HTMLElement&&(s!=null&&s.nodeType)&&(u=s),u){if(this.options.wrapper!==window){const y=this.rootElement.getBoundingClientRect();e-=this.isHorizontal?y.left:y.top}const p=u.getBoundingClientRect();s=(this.isHorizontal?p.left:p.top)+this.animatedScroll}}if(typeof s=="number"){if(s+=e,s=Math.round(s),this.options.infinite){if(m){this.targetScroll=this.animatedScroll=this.scroll;const u=s-this.animatedScroll;u>this.limit/2?s=s-this.limit:u<-this.limit/2&&(s=s+this.limit)}}else s=Sv(0,s,this.limit);if(s===this.targetScroll){o==null||o(this),c==null||c(this);return}if(this.userData=d??{},n){this.animatedScroll=this.targetScroll=s,this.setScroll(this.scroll),this.reset(),this.preventNextNativeScrollEvent(),this.emit(),c==null||c(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()});return}m||(this.targetScroll=s),typeof r=="number"&&typeof a!="function"?a=mx:typeof a=="function"&&typeof r!="number"&&(r=1),this.animate.fromTo(this.animatedScroll,s,{duration:r,easing:a,lerp:l,onStart:()=>{i&&(this.isLocked=!0),this.isScrolling="smooth",o==null||o(this)},onUpdate:(u,p)=>{this.isScrolling="smooth",this.lastVelocity=this.velocity,this.velocity=u-this.animatedScroll,this.direction=Math.sign(this.velocity),this.animatedScroll=u,this.setScroll(this.scroll),m&&(this.targetScroll=u),p||this.emit(),p&&(this.reset(),this.emit(),c==null||c(this),this.userData={},requestAnimationFrame(()=>{this.dispatchScrollendEvent()}),this.preventNextNativeScrollEvent())}})}}}preventNextNativeScrollEvent(){this._preventNextNativeScrollEvent=!0,requestAnimationFrame(()=>{this._preventNextNativeScrollEvent=!1})}checkNestedScroll(s,{deltaX:e,deltaY:n}){const i=Date.now(),r=s._lenis??(s._lenis={});let a,l,o,c,h,m,d,u;const p=this.options.gestureOrientation;if(i-(r.time??0)>2e3){r.time=Date.now();const N=window.getComputedStyle(s);r.computedStyle=N;const b=N.overflowX,S=N.overflowY;if(a=["auto","overlay","scroll"].includes(b),l=["auto","overlay","scroll"].includes(S),r.hasOverflowX=a,r.hasOverflowY=l,!a&&!l||p==="vertical"&&!l||p==="horizontal"&&!a)return!1;h=s.scrollWidth,m=s.scrollHeight,d=s.clientWidth,u=s.clientHeight,o=h>d,c=m>u,r.isScrollableX=o,r.isScrollableY=c,r.scrollWidth=h,r.scrollHeight=m,r.clientWidth=d,r.clientHeight=u}else o=r.isScrollableX,c=r.isScrollableY,a=r.hasOverflowX,l=r.hasOverflowY,h=r.scrollWidth,m=r.scrollHeight,d=r.clientWidth,u=r.clientHeight;if(!a&&!l||!o&&!c||p==="vertical"&&(!l||!c)||p==="horizontal"&&(!a||!o))return!1;let y;if(p==="horizontal")y="x";else if(p==="vertical")y="y";else{const N=e!==0,b=n!==0;N&&a&&o&&(y="x"),b&&l&&c&&(y="y")}if(!y)return!1;let g,v,f,x,j;if(y==="x")g=s.scrollLeft,v=h-d,f=e,x=a,j=o;else if(y==="y")g=s.scrollTop,v=m-u,f=n,x=l,j=c;else return!1;return(f>0?g<v:g>0)&&x&&j}get rootElement(){return this.options.wrapper===window?document.documentElement:this.options.wrapper}get limit(){return this.options.__experimental__naiveDimensions?this.isHorizontal?this.rootElement.scrollWidth-this.rootElement.clientWidth:this.rootElement.scrollHeight-this.rootElement.clientHeight:this.dimensions.limit[this.isHorizontal?"x":"y"]}get isHorizontal(){return this.options.orientation==="horizontal"}get actualScroll(){const s=this.options.wrapper;return this.isHorizontal?s.scrollX??s.scrollLeft:s.scrollY??s.scrollTop}get scroll(){return this.options.infinite?iE(this.animatedScroll,this.limit):this.animatedScroll}get progress(){return this.limit===0?1:this.scroll/this.limit}get isScrolling(){return this._isScrolling}set isScrolling(s){this._isScrolling!==s&&(this._isScrolling=s,this.updateClassName())}get isStopped(){return this._isStopped}set isStopped(s){this._isStopped!==s&&(this._isStopped=s,this.updateClassName())}get isLocked(){return this._isLocked}set isLocked(s){this._isLocked!==s&&(this._isLocked=s,this.updateClassName())}get isSmooth(){return this.isScrolling==="smooth"}get className(){let s="lenis";return this.options.autoToggle&&(s+=" lenis-autoToggle"),this.isStopped&&(s+=" lenis-stopped"),this.isLocked&&(s+=" lenis-locked"),this.isScrolling&&(s+=" lenis-scrolling"),this.isScrolling==="smooth"&&(s+=" lenis-smooth"),s}updateClassName(){this.cleanUpClassName(),this.rootElement.className=`${this.rootElement.className} ${this.className}`.trim()}cleanUpClassName(){this.rootElement.className=this.rootElement.className.replace(/lenis(-\w+)?/g,"").trim()}};const hE=_.lazy(()=>Ci(()=>import("./Home-DugxuuqZ.js"),__vite__mapDeps([0,1,2,3]))),dx=_.lazy(()=>Ci(()=>import("./Science-COGoO2t9.js"),__vite__mapDeps([4,1,2,3]))),ux=_.lazy(()=>Ci(()=>import("./Engineering-CFGj9FJQ.js"),__vite__mapDeps([5,1,2,3]))),px=_.lazy(()=>Ci(()=>import("./Philosophy-sCshC8SS.js"),__vite__mapDeps([6,1,2,3]))),mE=_.lazy(()=>Ci(()=>import("./About-DfvNFU4t.js"),__vite__mapDeps([7,2,8]))),dE=_.lazy(()=>Ci(()=>import("./Personal-VNFLNNKG.js"),__vite__mapDeps([9,1,2,3]))),uE=()=>{const s=is(),[e,n]=_.useState(!0),[i,r]=_.useState(!1),a=_.useRef(null);return _.useEffect(()=>{const l=()=>{r(window.matchMedia("(max-width: 768px)").matches||window.matchMedia("(pointer: coarse)").matches)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),_.useEffect(()=>{const l=new cE({duration:1.2,easing:c=>Math.min(1,1.001-Math.pow(2,-10*c)),direction:"vertical",gestureDirection:"vertical",smooth:!0,mouseMultiplier:1,smoothTouch:!1,touchMultiplier:2});a.current=l;function o(c){l.raf(c),requestAnimationFrame(o)}return requestAnimationFrame(o),()=>{l.destroy()}},[]),_.useEffect(()=>{!e&&!i?document.body.classList.add("no-cursor"):document.body.classList.remove("no-cursor")},[e,i]),_.useEffect(()=>{a.current?a.current.scrollTo(0,{immediate:!0}):window.scrollTo(0,0)},[s.pathname]),t.jsxs("div",{className:"bg-cyber-black min-h-screen relative selection:bg-cyber-white selection:text-cyber-black",children:[!i&&t.jsx(GR,{targetSelector:"a, button, .cursor-target, .cursor-pointer",spinDuration:2,hideDefaultCursor:!0,parallaxOn:!0}),!i&&t.jsx(YR,{}),t.jsx(uh,{mode:"wait",children:e&&t.jsx(eE,{onComplete:()=>n(!1)})}),!e&&t.jsxs(t.Fragment,{children:[t.jsx(qR,{}),t.jsx("main",{className:"relative z-10",children:t.jsx(_.Suspense,{fallback:t.jsx("div",{className:"h-screen w-full bg-cyber-black flex items-center justify-center text-cyber-text font-mono text-xs",children:"LOADING_MODULES..."}),children:t.jsxs(Y1,{location:s,children:[t.jsx(Ut,{path:"/",element:t.jsx(hE,{startAnimation:!e})}),t.jsx(Ut,{path:"/science",element:t.jsx(dx,{})}),t.jsx(Ut,{path:"/science/:slug",element:t.jsx(dx,{})}),t.jsx(Ut,{path:"/engineering",element:t.jsx(ux,{})}),t.jsx(Ut,{path:"/engineering/:slug",element:t.jsx(ux,{})}),t.jsx(Ut,{path:"/philosophy",element:t.jsx(px,{})}),t.jsx(Ut,{path:"/philosophy/:slug",element:t.jsx(px,{})}),t.jsx(Ut,{path:"/about",element:t.jsx(mE,{})}),t.jsx(Ut,{path:"/personal",element:t.jsx(dE,{})})]},s.pathname)})}),t.jsx(KR,{})]})]})};gc.createRoot(document.getElementById("root")).render(t.jsx(_r.StrictMode,{children:t.jsx(y_,{children:t.jsx(uE,{})})}));export{uh as A,Ls as L,WR as P,_r as R,OT as X,fE as a,Dj as b,i1 as c,ma as d,TT as e,Pf as f,B as g,j0 as h,HS as i,t as j,Cv as k,vn as m,Eh as p,_ as r,xE as u};
