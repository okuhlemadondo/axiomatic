var qr=Object.defineProperty;var $r=(l,e,n)=>e in l?qr(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n;var ge=(l,e,n)=>$r(l,typeof e!="symbol"?e+"":e,n);import{r as Y,j as M,g as er,m as es,c as tn}from"./index-BeVOPrgB.js";import{R as ts,T as ns,a as wn,b as Er,M as hn,I as rs,S as Un,D as br,c as tr,Q as ln,V as Ee,O as Lt,d as we,P as cn,e as bt,f as Mt,g as ss,h as as,L as Jn,i as Ot,F as st,j as Ye,C as ft,k as is,l as os,m as cs,n as An,o as ls,p as As,q as Mr,r as us,s as ds,B as Nt,t as hs,u as vr,N as fs,v as Bs,w as ps,x as Ne,y as ms,z as _n,A as Cs,E as ze,G as gs,H as vn,J as Es,K as Ir,U as vt,W as bs,X as Fr,Y as Ms,Z as vs,_ as Is,$ as Fs,a0 as ys,a1 as In,a2 as Ts,a3 as Rs,a4 as xs,a5 as Ds,a6 as Gs,a7 as yr,a8 as ws,a9 as nt,aa as nr,ab as rr,ac as sr,ad as _s,ae as Hs,af as Ss,ag as Ls,ah as Tr,ai as Pe,aj as Ve,ak as It,al as Ut,am as Os,an as Bt,ao as _e,ap as kn,aq as Rr,ar as xr,as as Dr,at as Gr,au as un,av as Ns,aw as Ps,ax as Hn,ay as Us,az as Js,aA as ks,aB as Ks,aC as Sn,aD as js,aE as ar,aF as Qs,aG as Xs,aH as Ys,aI as Zs,aJ as Ws,aK as zs,aL as Vs,aM as qs,aN as ir,aO as or,aP as $s}from"./DecryptedText-CQl68DCV.js";const Kn=parseInt(ts.replace(/\D+/g,""));function cr(l,e){if(e===ns)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),l;if(e===wn||e===Er){let n=l.getIndex();if(n===null){const a=[],c=l.getAttribute("position");if(c!==void 0){for(let o=0;o<c.count;o++)a.push(o);l.setIndex(a),n=l.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),l}const t=n.count-2,r=[];if(n)if(e===wn)for(let a=1;a<=t;a++)r.push(n.getX(0)),r.push(n.getX(a)),r.push(n.getX(a+1));else for(let a=0;a<t;a++)a%2===0?(r.push(n.getX(a)),r.push(n.getX(a+1)),r.push(n.getX(a+2))):(r.push(n.getX(a+2)),r.push(n.getX(a+1)),r.push(n.getX(a)));r.length/3!==t&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=l.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),l}var Oe=Uint8Array,rt=Uint16Array,Ln=Uint32Array,wr=new Oe([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),_r=new Oe([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ea=new Oe([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Hr=function(l,e){for(var n=new rt(31),t=0;t<31;++t)n[t]=e+=1<<l[t-1];for(var r=new Ln(n[30]),t=1;t<30;++t)for(var s=n[t];s<n[t+1];++s)r[s]=s-n[t]<<5|t;return[n,r]},Sr=Hr(wr,2),Lr=Sr[0],ta=Sr[1];Lr[28]=258,ta[258]=28;var na=Hr(_r,0),ra=na[0],On=new rt(32768);for(var pe=0;pe<32768;++pe){var et=(pe&43690)>>>1|(pe&21845)<<1;et=(et&52428)>>>2|(et&13107)<<2,et=(et&61680)>>>4|(et&3855)<<4,On[pe]=((et&65280)>>>8|(et&255)<<8)>>>1}var Pt=function(l,e,n){for(var t=l.length,r=0,s=new rt(e);r<t;++r)++s[l[r]-1];var a=new rt(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;var c;if(n){c=new rt(1<<e);var o=15-e;for(r=0;r<t;++r)if(l[r])for(var u=r<<4|l[r],d=e-l[r],h=a[l[r]-1]++<<d,B=h|(1<<d)-1;h<=B;++h)c[On[h]>>>o]=u}else for(c=new rt(t),r=0;r<t;++r)l[r]&&(c[r]=On[a[l[r]-1]++]>>>15-l[r]);return c},kt=new Oe(288);for(var pe=0;pe<144;++pe)kt[pe]=8;for(var pe=144;pe<256;++pe)kt[pe]=9;for(var pe=256;pe<280;++pe)kt[pe]=7;for(var pe=280;pe<288;++pe)kt[pe]=8;var Or=new Oe(32);for(var pe=0;pe<32;++pe)Or[pe]=5;var sa=Pt(kt,9,1),aa=Pt(Or,5,1),Fn=function(l){for(var e=l[0],n=1;n<l.length;++n)l[n]>e&&(e=l[n]);return e},je=function(l,e,n){var t=e/8|0;return(l[t]|l[t+1]<<8)>>(e&7)&n},yn=function(l,e){var n=e/8|0;return(l[n]|l[n+1]<<8|l[n+2]<<16)>>(e&7)},ia=function(l){return(l/8|0)+(l&7&&1)},oa=function(l,e,n){(n==null||n>l.length)&&(n=l.length);var t=new(l instanceof rt?rt:l instanceof Ln?Ln:Oe)(n-e);return t.set(l.subarray(e,n)),t},ca=function(l,e,n){var t=l.length;if(!t||n&&!n.l&&t<5)return e||new Oe(0);var r=!e||n,s=!n||n.i;n||(n={}),e||(e=new Oe(t*3));var a=function(oe){var Ue=e.length;if(oe>Ue){var Je=new Oe(Math.max(Ue*2,oe));Je.set(e),e=Je}},c=n.f||0,o=n.p||0,u=n.b||0,d=n.l,h=n.d,B=n.m,C=n.n,g=t*8;do{if(!d){n.f=c=je(l,o,1);var R=je(l,o+1,3);if(o+=3,R)if(R==1)d=sa,h=aa,B=9,C=5;else if(R==2){var J=je(l,o,31)+257,U=je(l,o+10,15)+4,O=J+je(l,o+5,31)+1;o+=14;for(var S=new Oe(O),Z=new Oe(19),I=0;I<U;++I)Z[ea[I]]=je(l,o+I*3,7);o+=U*3;for(var y=Fn(Z),P=(1<<y)-1,te=Pt(Z,y,1),I=0;I<O;){var ne=te[je(l,o,P)];o+=ne&15;var v=ne>>>4;if(v<16)S[I++]=v;else{var W=0,j=0;for(v==16?(j=3+je(l,o,3),o+=2,W=S[I-1]):v==17?(j=3+je(l,o,7),o+=3):v==18&&(j=11+je(l,o,127),o+=7);j--;)S[I++]=W}}var re=S.subarray(0,J),z=S.subarray(J);B=Fn(re),C=Fn(z),d=Pt(re,B,1),h=Pt(z,C,1)}else throw"invalid block type";else{var v=ia(o)+4,G=l[v-4]|l[v-3]<<8,N=v+G;if(N>t){if(s)throw"unexpected EOF";break}r&&a(u+G),e.set(l.subarray(v,N),u),n.b=u+=G,n.p=o=N*8;continue}if(o>g){if(s)throw"unexpected EOF";break}}r&&a(u+131072);for(var Fe=(1<<B)-1,ye=(1<<C)-1,Ae=o;;Ae=o){var W=d[yn(l,o)&Fe],$=W>>>4;if(o+=W&15,o>g){if(s)throw"unexpected EOF";break}if(!W)throw"invalid length/literal";if($<256)e[u++]=$;else if($==256){Ae=o,d=null;break}else{var ve=$-254;if($>264){var I=$-257,ie=wr[I];ve=je(l,o,(1<<ie)-1)+Lr[I],o+=ie}var ce=h[yn(l,o)&ye],De=ce>>>4;if(!ce)throw"invalid distance";o+=ce&15;var z=ra[De];if(De>3){var ie=_r[De];z+=yn(l,o)&(1<<ie)-1,o+=ie}if(o>g){if(s)throw"unexpected EOF";break}r&&a(u+131072);for(var at=u+ve;u<at;u+=4)e[u]=e[u-z],e[u+1]=e[u+1-z],e[u+2]=e[u+2-z],e[u+3]=e[u+3-z];u=at}}n.l=d,n.p=Ae,n.b=u,d&&(c=1,n.m=B,n.d=h,n.n=C)}while(!c);return u==e.length?e:oa(e,0,u)},la=new Oe(0),Aa=function(l){if((l[0]&15)!=8||l[0]>>>4>7||(l[0]<<8|l[1])%31)throw"invalid zlib data";if(l[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function nn(l,e){return ca((Aa(l),l.subarray(2,-4)),e)}var ua=typeof TextDecoder<"u"&&new TextDecoder,da=0;try{ua.decode(la,{stream:!0}),da=1}catch{}const ha=l=>l&&l.isCubeTexture;class fa extends hn{constructor(e,n){var t,r;const s=ha(e),c=((r=s?(t=e.image[0])==null?void 0:t.width:e.image.width)!=null?r:1024)/4,o=Math.floor(Math.log2(c)),u=Math.pow(2,o),d=3*Math.max(u,16*7),h=4*u,B=[s?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/d}`,`#define CUBEUV_TEXEL_HEIGHT ${1/h}`,`#define CUBEUV_MAX_MIP ${o}.0`],C=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,g=B.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${Kn>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,R={map:{value:e},height:{value:(n==null?void 0:n.height)||15},radius:{value:(n==null?void 0:n.radius)||100}},v=new rs(1,16),G=new Un({uniforms:R,fragmentShader:g,vertexShader:C,side:br});super(v,G)}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}var Ba=Object.defineProperty,pa=(l,e,n)=>e in l?Ba(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n,ma=(l,e,n)=>(pa(l,e+"",n),n);class Ca{constructor(){ma(this,"_listeners")}addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const t=this._listeners;t[e]===void 0&&(t[e]=[]),t[e].indexOf(n)===-1&&t[e].push(n)}hasEventListener(e,n){if(this._listeners===void 0)return!1;const t=this._listeners;return t[e]!==void 0&&t[e].indexOf(n)!==-1}removeEventListener(e,n){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const t=this._listeners[e.type];if(t!==void 0){e.target=this;const r=t.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}var ga=Object.defineProperty,Ea=(l,e,n)=>e in l?ga(l,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):l[e]=n,X=(l,e,n)=>(Ea(l,typeof e!="symbol"?e+"":e,n),n);const rn=new ss,lr=new as,ba=Math.cos(70*(Math.PI/180)),Ar=(l,e)=>(l%e+e)%e;let Ma=class extends Ca{constructor(e,n){super(),X(this,"object"),X(this,"domElement"),X(this,"enabled",!0),X(this,"target",new Ee),X(this,"minDistance",0),X(this,"maxDistance",1/0),X(this,"minZoom",0),X(this,"maxZoom",1/0),X(this,"minPolarAngle",0),X(this,"maxPolarAngle",Math.PI),X(this,"minAzimuthAngle",-1/0),X(this,"maxAzimuthAngle",1/0),X(this,"enableDamping",!1),X(this,"dampingFactor",.05),X(this,"enableZoom",!0),X(this,"zoomSpeed",1),X(this,"enableRotate",!0),X(this,"rotateSpeed",1),X(this,"enablePan",!0),X(this,"panSpeed",1),X(this,"screenSpacePanning",!0),X(this,"keyPanSpeed",7),X(this,"zoomToCursor",!1),X(this,"autoRotate",!1),X(this,"autoRotateSpeed",2),X(this,"reverseOrbit",!1),X(this,"reverseHorizontalOrbit",!1),X(this,"reverseVerticalOrbit",!1),X(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),X(this,"mouseButtons",{LEFT:bt.ROTATE,MIDDLE:bt.DOLLY,RIGHT:bt.PAN}),X(this,"touches",{ONE:Mt.ROTATE,TWO:Mt.DOLLY_PAN}),X(this,"target0"),X(this,"position0"),X(this,"zoom0"),X(this,"_domElementKeyEvents",null),X(this,"getPolarAngle"),X(this,"getAzimuthalAngle"),X(this,"setPolarAngle"),X(this,"setAzimuthalAngle"),X(this,"getDistance"),X(this,"getZoomScale"),X(this,"listenToKeyEvents"),X(this,"stopListenToKeyEvents"),X(this,"saveState"),X(this,"reset"),X(this,"update"),X(this,"connect"),X(this,"dispose"),X(this,"dollyIn"),X(this,"dollyOut"),X(this,"getScale"),X(this,"setScale"),this.object=e,this.domElement=n,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>d.phi,this.getAzimuthalAngle=()=>d.theta,this.setPolarAngle=p=>{let T=Ar(p,2*Math.PI),k=d.phi;k<0&&(k+=2*Math.PI),T<0&&(T+=2*Math.PI);let ae=Math.abs(T-k);2*Math.PI-ae<ae&&(T<k?T+=2*Math.PI:k+=2*Math.PI),h.phi=T-k,t.update()},this.setAzimuthalAngle=p=>{let T=Ar(p,2*Math.PI),k=d.theta;k<0&&(k+=2*Math.PI),T<0&&(T+=2*Math.PI);let ae=Math.abs(T-k);2*Math.PI-ae<ae&&(T<k?T+=2*Math.PI:k+=2*Math.PI),h.theta=T-k,t.update()},this.getDistance=()=>t.object.position.distanceTo(t.target),this.listenToKeyEvents=p=>{p.addEventListener("keydown",mt),this._domElementKeyEvents=p},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",mt),this._domElementKeyEvents=null},this.saveState=()=>{t.target0.copy(t.target),t.position0.copy(t.object.position),t.zoom0=t.object.zoom},this.reset=()=>{t.target.copy(t.target0),t.object.position.copy(t.position0),t.object.zoom=t.zoom0,t.object.updateProjectionMatrix(),t.dispatchEvent(r),t.update(),o=c.NONE},this.update=(()=>{const p=new Ee,T=new Ee(0,1,0),k=new ln().setFromUnitVectors(e.up,T),ae=k.clone().invert(),D=new Ee,Re=new ln,Qe=2*Math.PI;return function(){const $t=t.object.position;k.setFromUnitVectors(e.up,T),ae.copy(k).invert(),p.copy($t).sub(t.target),p.applyQuaternion(k),d.setFromVector3(p),t.autoRotate&&o===c.NONE&&j(ne()),t.enableDamping?(d.theta+=h.theta*t.dampingFactor,d.phi+=h.phi*t.dampingFactor):(d.theta+=h.theta,d.phi+=h.phi);let ke=t.minAzimuthAngle,Ke=t.maxAzimuthAngle;isFinite(ke)&&isFinite(Ke)&&(ke<-Math.PI?ke+=Qe:ke>Math.PI&&(ke-=Qe),Ke<-Math.PI?Ke+=Qe:Ke>Math.PI&&(Ke-=Qe),ke<=Ke?d.theta=Math.max(ke,Math.min(Ke,d.theta)):d.theta=d.theta>(ke+Ke)/2?Math.max(ke,d.theta):Math.min(Ke,d.theta)),d.phi=Math.max(t.minPolarAngle,Math.min(t.maxPolarAngle,d.phi)),d.makeSafe(),t.enableDamping===!0?t.target.addScaledVector(C,t.dampingFactor):t.target.add(C),t.zoomToCursor&&y||t.object.isOrthographicCamera?d.radius=ce(d.radius):d.radius=ce(d.radius*B),p.setFromSpherical(d),p.applyQuaternion(ae),$t.copy(t.target).add(p),t.object.matrixAutoUpdate||t.object.updateMatrix(),t.object.lookAt(t.target),t.enableDamping===!0?(h.theta*=1-t.dampingFactor,h.phi*=1-t.dampingFactor,C.multiplyScalar(1-t.dampingFactor)):(h.set(0,0,0),C.set(0,0,0));let ct=!1;if(t.zoomToCursor&&y){let lt=null;if(t.object instanceof cn&&t.object.isPerspectiveCamera){const At=p.length();lt=ce(At*B);const Et=At-lt;t.object.position.addScaledVector(Z,Et),t.object.updateMatrixWorld()}else if(t.object.isOrthographicCamera){const At=new Ee(I.x,I.y,0);At.unproject(t.object),t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/B)),t.object.updateProjectionMatrix(),ct=!0;const Et=new Ee(I.x,I.y,0);Et.unproject(t.object),t.object.position.sub(Et).add(At),t.object.updateMatrixWorld(),lt=p.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),t.zoomToCursor=!1;lt!==null&&(t.screenSpacePanning?t.target.set(0,0,-1).transformDirection(t.object.matrix).multiplyScalar(lt).add(t.object.position):(rn.origin.copy(t.object.position),rn.direction.set(0,0,-1).transformDirection(t.object.matrix),Math.abs(t.object.up.dot(rn.direction))<ba?e.lookAt(t.target):(lr.setFromNormalAndCoplanarPoint(t.object.up,t.target),rn.intersectPlane(lr,t.target))))}else t.object instanceof Lt&&t.object.isOrthographicCamera&&(ct=B!==1,ct&&(t.object.zoom=Math.max(t.minZoom,Math.min(t.maxZoom,t.object.zoom/B)),t.object.updateProjectionMatrix()));return B=1,y=!1,ct||D.distanceToSquared(t.object.position)>u||8*(1-Re.dot(t.object.quaternion))>u?(t.dispatchEvent(r),D.copy(t.object.position),Re.copy(t.object.quaternion),ct=!1,!0):!1}})(),this.connect=p=>{t.domElement=p,t.domElement.style.touchAction="none",t.domElement.addEventListener("contextmenu",qt),t.domElement.addEventListener("pointerdown",zt),t.domElement.addEventListener("pointercancel",it),t.domElement.addEventListener("wheel",Vt)},this.dispose=()=>{var p,T,k,ae,D,Re;t.domElement&&(t.domElement.style.touchAction="auto"),(p=t.domElement)==null||p.removeEventListener("contextmenu",qt),(T=t.domElement)==null||T.removeEventListener("pointerdown",zt),(k=t.domElement)==null||k.removeEventListener("pointercancel",it),(ae=t.domElement)==null||ae.removeEventListener("wheel",Vt),(D=t.domElement)==null||D.ownerDocument.removeEventListener("pointermove",pt),(Re=t.domElement)==null||Re.ownerDocument.removeEventListener("pointerup",it),t._domElementKeyEvents!==null&&t._domElementKeyEvents.removeEventListener("keydown",mt)};const t=this,r={type:"change"},s={type:"start"},a={type:"end"},c={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let o=c.NONE;const u=1e-6,d=new tr,h=new tr;let B=1;const C=new Ee,g=new we,R=new we,v=new we,G=new we,N=new we,J=new we,U=new we,O=new we,S=new we,Z=new Ee,I=new we;let y=!1;const P=[],te={};function ne(){return 2*Math.PI/60/60*t.autoRotateSpeed}function W(){return Math.pow(.95,t.zoomSpeed)}function j(p){t.reverseOrbit||t.reverseHorizontalOrbit?h.theta+=p:h.theta-=p}function re(p){t.reverseOrbit||t.reverseVerticalOrbit?h.phi+=p:h.phi-=p}const z=(()=>{const p=new Ee;return function(k,ae){p.setFromMatrixColumn(ae,0),p.multiplyScalar(-k),C.add(p)}})(),Fe=(()=>{const p=new Ee;return function(k,ae){t.screenSpacePanning===!0?p.setFromMatrixColumn(ae,1):(p.setFromMatrixColumn(ae,0),p.crossVectors(t.object.up,p)),p.multiplyScalar(k),C.add(p)}})(),ye=(()=>{const p=new Ee;return function(k,ae){const D=t.domElement;if(D&&t.object instanceof cn&&t.object.isPerspectiveCamera){const Re=t.object.position;p.copy(Re).sub(t.target);let Qe=p.length();Qe*=Math.tan(t.object.fov/2*Math.PI/180),z(2*k*Qe/D.clientHeight,t.object.matrix),Fe(2*ae*Qe/D.clientHeight,t.object.matrix)}else D&&t.object instanceof Lt&&t.object.isOrthographicCamera?(z(k*(t.object.right-t.object.left)/t.object.zoom/D.clientWidth,t.object.matrix),Fe(ae*(t.object.top-t.object.bottom)/t.object.zoom/D.clientHeight,t.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),t.enablePan=!1)}})();function Ae(p){t.object instanceof cn&&t.object.isPerspectiveCamera||t.object instanceof Lt&&t.object.isOrthographicCamera?B=p:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),t.enableZoom=!1)}function $(p){Ae(B/p)}function ve(p){Ae(B*p)}function ie(p){if(!t.zoomToCursor||!t.domElement)return;y=!0;const T=t.domElement.getBoundingClientRect(),k=p.clientX-T.left,ae=p.clientY-T.top,D=T.width,Re=T.height;I.x=k/D*2-1,I.y=-(ae/Re)*2+1,Z.set(I.x,I.y,1).unproject(t.object).sub(t.object.position).normalize()}function ce(p){return Math.max(t.minDistance,Math.min(t.maxDistance,p))}function De(p){g.set(p.clientX,p.clientY)}function at(p){ie(p),U.set(p.clientX,p.clientY)}function oe(p){G.set(p.clientX,p.clientY)}function Ue(p){R.set(p.clientX,p.clientY),v.subVectors(R,g).multiplyScalar(t.rotateSpeed);const T=t.domElement;T&&(j(2*Math.PI*v.x/T.clientHeight),re(2*Math.PI*v.y/T.clientHeight)),g.copy(R),t.update()}function Je(p){O.set(p.clientX,p.clientY),S.subVectors(O,U),S.y>0?$(W()):S.y<0&&ve(W()),U.copy(O),t.update()}function Bn(p){N.set(p.clientX,p.clientY),J.subVectors(N,G).multiplyScalar(t.panSpeed),ye(J.x,J.y),G.copy(N),t.update()}function pn(p){ie(p),p.deltaY<0?ve(W()):p.deltaY>0&&$(W()),t.update()}function jt(p){let T=!1;switch(p.code){case t.keys.UP:ye(0,t.keyPanSpeed),T=!0;break;case t.keys.BOTTOM:ye(0,-t.keyPanSpeed),T=!0;break;case t.keys.LEFT:ye(t.keyPanSpeed,0),T=!0;break;case t.keys.RIGHT:ye(-t.keyPanSpeed,0),T=!0;break}T&&(p.preventDefault(),t.update())}function Qt(){if(P.length==1)g.set(P[0].pageX,P[0].pageY);else{const p=.5*(P[0].pageX+P[1].pageX),T=.5*(P[0].pageY+P[1].pageY);g.set(p,T)}}function Tt(){if(P.length==1)G.set(P[0].pageX,P[0].pageY);else{const p=.5*(P[0].pageX+P[1].pageX),T=.5*(P[0].pageY+P[1].pageY);G.set(p,T)}}function Rt(){const p=P[0].pageX-P[1].pageX,T=P[0].pageY-P[1].pageY,k=Math.sqrt(p*p+T*T);U.set(0,k)}function Xt(){t.enableZoom&&Rt(),t.enablePan&&Tt()}function mn(){t.enableZoom&&Rt(),t.enableRotate&&Qt()}function Yt(p){if(P.length==1)R.set(p.pageX,p.pageY);else{const k=gt(p),ae=.5*(p.pageX+k.x),D=.5*(p.pageY+k.y);R.set(ae,D)}v.subVectors(R,g).multiplyScalar(t.rotateSpeed);const T=t.domElement;T&&(j(2*Math.PI*v.x/T.clientHeight),re(2*Math.PI*v.y/T.clientHeight)),g.copy(R)}function Zt(p){if(P.length==1)N.set(p.pageX,p.pageY);else{const T=gt(p),k=.5*(p.pageX+T.x),ae=.5*(p.pageY+T.y);N.set(k,ae)}J.subVectors(N,G).multiplyScalar(t.panSpeed),ye(J.x,J.y),G.copy(N)}function Wt(p){const T=gt(p),k=p.pageX-T.x,ae=p.pageY-T.y,D=Math.sqrt(k*k+ae*ae);O.set(0,D),S.set(0,Math.pow(O.y/U.y,t.zoomSpeed)),$(S.y),U.copy(O)}function Cn(p){t.enableZoom&&Wt(p),t.enablePan&&Zt(p)}function gn(p){t.enableZoom&&Wt(p),t.enableRotate&&Yt(p)}function zt(p){var T,k;t.enabled!==!1&&(P.length===0&&((T=t.domElement)==null||T.ownerDocument.addEventListener("pointermove",pt),(k=t.domElement)==null||k.ownerDocument.addEventListener("pointerup",it)),Mn(p),p.pointerType==="touch"?Ct(p):xt(p))}function pt(p){t.enabled!==!1&&(p.pointerType==="touch"?bn(p):En(p))}function it(p){var T,k,ae;ot(p),P.length===0&&((T=t.domElement)==null||T.releasePointerCapture(p.pointerId),(k=t.domElement)==null||k.ownerDocument.removeEventListener("pointermove",pt),(ae=t.domElement)==null||ae.ownerDocument.removeEventListener("pointerup",it)),t.dispatchEvent(a),o=c.NONE}function xt(p){let T;switch(p.button){case 0:T=t.mouseButtons.LEFT;break;case 1:T=t.mouseButtons.MIDDLE;break;case 2:T=t.mouseButtons.RIGHT;break;default:T=-1}switch(T){case bt.DOLLY:if(t.enableZoom===!1)return;at(p),o=c.DOLLY;break;case bt.ROTATE:if(p.ctrlKey||p.metaKey||p.shiftKey){if(t.enablePan===!1)return;oe(p),o=c.PAN}else{if(t.enableRotate===!1)return;De(p),o=c.ROTATE}break;case bt.PAN:if(p.ctrlKey||p.metaKey||p.shiftKey){if(t.enableRotate===!1)return;De(p),o=c.ROTATE}else{if(t.enablePan===!1)return;oe(p),o=c.PAN}break;default:o=c.NONE}o!==c.NONE&&t.dispatchEvent(s)}function En(p){if(t.enabled!==!1)switch(o){case c.ROTATE:if(t.enableRotate===!1)return;Ue(p);break;case c.DOLLY:if(t.enableZoom===!1)return;Je(p);break;case c.PAN:if(t.enablePan===!1)return;Bn(p);break}}function Vt(p){t.enabled===!1||t.enableZoom===!1||o!==c.NONE&&o!==c.ROTATE||(p.preventDefault(),t.dispatchEvent(s),pn(p),t.dispatchEvent(a))}function mt(p){t.enabled===!1||t.enablePan===!1||jt(p)}function Ct(p){switch(Ie(p),P.length){case 1:switch(t.touches.ONE){case Mt.ROTATE:if(t.enableRotate===!1)return;Qt(),o=c.TOUCH_ROTATE;break;case Mt.PAN:if(t.enablePan===!1)return;Tt(),o=c.TOUCH_PAN;break;default:o=c.NONE}break;case 2:switch(t.touches.TWO){case Mt.DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;Xt(),o=c.TOUCH_DOLLY_PAN;break;case Mt.DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;mn(),o=c.TOUCH_DOLLY_ROTATE;break;default:o=c.NONE}break;default:o=c.NONE}o!==c.NONE&&t.dispatchEvent(s)}function bn(p){switch(Ie(p),o){case c.TOUCH_ROTATE:if(t.enableRotate===!1)return;Yt(p),t.update();break;case c.TOUCH_PAN:if(t.enablePan===!1)return;Zt(p),t.update();break;case c.TOUCH_DOLLY_PAN:if(t.enableZoom===!1&&t.enablePan===!1)return;Cn(p),t.update();break;case c.TOUCH_DOLLY_ROTATE:if(t.enableZoom===!1&&t.enableRotate===!1)return;gn(p),t.update();break;default:o=c.NONE}}function qt(p){t.enabled!==!1&&p.preventDefault()}function Mn(p){P.push(p)}function ot(p){delete te[p.pointerId];for(let T=0;T<P.length;T++)if(P[T].pointerId==p.pointerId){P.splice(T,1);return}}function Ie(p){let T=te[p.pointerId];T===void 0&&(T=new we,te[p.pointerId]=T),T.set(p.pageX,p.pageY)}function gt(p){const T=p.pointerId===P[0].pointerId?P[1]:P[0];return te[T.pointerId]}this.dollyIn=(p=W())=>{ve(p),t.update()},this.dollyOut=(p=W())=>{$(p),t.update()},this.getScale=()=>B,this.setScale=p=>{Ae(p),t.update()},this.getZoomScale=()=>W(),n!==void 0&&this.connect(n),this.update()}};function dn(l){if(typeof TextDecoder<"u")return new TextDecoder().decode(l);let e="";for(let n=0,t=l.length;n<t;n++)e+=String.fromCharCode(l[n]);try{return decodeURIComponent(escape(e))}catch{return e}}const ht="srgb",qe="srgb-linear",ur=3001,va=3e3;class jn extends Jn{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(n){return new Ra(n)}),this.register(function(n){return new xa(n)}),this.register(function(n){return new Na(n)}),this.register(function(n){return new Pa(n)}),this.register(function(n){return new Ua(n)}),this.register(function(n){return new Ga(n)}),this.register(function(n){return new wa(n)}),this.register(function(n){return new _a(n)}),this.register(function(n){return new Ha(n)}),this.register(function(n){return new Ta(n)}),this.register(function(n){return new Sa(n)}),this.register(function(n){return new Da(n)}),this.register(function(n){return new Oa(n)}),this.register(function(n){return new La(n)}),this.register(function(n){return new Fa(n)}),this.register(function(n){return new Ja(n)}),this.register(function(n){return new ka(n)})}load(e,n,t,r){const s=this;let a;if(this.resourcePath!=="")a=this.resourcePath;else if(this.path!==""){const u=Ot.extractUrlBase(e);a=Ot.resolveURL(u,this.path)}else a=Ot.extractUrlBase(e);this.manager.itemStart(e);const c=function(u){r?r(u):console.error(u),s.manager.itemError(e),s.manager.itemEnd(e)},o=new st(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(u){try{s.parse(u,a,function(d){n(d),s.manager.itemEnd(e)},c)}catch(d){c(d)}},t,c)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return this.pluginCallbacks.indexOf(e)===-1&&this.pluginCallbacks.push(e),this}unregister(e){return this.pluginCallbacks.indexOf(e)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,n,t,r){let s;const a={},c={};if(typeof e=="string")s=JSON.parse(e);else if(e instanceof ArrayBuffer)if(dn(new Uint8Array(e.slice(0,4)))===Nr){try{a[ee.KHR_BINARY_GLTF]=new Ka(e)}catch(d){r&&r(d);return}s=JSON.parse(a[ee.KHR_BINARY_GLTF].content)}else s=JSON.parse(dn(new Uint8Array(e)));else s=e;if(s.asset===void 0||s.asset.version[0]<2){r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const o=new ni(s,{path:n||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});o.fileLoader.setRequestHeader(this.requestHeader);for(let u=0;u<this.pluginCallbacks.length;u++){const d=this.pluginCallbacks[u](o);d.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),c[d.name]=d,a[d.name]=!0}if(s.extensionsUsed)for(let u=0;u<s.extensionsUsed.length;++u){const d=s.extensionsUsed[u],h=s.extensionsRequired||[];switch(d){case ee.KHR_MATERIALS_UNLIT:a[d]=new ya;break;case ee.KHR_DRACO_MESH_COMPRESSION:a[d]=new ja(s,this.dracoLoader);break;case ee.KHR_TEXTURE_TRANSFORM:a[d]=new Qa;break;case ee.KHR_MESH_QUANTIZATION:a[d]=new Xa;break;default:h.indexOf(d)>=0&&c[d]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+d+'".')}}o.setExtensions(a),o.setPlugins(c),o.parse(t,r)}parseAsync(e,n){const t=this;return new Promise(function(r,s){t.parse(e,n,r,s)})}}function Ia(){let l={};return{get:function(e){return l[e]},add:function(e,n){l[e]=n},remove:function(e){delete l[e]},removeAll:function(){l={}}}}const ee={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Fa{constructor(e){this.parser=e,this.name=ee.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,n=this.parser.json.nodes||[];for(let t=0,r=n.length;t<r;t++){const s=n[t];s.extensions&&s.extensions[this.name]&&s.extensions[this.name].light!==void 0&&e._addNodeRef(this.cache,s.extensions[this.name].light)}}_loadLight(e){const n=this.parser,t="light:"+e;let r=n.cache.get(t);if(r)return r;const s=n.json,o=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let u;const d=new ft(16777215);o.color!==void 0&&d.setRGB(o.color[0],o.color[1],o.color[2],qe);const h=o.range!==void 0?o.range:0;switch(o.type){case"directional":u=new cs(d),u.target.position.set(0,0,-1),u.add(u.target);break;case"point":u=new os(d),u.distance=h;break;case"spot":u=new is(d),u.distance=h,o.spot=o.spot||{},o.spot.innerConeAngle=o.spot.innerConeAngle!==void 0?o.spot.innerConeAngle:0,o.spot.outerConeAngle=o.spot.outerConeAngle!==void 0?o.spot.outerConeAngle:Math.PI/4,u.angle=o.spot.outerConeAngle,u.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,u.target.position.set(0,0,-1),u.add(u.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return u.position.set(0,0,0),u.decay=2,We(u,o),o.intensity!==void 0&&(u.intensity=o.intensity),u.name=n.createUniqueName(o.name||"light_"+e),r=Promise.resolve(u),n.cache.add(t,r),r}getDependency(e,n){if(e==="light")return this._loadLight(n)}createNodeAttachment(e){const n=this,t=this.parser,s=t.json.nodes[e],c=(s.extensions&&s.extensions[this.name]||{}).light;return c===void 0?null:this._loadLight(c).then(function(o){return t._getNodeRef(n.cache,c,o)})}}class ya{constructor(){this.name=ee.KHR_MATERIALS_UNLIT}getMaterialType(){return vt}extendParams(e,n,t){const r=[];e.color=new ft(1,1,1),e.opacity=1;const s=n.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const a=s.baseColorFactor;e.color.setRGB(a[0],a[1],a[2],qe),e.opacity=a[3]}s.baseColorTexture!==void 0&&r.push(t.assignTexture(e,"map",s.baseColorTexture,ht))}return Promise.all(r)}}class Ta{constructor(e){this.parser=e,this.name=ee.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name].emissiveStrength;return s!==void 0&&(n.emissiveIntensity=s),Promise.resolve()}}class Ra{constructor(e){this.parser=e,this.name=ee.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ye}extendMaterialParams(e,n){const t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];if(a.clearcoatFactor!==void 0&&(n.clearcoat=a.clearcoatFactor),a.clearcoatTexture!==void 0&&s.push(t.assignTexture(n,"clearcoatMap",a.clearcoatTexture)),a.clearcoatRoughnessFactor!==void 0&&(n.clearcoatRoughness=a.clearcoatRoughnessFactor),a.clearcoatRoughnessTexture!==void 0&&s.push(t.assignTexture(n,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),a.clearcoatNormalTexture!==void 0&&(s.push(t.assignTexture(n,"clearcoatNormalMap",a.clearcoatNormalTexture)),a.clearcoatNormalTexture.scale!==void 0)){const c=a.clearcoatNormalTexture.scale;n.clearcoatNormalScale=new we(c,c)}return Promise.all(s)}}class xa{constructor(e){this.parser=e,this.name=ee.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ye}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return n.dispersion=s.dispersion!==void 0?s.dispersion:0,Promise.resolve()}}class Da{constructor(e){this.parser=e,this.name=ee.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ye}extendMaterialParams(e,n){const t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.iridescenceFactor!==void 0&&(n.iridescence=a.iridescenceFactor),a.iridescenceTexture!==void 0&&s.push(t.assignTexture(n,"iridescenceMap",a.iridescenceTexture)),a.iridescenceIor!==void 0&&(n.iridescenceIOR=a.iridescenceIor),n.iridescenceThicknessRange===void 0&&(n.iridescenceThicknessRange=[100,400]),a.iridescenceThicknessMinimum!==void 0&&(n.iridescenceThicknessRange[0]=a.iridescenceThicknessMinimum),a.iridescenceThicknessMaximum!==void 0&&(n.iridescenceThicknessRange[1]=a.iridescenceThicknessMaximum),a.iridescenceThicknessTexture!==void 0&&s.push(t.assignTexture(n,"iridescenceThicknessMap",a.iridescenceThicknessTexture)),Promise.all(s)}}class Ga{constructor(e){this.parser=e,this.name=ee.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ye}extendMaterialParams(e,n){const t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[];n.sheenColor=new ft(0,0,0),n.sheenRoughness=0,n.sheen=1;const a=r.extensions[this.name];if(a.sheenColorFactor!==void 0){const c=a.sheenColorFactor;n.sheenColor.setRGB(c[0],c[1],c[2],qe)}return a.sheenRoughnessFactor!==void 0&&(n.sheenRoughness=a.sheenRoughnessFactor),a.sheenColorTexture!==void 0&&s.push(t.assignTexture(n,"sheenColorMap",a.sheenColorTexture,ht)),a.sheenRoughnessTexture!==void 0&&s.push(t.assignTexture(n,"sheenRoughnessMap",a.sheenRoughnessTexture)),Promise.all(s)}}class wa{constructor(e){this.parser=e,this.name=ee.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ye}extendMaterialParams(e,n){const t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.transmissionFactor!==void 0&&(n.transmission=a.transmissionFactor),a.transmissionTexture!==void 0&&s.push(t.assignTexture(n,"transmissionMap",a.transmissionTexture)),Promise.all(s)}}class _a{constructor(e){this.parser=e,this.name=ee.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ye}extendMaterialParams(e,n){const t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];n.thickness=a.thicknessFactor!==void 0?a.thicknessFactor:0,a.thicknessTexture!==void 0&&s.push(t.assignTexture(n,"thicknessMap",a.thicknessTexture)),n.attenuationDistance=a.attenuationDistance||1/0;const c=a.attenuationColor||[1,1,1];return n.attenuationColor=new ft().setRGB(c[0],c[1],c[2],qe),Promise.all(s)}}class Ha{constructor(e){this.parser=e,this.name=ee.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ye}extendMaterialParams(e,n){const r=this.parser.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=r.extensions[this.name];return n.ior=s.ior!==void 0?s.ior:1.5,Promise.resolve()}}class Sa{constructor(e){this.parser=e,this.name=ee.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ye}extendMaterialParams(e,n){const t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];n.specularIntensity=a.specularFactor!==void 0?a.specularFactor:1,a.specularTexture!==void 0&&s.push(t.assignTexture(n,"specularIntensityMap",a.specularTexture));const c=a.specularColorFactor||[1,1,1];return n.specularColor=new ft().setRGB(c[0],c[1],c[2],qe),a.specularColorTexture!==void 0&&s.push(t.assignTexture(n,"specularColorMap",a.specularColorTexture,ht)),Promise.all(s)}}class La{constructor(e){this.parser=e,this.name=ee.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ye}extendMaterialParams(e,n){const t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return n.bumpScale=a.bumpFactor!==void 0?a.bumpFactor:1,a.bumpTexture!==void 0&&s.push(t.assignTexture(n,"bumpMap",a.bumpTexture)),Promise.all(s)}}class Oa{constructor(e){this.parser=e,this.name=ee.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return!t.extensions||!t.extensions[this.name]?null:Ye}extendMaterialParams(e,n){const t=this.parser,r=t.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const s=[],a=r.extensions[this.name];return a.anisotropyStrength!==void 0&&(n.anisotropy=a.anisotropyStrength),a.anisotropyRotation!==void 0&&(n.anisotropyRotation=a.anisotropyRotation),a.anisotropyTexture!==void 0&&s.push(t.assignTexture(n,"anisotropyMap",a.anisotropyTexture)),Promise.all(s)}}class Na{constructor(e){this.parser=e,this.name=ee.KHR_TEXTURE_BASISU}loadTexture(e){const n=this.parser,t=n.json,r=t.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const s=r.extensions[this.name],a=n.options.ktx2Loader;if(!a){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return n.loadTextureImage(e,s.source,a)}}class Pa{constructor(e){this.parser=e,this.name=ee.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const n=this.name,t=this.parser,r=t.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const a=s.extensions[n],c=r.images[a.source];let o=t.textureLoader;if(c.uri){const u=t.options.manager.getHandler(c.uri);u!==null&&(o=u)}return this.detectSupport().then(function(u){if(u)return t.loadTextureImage(e,a.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return t.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class Ua{constructor(e){this.parser=e,this.name=ee.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const n=this.name,t=this.parser,r=t.json,s=r.textures[e];if(!s.extensions||!s.extensions[n])return null;const a=s.extensions[n],c=r.images[a.source];let o=t.textureLoader;if(c.uri){const u=t.options.manager.getHandler(c.uri);u!==null&&(o=u)}return this.detectSupport().then(function(u){if(u)return t.loadTextureImage(e,a.source,o);if(r.extensionsRequired&&r.extensionsRequired.indexOf(n)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return t.loadTexture(e)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(e){const n=new Image;n.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",n.onload=n.onerror=function(){e(n.height===1)}})),this.isSupported}}class Ja{constructor(e){this.name=ee.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const n=this.parser.json,t=n.bufferViews[e];if(t.extensions&&t.extensions[this.name]){const r=t.extensions[this.name],s=this.parser.getDependency("buffer",r.buffer),a=this.parser.options.meshoptDecoder;if(!a||!a.supported){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return s.then(function(c){const o=r.byteOffset||0,u=r.byteLength||0,d=r.count,h=r.byteStride,B=new Uint8Array(c,o,u);return a.decodeGltfBufferAsync?a.decodeGltfBufferAsync(d,h,B,r.mode,r.filter).then(function(C){return C.buffer}):a.ready.then(function(){const C=new ArrayBuffer(d*h);return a.decodeGltfBuffer(new Uint8Array(C),d,h,B,r.mode,r.filter),C})})}else return null}}class ka{constructor(e){this.name=ee.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const n=this.parser.json,t=n.nodes[e];if(!t.extensions||!t.extensions[this.name]||t.mesh===void 0)return null;const r=n.meshes[t.mesh];for(const u of r.primitives)if(u.mode!==Le.TRIANGLES&&u.mode!==Le.TRIANGLE_STRIP&&u.mode!==Le.TRIANGLE_FAN&&u.mode!==void 0)return null;const a=t.extensions[this.name].attributes,c=[],o={};for(const u in a)c.push(this.parser.getDependency("accessor",a[u]).then(d=>(o[u]=d,o[u])));return c.length<1?null:(c.push(this.parser.createNodeMesh(e)),Promise.all(c).then(u=>{const d=u.pop(),h=d.isGroup?d.children:[d],B=u[0].count,C=[];for(const g of h){const R=new An,v=new Ee,G=new ln,N=new Ee(1,1,1),J=new ls(g.geometry,g.material,B);for(let U=0;U<B;U++)o.TRANSLATION&&v.fromBufferAttribute(o.TRANSLATION,U),o.ROTATION&&G.fromBufferAttribute(o.ROTATION,U),o.SCALE&&N.fromBufferAttribute(o.SCALE,U),J.setMatrixAt(U,R.compose(v,G,N));for(const U in o)if(U==="_COLOR_0"){const O=o[U];J.instanceColor=new As(O.array,O.itemSize,O.normalized)}else U!=="TRANSLATION"&&U!=="ROTATION"&&U!=="SCALE"&&g.geometry.setAttribute(U,o[U]);Mr.prototype.copy.call(J,g),this.parser.assignFinalMaterial(J),C.push(J)}return d.isGroup?(d.clear(),d.add(...C),d):C[0]}))}}const Nr="glTF",_t=12,dr={JSON:1313821514,BIN:5130562};class Ka{constructor(e){this.name=ee.KHR_BINARY_GLTF,this.content=null,this.body=null;const n=new DataView(e,0,_t);if(this.header={magic:dn(new Uint8Array(e.slice(0,4))),version:n.getUint32(4,!0),length:n.getUint32(8,!0)},this.header.magic!==Nr)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const t=this.header.length-_t,r=new DataView(e,_t);let s=0;for(;s<t;){const a=r.getUint32(s,!0);s+=4;const c=r.getUint32(s,!0);if(s+=4,c===dr.JSON){const o=new Uint8Array(e,_t+s,a);this.content=dn(o)}else if(c===dr.BIN){const o=_t+s;this.body=e.slice(o,o+a)}s+=a}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class ja{constructor(e,n){if(!n)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ee.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=n,this.dracoLoader.preload()}decodePrimitive(e,n){const t=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,a=e.extensions[this.name].attributes,c={},o={},u={};for(const d in a){const h=Nn[d]||d.toLowerCase();c[h]=a[d]}for(const d in e.attributes){const h=Nn[d]||d.toLowerCase();if(a[d]!==void 0){const B=t.accessors[e.attributes[d]],C=Ft[B.componentType];u[h]=C.name,o[h]=B.normalized===!0}}return n.getDependency("bufferView",s).then(function(d){return new Promise(function(h,B){r.decodeDracoFile(d,function(C){for(const g in C.attributes){const R=C.attributes[g],v=o[g];v!==void 0&&(R.normalized=v)}h(C)},c,u,qe,B)})})}}class Qa{constructor(){this.name=ee.KHR_TEXTURE_TRANSFORM}extendTexture(e,n){return(n.texCoord===void 0||n.texCoord===e.channel)&&n.offset===void 0&&n.rotation===void 0&&n.scale===void 0||(e=e.clone(),n.texCoord!==void 0&&(e.channel=n.texCoord),n.offset!==void 0&&e.offset.fromArray(n.offset),n.rotation!==void 0&&(e.rotation=n.rotation),n.scale!==void 0&&e.repeat.fromArray(n.scale),e.needsUpdate=!0),e}}class Xa{constructor(){this.name=ee.KHR_MESH_QUANTIZATION}}class Pr extends Hs{constructor(e,n,t,r){super(e,n,t,r)}copySampleValue_(e){const n=this.resultBuffer,t=this.sampleValues,r=this.valueSize,s=e*r*3+r;for(let a=0;a!==r;a++)n[a]=t[s+a];return n}interpolate_(e,n,t,r){const s=this.resultBuffer,a=this.sampleValues,c=this.valueSize,o=c*2,u=c*3,d=r-n,h=(t-n)/d,B=h*h,C=B*h,g=e*u,R=g-u,v=-2*C+3*B,G=C-B,N=1-v,J=G-B+h;for(let U=0;U!==c;U++){const O=a[R+U+c],S=a[R+U+o]*d,Z=a[g+U+c],I=a[g+U]*d;s[U]=N*O+J*S+v*Z+G*I}return s}}const Ya=new ln;class Za extends Pr{interpolate_(e,n,t,r){const s=super.interpolate_(e,n,t,r);return Ya.fromArray(s).normalize().toArray(s),s}}const Le={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Ft={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},hr={9728:ms,9729:Ne,9984:ps,9985:Bs,9986:fs,9987:vr},fr={33071:ze,33648:Cs,10497:_n},Tn={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Nn={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...Kn>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},tt={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},Wa={CUBICSPLINE:void 0,LINEAR:yr,STEP:Gs},Rn={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function za(l){return l.DefaultMaterial===void 0&&(l.DefaultMaterial=new Ir({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:_s})),l.DefaultMaterial}function dt(l,e,n){for(const t in n.extensions)l[t]===void 0&&(e.userData.gltfExtensions=e.userData.gltfExtensions||{},e.userData.gltfExtensions[t]=n.extensions[t])}function We(l,e){e.extras!==void 0&&(typeof e.extras=="object"?Object.assign(l.userData,e.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+e.extras))}function Va(l,e,n){let t=!1,r=!1,s=!1;for(let u=0,d=e.length;u<d;u++){const h=e[u];if(h.POSITION!==void 0&&(t=!0),h.NORMAL!==void 0&&(r=!0),h.COLOR_0!==void 0&&(s=!0),t&&r&&s)break}if(!t&&!r&&!s)return Promise.resolve(l);const a=[],c=[],o=[];for(let u=0,d=e.length;u<d;u++){const h=e[u];if(t){const B=h.POSITION!==void 0?n.getDependency("accessor",h.POSITION):l.attributes.position;a.push(B)}if(r){const B=h.NORMAL!==void 0?n.getDependency("accessor",h.NORMAL):l.attributes.normal;c.push(B)}if(s){const B=h.COLOR_0!==void 0?n.getDependency("accessor",h.COLOR_0):l.attributes.color;o.push(B)}}return Promise.all([Promise.all(a),Promise.all(c),Promise.all(o)]).then(function(u){const d=u[0],h=u[1],B=u[2];return t&&(l.morphAttributes.position=d),r&&(l.morphAttributes.normal=h),s&&(l.morphAttributes.color=B),l.morphTargetsRelative=!0,l})}function qa(l,e){if(l.updateMorphTargets(),e.weights!==void 0)for(let n=0,t=e.weights.length;n<t;n++)l.morphTargetInfluences[n]=e.weights[n];if(e.extras&&Array.isArray(e.extras.targetNames)){const n=e.extras.targetNames;if(l.morphTargetInfluences.length===n.length){l.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)l.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function $a(l){let e;const n=l.extensions&&l.extensions[ee.KHR_DRACO_MESH_COMPRESSION];if(n?e="draco:"+n.bufferView+":"+n.indices+":"+xn(n.attributes):e=l.indices+":"+xn(l.attributes)+":"+l.mode,l.targets!==void 0)for(let t=0,r=l.targets.length;t<r;t++)e+=":"+xn(l.targets[t]);return e}function xn(l){let e="";const n=Object.keys(l).sort();for(let t=0,r=n.length;t<r;t++)e+=n[t]+":"+l[n[t]]+";";return e}function Pn(l){switch(l){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function ei(l){return l.search(/\.jpe?g($|\?)/i)>0||l.search(/^data\:image\/jpeg/)===0?"image/jpeg":l.search(/\.webp($|\?)/i)>0||l.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const ti=new An;class ni{constructor(e={},n={}){this.json=e,this.extensions={},this.plugins={},this.options=n,this.cache=new Ia,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let t=!1,r=!1,s=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,r=navigator.userAgent.indexOf("Firefox")>-1,s=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||t||r&&s<98?this.textureLoader=new us(this.options.manager):this.textureLoader=new ds(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new st(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,n){const t=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(a){return a._markDefs&&a._markDefs()}),Promise.all(this._invokeAll(function(a){return a.beforeRoot&&a.beforeRoot()})).then(function(){return Promise.all([t.getDependencies("scene"),t.getDependencies("animation"),t.getDependencies("camera")])}).then(function(a){const c={scene:a[0][r.scene||0],scenes:a[0],animations:a[1],cameras:a[2],asset:r.asset,parser:t,userData:{}};return dt(s,c,r),We(c,r),Promise.all(t._invokeAll(function(o){return o.afterRoot&&o.afterRoot(c)})).then(function(){for(const o of c.scenes)o.updateMatrixWorld();e(c)})}).catch(n)}_markDefs(){const e=this.json.nodes||[],n=this.json.skins||[],t=this.json.meshes||[];for(let r=0,s=n.length;r<s;r++){const a=n[r].joints;for(let c=0,o=a.length;c<o;c++)e[a[c]].isBone=!0}for(let r=0,s=e.length;r<s;r++){const a=e[r];a.mesh!==void 0&&(this._addNodeRef(this.meshCache,a.mesh),a.skin!==void 0&&(t[a.mesh].isSkinnedMesh=!0)),a.camera!==void 0&&this._addNodeRef(this.cameraCache,a.camera)}}_addNodeRef(e,n){n!==void 0&&(e.refs[n]===void 0&&(e.refs[n]=e.uses[n]=0),e.refs[n]++)}_getNodeRef(e,n,t){if(e.refs[n]<=1)return t;const r=t.clone(),s=(a,c)=>{const o=this.associations.get(a);o!=null&&this.associations.set(c,o);for(const[u,d]of a.children.entries())s(d,c.children[u])};return s(t,r),r.name+="_instance_"+e.uses[n]++,r}_invokeOne(e){const n=Object.values(this.plugins);n.push(this);for(let t=0;t<n.length;t++){const r=e(n[t]);if(r)return r}return null}_invokeAll(e){const n=Object.values(this.plugins);n.unshift(this);const t=[];for(let r=0;r<n.length;r++){const s=e(n[r]);s&&t.push(s)}return t}getDependency(e,n){const t=e+":"+n;let r=this.cache.get(t);if(!r){switch(e){case"scene":r=this.loadScene(n);break;case"node":r=this._invokeOne(function(s){return s.loadNode&&s.loadNode(n)});break;case"mesh":r=this._invokeOne(function(s){return s.loadMesh&&s.loadMesh(n)});break;case"accessor":r=this.loadAccessor(n);break;case"bufferView":r=this._invokeOne(function(s){return s.loadBufferView&&s.loadBufferView(n)});break;case"buffer":r=this.loadBuffer(n);break;case"material":r=this._invokeOne(function(s){return s.loadMaterial&&s.loadMaterial(n)});break;case"texture":r=this._invokeOne(function(s){return s.loadTexture&&s.loadTexture(n)});break;case"skin":r=this.loadSkin(n);break;case"animation":r=this._invokeOne(function(s){return s.loadAnimation&&s.loadAnimation(n)});break;case"camera":r=this.loadCamera(n);break;default:if(r=this._invokeOne(function(s){return s!=this&&s.getDependency&&s.getDependency(e,n)}),!r)throw new Error("Unknown type: "+e);break}this.cache.add(t,r)}return r}getDependencies(e){let n=this.cache.get(e);if(!n){const t=this,r=this.json[e+(e==="mesh"?"es":"s")]||[];n=Promise.all(r.map(function(s,a){return t.getDependency(e,a)})),this.cache.add(e,n)}return n}loadBuffer(e){const n=this.json.buffers[e],t=this.fileLoader;if(n.type&&n.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+n.type+" buffer type is not supported.");if(n.uri===void 0&&e===0)return Promise.resolve(this.extensions[ee.KHR_BINARY_GLTF].body);const r=this.options;return new Promise(function(s,a){t.load(Ot.resolveURL(n.uri,r.path),s,void 0,function(){a(new Error('THREE.GLTFLoader: Failed to load buffer "'+n.uri+'".'))})})}loadBufferView(e){const n=this.json.bufferViews[e];return this.getDependency("buffer",n.buffer).then(function(t){const r=n.byteLength||0,s=n.byteOffset||0;return t.slice(s,s+r)})}loadAccessor(e){const n=this,t=this.json,r=this.json.accessors[e];if(r.bufferView===void 0&&r.sparse===void 0){const a=Tn[r.type],c=Ft[r.componentType],o=r.normalized===!0,u=new c(r.count*a);return Promise.resolve(new Nt(u,a,o))}const s=[];return r.bufferView!==void 0?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),r.sparse!==void 0&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then(function(a){const c=a[0],o=Tn[r.type],u=Ft[r.componentType],d=u.BYTES_PER_ELEMENT,h=d*o,B=r.byteOffset||0,C=r.bufferView!==void 0?t.bufferViews[r.bufferView].byteStride:void 0,g=r.normalized===!0;let R,v;if(C&&C!==h){const G=Math.floor(B/C),N="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+G+":"+r.count;let J=n.cache.get(N);J||(R=new u(c,G*C,r.count*C/d),J=new hs(R,C/d),n.cache.add(N,J)),v=new ws(J,o,B%C/d,g)}else c===null?R=new u(r.count*o):R=new u(c,B,r.count*o),v=new Nt(R,o,g);if(r.sparse!==void 0){const G=Tn.SCALAR,N=Ft[r.sparse.indices.componentType],J=r.sparse.indices.byteOffset||0,U=r.sparse.values.byteOffset||0,O=new N(a[1],J,r.sparse.count*G),S=new u(a[2],U,r.sparse.count*o);c!==null&&(v=new Nt(v.array.slice(),v.itemSize,v.normalized));for(let Z=0,I=O.length;Z<I;Z++){const y=O[Z];if(v.setX(y,S[Z*o]),o>=2&&v.setY(y,S[Z*o+1]),o>=3&&v.setZ(y,S[Z*o+2]),o>=4&&v.setW(y,S[Z*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return v})}loadTexture(e){const n=this.json,t=this.options,s=n.textures[e].source,a=n.images[s];let c=this.textureLoader;if(a.uri){const o=t.manager.getHandler(a.uri);o!==null&&(c=o)}return this.loadTextureImage(e,s,c)}loadTextureImage(e,n,t){const r=this,s=this.json,a=s.textures[e],c=s.images[n],o=(c.uri||c.bufferView)+":"+a.sampler;if(this.textureCache[o])return this.textureCache[o];const u=this.loadImageSource(n,t).then(function(d){d.flipY=!1,d.name=a.name||c.name||"",d.name===""&&typeof c.uri=="string"&&c.uri.startsWith("data:image/")===!1&&(d.name=c.uri);const B=(s.samplers||{})[a.sampler]||{};return d.magFilter=hr[B.magFilter]||Ne,d.minFilter=hr[B.minFilter]||vr,d.wrapS=fr[B.wrapS]||_n,d.wrapT=fr[B.wrapT]||_n,r.associations.set(d,{textures:e}),d}).catch(function(){return null});return this.textureCache[o]=u,u}loadImageSource(e,n){const t=this,r=this.json,s=this.options;if(this.sourceCache[e]!==void 0)return this.sourceCache[e].then(h=>h.clone());const a=r.images[e],c=self.URL||self.webkitURL;let o=a.uri||"",u=!1;if(a.bufferView!==void 0)o=t.getDependency("bufferView",a.bufferView).then(function(h){u=!0;const B=new Blob([h],{type:a.mimeType});return o=c.createObjectURL(B),o});else if(a.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const d=Promise.resolve(o).then(function(h){return new Promise(function(B,C){let g=B;n.isImageBitmapLoader===!0&&(g=function(R){const v=new nt(R);v.needsUpdate=!0,B(v)}),n.load(Ot.resolveURL(h,s.path),g,void 0,C)})}).then(function(h){return u===!0&&c.revokeObjectURL(o),We(h,a),h.userData.mimeType=a.mimeType||ei(a.uri),h}).catch(function(h){throw console.error("THREE.GLTFLoader: Couldn't load texture",o),h});return this.sourceCache[e]=d,d}assignTexture(e,n,t,r){const s=this;return this.getDependency("texture",t.index).then(function(a){if(!a)return null;if(t.texCoord!==void 0&&t.texCoord>0&&(a=a.clone(),a.channel=t.texCoord),s.extensions[ee.KHR_TEXTURE_TRANSFORM]){const c=t.extensions!==void 0?t.extensions[ee.KHR_TEXTURE_TRANSFORM]:void 0;if(c){const o=s.associations.get(a);a=s.extensions[ee.KHR_TEXTURE_TRANSFORM].extendTexture(a,c),s.associations.set(a,o)}}return r!==void 0&&(typeof r=="number"&&(r=r===ur?ht:qe),"colorSpace"in a?a.colorSpace=r:a.encoding=r===ht?ur:va),e[n]=a,a})}assignFinalMaterial(e){const n=e.geometry;let t=e.material;const r=n.attributes.tangent===void 0,s=n.attributes.color!==void 0,a=n.attributes.normal===void 0;if(e.isPoints){const c="PointsMaterial:"+t.uuid;let o=this.cache.get(c);o||(o=new gs,vn.prototype.copy.call(o,t),o.color.copy(t.color),o.map=t.map,o.sizeAttenuation=!1,this.cache.add(c,o)),t=o}else if(e.isLine){const c="LineBasicMaterial:"+t.uuid;let o=this.cache.get(c);o||(o=new Es,vn.prototype.copy.call(o,t),o.color.copy(t.color),o.map=t.map,this.cache.add(c,o)),t=o}if(r||s||a){let c="ClonedMaterial:"+t.uuid+":";r&&(c+="derivative-tangents:"),s&&(c+="vertex-colors:"),a&&(c+="flat-shading:");let o=this.cache.get(c);o||(o=t.clone(),s&&(o.vertexColors=!0),a&&(o.flatShading=!0),r&&(o.normalScale&&(o.normalScale.y*=-1),o.clearcoatNormalScale&&(o.clearcoatNormalScale.y*=-1)),this.cache.add(c,o),this.associations.set(o,this.associations.get(t))),t=o}e.material=t}getMaterialType(){return Ir}loadMaterial(e){const n=this,t=this.json,r=this.extensions,s=t.materials[e];let a;const c={},o=s.extensions||{},u=[];if(o[ee.KHR_MATERIALS_UNLIT]){const h=r[ee.KHR_MATERIALS_UNLIT];a=h.getMaterialType(),u.push(h.extendParams(c,s,n))}else{const h=s.pbrMetallicRoughness||{};if(c.color=new ft(1,1,1),c.opacity=1,Array.isArray(h.baseColorFactor)){const B=h.baseColorFactor;c.color.setRGB(B[0],B[1],B[2],qe),c.opacity=B[3]}h.baseColorTexture!==void 0&&u.push(n.assignTexture(c,"map",h.baseColorTexture,ht)),c.metalness=h.metallicFactor!==void 0?h.metallicFactor:1,c.roughness=h.roughnessFactor!==void 0?h.roughnessFactor:1,h.metallicRoughnessTexture!==void 0&&(u.push(n.assignTexture(c,"metalnessMap",h.metallicRoughnessTexture)),u.push(n.assignTexture(c,"roughnessMap",h.metallicRoughnessTexture))),a=this._invokeOne(function(B){return B.getMaterialType&&B.getMaterialType(e)}),u.push(Promise.all(this._invokeAll(function(B){return B.extendMaterialParams&&B.extendMaterialParams(e,c)})))}s.doubleSided===!0&&(c.side=br);const d=s.alphaMode||Rn.OPAQUE;if(d===Rn.BLEND?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,d===Rn.MASK&&(c.alphaTest=s.alphaCutoff!==void 0?s.alphaCutoff:.5)),s.normalTexture!==void 0&&a!==vt&&(u.push(n.assignTexture(c,"normalMap",s.normalTexture)),c.normalScale=new we(1,1),s.normalTexture.scale!==void 0)){const h=s.normalTexture.scale;c.normalScale.set(h,h)}if(s.occlusionTexture!==void 0&&a!==vt&&(u.push(n.assignTexture(c,"aoMap",s.occlusionTexture)),s.occlusionTexture.strength!==void 0&&(c.aoMapIntensity=s.occlusionTexture.strength)),s.emissiveFactor!==void 0&&a!==vt){const h=s.emissiveFactor;c.emissive=new ft().setRGB(h[0],h[1],h[2],qe)}return s.emissiveTexture!==void 0&&a!==vt&&u.push(n.assignTexture(c,"emissiveMap",s.emissiveTexture,ht)),Promise.all(u).then(function(){const h=new a(c);return s.name&&(h.name=s.name),We(h,s),n.associations.set(h,{materials:e}),s.extensions&&dt(r,h,s),h})}createUniqueName(e){const n=bs.sanitizeNodeName(e||"");return n in this.nodeNamesUsed?n+"_"+ ++this.nodeNamesUsed[n]:(this.nodeNamesUsed[n]=0,n)}loadGeometries(e){const n=this,t=this.extensions,r=this.primitiveCache;function s(c){return t[ee.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(c,n).then(function(o){return Br(o,c,n)})}const a=[];for(let c=0,o=e.length;c<o;c++){const u=e[c],d=$a(u),h=r[d];if(h)a.push(h.promise);else{let B;u.extensions&&u.extensions[ee.KHR_DRACO_MESH_COMPRESSION]?B=s(u):B=Br(new Fr,u,n),r[d]={primitive:u,promise:B},a.push(B)}}return Promise.all(a)}loadMesh(e){const n=this,t=this.json,r=this.extensions,s=t.meshes[e],a=s.primitives,c=[];for(let o=0,u=a.length;o<u;o++){const d=a[o].material===void 0?za(this.cache):this.getDependency("material",a[o].material);c.push(d)}return c.push(n.loadGeometries(a)),Promise.all(c).then(function(o){const u=o.slice(0,o.length-1),d=o[o.length-1],h=[];for(let C=0,g=d.length;C<g;C++){const R=d[C],v=a[C];let G;const N=u[C];if(v.mode===Le.TRIANGLES||v.mode===Le.TRIANGLE_STRIP||v.mode===Le.TRIANGLE_FAN||v.mode===void 0)G=s.isSkinnedMesh===!0?new Ms(R,N):new hn(R,N),G.isSkinnedMesh===!0&&G.normalizeSkinWeights(),v.mode===Le.TRIANGLE_STRIP?G.geometry=cr(G.geometry,Er):v.mode===Le.TRIANGLE_FAN&&(G.geometry=cr(G.geometry,wn));else if(v.mode===Le.LINES)G=new vs(R,N);else if(v.mode===Le.LINE_STRIP)G=new Is(R,N);else if(v.mode===Le.LINE_LOOP)G=new Fs(R,N);else if(v.mode===Le.POINTS)G=new ys(R,N);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+v.mode);Object.keys(G.geometry.morphAttributes).length>0&&qa(G,s),G.name=n.createUniqueName(s.name||"mesh_"+e),We(G,s),v.extensions&&dt(r,G,v),n.assignFinalMaterial(G),h.push(G)}for(let C=0,g=h.length;C<g;C++)n.associations.set(h[C],{meshes:e,primitives:C});if(h.length===1)return s.extensions&&dt(r,h[0],s),h[0];const B=new In;s.extensions&&dt(r,B,s),n.associations.set(B,{meshes:e});for(let C=0,g=h.length;C<g;C++)B.add(h[C]);return B})}loadCamera(e){let n;const t=this.json.cameras[e],r=t[t.type];if(!r){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return t.type==="perspective"?n=new cn(Ts.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):t.type==="orthographic"&&(n=new Lt(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),t.name&&(n.name=this.createUniqueName(t.name)),We(n,t),Promise.resolve(n)}loadSkin(e){const n=this.json.skins[e],t=[];for(let r=0,s=n.joints.length;r<s;r++)t.push(this._loadNodeShallow(n.joints[r]));return n.inverseBindMatrices!==void 0?t.push(this.getDependency("accessor",n.inverseBindMatrices)):t.push(null),Promise.all(t).then(function(r){const s=r.pop(),a=r,c=[],o=[];for(let u=0,d=a.length;u<d;u++){const h=a[u];if(h){c.push(h);const B=new An;s!==null&&B.fromArray(s.array,u*16),o.push(B)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',n.joints[u])}return new Rs(c,o)})}loadAnimation(e){const n=this.json,t=this,r=n.animations[e],s=r.name?r.name:"animation_"+e,a=[],c=[],o=[],u=[],d=[];for(let h=0,B=r.channels.length;h<B;h++){const C=r.channels[h],g=r.samplers[C.sampler],R=C.target,v=R.node,G=r.parameters!==void 0?r.parameters[g.input]:g.input,N=r.parameters!==void 0?r.parameters[g.output]:g.output;R.node!==void 0&&(a.push(this.getDependency("node",v)),c.push(this.getDependency("accessor",G)),o.push(this.getDependency("accessor",N)),u.push(g),d.push(R))}return Promise.all([Promise.all(a),Promise.all(c),Promise.all(o),Promise.all(u),Promise.all(d)]).then(function(h){const B=h[0],C=h[1],g=h[2],R=h[3],v=h[4],G=[];for(let N=0,J=B.length;N<J;N++){const U=B[N],O=C[N],S=g[N],Z=R[N],I=v[N];if(U===void 0)continue;U.updateMatrix&&U.updateMatrix();const y=t._createAnimationTracks(U,O,S,Z,I);if(y)for(let P=0;P<y.length;P++)G.push(y[P])}return new xs(s,void 0,G)})}createNodeMesh(e){const n=this.json,t=this,r=n.nodes[e];return r.mesh===void 0?null:t.getDependency("mesh",r.mesh).then(function(s){const a=t._getNodeRef(t.meshCache,r.mesh,s);return r.weights!==void 0&&a.traverse(function(c){if(c.isMesh)for(let o=0,u=r.weights.length;o<u;o++)c.morphTargetInfluences[o]=r.weights[o]}),a})}loadNode(e){const n=this.json,t=this,r=n.nodes[e],s=t._loadNodeShallow(e),a=[],c=r.children||[];for(let u=0,d=c.length;u<d;u++)a.push(t.getDependency("node",c[u]));const o=r.skin===void 0?Promise.resolve(null):t.getDependency("skin",r.skin);return Promise.all([s,Promise.all(a),o]).then(function(u){const d=u[0],h=u[1],B=u[2];B!==null&&d.traverse(function(C){C.isSkinnedMesh&&C.bind(B,ti)});for(let C=0,g=h.length;C<g;C++)d.add(h[C]);return d})}_loadNodeShallow(e){const n=this.json,t=this.extensions,r=this;if(this.nodeCache[e]!==void 0)return this.nodeCache[e];const s=n.nodes[e],a=s.name?r.createUniqueName(s.name):"",c=[],o=r._invokeOne(function(u){return u.createNodeMesh&&u.createNodeMesh(e)});return o&&c.push(o),s.camera!==void 0&&c.push(r.getDependency("camera",s.camera).then(function(u){return r._getNodeRef(r.cameraCache,s.camera,u)})),r._invokeAll(function(u){return u.createNodeAttachment&&u.createNodeAttachment(e)}).forEach(function(u){c.push(u)}),this.nodeCache[e]=Promise.all(c).then(function(u){let d;if(s.isBone===!0?d=new Ds:u.length>1?d=new In:u.length===1?d=u[0]:d=new Mr,d!==u[0])for(let h=0,B=u.length;h<B;h++)d.add(u[h]);if(s.name&&(d.userData.name=s.name,d.name=a),We(d,s),s.extensions&&dt(t,d,s),s.matrix!==void 0){const h=new An;h.fromArray(s.matrix),d.applyMatrix4(h)}else s.translation!==void 0&&d.position.fromArray(s.translation),s.rotation!==void 0&&d.quaternion.fromArray(s.rotation),s.scale!==void 0&&d.scale.fromArray(s.scale);return r.associations.has(d)||r.associations.set(d,{}),r.associations.get(d).nodes=e,d}),this.nodeCache[e]}loadScene(e){const n=this.extensions,t=this.json.scenes[e],r=this,s=new In;t.name&&(s.name=r.createUniqueName(t.name)),We(s,t),t.extensions&&dt(n,s,t);const a=t.nodes||[],c=[];for(let o=0,u=a.length;o<u;o++)c.push(r.getDependency("node",a[o]));return Promise.all(c).then(function(o){for(let d=0,h=o.length;d<h;d++)s.add(o[d]);const u=d=>{const h=new Map;for(const[B,C]of r.associations)(B instanceof vn||B instanceof nt)&&h.set(B,C);return d.traverse(B=>{const C=r.associations.get(B);C!=null&&h.set(B,C)}),h};return r.associations=u(s),s})}_createAnimationTracks(e,n,t,r,s){const a=[],c=e.name?e.name:e.uuid,o=[];tt[s.path]===tt.weights?e.traverse(function(B){B.morphTargetInfluences&&o.push(B.name?B.name:B.uuid)}):o.push(c);let u;switch(tt[s.path]){case tt.weights:u=rr;break;case tt.rotation:u=sr;break;case tt.position:case tt.scale:u=nr;break;default:switch(t.itemSize){case 1:u=rr;break;case 2:case 3:default:u=nr;break}break}const d=r.interpolation!==void 0?Wa[r.interpolation]:yr,h=this._getArrayFromAccessor(t);for(let B=0,C=o.length;B<C;B++){const g=new u(o[B]+"."+tt[s.path],n.array,h,d);r.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(g),a.push(g)}return a}_getArrayFromAccessor(e){let n=e.array;if(e.normalized){const t=Pn(n.constructor),r=new Float32Array(n.length);for(let s=0,a=n.length;s<a;s++)r[s]=n[s]*t;n=r}return n}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(t){const r=this instanceof sr?Za:Pr;return new r(this.times,this.values,this.getValueSize()/3,t)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function ri(l,e,n){const t=e.attributes,r=new Ss;if(t.POSITION!==void 0){const c=n.json.accessors[t.POSITION],o=c.min,u=c.max;if(o!==void 0&&u!==void 0){if(r.set(new Ee(o[0],o[1],o[2]),new Ee(u[0],u[1],u[2])),c.normalized){const d=Pn(Ft[c.componentType]);r.min.multiplyScalar(d),r.max.multiplyScalar(d)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const s=e.targets;if(s!==void 0){const c=new Ee,o=new Ee;for(let u=0,d=s.length;u<d;u++){const h=s[u];if(h.POSITION!==void 0){const B=n.json.accessors[h.POSITION],C=B.min,g=B.max;if(C!==void 0&&g!==void 0){if(o.setX(Math.max(Math.abs(C[0]),Math.abs(g[0]))),o.setY(Math.max(Math.abs(C[1]),Math.abs(g[1]))),o.setZ(Math.max(Math.abs(C[2]),Math.abs(g[2]))),B.normalized){const R=Pn(Ft[B.componentType]);o.multiplyScalar(R)}c.max(o)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}r.expandByVector(c)}l.boundingBox=r;const a=new Ls;r.getCenter(a.center),a.radius=r.min.distanceTo(r.max)/2,l.boundingSphere=a}function Br(l,e,n){const t=e.attributes,r=[];function s(a,c){return n.getDependency("accessor",a).then(function(o){l.setAttribute(c,o)})}for(const a in t){const c=Nn[a]||a.toLowerCase();c in l.attributes||r.push(s(t[a],c))}if(e.indices!==void 0&&!l.index){const a=n.getDependency("accessor",e.indices).then(function(c){l.setIndex(c)});r.push(a)}return We(l,e),ri(l,e,n),Promise.all(r).then(function(){return e.targets!==void 0?Va(l,e.targets,n):l})}class si extends Tr{constructor(e){super(e),this.type=Pe}parse(e){const a=function(I,y){switch(I){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(y||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(y||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(y||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(y||""))}},d=`
`,h=function(I,y,P){y=y||1024;let ne=I.pos,W=-1,j=0,re="",z=String.fromCharCode.apply(null,new Uint16Array(I.subarray(ne,ne+128)));for(;0>(W=z.indexOf(d))&&j<y&&ne<I.byteLength;)re+=z,j+=z.length,ne+=128,z+=String.fromCharCode.apply(null,new Uint16Array(I.subarray(ne,ne+128)));return-1<W?(I.pos+=j+W+1,re+z.slice(0,W)):!1},B=function(I){const y=/^#\?(\S+)/,P=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,te=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,ne=/^\s*FORMAT=(\S+)\s*$/,W=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,j={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let re,z;for((I.pos>=I.byteLength||!(re=h(I)))&&a(1,"no header found"),(z=re.match(y))||a(3,"bad initial token"),j.valid|=1,j.programtype=z[1],j.string+=re+`
`;re=h(I),re!==!1;){if(j.string+=re+`
`,re.charAt(0)==="#"){j.comments+=re+`
`;continue}if((z=re.match(P))&&(j.gamma=parseFloat(z[1])),(z=re.match(te))&&(j.exposure=parseFloat(z[1])),(z=re.match(ne))&&(j.valid|=2,j.format=z[1]),(z=re.match(W))&&(j.valid|=4,j.height=parseInt(z[1],10),j.width=parseInt(z[2],10)),j.valid&2&&j.valid&4)break}return j.valid&2||a(3,"missing format specifier"),j.valid&4||a(3,"missing image size specifier"),j},C=function(I,y,P){const te=y;if(te<8||te>32767||I[0]!==2||I[1]!==2||I[2]&128)return new Uint8Array(I);te!==(I[2]<<8|I[3])&&a(3,"wrong scanline width");const ne=new Uint8Array(4*y*P);ne.length||a(4,"unable to allocate buffer space");let W=0,j=0;const re=4*te,z=new Uint8Array(4),Fe=new Uint8Array(re);let ye=P;for(;ye>0&&j<I.byteLength;){j+4>I.byteLength&&a(1),z[0]=I[j++],z[1]=I[j++],z[2]=I[j++],z[3]=I[j++],(z[0]!=2||z[1]!=2||(z[2]<<8|z[3])!=te)&&a(3,"bad rgbe scanline format");let Ae=0,$;for(;Ae<re&&j<I.byteLength;){$=I[j++];const ie=$>128;if(ie&&($-=128),($===0||Ae+$>re)&&a(3,"bad scanline data"),ie){const ce=I[j++];for(let De=0;De<$;De++)Fe[Ae++]=ce}else Fe.set(I.subarray(j,j+$),Ae),Ae+=$,j+=$}const ve=te;for(let ie=0;ie<ve;ie++){let ce=0;ne[W]=Fe[ie+ce],ce+=te,ne[W+1]=Fe[ie+ce],ce+=te,ne[W+2]=Fe[ie+ce],ce+=te,ne[W+3]=Fe[ie+ce],W+=4}ye--}return ne},g=function(I,y,P,te){const ne=I[y+3],W=Math.pow(2,ne-128)/255;P[te+0]=I[y+0]*W,P[te+1]=I[y+1]*W,P[te+2]=I[y+2]*W,P[te+3]=1},R=function(I,y,P,te){const ne=I[y+3],W=Math.pow(2,ne-128)/255;P[te+0]=It.toHalfFloat(Math.min(I[y+0]*W,65504)),P[te+1]=It.toHalfFloat(Math.min(I[y+1]*W,65504)),P[te+2]=It.toHalfFloat(Math.min(I[y+2]*W,65504)),P[te+3]=It.toHalfFloat(1)},v=new Uint8Array(e);v.pos=0;const G=B(v),N=G.width,J=G.height,U=C(v.subarray(v.pos),N,J);let O,S,Z;switch(this.type){case Ve:Z=U.length/4;const I=new Float32Array(Z*4);for(let P=0;P<Z;P++)g(U,P*4,I,P*4);O=I,S=Ve;break;case Pe:Z=U.length/4;const y=new Uint16Array(Z*4);for(let P=0;P<Z;P++)R(U,P*4,y,P*4);O=y,S=Pe;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:N,height:J,data:O,header:G.string,gamma:G.gamma,exposure:G.exposure,type:S}}setDataType(e){return this.type=e,this}load(e,n,t,r){function s(a,c){switch(a.type){case Ve:case Pe:"colorSpace"in a?a.colorSpace="srgb-linear":a.encoding=3e3,a.minFilter=Ne,a.magFilter=Ne,a.generateMipmaps=!1,a.flipY=!0;break}n&&n(a,c)}return super.load(e,s,t,r)}}const Ht=Kn>=152;class ai extends Tr{constructor(e){super(e),this.type=Pe}parse(e){const y=Math.pow(2.7182818,2.2);function P(i,A){for(var f=0,m=0;m<65536;++m)(m==0||i[m>>3]&1<<(m&7))&&(A[f++]=m);for(var E=f-1;f<65536;)A[f++]=0;return E}function te(i){for(var A=0;A<16384;A++)i[A]={},i[A].len=0,i[A].lit=0,i[A].p=null}const ne={l:0,c:0,lc:0};function W(i,A,f,m,E){for(;f<i;)A=A<<8|gt(m,E),f+=8;f-=i,ne.l=A>>f&(1<<i)-1,ne.c=A,ne.lc=f}const j=new Array(59);function re(i){for(var A=0;A<=58;++A)j[A]=0;for(var A=0;A<65537;++A)j[i[A]]+=1;for(var f=0,A=58;A>0;--A){var m=f+j[A]>>1;j[A]=f,f=m}for(var A=0;A<65537;++A){var E=i[A];E>0&&(i[A]=E|j[E]++<<6)}}function z(i,A,f,m,E,b,x){for(var F=f,H=0,_=0;E<=b;E++){if(F.value-f.value>m)return!1;W(6,H,_,i,F);var L=ne.l;if(H=ne.c,_=ne.lc,x[E]=L,L==63){if(F.value-f.value>m)throw"Something wrong with hufUnpackEncTable";W(8,H,_,i,F);var w=ne.l+6;if(H=ne.c,_=ne.lc,E+w>b+1)throw"Something wrong with hufUnpackEncTable";for(;w--;)x[E++]=0;E--}else if(L>=59){var w=L-59+2;if(E+w>b+1)throw"Something wrong with hufUnpackEncTable";for(;w--;)x[E++]=0;E--}}re(x)}function Fe(i){return i&63}function ye(i){return i>>6}function Ae(i,A,f,m){for(;A<=f;A++){var E=ye(i[A]),b=Fe(i[A]);if(E>>b)throw"Invalid table entry";if(b>14){var x=m[E>>b-14];if(x.len)throw"Invalid table entry";if(x.lit++,x.p){var F=x.p;x.p=new Array(x.lit);for(var H=0;H<x.lit-1;++H)x.p[H]=F[H]}else x.p=new Array(1);x.p[x.lit-1]=A}else if(b)for(var _=0,H=1<<14-b;H>0;H--){var x=m[(E<<14-b)+_];if(x.len||x.p)throw"Invalid table entry";x.len=b,x.lit=A,_++}}return!0}const $={c:0,lc:0};function ve(i,A,f,m){i=i<<8|gt(f,m),A+=8,$.c=i,$.lc=A}const ie={c:0,lc:0};function ce(i,A,f,m,E,b,x,F,H,_){if(i==A){m<8&&(ve(f,m,E,x),f=$.c,m=$.lc),m-=8;var L=f>>m,L=new Uint8Array([L])[0];if(H.value+L>_)return!1;for(var w=F[H.value-1];L-- >0;)F[H.value++]=w}else if(H.value<_)F[H.value++]=i;else return!1;ie.c=f,ie.lc=m}function De(i){return i&65535}function at(i){var A=De(i);return A>32767?A-65536:A}const oe={a:0,b:0};function Ue(i,A){var f=at(i),m=at(A),E=m,b=f+(E&1)+(E>>1),x=b,F=b-E;oe.a=x,oe.b=F}function Je(i,A){var f=De(i),m=De(A),E=f-(m>>1)&65535,b=m+E-32768&65535;oe.a=b,oe.b=E}function Bn(i,A,f,m,E,b,x){for(var F=x<16384,H=f>E?E:f,_=1,L;_<=H;)_<<=1;for(_>>=1,L=_,_>>=1;_>=1;){for(var w=0,Ce=w+b*(E-L),K=b*_,Q=b*L,V=m*_,q=m*L,ue,he,be,xe;w<=Ce;w+=Q){for(var fe=w,Xe=w+m*(f-L);fe<=Xe;fe+=q){var Be=fe+V,Me=fe+K,Ze=Me+V;F?(Ue(i[fe+A],i[Me+A]),ue=oe.a,be=oe.b,Ue(i[Be+A],i[Ze+A]),he=oe.a,xe=oe.b,Ue(ue,he),i[fe+A]=oe.a,i[Be+A]=oe.b,Ue(be,xe),i[Me+A]=oe.a,i[Ze+A]=oe.b):(Je(i[fe+A],i[Me+A]),ue=oe.a,be=oe.b,Je(i[Be+A],i[Ze+A]),he=oe.a,xe=oe.b,Je(ue,he),i[fe+A]=oe.a,i[Be+A]=oe.b,Je(be,xe),i[Me+A]=oe.a,i[Ze+A]=oe.b)}if(f&_){var Me=fe+K;F?Ue(i[fe+A],i[Me+A]):Je(i[fe+A],i[Me+A]),ue=oe.a,i[Me+A]=oe.b,i[fe+A]=ue}}if(E&_)for(var fe=w,Xe=w+m*(f-L);fe<=Xe;fe+=q){var Be=fe+V;F?Ue(i[fe+A],i[Be+A]):Je(i[fe+A],i[Be+A]),ue=oe.a,i[Be+A]=oe.b,i[fe+A]=ue}L=_,_>>=1}return w}function pn(i,A,f,m,E,b,x,F,H,_){for(var L=0,w=0,Ce=F,K=Math.trunc(E.value+(b+7)/8);E.value<K;)for(ve(L,w,f,E),L=$.c,w=$.lc;w>=14;){var Q=L>>w-14&16383,V=A[Q];if(V.len)w-=V.len,ce(V.lit,x,L,w,f,m,E,H,_,Ce),L=ie.c,w=ie.lc;else{if(!V.p)throw"hufDecode issues";var q;for(q=0;q<V.lit;q++){for(var ue=Fe(i[V.p[q]]);w<ue&&E.value<K;)ve(L,w,f,E),L=$.c,w=$.lc;if(w>=ue&&ye(i[V.p[q]])==(L>>w-ue&(1<<ue)-1)){w-=ue,ce(V.p[q],x,L,w,f,m,E,H,_,Ce),L=ie.c,w=ie.lc;break}}if(q==V.lit)throw"hufDecode issues"}}var he=8-b&7;for(L>>=he,w-=he;w>0;){var V=A[L<<14-w&16383];if(V.len)w-=V.len,ce(V.lit,x,L,w,f,m,E,H,_,Ce),L=ie.c,w=ie.lc;else throw"hufDecode issues"}return!0}function jt(i,A,f,m,E,b){var x={value:0},F=f.value,H=Ie(A,f),_=Ie(A,f);f.value+=4;var L=Ie(A,f);if(f.value+=4,H<0||H>=65537||_<0||_>=65537)throw"Something wrong with HUF_ENCSIZE";var w=new Array(65537),Ce=new Array(16384);te(Ce);var K=m-(f.value-F);if(z(i,A,f,K,H,_,w),L>8*(m-(f.value-F)))throw"Something wrong with hufUncompress";Ae(w,H,_,Ce),pn(w,Ce,i,A,f,L,_,b,E,x)}function Qt(i,A,f){for(var m=0;m<f;++m)A[m]=i[A[m]]}function Tt(i){for(var A=1;A<i.length;A++){var f=i[A-1]+i[A]-128;i[A]=f}}function Rt(i,A){for(var f=0,m=Math.floor((i.length+1)/2),E=0,b=i.length-1;!(E>b||(A[E++]=i[f++],E>b));)A[E++]=i[m++]}function Xt(i){for(var A=i.byteLength,f=new Array,m=0,E=new DataView(i);A>0;){var b=E.getInt8(m++);if(b<0){var x=-b;A-=x+1;for(var F=0;F<x;F++)f.push(E.getUint8(m++))}else{var x=b;A-=2;for(var H=E.getUint8(m++),F=0;F<x+1;F++)f.push(H)}}return f}function mn(i,A,f,m,E,b){var Be=new DataView(b.buffer),x=f[i.idx[0]].width,F=f[i.idx[0]].height,H=3,_=Math.floor(x/8),L=Math.ceil(x/8),w=Math.ceil(F/8),Ce=x-(L-1)*8,K=F-(w-1)*8,Q={value:0},V=new Array(H),q=new Array(H),ue=new Array(H),he=new Array(H),be=new Array(H);for(let de=0;de<H;++de)be[de]=A[i.idx[de]],V[de]=de<1?0:V[de-1]+L*w,q[de]=new Float32Array(64),ue[de]=new Uint16Array(64),he[de]=new Uint16Array(L*64);for(let de=0;de<w;++de){var xe=8;de==w-1&&(xe=K);var fe=8;for(let me=0;me<L;++me){me==L-1&&(fe=Ce);for(let le=0;le<H;++le)ue[le].fill(0),ue[le][0]=E[V[le]++],Yt(Q,m,ue[le]),Zt(ue[le],q[le]),Wt(q[le]);Cn(q);for(let le=0;le<H;++le)gn(q[le],he[le],me*64)}let Te=0;for(let me=0;me<H;++me){const le=f[i.idx[me]].type;for(let Se=8*de;Se<8*de+xe;++Se){Te=be[me][Se];for(let ut=0;ut<_;++ut){const Ge=ut*64+(Se&7)*8;Be.setUint16(Te+0*2*le,he[me][Ge+0],!0),Be.setUint16(Te+1*2*le,he[me][Ge+1],!0),Be.setUint16(Te+2*2*le,he[me][Ge+2],!0),Be.setUint16(Te+3*2*le,he[me][Ge+3],!0),Be.setUint16(Te+4*2*le,he[me][Ge+4],!0),Be.setUint16(Te+5*2*le,he[me][Ge+5],!0),Be.setUint16(Te+6*2*le,he[me][Ge+6],!0),Be.setUint16(Te+7*2*le,he[me][Ge+7],!0),Te+=8*2*le}}if(_!=L)for(let Se=8*de;Se<8*de+xe;++Se){const ut=be[me][Se]+8*_*2*le,Ge=_*64+(Se&7)*8;for(let $e=0;$e<fe;++$e)Be.setUint16(ut+$e*2*le,he[me][Ge+$e],!0)}}}for(var Xe=new Uint16Array(x),Be=new DataView(b.buffer),Me=0;Me<H;++Me){f[i.idx[Me]].decoded=!0;var Ze=f[i.idx[Me]].type;if(f[Me].type==2)for(var wt=0;wt<F;++wt){const de=be[Me][wt];for(var He=0;He<x;++He)Xe[He]=Be.getUint16(de+He*2*Ze,!0);for(var He=0;He<x;++He)Be.setFloat32(de+He*2*Ze,D(Xe[He]),!0)}}}function Yt(i,A,f){for(var m,E=1;E<64;)m=A[i.value],m==65280?E=64:m>>8==255?E+=m&255:(f[E]=m,E++),i.value++}function Zt(i,A){A[0]=D(i[0]),A[1]=D(i[1]),A[2]=D(i[5]),A[3]=D(i[6]),A[4]=D(i[14]),A[5]=D(i[15]),A[6]=D(i[27]),A[7]=D(i[28]),A[8]=D(i[2]),A[9]=D(i[4]),A[10]=D(i[7]),A[11]=D(i[13]),A[12]=D(i[16]),A[13]=D(i[26]),A[14]=D(i[29]),A[15]=D(i[42]),A[16]=D(i[3]),A[17]=D(i[8]),A[18]=D(i[12]),A[19]=D(i[17]),A[20]=D(i[25]),A[21]=D(i[30]),A[22]=D(i[41]),A[23]=D(i[43]),A[24]=D(i[9]),A[25]=D(i[11]),A[26]=D(i[18]),A[27]=D(i[24]),A[28]=D(i[31]),A[29]=D(i[40]),A[30]=D(i[44]),A[31]=D(i[53]),A[32]=D(i[10]),A[33]=D(i[19]),A[34]=D(i[23]),A[35]=D(i[32]),A[36]=D(i[39]),A[37]=D(i[45]),A[38]=D(i[52]),A[39]=D(i[54]),A[40]=D(i[20]),A[41]=D(i[22]),A[42]=D(i[33]),A[43]=D(i[38]),A[44]=D(i[46]),A[45]=D(i[51]),A[46]=D(i[55]),A[47]=D(i[60]),A[48]=D(i[21]),A[49]=D(i[34]),A[50]=D(i[37]),A[51]=D(i[47]),A[52]=D(i[50]),A[53]=D(i[56]),A[54]=D(i[59]),A[55]=D(i[61]),A[56]=D(i[35]),A[57]=D(i[36]),A[58]=D(i[48]),A[59]=D(i[49]),A[60]=D(i[57]),A[61]=D(i[58]),A[62]=D(i[62]),A[63]=D(i[63])}function Wt(i){const A=.5*Math.cos(.7853975),f=.5*Math.cos(3.14159/16),m=.5*Math.cos(3.14159/8),E=.5*Math.cos(3*3.14159/16),b=.5*Math.cos(5*3.14159/16),x=.5*Math.cos(3*3.14159/8),F=.5*Math.cos(7*3.14159/16);for(var H=new Array(4),_=new Array(4),L=new Array(4),w=new Array(4),Ce=0;Ce<8;++Ce){var K=Ce*8;H[0]=m*i[K+2],H[1]=x*i[K+2],H[2]=m*i[K+6],H[3]=x*i[K+6],_[0]=f*i[K+1]+E*i[K+3]+b*i[K+5]+F*i[K+7],_[1]=E*i[K+1]-F*i[K+3]-f*i[K+5]-b*i[K+7],_[2]=b*i[K+1]-f*i[K+3]+F*i[K+5]+E*i[K+7],_[3]=F*i[K+1]-b*i[K+3]+E*i[K+5]-f*i[K+7],L[0]=A*(i[K+0]+i[K+4]),L[3]=A*(i[K+0]-i[K+4]),L[1]=H[0]+H[3],L[2]=H[1]-H[2],w[0]=L[0]+L[1],w[1]=L[3]+L[2],w[2]=L[3]-L[2],w[3]=L[0]-L[1],i[K+0]=w[0]+_[0],i[K+1]=w[1]+_[1],i[K+2]=w[2]+_[2],i[K+3]=w[3]+_[3],i[K+4]=w[3]-_[3],i[K+5]=w[2]-_[2],i[K+6]=w[1]-_[1],i[K+7]=w[0]-_[0]}for(var Q=0;Q<8;++Q)H[0]=m*i[16+Q],H[1]=x*i[16+Q],H[2]=m*i[48+Q],H[3]=x*i[48+Q],_[0]=f*i[8+Q]+E*i[24+Q]+b*i[40+Q]+F*i[56+Q],_[1]=E*i[8+Q]-F*i[24+Q]-f*i[40+Q]-b*i[56+Q],_[2]=b*i[8+Q]-f*i[24+Q]+F*i[40+Q]+E*i[56+Q],_[3]=F*i[8+Q]-b*i[24+Q]+E*i[40+Q]-f*i[56+Q],L[0]=A*(i[Q]+i[32+Q]),L[3]=A*(i[Q]-i[32+Q]),L[1]=H[0]+H[3],L[2]=H[1]-H[2],w[0]=L[0]+L[1],w[1]=L[3]+L[2],w[2]=L[3]-L[2],w[3]=L[0]-L[1],i[0+Q]=w[0]+_[0],i[8+Q]=w[1]+_[1],i[16+Q]=w[2]+_[2],i[24+Q]=w[3]+_[3],i[32+Q]=w[3]-_[3],i[40+Q]=w[2]-_[2],i[48+Q]=w[1]-_[1],i[56+Q]=w[0]-_[0]}function Cn(i){for(var A=0;A<64;++A){var f=i[0][A],m=i[1][A],E=i[2][A];i[0][A]=f+1.5747*E,i[1][A]=f-.1873*m-.4682*E,i[2][A]=f+1.8556*m}}function gn(i,A,f){for(var m=0;m<64;++m)A[f+m]=It.toHalfFloat(zt(i[m]))}function zt(i){return i<=1?Math.sign(i)*Math.pow(Math.abs(i),2.2):Math.sign(i)*Math.pow(y,Math.abs(i)-1)}function pt(i){return new DataView(i.array.buffer,i.offset.value,i.size)}function it(i){var A=i.viewer.buffer.slice(i.offset.value,i.offset.value+i.size),f=new Uint8Array(Xt(A)),m=new Uint8Array(f.length);return Tt(f),Rt(f,m),new DataView(m.buffer)}function xt(i){var A=i.array.slice(i.offset.value,i.offset.value+i.size),f=nn(A),m=new Uint8Array(f.length);return Tt(f),Rt(f,m),new DataView(m.buffer)}function En(i){for(var A=i.viewer,f={value:i.offset.value},m=new Uint16Array(i.width*i.scanlineBlockSize*(i.channels*i.type)),E=new Uint8Array(8192),b=0,x=new Array(i.channels),F=0;F<i.channels;F++)x[F]={},x[F].start=b,x[F].end=x[F].start,x[F].nx=i.width,x[F].ny=i.lines,x[F].size=i.type,b+=x[F].nx*x[F].ny*x[F].size;var H=Re(A,f),_=Re(A,f);if(_>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(H<=_)for(var F=0;F<_-H+1;F++)E[F+H]=p(A,f);var L=new Uint16Array(65536),w=P(E,L),Ce=Ie(A,f);jt(i.array,A,f,Ce,m,b);for(var F=0;F<i.channels;++F)for(var K=x[F],Q=0;Q<x[F].size;++Q)Bn(m,K.start+Q,K.nx,K.size,K.ny,K.nx*K.size,w);Qt(L,m,b);for(var V=0,q=new Uint8Array(m.buffer.byteLength),ue=0;ue<i.lines;ue++)for(var he=0;he<i.channels;he++){var K=x[he],be=K.nx*K.size,xe=new Uint8Array(m.buffer,K.end*2,be*2);q.set(xe,V),V+=be*2,K.end+=be}return new DataView(q.buffer)}function Vt(i){var A=i.array.slice(i.offset.value,i.offset.value+i.size),f=nn(A);const m=i.lines*i.channels*i.width,E=i.type==1?new Uint16Array(m):new Uint32Array(m);let b=0,x=0;const F=new Array(4);for(let H=0;H<i.lines;H++)for(let _=0;_<i.channels;_++){let L=0;switch(i.type){case 1:F[0]=b,F[1]=F[0]+i.width,b=F[1]+i.width;for(let w=0;w<i.width;++w){const Ce=f[F[0]++]<<8|f[F[1]++];L+=Ce,E[x]=L,x++}break;case 2:F[0]=b,F[1]=F[0]+i.width,F[2]=F[1]+i.width,b=F[2]+i.width;for(let w=0;w<i.width;++w){const Ce=f[F[0]++]<<24|f[F[1]++]<<16|f[F[2]++]<<8;L+=Ce,E[x]=L,x++}break}}return new DataView(E.buffer)}function mt(i){var A=i.viewer,f={value:i.offset.value},m=new Uint8Array(i.width*i.lines*(i.channels*i.type*2)),E={version:T(A,f),unknownUncompressedSize:T(A,f),unknownCompressedSize:T(A,f),acCompressedSize:T(A,f),dcCompressedSize:T(A,f),rleCompressedSize:T(A,f),rleUncompressedSize:T(A,f),rleRawSize:T(A,f),totalAcUncompressedCount:T(A,f),totalDcUncompressedCount:T(A,f),acCompression:T(A,f)};if(E.version<2)throw"EXRLoader.parse: "+Gt.compression+" version "+E.version+" is unsupported";for(var b=new Array,x=Re(A,f)-2;x>0;){var F=Ct(A.buffer,f),H=p(A,f),_=H>>2&3,L=(H>>4)-1,w=new Int8Array([L])[0],Ce=p(A,f);b.push({name:F,index:w,type:Ce,compression:_}),x-=F.length+3}for(var K=Gt.channels,Q=new Array(i.channels),V=0;V<i.channels;++V){var q=Q[V]={},ue=K[V];q.name=ue.name,q.compression=0,q.decoded=!1,q.type=ue.pixelType,q.pLinear=ue.pLinear,q.width=i.width,q.height=i.lines}for(var he={idx:new Array(3)},be=0;be<i.channels;++be)for(var q=Q[be],V=0;V<b.length;++V){var xe=b[V];q.name==xe.name&&(q.compression=xe.compression,xe.index>=0&&(he.idx[xe.index]=be),q.offset=be)}if(E.acCompressedSize>0)switch(E.acCompression){case 0:var Be=new Uint16Array(E.totalAcUncompressedCount);jt(i.array,A,f,E.acCompressedSize,Be,E.totalAcUncompressedCount);break;case 1:var fe=i.array.slice(f.value,f.value+E.totalAcUncompressedCount),Xe=nn(fe),Be=new Uint16Array(Xe.buffer);f.value+=E.totalAcUncompressedCount;break}if(E.dcCompressedSize>0){var Me={array:i.array,offset:f,size:E.dcCompressedSize},Ze=new Uint16Array(xt(Me).buffer);f.value+=E.dcCompressedSize}if(E.rleRawSize>0){var fe=i.array.slice(f.value,f.value+E.rleCompressedSize),Xe=nn(fe),wt=Xt(Xe.buffer);f.value+=E.rleCompressedSize}for(var He=0,de=new Array(Q.length),V=0;V<de.length;++V)de[V]=new Array;for(var Te=0;Te<i.lines;++Te)for(var me=0;me<Q.length;++me)de[me].push(He),He+=Q[me].width*i.type*2;mn(he,de,Q,Be,Ze,m);for(var V=0;V<Q.length;++V){var q=Q[V];if(!q.decoded)switch(q.compression){case 2:for(var le=0,Se=0,Te=0;Te<i.lines;++Te){for(var ut=de[V][le],Ge=0;Ge<q.width;++Ge){for(var $e=0;$e<2*q.type;++$e)m[ut++]=wt[Se+$e*q.width*q.height];Se++}le++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(m.buffer)}function Ct(i,A){for(var f=new Uint8Array(i),m=0;f[A.value+m]!=0;)m+=1;var E=new TextDecoder().decode(f.slice(A.value,A.value+m));return A.value=A.value+m+1,E}function bn(i,A,f){var m=new TextDecoder().decode(new Uint8Array(i).slice(A.value,A.value+f));return A.value=A.value+f,m}function qt(i,A){var f=ot(i,A),m=Ie(i,A);return[f,m]}function Mn(i,A){var f=Ie(i,A),m=Ie(i,A);return[f,m]}function ot(i,A){var f=i.getInt32(A.value,!0);return A.value=A.value+4,f}function Ie(i,A){var f=i.getUint32(A.value,!0);return A.value=A.value+4,f}function gt(i,A){var f=i[A.value];return A.value=A.value+1,f}function p(i,A){var f=i.getUint8(A.value);return A.value=A.value+1,f}const T=function(i,A){let f;return"getBigInt64"in DataView.prototype?f=Number(i.getBigInt64(A.value,!0)):f=i.getUint32(A.value+4,!0)+Number(i.getUint32(A.value,!0)<<32),A.value+=8,f};function k(i,A){var f=i.getFloat32(A.value,!0);return A.value+=4,f}function ae(i,A){return It.toHalfFloat(k(i,A))}function D(i){var A=(i&31744)>>10,f=i&1023;return(i>>15?-1:1)*(A?A===31?f?NaN:1/0:Math.pow(2,A-15)*(1+f/1024):6103515625e-14*(f/1024))}function Re(i,A){var f=i.getUint16(A.value,!0);return A.value+=2,f}function Qe(i,A){return D(Re(i,A))}function qn(i,A,f,m){for(var E=f.value,b=[];f.value<E+m-1;){var x=Ct(A,f),F=ot(i,f),H=p(i,f);f.value+=3;var _=ot(i,f),L=ot(i,f);b.push({name:x,pixelType:F,pLinear:H,xSampling:_,ySampling:L})}return f.value+=1,b}function $t(i,A){var f=k(i,A),m=k(i,A),E=k(i,A),b=k(i,A),x=k(i,A),F=k(i,A),H=k(i,A),_=k(i,A);return{redX:f,redY:m,greenX:E,greenY:b,blueX:x,blueY:F,whiteX:H,whiteY:_}}function ke(i,A){var f=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],m=p(i,A);return f[m]}function Ke(i,A){var f=Ie(i,A),m=Ie(i,A),E=Ie(i,A),b=Ie(i,A);return{xMin:f,yMin:m,xMax:E,yMax:b}}function ct(i,A){var f=["INCREASING_Y"],m=p(i,A);return f[m]}function lt(i,A){var f=k(i,A),m=k(i,A);return[f,m]}function At(i,A){var f=k(i,A),m=k(i,A),E=k(i,A);return[f,m,E]}function Et(i,A,f,m,E){if(m==="string"||m==="stringvector"||m==="iccProfile")return bn(A,f,E);if(m==="chlist")return qn(i,A,f,E);if(m==="chromaticities")return $t(i,f);if(m==="compression")return ke(i,f);if(m==="box2i")return Ke(i,f);if(m==="lineOrder")return ct(i,f);if(m==="float")return k(i,f);if(m==="v2f")return lt(i,f);if(m==="v3f")return At(i,f);if(m==="int")return ot(i,f);if(m==="rational")return qt(i,f);if(m==="timecode")return Mn(i,f);if(m==="preview")return f.value+=E,"skipped";f.value+=E}function Zr(i,A,f){const m={};if(i.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";m.version=i.getUint8(4);const E=i.getUint8(5);m.spec={singleTile:!!(E&2),longName:!!(E&4),deepFormat:!!(E&8),multiPart:!!(E&16)},f.value=8;for(var b=!0;b;){var x=Ct(A,f);if(x==0)b=!1;else{var F=Ct(A,f),H=Ie(i,f),_=Et(i,A,f,F,H);_===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${F}'.`):m[x]=_}}if(E&-5)throw console.error("EXRHeader:",m),"THREE.EXRLoader: provided file is currently unsupported.";return m}function Wr(i,A,f,m,E){const b={size:0,viewer:A,array:f,offset:m,width:i.dataWindow.xMax-i.dataWindow.xMin+1,height:i.dataWindow.yMax-i.dataWindow.yMin+1,channels:i.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:i.channels[0].pixelType,uncompress:null,getter:null,format:null,[Ht?"colorSpace":"encoding"]:null};switch(i.compression){case"NO_COMPRESSION":b.lines=1,b.uncompress=pt;break;case"RLE_COMPRESSION":b.lines=1,b.uncompress=it;break;case"ZIPS_COMPRESSION":b.lines=1,b.uncompress=xt;break;case"ZIP_COMPRESSION":b.lines=16,b.uncompress=xt;break;case"PIZ_COMPRESSION":b.lines=32,b.uncompress=En;break;case"PXR24_COMPRESSION":b.lines=16,b.uncompress=Vt;break;case"DWAA_COMPRESSION":b.lines=32,b.uncompress=mt;break;case"DWAB_COMPRESSION":b.lines=256,b.uncompress=mt;break;default:throw"EXRLoader.parse: "+i.compression+" is unsupported"}if(b.scanlineBlockSize=b.lines,b.type==1)switch(E){case Ve:b.getter=Qe,b.inputSize=2;break;case Pe:b.getter=Re,b.inputSize=2;break}else if(b.type==2)switch(E){case Ve:b.getter=k,b.inputSize=4;break;case Pe:b.getter=ae,b.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+b.type+" for "+i.compression+".";b.blockCount=(i.dataWindow.yMax+1)/b.scanlineBlockSize;for(var x=0;x<b.blockCount;x++)T(A,m);b.outputChannels=b.channels==3?4:b.channels;const F=b.width*b.height*b.outputChannels;switch(E){case Ve:b.byteArray=new Float32Array(F),b.channels<b.outputChannels&&b.byteArray.fill(1,0,F);break;case Pe:b.byteArray=new Uint16Array(F),b.channels<b.outputChannels&&b.byteArray.fill(15360,0,F);break;default:console.error("THREE.EXRLoader: unsupported type: ",E);break}return b.bytesPerLine=b.width*b.inputSize*b.channels,b.outputChannels==4?b.format=Ut:b.format=Os,Ht?b.colorSpace="srgb-linear":b.encoding=3e3,b}const en=new DataView(e),zr=new Uint8Array(e),Dt={value:0},Gt=Zr(en,e,Dt),se=Wr(Gt,en,zr,Dt,this.type),$n={value:0},Vr={R:0,G:1,B:2,A:3,Y:0};for(let i=0;i<se.height/se.scanlineBlockSize;i++){const A=Ie(en,Dt);se.size=Ie(en,Dt),se.lines=A+se.scanlineBlockSize>se.height?se.height-A:se.scanlineBlockSize;const m=se.size<se.lines*se.bytesPerLine?se.uncompress(se):pt(se);Dt.value+=se.size;for(let E=0;E<se.scanlineBlockSize;E++){const b=E+i*se.scanlineBlockSize;if(b>=se.height)break;for(let x=0;x<se.channels;x++){const F=Vr[Gt.channels[x].name];for(let H=0;H<se.width;H++){$n.value=(E*(se.channels*se.width)+x*se.width+H)*se.inputSize;const _=(se.height-1-b)*(se.width*se.outputChannels)+H*se.outputChannels+F;se.byteArray[_]=se.getter(m,$n)}}}}return{header:Gt,width:se.width,height:se.height,data:se.byteArray,format:se.format,[Ht?"colorSpace":"encoding"]:se[Ht?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,n,t,r){function s(a,c){Ht?a.colorSpace=c.colorSpace:a.encoding=c.encoding,a.minFilter=Ne,a.magFilter=Ne,a.generateMipmaps=!1,a.flipY=!1,n&&n(a,c)}return super.load(e,s,t,r)}}const Dn=new WeakMap;class ii extends Jn{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,n,t,r){const s=new st(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,a=>{const c={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(a,c).then(n).catch(r)},t,r)}decodeDracoFile(e,n,t,r){const s={attributeIDs:t||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!t};this.decodeGeometry(e,s).then(n)}decodeGeometry(e,n){for(const o in n.attributeTypes){const u=n.attributeTypes[o];u.BYTES_PER_ELEMENT!==void 0&&(n.attributeTypes[o]=u.name)}const t=JSON.stringify(n);if(Dn.has(e)){const o=Dn.get(e);if(o.key===t)return o.promise;if(e.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,a=e.byteLength,c=this._getWorker(s,a).then(o=>(r=o,new Promise((u,d)=>{r._callbacks[s]={resolve:u,reject:d},r.postMessage({type:"decode",id:s,taskConfig:n,buffer:e},[e])}))).then(o=>this._createGeometry(o.geometry));return c.catch(()=>!0).then(()=>{r&&s&&this._releaseTask(r,s)}),Dn.set(e,{key:t,promise:c}),c}_createGeometry(e){const n=new Fr;e.index&&n.setIndex(new Nt(e.index.array,1));for(let t=0;t<e.attributes.length;t++){const r=e.attributes[t],s=r.name,a=r.array,c=r.itemSize;n.setAttribute(s,new Nt(a,c))}return n}_loadLibrary(e,n){const t=new st(this.manager);return t.setPath(this.decoderPath),t.setResponseType(n),t.setWithCredentials(this.withCredentials),new Promise((r,s)=>{t.load(e,r,void 0,s)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e=typeof WebAssembly!="object"||this.decoderConfig.type==="js",n=[];return e?n.push(this._loadLibrary("draco_decoder.js","text")):(n.push(this._loadLibrary("draco_wasm_wrapper.js","text")),n.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(n).then(t=>{const r=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const s=oi.toString(),a=["/* draco decoder */",r,"","/* worker */",s.substring(s.indexOf("{")+1,s.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending}_getWorker(e,n){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const r=new Worker(this.workerSourceURL);r._callbacks={},r._taskCosts={},r._taskLoad=0,r.postMessage({type:"init",decoderConfig:this.decoderConfig}),r.onmessage=function(s){const a=s.data;switch(a.type){case"decode":r._callbacks[a.id].resolve(a);break;case"error":r._callbacks[a.id].reject(a);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+a.type+'"')}},this.workerPool.push(r)}else this.workerPool.sort(function(r,s){return r._taskLoad>s._taskLoad?-1:1});const t=this.workerPool[this.workerPool.length-1];return t._taskCosts[e]=n,t._taskLoad+=n,t})}_releaseTask(e,n){e._taskLoad-=e._taskCosts[n],delete e._callbacks[n],delete e._taskCosts[n]}debug(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function oi(){let l,e;onmessage=function(a){const c=a.data;switch(c.type){case"init":l=c.decoderConfig,e=new Promise(function(d){l.onModuleLoaded=function(h){d({draco:h})},DracoDecoderModule(l)});break;case"decode":const o=c.buffer,u=c.taskConfig;e.then(d=>{const h=d.draco,B=new h.Decoder,C=new h.DecoderBuffer;C.Init(new Int8Array(o),o.byteLength);try{const g=n(h,B,C,u),R=g.attributes.map(v=>v.array.buffer);g.index&&R.push(g.index.array.buffer),self.postMessage({type:"decode",id:c.id,geometry:g},R)}catch(g){console.error(g),self.postMessage({type:"error",id:c.id,error:g.message})}finally{h.destroy(C),h.destroy(B)}});break}};function n(a,c,o,u){const d=u.attributeIDs,h=u.attributeTypes;let B,C;const g=c.GetEncodedGeometryType(o);if(g===a.TRIANGULAR_MESH)B=new a.Mesh,C=c.DecodeBufferToMesh(o,B);else if(g===a.POINT_CLOUD)B=new a.PointCloud,C=c.DecodeBufferToPointCloud(o,B);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!C.ok()||B.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+C.error_msg());const R={index:null,attributes:[]};for(const v in d){const G=self[h[v]];let N,J;if(u.useUniqueIDs)J=d[v],N=c.GetAttributeByUniqueId(B,J);else{if(J=c.GetAttributeId(B,a[d[v]]),J===-1)continue;N=c.GetAttribute(B,J)}R.attributes.push(r(a,c,B,v,G,N))}return g===a.TRIANGULAR_MESH&&(R.index=t(a,c,B)),a.destroy(B),R}function t(a,c,o){const d=o.num_faces()*3,h=d*4,B=a._malloc(h);c.GetTrianglesUInt32Array(o,h,B);const C=new Uint32Array(a.HEAPF32.buffer,B,d).slice();return a._free(B),{array:C,itemSize:1}}function r(a,c,o,u,d,h){const B=h.num_components(),g=o.num_points()*B,R=g*d.BYTES_PER_ELEMENT,v=s(a,d),G=a._malloc(R);c.GetAttributeDataArrayForAllPoints(o,h,v,R,G);const N=new d(a.HEAPF32.buffer,G,g).slice();return a._free(G),{name:u,array:N,itemSize:B}}function s(a,c){switch(c){case Float32Array:return a.DT_FLOAT32;case Int8Array:return a.DT_INT8;case Int16Array:return a.DT_INT16;case Int32Array:return a.DT_INT32;case Uint8Array:return a.DT_UINT8;case Uint16Array:return a.DT_UINT16;case Uint32Array:return a.DT_UINT32}}}let sn;const Gn=()=>{if(sn)return sn;const l="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",e="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",n=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let r=l;WebAssembly.validate(n)&&(r=e);let s;const a=WebAssembly.instantiate(c(r),{}).then(h=>{s=h.instance,s.exports.__wasm_call_ctors()});function c(h){const B=new Uint8Array(h.length);for(let g=0;g<h.length;++g){const R=h.charCodeAt(g);B[g]=R>96?R-71:R>64?R-65:R>47?R+4:R>46?63:62}let C=0;for(let g=0;g<h.length;++g)B[C++]=B[g]<60?t[B[g]]:(B[g]-60)*64+B[++g];return B.buffer.slice(0,C)}function o(h,B,C,g,R,v){const G=s.exports.sbrk,N=C+3&-4,J=G(N*g),U=G(R.length),O=new Uint8Array(s.exports.memory.buffer);O.set(R,U);const S=h(J,C,g,U,R.length);if(S===0&&v&&v(J,N,g),B.set(O.subarray(J,J+C*g)),G(J-G(0)),S!==0)throw new Error(`Malformed buffer data: ${S}`)}const u={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},d={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return sn={ready:a,supported:!0,decodeVertexBuffer(h,B,C,g,R){o(s.exports.meshopt_decodeVertexBuffer,h,B,C,g,s.exports[u[R]])},decodeIndexBuffer(h,B,C,g){o(s.exports.meshopt_decodeIndexBuffer,h,B,C,g)},decodeIndexSequence(h,B,C,g){o(s.exports.meshopt_decodeIndexSequence,h,B,C,g)},decodeGltfBuffer(h,B,C,g,R,v){o(s.exports[d[R]],h,B,C,g,s.exports[u[v]])}},sn};let an=null,Ur="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Jr(l=!0,e=!0,n){return t=>{n&&n(t),l&&(an||(an=new ii),an.setDecoderPath(typeof l=="string"?l:Ur),t.setDRACOLoader(an)),e&&t.setMeshoptDecoder(typeof Gn=="function"?Gn():Gn)}}const Kt=(l,e,n,t)=>Bt(jn,l,Jr(e,n,t));Kt.preload=(l,e,n,t)=>Bt.preload(jn,l,Jr(e,n,t));Kt.clear=l=>Bt.clear(jn,l);Kt.setDecoderPath=l=>{Ur=l};const pr=Y.forwardRef(({makeDefault:l,camera:e,regress:n,domElement:t,enableDamping:r=!0,keyEvents:s=!1,onChange:a,onStart:c,onEnd:o,...u},d)=>{const h=_e(S=>S.invalidate),B=_e(S=>S.camera),C=_e(S=>S.gl),g=_e(S=>S.events),R=_e(S=>S.setEvents),v=_e(S=>S.set),G=_e(S=>S.get),N=_e(S=>S.performance),J=e||B,U=t||g.connected||C.domElement,O=Y.useMemo(()=>new Ma(J),[J]);return kn(()=>{O.enabled&&O.update()},-1),Y.useEffect(()=>(s&&O.connect(s===!0?U:s),O.connect(U),()=>void O.dispose()),[s,U,n,O,h]),Y.useEffect(()=>{const S=y=>{h(),n&&N.regress(),a&&a(y)},Z=y=>{c&&c(y)},I=y=>{o&&o(y)};return O.addEventListener("change",S),O.addEventListener("start",Z),O.addEventListener("end",I),()=>{O.removeEventListener("start",Z),O.removeEventListener("end",I),O.removeEventListener("change",S)}},[a,c,o,O,h,R]),Y.useEffect(()=>{if(l){const S=G().controls;return v({controls:O}),()=>v({controls:S})}},[l,O]),Y.createElement("primitive",Rr({ref:d,object:O,enableDamping:r},u))}),ci=3e3,li=3001,kr=(l,e,n)=>{let t;switch(l){case Sn:t=new Uint8ClampedArray(e*n*4);break;case Pe:t=new Uint16Array(e*n*4);break;case Ks:t=new Uint32Array(e*n*4);break;case ks:t=new Int8Array(e*n*4);break;case Js:t=new Int16Array(e*n*4);break;case Us:t=new Int32Array(e*n*4);break;case Ve:t=new Float32Array(e*n*4);break;default:throw new Error("Unsupported data type")}return t};let on;const Ai=(l,e,n,t)=>{if(on!==void 0)return on;const r=new Gr(1,1,t);e.setRenderTarget(r);const s=new hn(new Dr,new vt({color:16777215}));e.render(s,n),e.setRenderTarget(null);const a=kr(l,r.width,r.height);return e.readRenderTargetPixels(r,0,0,r.width,r.height,a),r.dispose(),s.geometry.dispose(),s.material.dispose(),on=a[0]!==0,on};class Qn{constructor(e){ge(this,"_renderer");ge(this,"_rendererIsDisposable",!1);ge(this,"_material");ge(this,"_scene");ge(this,"_camera");ge(this,"_quad");ge(this,"_renderTarget");ge(this,"_width");ge(this,"_height");ge(this,"_type");ge(this,"_colorSpace");ge(this,"_supportsReadPixels",!0);ge(this,"render",()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(e){throw this._renderer.setRenderTarget(null),e}this._renderer.setRenderTarget(null)});var t,r,s,a,c,o,u,d,h,B,C,g,R,v,G,N;this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const n={format:Ut,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((t=e.renderTargetOptions)==null?void 0:t.anisotropy)!==void 0?(r=e.renderTargetOptions)==null?void 0:r.anisotropy:1,generateMipmaps:((s=e.renderTargetOptions)==null?void 0:s.generateMipmaps)!==void 0?(a=e.renderTargetOptions)==null?void 0:a.generateMipmaps:!1,magFilter:((c=e.renderTargetOptions)==null?void 0:c.magFilter)!==void 0?(o=e.renderTargetOptions)==null?void 0:o.magFilter:Ne,minFilter:((u=e.renderTargetOptions)==null?void 0:u.minFilter)!==void 0?(d=e.renderTargetOptions)==null?void 0:d.minFilter:Ne,samples:((h=e.renderTargetOptions)==null?void 0:h.samples)!==void 0?(B=e.renderTargetOptions)==null?void 0:B.samples:void 0,wrapS:((C=e.renderTargetOptions)==null?void 0:C.wrapS)!==void 0?(g=e.renderTargetOptions)==null?void 0:g.wrapS:ze,wrapT:((R=e.renderTargetOptions)==null?void 0:R.wrapT)!==void 0?(v=e.renderTargetOptions)==null?void 0:v.wrapT:ze};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=Qn.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new xr,this._camera=new Lt,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!Ai(this._type,this._renderer,this._camera,n)){let J;switch(this._type){case Pe:J=this._renderer.extensions.has("EXT_color_buffer_float")?Ve:void 0;break}J!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${Ve}`),this._type=J):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new hn(new Dr,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Gr(this.width,this.height,n),this._renderTarget.texture.mapping=((G=e.renderTargetOptions)==null?void 0:G.mapping)!==void 0?(N=e.renderTargetOptions)==null?void 0:N.mapping:un}static instantiateRenderer(){const e=new Ns;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=kr(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const n=new Ps(this.toArray(),this.width,this.height,Ut,this._type,(e==null?void 0:e.mapping)||un,(e==null?void 0:e.wrapS)||ze,(e==null?void 0:e.wrapT)||ze,(e==null?void 0:e.magFilter)||Ne,(e==null?void 0:e.minFilter)||Ne,(e==null?void 0:e.anisotropy)||1,Hn);return n.generateMipmaps=(e==null?void 0:e.generateMipmaps)!==void 0?e==null?void 0:e.generateMipmaps:!1,n}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Un&&Object.values(this.material.uniforms).forEach(n=>{n.value instanceof nt&&n.value.dispose()}),Object.values(this.material).forEach(n=>{n instanceof nt&&n.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class Kr extends Error{}class jr extends Error{}const St=(l,e,n)=>{const t=new RegExp(`${e}="([^"]*)"`,"i").exec(l);if(t)return t[1];const r=new RegExp(`<${e}[^>]*>([\\s\\S]*?)</${e}>`,"i").exec(l);if(r){const s=r[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return s&&s.length===3?s.map(a=>a.replace(/<\/?rdf:li>/g,"")):r[1].trim()}if(n!==void 0)return n;throw new Error(`Can't find ${e} in gainmap metadata`)},ui=l=>{let e;typeof TextDecoder<"u"?e=new TextDecoder().decode(l):e=l.toString();let n=e.indexOf("<x:xmpmeta");for(;n!==-1;){const t=e.indexOf("x:xmpmeta>",n),r=e.slice(n,t+10);try{const s=St(r,"hdrgm:GainMapMin","0"),a=St(r,"hdrgm:GainMapMax"),c=St(r,"hdrgm:Gamma","1"),o=St(r,"hdrgm:OffsetSDR","0.015625"),u=St(r,"hdrgm:OffsetHDR","0.015625"),d=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(r),h=d?d[1]:"0",B=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(r);if(!B)throw new Error("Incomplete gainmap metadata");const C=B[1];return{gainMapMin:Array.isArray(s)?s.map(g=>parseFloat(g)):[parseFloat(s),parseFloat(s),parseFloat(s)],gainMapMax:Array.isArray(a)?a.map(g=>parseFloat(g)):[parseFloat(a),parseFloat(a),parseFloat(a)],gamma:Array.isArray(c)?c.map(g=>parseFloat(g)):[parseFloat(c),parseFloat(c),parseFloat(c)],offsetSdr:Array.isArray(o)?o.map(g=>parseFloat(g)):[parseFloat(o),parseFloat(o),parseFloat(o)],offsetHdr:Array.isArray(u)?u.map(g=>parseFloat(g)):[parseFloat(u),parseFloat(u),parseFloat(u)],hdrCapacityMin:parseFloat(h),hdrCapacityMax:parseFloat(C)}}catch{}n=e.indexOf("<x:xmpmeta",t)}};class di{constructor(e){ge(this,"options");this.options={debug:e&&e.debug!==void 0?e.debug:!1,extractFII:e&&e.extractFII!==void 0?e.extractFII:!0,extractNonFII:e&&e.extractNonFII!==void 0?e.extractNonFII:!0}}extract(e){return new Promise((n,t)=>{const r=this.options.debug,s=new DataView(e.buffer);if(s.getUint16(0)!==65496){t(new Error("Not a valid jpeg"));return}const a=s.byteLength;let c=2,o=0,u;for(;c<a;){if(++o>250){t(new Error(`Found no marker after ${o} loops `));return}if(s.getUint8(c)!==255){t(new Error(`Not a valid marker at offset 0x${c.toString(16)}, found: 0x${s.getUint8(c).toString(16)}`));return}if(u=s.getUint8(c+1),r&&console.log(`Marker: ${u.toString(16)}`),u===226){r&&console.log("Found APP2 marker (0xffe2)");const d=c+4;if(s.getUint32(d)===1297106432){const h=d+4;let B;if(s.getUint16(h)===18761)B=!1;else if(s.getUint16(h)===19789)B=!0;else{t(new Error("No valid endianness marker found in TIFF header"));return}if(s.getUint16(h+2,!B)!==42){t(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const C=s.getUint32(h+4,!B);if(C<8){t(new Error("Not valid TIFF data! (First offset less than 8)"));return}const g=h+C,R=s.getUint16(g,!B),v=g+2;let G=0;for(let O=v;O<v+12*R;O+=12)s.getUint16(O,!B)===45057&&(G=s.getUint32(O+8,!B));const J=g+2+R*12+4,U=[];for(let O=J;O<J+G*16;O+=16){const S={MPType:s.getUint32(O,!B),size:s.getUint32(O+4,!B),dataOffset:s.getUint32(O+8,!B),dependantImages:s.getUint32(O+12,!B),start:-1,end:-1,isFII:!1};S.dataOffset?(S.start=h+S.dataOffset,S.isFII=!1):(S.start=0,S.isFII=!0),S.end=S.start+S.size,U.push(S)}if(this.options.extractNonFII&&U.length){const O=new Blob([s]),S=[];for(const Z of U){if(Z.isFII&&!this.options.extractFII)continue;const I=O.slice(Z.start,Z.end+1,"image/jpeg");S.push(I)}n(S)}}}c+=2+s.getUint16(c+2)}})}}const hi=async l=>{const e=ui(l);if(!e)throw new jr("Gain map XMP metadata not found");const t=await new di({extractFII:!0,extractNonFII:!0}).extract(l);if(t.length!==2)throw new Kr("Gain map recovery image not found");return{sdr:new Uint8Array(await t[0].arrayBuffer()),gainMap:new Uint8Array(await t[1].arrayBuffer()),metadata:e}},mr=l=>new Promise((e,n)=>{const t=document.createElement("img");t.onload=()=>{e(t)},t.onerror=r=>{n(r)},t.src=URL.createObjectURL(l)});class fi extends Jn{constructor(n,t){super(t);ge(this,"_renderer");ge(this,"_renderTargetOptions");ge(this,"_internalLoadingManager");ge(this,"_config");this._config=n,n.renderer&&(this._renderer=n.renderer),this._internalLoadingManager=new js}setRenderer(n){return this._renderer=n,this}setRenderTargetOptions(n){return this._renderTargetOptions=n,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: A Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const n=this._config.createMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new nt,sdr:new nt});return this._config.createQuadRenderer({width:16,height:16,type:Pe,colorSpace:Hn,material:n,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async processImages(n,t,r){const s=t?new Blob([t],{type:"image/jpeg"}):void 0,a=new Blob([n],{type:"image/jpeg"});let c,o,u=!1;if(typeof createImageBitmap>"u"){const d=await Promise.all([s?mr(s):Promise.resolve(void 0),mr(a)]);o=d[0],c=d[1],u=r==="flipY"}else{const d=await Promise.all([s?createImageBitmap(s,{imageOrientation:r||"flipY"}):Promise.resolve(void 0),createImageBitmap(a,{imageOrientation:r||"flipY"})]);o=d[0],c=d[1]}return{sdrImage:c,gainMapImage:o,needsFlip:u}}createTextures(n,t,r){const s=new nt(t||new ImageData(2,2),un,ze,ze,Ne,ar,Ut,Sn,1,Hn);s.flipY=r,s.needsUpdate=!0;const a=new nt(n,un,ze,ze,Ne,ar,Ut,Sn,1,Qs);return a.flipY=r,a.needsUpdate=!0,{gainMap:s,sdr:a}}updateQuadRenderer(n,t,r,s,a){n.width=t.width,n.height=t.height,n.material.gainMap=r,n.material.sdr=s,n.material.gainMapMin=a.gainMapMin,n.material.gainMapMax=a.gainMapMax,n.material.offsetHdr=a.offsetHdr,n.material.offsetSdr=a.offsetSdr,n.material.gamma=a.gamma,n.material.hdrCapacityMin=a.hdrCapacityMin,n.material.hdrCapacityMax=a.hdrCapacityMax,n.material.maxDisplayBoost=Math.pow(2,a.hdrCapacityMax),n.material.needsUpdate=!0}}const Bi=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,pi=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class mi extends Un{constructor({gamma:n,offsetHdr:t,offsetSdr:r,gainMapMin:s,gainMapMax:a,maxDisplayBoost:c,hdrCapacityMin:o,hdrCapacityMax:u,sdr:d,gainMap:h}){super({name:"GainMapDecoderMaterial",vertexShader:Bi,fragmentShader:pi,uniforms:{sdr:{value:d},gainMap:{value:h},gamma:{value:new Ee(1/n[0],1/n[1],1/n[2])},offsetHdr:{value:new Ee().fromArray(t)},offsetSdr:{value:new Ee().fromArray(r)},gainMapMin:{value:new Ee().fromArray(s)},gainMapMax:{value:new Ee().fromArray(a)},weightFactor:{value:(Math.log2(c)-o)/(u-o)}},blending:Xs,depthTest:!1,depthWrite:!1});ge(this,"_maxDisplayBoost");ge(this,"_hdrCapacityMin");ge(this,"_hdrCapacityMax");this._maxDisplayBoost=c,this._hdrCapacityMin=o,this._hdrCapacityMax=u,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(n){this.uniforms.sdr.value=n}get gainMap(){return this.uniforms.gainMap.value}set gainMap(n){this.uniforms.gainMap.value=n}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(n){this.uniforms.offsetHdr.value.fromArray(n)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(n){this.uniforms.offsetSdr.value.fromArray(n)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(n){this.uniforms.gainMapMin.value.fromArray(n)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(n){this.uniforms.gainMapMax.value.fromArray(n)}get gamma(){const n=this.uniforms.gamma.value;return[1/n.x,1/n.y,1/n.z]}set gamma(n){const t=this.uniforms.gamma.value;t.x=1/n[0],t.y=1/n[1],t.z=1/n[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(n){this._hdrCapacityMin=n,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(n){this._hdrCapacityMax=n,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(n){this._maxDisplayBoost=Math.max(1,Math.min(65504,n)),this.calculateWeight()}calculateWeight(){const n=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,n))}}class Qr extends fi{constructor(e,n){super({renderer:e,createMaterial:t=>new mi(t),createQuadRenderer:t=>new Qn(t)},n)}async render(e,n,t,r){const{sdrImage:s,gainMapImage:a,needsFlip:c}=await this.processImages(t,r,"flipY"),{gainMap:o,sdr:u}=this.createTextures(s,a,c);this.updateQuadRenderer(e,s,o,u,n),e.render()}}class Ci extends Qr{load([e,n,t],r,s,a){const c=this.prepareQuadRenderer();let o,u,d;const h=async()=>{if(o&&u&&d){try{await this.render(c,d,o,u)}catch(y){this.manager.itemError(e),this.manager.itemError(n),this.manager.itemError(t),typeof a=="function"&&a(y),c.disposeOnDemandRenderer();return}typeof r=="function"&&r(c),this.manager.itemEnd(e),this.manager.itemEnd(n),this.manager.itemEnd(t),c.disposeOnDemandRenderer()}};let B=!0,C=0,g=0,R=!0,v=0,G=0,N=!0,J=0,U=0;const O=()=>{if(typeof s=="function"){const y=C+v+J,P=g+G+U,te=B&&R&&N;s(new ProgressEvent("progress",{lengthComputable:te,loaded:P,total:y}))}};this.manager.itemStart(e),this.manager.itemStart(n),this.manager.itemStart(t);const S=new st(this._internalLoadingManager);S.setResponseType("arraybuffer"),S.setRequestHeader(this.requestHeader),S.setPath(this.path),S.setWithCredentials(this.withCredentials),S.load(e,async y=>{if(typeof y=="string")throw new Error("Invalid sdr buffer");o=y,await h()},y=>{B=y.lengthComputable,g=y.loaded,C=y.total,O()},y=>{this.manager.itemError(e),typeof a=="function"&&a(y)});const Z=new st(this._internalLoadingManager);Z.setResponseType("arraybuffer"),Z.setRequestHeader(this.requestHeader),Z.setPath(this.path),Z.setWithCredentials(this.withCredentials),Z.load(n,async y=>{if(typeof y=="string")throw new Error("Invalid gainmap buffer");u=y,await h()},y=>{R=y.lengthComputable,G=y.loaded,v=y.total,O()},y=>{this.manager.itemError(n),typeof a=="function"&&a(y)});const I=new st(this._internalLoadingManager);return I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(t,async y=>{if(typeof y!="string")throw new Error("Invalid metadata string");d=JSON.parse(y),await h()},y=>{N=y.lengthComputable,U=y.loaded,J=y.total,O()},y=>{this.manager.itemError(t),typeof a=="function"&&a(y)}),c}}class gi extends Qr{load(e,n,t,r){const s=this.prepareQuadRenderer(),a=new st(this._internalLoadingManager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(this.withCredentials),this.manager.itemStart(e),a.load(e,async c=>{if(typeof c=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const o=new Uint8Array(c);let u,d,h;try{const B=await hi(o);u=B.sdr,d=B.gainMap,h=B.metadata}catch(B){if(B instanceof jr||B instanceof Kr)console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),h={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},u=o;else throw B}try{await this.render(s,h,u.buffer,d==null?void 0:d.buffer)}catch(B){this.manager.itemError(e),typeof r=="function"&&r(B),s.disposeOnDemandRenderer();return}typeof n=="function"&&n(s),this.manager.itemEnd(e),s.disposeOnDemandRenderer()},t,c=>{this.manager.itemError(e),typeof r=="function"&&r(c)}),s}}const Jt={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},Xr="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",yt=l=>Array.isArray(l),Xn=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function fn({files:l=Xn,path:e="",preset:n=void 0,encoding:t=void 0,extensions:r}={}){let s=null,a=!1;n&&(Yn(n),l=Jt[n],e=Xr),a=yt(l);const{extension:c,isCubemap:o}=Zn(l);if(s=Wn(c),!s)throw new Error("useEnvironment: Unrecognized file extension: "+l);const u=_e(C=>C.gl);Y.useLayoutEffect(()=>{if(c!=="webp"&&c!=="jpg"&&c!=="jpeg")return;function C(){Bt.clear(s,a?[l]:l)}u.domElement.addEventListener("webglcontextlost",C,{once:!0})},[l,u.domElement]);const d=Bt(s,a?[l]:l,C=>{(c==="webp"||c==="jpg"||c==="jpeg")&&C.setRenderer(u),C.setPath==null||C.setPath(e),r&&r(C)});let h=a?d[0]:d;if(c==="jpg"||c==="jpeg"||c==="webp"){var B;h=(B=h.renderTarget)==null?void 0:B.texture}return h.mapping=o?Ys:Zs,"colorSpace"in h?h.colorSpace=t??o?"srgb":"srgb-linear":h.encoding=t??o?li:ci,h}const Ei={files:Xn,path:"",preset:void 0,extensions:void 0};fn.preload=l=>{const e={...Ei,...l};let{files:n,path:t=""}=e;const{preset:r,extensions:s}=e;r&&(Yn(r),n=Jt[r],t=Xr);const{extension:a}=Zn(n);if(a==="webp"||a==="jpg"||a==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const c=Wn(a);if(!c)throw new Error("useEnvironment: Unrecognized file extension: "+n);Bt.preload(c,yt(n)?[n]:n,o=>{o.setPath==null||o.setPath(t),s&&s(o)})};const bi={files:Xn,preset:void 0};fn.clear=l=>{const e={...bi,...l};let{files:n}=e;const{preset:t}=e;t&&(Yn(t),n=Jt[t]);const{extension:r}=Zn(n),s=Wn(r);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);Bt.clear(s,yt(n)?[n]:n)};function Yn(l){if(!(l in Jt))throw new Error("Preset must be one of: "+Object.keys(Jt).join(", "))}function Zn(l){var e;const n=yt(l)&&l.length===6,t=yt(l)&&l.length===3&&l.some(a=>a.endsWith("json")),r=yt(l)?l[0]:l;return{extension:n?"cube":t?"webp":r.startsWith("data:application/exr")?"exr":r.startsWith("data:application/hdr")?"hdr":r.startsWith("data:image/jpeg")?"jpg":(e=r.split(".").pop())==null||(e=e.split("?"))==null||(e=e.shift())==null?void 0:e.toLowerCase(),isCubemap:n,isGainmap:t}}function Wn(l){return l==="cube"?Ws:l==="hdr"?si:l==="exr"?ai:l==="jpg"||l==="jpeg"?gi:l==="webp"?Ci:null}const Mi=l=>l.current&&l.current.isScene,vi=l=>Mi(l)?l.current:l;function zn(l,e,n,t,r={}){var s,a,c,o;r={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...r};const u=vi(e||n),d=u.background,h=u.environment,B={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:(s=(a=u.backgroundRotation)==null||a.clone==null?void 0:a.clone())!==null&&s!==void 0?s:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:(c=(o=u.environmentRotation)==null||o.clone==null?void 0:o.clone())!==null&&c!==void 0?c:[0,0,0]};return l!=="only"&&(u.environment=t),l&&(u.background=t),ir(u,r),()=>{l!=="only"&&(u.environment=h),l&&(u.background=d),ir(u,B)}}function Vn({scene:l,background:e=!1,map:n,...t}){const r=_e(s=>s.scene);return Y.useLayoutEffect(()=>{if(n)return zn(e,l,r,n,t)}),null}function Yr({background:l=!1,scene:e,blur:n,backgroundBlurriness:t,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:a,environmentRotation:c,...o}){const u=fn(o),d=_e(h=>h.scene);return Y.useLayoutEffect(()=>zn(l,e,d,u,{backgroundBlurriness:n??t,backgroundIntensity:r,backgroundRotation:s,environmentIntensity:a,environmentRotation:c})),Y.useEffect(()=>()=>{u.dispose()},[u]),null}function Ii({children:l,near:e=.1,far:n=1e3,resolution:t=256,frames:r=1,map:s,background:a=!1,blur:c,backgroundBlurriness:o,backgroundIntensity:u,backgroundRotation:d,environmentIntensity:h,environmentRotation:B,scene:C,files:g,path:R,preset:v=void 0,extensions:G}){const N=_e(I=>I.gl),J=_e(I=>I.scene),U=Y.useRef(null),[O]=Y.useState(()=>new xr),S=Y.useMemo(()=>{const I=new Vs(t);return I.texture.type=Pe,I},[t]);Y.useEffect(()=>()=>{S.dispose()},[S]),Y.useLayoutEffect(()=>{if(r===1){const I=N.autoClear;N.autoClear=!0,U.current.update(N,O),N.autoClear=I}return zn(a,C,J,S.texture,{backgroundBlurriness:c??o,backgroundIntensity:u,backgroundRotation:d,environmentIntensity:h,environmentRotation:B})},[l,O,S.texture,C,J,a,r,N]);let Z=1;return kn(()=>{if(r===1/0||Z<r){const I=N.autoClear;N.autoClear=!0,U.current.update(N,O),N.autoClear=I,Z++}}),Y.createElement(Y.Fragment,null,qs(Y.createElement(Y.Fragment,null,l,Y.createElement("cubeCamera",{ref:U,args:[e,n,S]}),g||v?Y.createElement(Yr,{background:!0,files:g,preset:v,path:R,extensions:G}):s?Y.createElement(Vn,{background:!0,map:s,extensions:G}):null),O))}function Fi(l){var e,n,t,r;const s=fn(l),a=l.map||s;Y.useMemo(()=>zs({GroundProjectedEnvImpl:fa}),[]),Y.useEffect(()=>()=>{s.dispose()},[s]);const c=Y.useMemo(()=>[a],[a]),o=(e=l.ground)==null?void 0:e.height,u=(n=l.ground)==null?void 0:n.radius,d=(t=(r=l.ground)==null?void 0:r.scale)!==null&&t!==void 0?t:1e3;return Y.createElement(Y.Fragment,null,Y.createElement(Vn,Rr({},l,{map:a})),Y.createElement("groundProjectedEnvImpl",{args:c,scale:d,height:o,radius:u}))}function Cr(l){return l.ground?Y.createElement(Fi,l):l.map?Y.createElement(Vn,l):l.children?Y.createElement(Ii,l):Y.createElement(Yr,l)}const gr=l=>{const{nodes:e,materials:n}=Kt("/avatar.glb"),t=Y.useRef();return kn((r,s)=>{t.current&&(t.current.rotation.y+=s*.2)}),M.jsx("group",{...l,dispose:null,ref:t,children:M.jsx("primitive",{object:e.Scene})})};Kt.preload("/avatar.glb");const yi=({text:l,as:e="div",typingSpeed:n=50,initialDelay:t=0,pauseDuration:r=2e3,deletingSpeed:s=30,loop:a=!0,className:c="",showCursor:o=!0,hideCursorWhileTyping:u=!1,cursorCharacter:d="|",cursorClassName:h="",cursorBlinkDuration:B=.5,textColors:C=[],variableSpeed:g,onSentenceComplete:R,startOnVisible:v=!1,reverseMode:G=!1,...N})=>{const[J,U]=Y.useState(""),[O,S]=Y.useState(0),[Z,I]=Y.useState(!1),[y,P]=Y.useState(0),[te,ne]=Y.useState(!v),W=Y.useRef(null),j=Y.useRef(null),re=Y.useMemo(()=>Array.isArray(l)?l:[l],[l]),z=Y.useCallback(()=>{if(!g)return n;const{min:Ae,max:$}=g;return Math.random()*($-Ae)+Ae},[g,n]),Fe=()=>{if(C.length!==0)return C[y%C.length]};Y.useEffect(()=>{if(!v||!j.current)return;const Ae=new IntersectionObserver($=>{$.forEach(ve=>{ve.isIntersecting&&ne(!0)})},{threshold:.1});return Ae.observe(j.current),()=>Ae.disconnect()},[v]),Y.useEffect(()=>{o&&W.current&&(er.set(W.current,{opacity:1}),er.to(W.current,{opacity:0,duration:B,repeat:-1,yoyo:!0,ease:"power2.inOut"}))},[o,B]),Y.useEffect(()=>{if(!te)return;let Ae;const $=re[y],ve=G?$.split("").reverse().join(""):$,ie=()=>{if(Z)if(J===""){if(I(!1),y===re.length-1&&!a)return;R&&R(re[y],y),P(ce=>(ce+1)%re.length),S(0),Ae=setTimeout(()=>{},r)}else Ae=setTimeout(()=>{U(ce=>ce.slice(0,-1))},s);else if(O<ve.length)Ae=setTimeout(()=>{U(ce=>ce+ve[O]),S(ce=>ce+1)},g?z():n);else if(re.length>=1){if(!a&&y===re.length-1)return;Ae=setTimeout(()=>{I(!0)},r)}};return O===0&&!Z&&J===""?Ae=setTimeout(ie,t):ie(),()=>clearTimeout(Ae)},[O,J,Z,n,s,r,re,y,a,t,te,G,g,R]);const ye=u&&(O<re[y].length||Z);return Y.createElement(e,{ref:j,className:`text-type ${c}`,...N},M.jsx("span",{className:"text-type__content",style:{color:Fe()||"inherit"},children:J}),o&&M.jsx("span",{ref:W,className:`text-type__cursor ${h} ${ye?"text-type__cursor--hidden":""}`,children:d}))},Gi=()=>{const[l,e]=Y.useState(null),[n,t]=Y.useState({mobile:1.1,desktop:.7});return Y.useEffect(()=>{const r=()=>{const s=window.innerWidth;let a=1.1,c=.7;s>=500&&s<768&&(a=.6),s>=768&&s<1280&&(c=.4),t({mobile:a,desktop:c})};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),M.jsxs("div",{className:"h-screen bg-cyber-black text-cyber-text flex flex-col md:flex-row overflow-hidden pt-20",children:[M.jsxs("div",{className:"md:hidden w-full h-[35vh] relative border-b border-cyber-border/30 flex items-center justify-center bg-cyber-black/50 z-0 shrink-0",children:[M.jsx("div",{className:"absolute inset-0 bg-cyber-grid-bg opacity-20 pointer-events-none"}),M.jsxs(or,{camera:{position:[0,0,5],fov:45},children:[M.jsx("ambientLight",{intensity:.6}),M.jsx("spotLight",{position:[5,5,5],angle:.25,penumbra:1,intensity:1.5}),M.jsx("pointLight",{position:[-5,-5,-5],intensity:.5}),M.jsx(gr,{position:[0,.2,0],scale:n.mobile}),M.jsx(pr,{enableZoom:!1,enablePan:!1,minPolarAngle:Math.PI/2.2,maxPolarAngle:Math.PI/1.8}),M.jsx(Cr,{preset:"city"})]})]}),M.jsxs("div",{className:"hidden md:flex md:w-1/2 h-full relative border-r border-cyber-border/30 items-center justify-center bg-cyber-black/50 z-0",children:[M.jsx("div",{className:"absolute inset-0 bg-cyber-grid-bg opacity-20 pointer-events-none"}),M.jsxs(or,{camera:{position:[0,0,4],fov:35},children:[M.jsx("ambientLight",{intensity:.6}),M.jsx("spotLight",{position:[5,5,5],angle:.25,penumbra:1,intensity:1.5}),M.jsx("pointLight",{position:[-5,-5,-5],intensity:.5}),M.jsx(gr,{position:[0,0,0],scale:n.desktop}),M.jsx(pr,{enableZoom:!1,enablePan:!1,minPolarAngle:Math.PI/2.2,maxPolarAngle:Math.PI/1.8}),M.jsx(Cr,{preset:"city"})]}),M.jsxs("div",{className:"absolute bottom-8 left-8 font-mono text-xs text-cyber-text/50 tracking-widest",children:["[INTERACTIVE_MODEL_VIEWER]",M.jsx("br",{}),"DRAG_TO_ROTATE"]})]}),M.jsxs("div",{className:"w-full md:w-1/2 h-[65vh] md:h-full p-4 md:p-8 lg:p-12 flex flex-col justify-start md:justify-center relative overflow-y-auto z-10 bg-cyber-black md:bg-transparent backdrop-blur-none",children:[M.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-cyber-border to-transparent opacity-50"}),M.jsxs(es.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8},className:"h-full flex flex-col justify-start md:justify-center pt-4 md:pt-0 items-center md:items-start",children:[M.jsx("div",{className:"font-mono text-[10px] md:text-xs text-red-500 mb-2 md:mb-4 tracking-widest text-center md:text-left",children:"// IDENTITY_VERIFIED"}),M.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-display font-bold text-cyber-white mb-4 md:mb-6 tracking-tighter text-center md:text-left",children:M.jsx($s,{text:"OKUHLE MADONDO",animateOn:"view",speed:100,sequential:!0,style:{whiteSpace:"normal",wordBreak:"break-word"}})}),M.jsxs("div",{className:"space-y-6 md:space-y-8 pb-20 md:pb-0",children:[M.jsxs("div",{className:"grid grid-cols-2 gap-4 md:gap-6 border-t border-b border-cyber-border/30 py-4 md:py-6",children:[M.jsxs("div",{className:"relative group cursor-help",onClick:()=>e(l==="age"?null:"age"),children:[M.jsx("div",{className:"font-mono text-[10px] md:text-xs text-red-500 mb-1",children:"AGE"}),M.jsx("div",{className:"text-base md:text-xl font-mono text-cyber-white border-b border-dashed border-cyber-text/30 inline-block hover:text-red-500 hover:border-red-500 transition-colors",children:(()=>{const r=new Date("2003-03-14"),s=new Date;let a=s.getFullYear()-r.getFullYear();const c=s.getMonth()-r.getMonth();return(c<0||c===0&&s.getDate()<r.getDate())&&a--,a})()}),l==="age"&&tn.createPortal(M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:`
                                            fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[85vw] z-[9999]
                                            md:absolute md:top-auto md:bottom-full md:left-0 md:translate-x-0 md:translate-y-0 md:w-72 md:z-50
                                            bg-cyber-black/95 border border-cyber-border p-5 shadow-[0_0_30px_-10px_rgba(239,68,68,0.2)]
                                            backdrop-blur-sm border-l-4 border-l-red-500
                                            transition-all duration-300
                                            opacity-100 visible scale-100
                                        `,children:[M.jsx("div",{className:"font-mono text-[10px] text-red-500/70 mb-3 tracking-widest uppercase border-b border-cyber-border/30 pb-2",children:"// CLARIFICATION"}),M.jsxs("div",{className:"font-mono text-xs text-cyber-text leading-relaxed",children:["like...the number after ",(()=>{const r=new Date("2003-03-14"),s=new Date;let a=s.getFullYear()-r.getFullYear();const c=s.getMonth()-r.getMonth();return(c<0||c===0&&s.getDate()<r.getDate())&&a--,a-1})()]})]}),M.jsx("div",{className:"fixed inset-0 bg-black/60 z-[9990]",onClick:r=>{r.stopPropagation(),e(null)}})]}),document.body)]}),M.jsxs("div",{className:"relative group cursor-help",onClick:()=>e(l==="class"?null:"class"),children:[M.jsx("div",{className:"font-mono text-[10px] md:text-xs text-red-500 mb-1",children:"CLASS"}),M.jsx("div",{className:"text-base md:text-lg lg:text-xl font-mono text-cyber-white border-b border-dashed border-cyber-text/30 inline-block hover:text-red-500 hover:border-red-500 transition-colors",children:"Computational Scientist"}),l==="class"&&tn.createPortal(M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:`
                                            fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[85vw] z-[9999]
                                            md:absolute md:top-auto md:bottom-full md:right-0 md:left-auto md:translate-x-0 md:translate-y-0 md:w-72 md:z-50
                                            bg-cyber-black/95 border border-cyber-border p-5 shadow-[0_0_30px_-10px_rgba(239,68,68,0.2)]
                                            backdrop-blur-sm border-l-4 border-l-red-500
                                            transition-all duration-300
                                            opacity-100 visible scale-100
                                        `,children:[M.jsx("div",{className:"font-mono text-[10px] text-red-500/70 mb-3 tracking-widest uppercase border-b border-cyber-border/30 pb-2",children:"// DEFINITION"}),M.jsx("div",{className:"font-mono text-xs text-cyber-text leading-relaxed",children:"A scientist who uses advanced computing capabilities to understand and solve complex physical problems."})]}),M.jsx("div",{className:"fixed inset-0 bg-black/60 z-[9990]",onClick:r=>{r.stopPropagation(),e(null)}})]}),document.body)]}),M.jsxs("div",{className:"relative group cursor-help",onClick:()=>e(l==="species"?null:"species"),children:[M.jsx("div",{className:"font-mono text-[10px] md:text-xs text-red-500 mb-1",children:"SPECIES"}),M.jsx("div",{className:"text-base md:text-xl font-mono text-cyber-white border-b border-dashed border-cyber-text/30 inline-block hover:text-red-500 hover:border-red-500 transition-colors",children:"Homo Sapiens"}),l==="species"&&tn.createPortal(M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:`
                                            fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[85vw] z-[9999]
                                            md:absolute md:top-auto md:bottom-full md:left-0 md:translate-x-0 md:translate-y-0 md:w-72 md:z-50
                                            bg-cyber-black/95 border border-cyber-border p-5 shadow-[0_0_30px_-10px_rgba(239,68,68,0.2)]
                                            backdrop-blur-sm border-l-4 border-l-red-500
                                            transition-all duration-300
                                            opacity-100 visible scale-100
                                        `,children:[M.jsx("div",{className:"font-mono text-[10px] text-red-500/70 mb-3 tracking-widest uppercase border-b border-cyber-border/30 pb-2",children:"// TAXONOMY_DATA"}),M.jsxs("div",{className:"font-mono text-xs text-cyber-text space-y-2",children:[M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-cyber-text/50",children:"Domain:"})," ",M.jsx("span",{className:"text-cyber-white",children:"Eukaryote"})]}),M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-cyber-text/50",children:"Kingdom:"})," ",M.jsx("span",{className:"text-cyber-white",children:"Animalia"})]}),M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-cyber-text/50",children:"Phylum:"})," ",M.jsx("span",{className:"text-cyber-white",children:"Chordata"})]}),M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-cyber-text/50",children:"Class:"})," ",M.jsx("span",{className:"text-cyber-white",children:"Mammalia"})]}),M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-cyber-text/50",children:"Order:"})," ",M.jsx("span",{className:"text-cyber-white",children:"Primate"})]}),M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-cyber-text/50",children:"Family:"})," ",M.jsx("span",{className:"text-cyber-white",children:"Hominid"})]}),M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-cyber-text/50",children:"Genus:"})," ",M.jsx("span",{className:"text-cyber-white",children:"Homo"})]})]})]}),M.jsx("div",{className:"fixed inset-0 bg-black/60 z-[9990]",onClick:r=>{r.stopPropagation(),e(null)}})]}),document.body)]}),M.jsxs("div",{className:"relative group cursor-help",onClick:()=>e(l==="origin"?null:"origin"),children:[M.jsx("div",{className:"font-mono text-[10px] md:text-xs text-red-500 mb-1",children:"ORIGIN"}),M.jsx("div",{className:"text-base md:text-xl font-mono text-cyber-white border-b border-dashed border-cyber-text/30 inline-block hover:text-red-500 hover:border-red-500 transition-colors",children:"South Africa"}),l==="origin"&&tn.createPortal(M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:`
                                            fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[85vw] z-[9999]
                                            md:absolute md:top-auto md:bottom-full md:right-0 md:left-auto md:translate-x-0 md:translate-y-0 md:w-72 md:z-50
                                            bg-cyber-black/95 border border-cyber-border p-5 shadow-[0_0_30px_-10px_rgba(239,68,68,0.2)]
                                            backdrop-blur-sm border-l-4 border-l-red-500
                                            transition-all duration-300
                                            opacity-100 visible scale-100
                                        `,children:[M.jsx("div",{className:"font-mono text-[10px] text-red-500/70 mb-3 tracking-widest uppercase border-b border-cyber-border/30 pb-2",children:"// COSMIC_ADDRESS"}),M.jsxs("div",{className:"font-mono text-xs text-cyber-text space-y-2",children:[M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-cyber-text/50",children:"Planet:"})," ",M.jsx("span",{className:"text-cyber-white",children:"Earth"})]}),M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-cyber-text/50",children:"Sun:"})," ",M.jsx("span",{className:"text-cyber-white",children:"Sol"})]}),M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-cyber-text/50",children:"Spiral Arm:"})," ",M.jsx("span",{className:"text-cyber-white",children:"Orion"})]}),M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-cyber-text/50",children:"Galaxy:"})," ",M.jsx("span",{className:"text-cyber-white",children:"Milky Way"})]}),M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-cyber-text/50",children:"Group:"})," ",M.jsx("span",{className:"text-cyber-white",children:"Local Group"})]}),M.jsxs("div",{className:"flex justify-between",children:[M.jsx("span",{className:"text-cyber-text/50",children:"Cluster:"})," ",M.jsx("span",{className:"text-cyber-white",children:"Virgo"})]})]})]}),M.jsx("div",{className:"fixed inset-0 bg-black/60 z-[9990]",onClick:r=>{r.stopPropagation(),e(null)}})]}),document.body)]})]}),M.jsx("div",{className:"space-y-3 font-sans text-sm leading-relaxed text-cyber-text/80 text-justify min-h-[200px]",children:M.jsx(yi,{text:["Okuhle is a technical polymath and hard-determinist naturalist who blends rigorous mathematics, computer science, and exacting aesthetic design with a sharp, contrarian philosophy. He sees consciousness and free will as adaptive illusions (no more privileged than the taste of sweetness) and every human artefact, from flint knives to neural interfaces to stellar engines, as fully natural products of the same blind physics that shapes galaxies and anthills.","Drawn to boundary-pushing thought experiments in science, culture, and ethics, he questions sacred norms like agreeableness and probes the implications of one mind remaking life or cosmos. He treats morality and politics as necessary but emergent fictions, grounding truth solely in physical law and mathematical structure. His core conviction: humanity must wake to its deterministic nature, fuse with its tools, and paint intentional structure across the stars before entropy erases the canvas."],typingSpeed:20,pauseDuration:6e3,loop:!0,showCursor:!0,cursorCharacter:"|",className:"inline"})}),M.jsxs("div",{children:[M.jsx("div",{className:"font-mono text-xs text-red-500 mb-4 tracking-widest",children:"// ARSENAL"}),M.jsx("div",{className:"flex flex-wrap gap-2",children:[{name:"C",url:"https://en.cppreference.com/w/c"},{name:"C++",url:"https://isocpp.org/"},{name:"MQL5",url:"https://www.mql5.com/en/docs"},{name:"PYTHON",url:"https://www.python.org/"},{name:"JULIA",url:"https://julialang.org/"},{name:"MATLAB",url:"https://www.mathworks.com/products/matlab.html"},{name:"REACT",url:"https://react.dev/"},{name:"NODE",url:"https://nodejs.org/"},{name:"WEBGL",url:"https://get.webgl.org/"},{name:"THREE",url:"https://threejs.org/"}].map(r=>M.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:"px-2 py-1 border border-cyber-border text-[10px] font-mono text-cyber-text hover:text-cyber-white hover:border-cyber-white transition-colors cursor-pointer",children:r.name},r.name))})]})]})]})]})]})};export{Gi as default};
